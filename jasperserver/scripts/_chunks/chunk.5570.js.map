{"version":3,"sources":["webpack://jrs-ui/./src/resource/resource.analysisConnection.js","webpack://jrs-ui/./src/addResource/analysisClientConnection/addAnalysisClientConnection.common.js"],"names":["TYPE_ID","LABEL_ID","RESOURCE_ID_ID","DESCRIPTION_ID","RESOURCE_INPUT_ID","BROWSE_BUTTON_ID","TREE_ID","FOLDERS_TREE_DATA_PROVIDER_ID","XMLA_CATALOG_ID","XMLA_DATA_SOURCE_ID","XMLA_CONNECTION_URI_ID","TEST_BUTTON_ID","NEXT_BUTTON_ID","DONE_BUTTON_ID","CHANGE_TYPE_BUTTON_ID","_canGenerateId","initialize","options","this","_form","jQuery","document","body","find","_type","_label","_resourceId","_description","type","getValue","_xmlaCatalog","_xmlaDataSource","_xmlaConnectionUri","_nextButton","_doneButton","_testButton","_changeTypeButton","_isEditMode","isEditMode","validator","resource","_xmlaCatalogValidator","bind","_xmlaDataSourceValidator","_xmlaConnectionUriValidator","_initResourcePicker","_initEvents","picker","treeId","providerId","uriTextboxId","browseButtonId","title","on","click","submitHandler","e","_isDataValid","preventDefault","bindAsEventListener","testConnectionHandler","testXMLAConnection","element","target","include","ValidationModule","setValue","testButton","form","formValues","serializeArray","push","name","value","ajaxTargettedUpdate","attr","postData","fillLocation","callback","msg","response","text","responseObj","JSON","parse","status","message","details","dialogs","errorHandler","baseErrorHandler","hideLoader","elementsToValidate","isValid","errorMessage","blank","jrsConfigs","_","window","localContext","resourceAnalysisConnection","isIPad"],"mappings":"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","file":"_chunks/chunk.5570.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n\nimport resource from './resource.base';\nimport {ValidationModule} from \"../util/utils.common\";\nimport picker from '../components/components.pickers';\nimport {ajaxTargettedUpdate} from \"../core/core.ajax\";\nimport {baseErrorHandler} from \"../core/core.ajax.utils\";\nimport dialogs from '../components/components.dialogs';\nimport jQuery from 'jquery';\n\nvar resourceAnalysisConnection = {\n    TYPE_ID: 'analysisConnection\\\\.type',\n    LABEL_ID: 'connectionLabel',\n    RESOURCE_ID_ID: 'connectionName',\n    DESCRIPTION_ID: 'connectionDescription',\n    RESOURCE_INPUT_ID: 'resourceUri',\n    BROWSE_BUTTON_ID: 'browser_button',\n    TREE_ID: 'folderTreeRepoLocation',\n    FOLDERS_TREE_DATA_PROVIDER_ID: 'repositoryExplorerTreeFoldersProvider',\n    XMLA_CATALOG_ID: 'xmlaCatalog',\n    XMLA_DATA_SOURCE_ID: 'xmlaDatasource',\n    XMLA_CONNECTION_URI_ID: 'xmlaConnectionUri',\n    TEST_BUTTON_ID: 'testXMLAConnection',\n    NEXT_BUTTON_ID: 'next',\n    DONE_BUTTON_ID: 'done',\n    CHANGE_TYPE_BUTTON_ID: 'changeCombo',\n    _canGenerateId: true,\n    initialize: function (options) {\n        this._form = jQuery(document.body).find('form')[0];\n        this._type = jQuery('#' + this.TYPE_ID)[0];\n        this._label = jQuery('#' + this.LABEL_ID)[0];\n        this._resourceId = jQuery('#' + this.RESOURCE_ID_ID)[0];\n        this._description = jQuery('#' + this.DESCRIPTION_ID)[0];\n        var type = this._type.getValue();\n        if (type == 'olapXmlaCon') {\n            this._xmlaCatalog = jQuery('#' + this.XMLA_CATALOG_ID)[0];\n            this._xmlaDataSource = jQuery('#' + this.XMLA_DATA_SOURCE_ID)[0];\n            this._xmlaConnectionUri = jQuery('#' + this.XMLA_CONNECTION_URI_ID)[0];\n        }\n        this._nextButton = jQuery('#' + this.NEXT_BUTTON_ID);\n        this._doneButton = jQuery('#' + this.DONE_BUTTON_ID);\n        this._testButton = jQuery('#' + this.TEST_BUTTON_ID)[0];\n        this._changeTypeButton = jQuery('#' + this.CHANGE_TYPE_BUTTON_ID)[0];\n        this._isEditMode = options.isEditMode;\n        this._label.validator = resource.labelValidator.bind(this);\n        this._resourceId.validator = resource.resourceIdValidator.bind(this);\n        this._description.validator = resource.descriptionValidator.bind(this);\n        if (type == 'olapXmlaCon') {\n            this._xmlaCatalog.validator = this._xmlaCatalogValidator.bind(this);\n            this._xmlaDataSource.validator = this._xmlaDataSourceValidator.bind(this);\n            this._xmlaConnectionUri.validator = this._xmlaConnectionUriValidator.bind(this);\n        }\n        this._initResourcePicker();\n        this._initEvents();\n    },\n    _initResourcePicker: function () {\n        new picker.FileSelector({\n            treeId: this.TREE_ID,\n            providerId: this.FOLDERS_TREE_DATA_PROVIDER_ID,\n            uriTextboxId: this.RESOURCE_INPUT_ID,\n            browseButtonId: this.BROWSE_BUTTON_ID,\n            title: resource.messages['resource.SaveToFolder.Title']\n        });\n    },\n    _initEvents: function () {\n        jQuery(this._type).on('change', function () {\n            this._changeTypeButton.click();\n        }.bind(this));\n        var submitHandler = function (e) {\n            if (!this._isDataValid()) {\n                e.preventDefault();\n            }\n        }.bindAsEventListener(this);\n        var testConnectionHandler = function (e) {\n            if (!this._isDataValid()) {\n                e.preventDefault();\n            } else {\n                this.testXMLAConnection();\n            }\n        }.bind(this);\n        this._nextButton.on('click', submitHandler);\n        this._doneButton.on('click', submitHandler);\n        this._testButton && jQuery(this._testButton).on('click', testConnectionHandler);\n        jQuery(this._form).on('keyup', function (e) {\n            var element = e.target;\n            var targetElements = [\n                this._label,\n                this._resourceId,\n                this._description,\n                this._xmlaCatalog,\n                this._xmlaDataSource,\n                this._xmlaConnectionUri\n            ];\n            if (targetElements.include(element)) {\n                ValidationModule.validate(resource.getValidationEntries([element]));\n                if (element == this._resourceId && this._resourceId.getValue() != resource.generateResourceId(this._label.getValue())) {\n                    this._canGenerateId = false;\n                }\n                if (element == this._label && !this._isEditMode && this._canGenerateId) {\n                    this._resourceId.setValue(resource.generateResourceId(this._label.getValue()));\n                    ValidationModule.validate(resource.getValidationEntries([this._resourceId]));\n                }\n            }\n        }.bind(this));\n    },\n    testXMLAConnection: function () {\n        var testButton = this._testButton;\n        var form = jQuery(this._form);\n        var formValues = form.serializeArray();\n        formValues.push({\n            name: '_eventId_testXMLAConnection',\n            value: ''\n        });\n        ajaxTargettedUpdate(form.attr('action'), {\n            postData: jQuery.param(formValues),\n            fillLocation: 'ajaxbuffer',\n            callback: function (msg) {\n                var response = jQuery(msg).text();\n                try {\n                    var responseObj = JSON.parse(response);\n                    responseObj.status == 'OK' ? ValidationModule.showSuccess(testButton, resource.messages['connectionStatePassed']) : ValidationModule.showError(testButton, responseObj.message, responseObj.details);\n                } catch (e) {\n                    dialogs.systemConfirm.show(response);\n                }\n            },\n            errorHandler: baseErrorHandler,\n            hideLoader: false\n        });\n    },\n    _isDataValid: function () {\n        var elementsToValidate = [\n            this._label,\n            this._resourceId,\n            this._description\n        ];\n        var type = this._type.getValue();\n        if (type == 'olapXmlaCon') {\n            elementsToValidate.push(this._xmlaCatalog);\n            elementsToValidate.push(this._xmlaDataSource);\n            elementsToValidate.push(this._xmlaConnectionUri);\n        }\n        return ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    },\n    _xmlaCatalogValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['catalogIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    _xmlaDataSourceValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['dataSourceIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    _xmlaConnectionUriValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['uriIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    }\n};\n\nexport default resourceAnalysisConnection;","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport resourceAnalysisConnection from '../../resource/resource.analysisConnection';\nimport _ from 'underscore';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport resource from '../../resource/resource.base';\nimport {isIPad} from \"../../util/utils.common\";\n\nvar options = jrsConfigs.connectionType.localContext.initOptions;\n_.extend(window.localContext, jrsConfigs.connectionType.localContext);\n_.extend(resource.messages, jrsConfigs.connectionType.resource.messages);\nresourceAnalysisConnection.initialize(options);\nisIPad() && resource.initSwipeScroll();\n"],"sourceRoot":""}