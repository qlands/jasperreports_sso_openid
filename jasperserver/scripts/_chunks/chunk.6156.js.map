{"version":3,"sources":["webpack://jrs-ui/./src/resource/resource.base.js","webpack://jrs-ui/./src/resource/resource.listofvalues.js","webpack://jrs-ui/./src/addResource/listOfValues/addListOfValues.common.js"],"names":["resource","messages","resourceLabelMaxLength","resourceIdMaxLength","resourceDescriptionMaxLength","PROPAGATE_EVENT","STEP_DISPLAY_ID","FLOW_CONTROLS_ID","initSwipeScroll","display","jQuery","TouchController","parent","parents","eq","submitForm","formId","params","fillForm","url","buildActionUrl","attr","submit","registerClickHandlers","handlers","observeElementSelector","addAtBeginning","_bodyClickEventHandlers","Array","prototype","unshift","push","apply","selector","on","event","each","clickEventHandler","result","Event","stop","$break","TreeWrapper","options","that","this","_treeId","treeId","_resourceUriInput","resourceUriInput","_uri","getValue","uri","providerId","interpolate","id","treeOptions","inject","treeOption","key","_tree","dynamicTree","observe","openAndSelectNode","memo","node","param","setValue","getTreeId","getTree","selectFolder","folderUri","getSelectedFolderUri","switchButtonState","button","state","buttonManager","call","switchDisableState","element","disable","generateResourceId","name","window","localContext","initOptions","resourceIdNotSupportedSymbols","replace","RegExp","testResourceId","resourceId","test","labelValidator","value","isValid","errorMessage","blank","length","getLabelValidationEntry","validators","method","mandatory","tooLong","maxLength","getIdValidationEntry","resourceIdValidator","_isEditMode","getDescriptionValidationEntry","descriptionValidator","dataSourceValidator","trim","queryValidator","getValidationEntries","elementsToValidate","collect","validationEntry","validator","LABEL_ID","RESOURCE_ID_ID","DESCRIPTION_ID","ITEM_NAME_ID","ITEM_VALUE_ID","SUBMIT_EVENT_ID","ITEM_TO_DELETE_ID","SAVE_BUTTON_PATTERN","CANCEL_BUTTON_PATTERN","ADD_LINK_ID","LINK_PATTERN","_canGenerateId","initialize","_form","document","body","find","_label","_resourceId","_description","_itemName","_itemValue","_submitEvent","_itemToDelete","_addLink","isEditMode","_itemNameValidator","bind","_itemValueValidator","_initEvents","e","target","stopPropagation","matchAny","_isDataValid","_isValueDataValid","writeAttribute","identify","include","ValidationModule","jrsConfigs","_","resourceListOfValues","isIPad"],"mappings":"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","file":"_chunks/chunk.6156.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport {$break} from 'prototype';\nimport TouchController from '../util/touch.controller';\nimport {buildActionUrl} from \"../util/utils.common\";\nimport buttonManager from '../core/core.events.bis';\nimport dynamicTree from '../dynamicTree/dynamicTree.utils';\nimport jQuery from 'jquery';\n\nvar resource = {\n    messages: {},\n    resourceLabelMaxLength: 100,\n    resourceIdMaxLength: 100,\n    resourceDescriptionMaxLength: 250,\n    PROPAGATE_EVENT: 'propagateEvent',\n    STEP_DISPLAY_ID: 'stepDisplay',\n    FLOW_CONTROLS_ID: 'flowControls',\n    initSwipeScroll: function () {\n        var display = jQuery('#' + resource.STEP_DISPLAY_ID)[0];    //        var hasControls = $(resource.FLOW_CONTROLS_ID).childElements().length > 0;\n        //\n        //        var scrollElement = hasControls ? display.up() : display;\n        //        var hasControls = $(resource.FLOW_CONTROLS_ID).childElements().length > 0;\n        //\n        //        var scrollElement = hasControls ? display.up() : display;\n        display && new TouchController(display.parent(), display.parents().eq(2), {}    //            debug: true\n        );\n    },\n    submitForm: function (formId, params, fillForm) {\n        if (!params) {\n            return;\n        }    // prepare action url\n        // prepare action url\n        var url = buildActionUrl(params);\n        fillForm && fillForm();    // write form attributes and submit it\n        // write form attributes and submit it\n        jQuery('#' + formId).attr('method', 'post').attr('action', url);\n        jQuery('#' + formId)[0].submit();\n    },\n    // Setup main event handler for click events on Add Resource pages.\n    registerClickHandlers: function (handlers, observeElementSelector, addAtBeginning) {\n        if (resource._bodyClickEventHandlers) {\n            //If we want some handlers to fire before others we should pass addAtBeginning = true\n            (addAtBeginning ? Array.prototype.unshift : Array.prototype.push).apply(resource._bodyClickEventHandlers, handlers);\n            return;\n        }\n        resource._bodyClickEventHandlers = handlers;\n        var selector = observeElementSelector || 'body';\n        jQuery(selector).on('click', function (event) {\n            resource._bodyClickEventHandlers && resource._bodyClickEventHandlers.each(function (clickEventHandler) {\n                var result = clickEventHandler(event);    //if handler returns some result\n                //this means that we have found necessary handler so\n                //do not need to process other\n                //if handler returns some result\n                //this means that we have found necessary handler so\n                //do not need to process other\n                if (result) {\n                    if (result !== resource.PROPAGATE_EVENT) {\n                        Event.stop(event);\n                    }\n                    throw $break;\n                }\n            });\n        });\n    },\n    TreeWrapper: function (options) {\n        var that = this;\n        this._treeId = options.treeId;\n        this._resourceUriInput = jQuery('#' + options.resourceUriInput || '#resourceUri')[0];\n        this._uri = this._resourceUriInput && this._resourceUriInput.getValue() || options.uri || '/';\n        if (!options.providerId)\n            throw 'There is no tree provider set for tree #{id}'.interpolate({ id: this._treeId });    // Setup folders tree\n        // Setup folders tree\n        var treeOptions = [\n            'providerId',\n            'rootUri',\n            'organizationId',\n            'publicFolderUri',\n            'urlGetNode',\n            'urlGetChildren'\n        ].inject({}, function (treeOption, key) {\n            options[key] !== null && (treeOption[key] = options[key]);\n            return treeOption;\n        });\n        this._tree = new dynamicTree.createRepositoryTree(this._treeId, treeOptions);\n        this._tree.observe('tree:loaded', function () {\n            that._tree.openAndSelectNode(jQuery('#' + that._resourceUriInput)[0].getValue());\n        });\n        this._tree.observe('leaf:selected', function (event) {\n            that._uri = event.memo.node.param.uri;\n            that._resourceUriInput.setValue(that._uri);\n        });\n        this._tree.observe('node:selected', function () {\n            that._resourceUriInput.setValue(that._uri = '');\n        });\n        return {\n            getTreeId: function () {\n                return that._treeId;\n            },\n            getTree: function () {\n                return that._tree;\n            },\n            selectFolder: function (folderUri) {\n                that._tree.openAndSelectNode(folderUri);\n            },\n            getSelectedFolderUri: function () {\n                return that._uri;\n            }\n        };\n    },\n    ////////////////////////////////\n    // Utility Methods\n    ////////////////////////////////\n    switchButtonState: function (button, state) {\n        buttonManager[state ? 'enable' : 'disable'].call(buttonManager, button);\n    },\n    switchDisableState: function (element, disable) {\n        (element = jQuery(element)[0]) && element[disable ? 'disable' : 'enable'].call(element);\n    },\n    generateResourceId: function (name) {\n        if (window.localContext && window.localContext.initOptions && window.localContext.initOptions.resourceIdNotSupportedSymbols) {\n            return name.replace(new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols, 'g'), '_');\n        } else {\n            throw 'There is no resourceIdNotSupportedSymbols property in init options.';\n        }\n    },\n    testResourceId: function (resourceId) {\n        if (window.localContext && window.localContext.initOptions && window.localContext.initOptions.resourceIdNotSupportedSymbols) {\n            return new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols, 'g').test(resourceId);\n        } else {\n            throw 'There is no resourceIdNotSupportedSymbols property in init options.';\n        }\n    },\n    labelValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['labelIsEmpty'];\n            isValid = false;\n        } else if (value.length > resource.resourceLabelMaxLength) {\n            errorMessage = resource.messages['labelToLong'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getLabelValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [\n                {\n                    method: 'mandatory',\n                    messages: { mandatory: resource.messages['labelIsEmpty'] }\n                },\n                {\n                    method: 'minMaxLength',\n                    messages: { tooLong: resource.messages['labelToLong'] },\n                    options: { maxLength: resource.resourceLabelMaxLength }\n                }\n            ]\n        };\n    },\n    getIdValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [\n                {\n                    method: 'resourceIdChars',\n                    messages: resource.messages\n                },\n                {\n                    method: 'mandatory',\n                    messages: { mandatory: resource.messages['resourceIdIsEmpty'] }\n                },\n                {\n                    method: 'minMaxLength',\n                    messages: { tooLong: resource.messages['resourceIdToLong'] },\n                    options: { maxLength: resource.resourceIdMaxLength }\n                }\n            ]\n        };\n    },\n    /**\n     * The context of this method should contain _isEditMode property. Id it is true then validator will not validate\n     * the value but will return isValid=true.\n     */\n    resourceIdValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (!this._isEditMode) {\n            if (value.blank()) {\n                errorMessage = resource.messages['resourceIdIsEmpty'];\n                isValid = false;\n            } else if (value.length > resource.resourceIdMaxLength) {\n                errorMessage = resource.messages['resourceIdToLong'];\n                isValid = false;\n            } else if (resource.testResourceId(value)) {\n                errorMessage = resource.messages['resourceIdInvalidChars'];\n                isValid = false;\n            }\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getDescriptionValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [{\n                method: 'minMaxLength',\n                messages: { tooLong: resource.messages['descriptionToLong'] },\n                options: { maxLength: resource.resourceDescriptionMaxLength }\n            }]\n        };\n    },\n    descriptionValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.length > resource.resourceDescriptionMaxLength) {\n            errorMessage = resource.messages['descriptionToLong'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    dataSourceValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.trim() === '') {\n            errorMessage = resource.messages['dataSourceInvalid'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    queryValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.trim() === '') {\n            errorMessage = resource.messages['queryInvalid'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getValidationEntries: function (elementsToValidate) {\n        // To use this method all elements should have validator or validationEntry property set.\n        return elementsToValidate.collect(function (element) {\n            if (element.validationEntry) {\n                return element.validationEntry;\n            } else {\n                return {\n                    validator: element.validator,\n                    element: element\n                };\n            }\n        });\n    }\n};\n\nexport default resource;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport jQuery from 'jquery';\nimport resource from './resource.base';\nimport {matchAny} from \"../util/utils.common\";\nimport {ValidationModule} from \"../util/utils.common\";\n\nvar resourceListOfValues = {\n    LABEL_ID: 'labelID',\n    RESOURCE_ID_ID: 'resourceID',\n    DESCRIPTION_ID: 'description',\n    ITEM_NAME_ID: 'name',\n    ITEM_VALUE_ID: 'value',\n    SUBMIT_EVENT_ID: 'submitEvent',\n    ITEM_TO_DELETE_ID: 'itemToDelete',\n    SAVE_BUTTON_PATTERN: '#save',\n    CANCEL_BUTTON_PATTERN: '#cancel',\n    ADD_LINK_ID: 'add',\n    LINK_PATTERN: 'a.launcher',\n    _canGenerateId: true,\n    initialize: function (options) {\n        this._form = jQuery(document.body).find('form')[0];\n        this._label = jQuery('#' +this.LABEL_ID)[0];\n        this._resourceId = jQuery('#' +this.RESOURCE_ID_ID)[0];\n        this._description = jQuery('#' +this.DESCRIPTION_ID)[0];\n        this._itemName = jQuery('#' +this.ITEM_NAME_ID)[0];\n        this._itemValue = jQuery('#' +this.ITEM_VALUE_ID)[0];\n        this._submitEvent = jQuery('#' +this.SUBMIT_EVENT_ID)[0];\n        this._itemToDelete = jQuery('#' +this.ITEM_TO_DELETE_ID)[0];\n        this._addLink = jQuery('#' +this.ADD_LINK_ID)[0];\n        this._isEditMode = options.isEditMode;\n        this._label.validator = resource.labelValidator.bind(this);\n        this._resourceId.validator = resource.resourceIdValidator.bind(this);\n        this._description.validator = resource.descriptionValidator.bind(this);\n        this._itemName.validator = this._itemNameValidator.bind(this);\n        this._itemValue.validator = this._itemValueValidator.bind(this);\n        this._initEvents();\n    },\n    _initEvents: function () {\n        jQuery(this._form).on('click', function (e) {\n            var element = e.target;\n            e.stopPropagation();\n            if (matchAny(element, [this.SAVE_BUTTON_PATTERN], true)) {\n                if (this._isDataValid()) {\n                    jQuery(this._submitEvent).attr('name', '_eventId_save');\n                    this._form.submit();\n                }\n            } else if (element == this._addLink) {\n                if (this._isValueDataValid() && this._isDataValid()) {\n                    this._submitEvent.writeAttribute('name', '_eventId_addItem');\n                    this._form.submit();\n                }\n            } else if (matchAny(element, [this.LINK_PATTERN], true) && element != this._addLink) {\n                var id = element.identify();\n                this._itemToDelete.setValue(id);\n                jQuery(this._submitEvent).attr('name', '_eventId_removeItem');\n                this._form.submit();\n            } else if (matchAny(element, [this.CANCEL_BUTTON_PATTERN], true)) {\n                jQuery(this._submitEvent).attr('name', '_eventId_cancel');\n                this._form.submit();\n            }\n        }.bind(this));\n        jQuery(this._form).on('keyup', function (e) {\n            var element = e.target;\n            var targetElements = [\n                this._label,\n                this._resourceId,\n                this._description,\n                this._itemName,\n                this._itemValue\n            ];\n            if (targetElements.include(element)) {\n                ValidationModule.validate(resource.getValidationEntries([element]));\n                if (element == this._resourceId && this._resourceId.getValue() != resource.generateResourceId(this._label.getValue())) {\n                    this._canGenerateId = false;\n                }\n                if (element == this._label && !this._isEditMode && this._canGenerateId) {\n                    this._resourceId.setValue(resource.generateResourceId(this._label.getValue()));\n                    ValidationModule.validate(resource.getValidationEntries([this._resourceId]));\n                }\n            }\n        }.bind(this));\n    },\n    _isDataValid: function () {\n        var elementsToValidate = [\n            this._label,\n            this._resourceId,\n            this._description\n        ];\n        return ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    },\n    _isValueDataValid: function () {\n        var elementsToValidate = [\n            this._itemName,\n            this._itemValue\n        ];\n        return ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    },\n    _itemNameValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['itemNameIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    _itemValueValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['itemValueIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    }\n};\n\nexport default resourceListOfValues;","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport resource from '../../resource/resource.base';\nimport resourceListOfValues from '../../resource/resource.listofvalues';\nimport {isIPad} from \"../../util/utils.common\";\n\nvar options = jrsConfigs.addListOfValues.localContext.initOptions;\n_.extend(window.localContext, jrsConfigs.addListOfValues.localContext);\n_.extend(resource.messages, jrsConfigs.addListOfValues.resource.messages);\nresourceListOfValues.initialize(options);\nisIPad() && resource.initSwipeScroll();\n"],"sourceRoot":""}