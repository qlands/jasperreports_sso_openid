(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[224],{40224:(e,t,i)=>{"use strict";i.r(t);var n=i(97836),r=i.n(n),o=i(71914),s=i(52499),a=i(11364),d=i(64155),l=i(43852),u=i(46539),c=i(72157),h=i.n(c),_={messages:{},resourceLabelMaxLength:100,resourceIdMaxLength:100,resourceDescriptionMaxLength:250,PROPAGATE_EVENT:"propagateEvent",STEP_DISPLAY_ID:"stepDisplay",FLOW_CONTROLS_ID:"flowControls",initSwipeScroll:function(){var e=h()("#"+_.STEP_DISPLAY_ID)[0];e&&new a.Z(e.parent(),e.parents().eq(2),{})},submitForm:function(e,t,i){if(t){var n=(0,d.nB6)(t);i&&i(),h()("#"+e).attr("method","post").attr("action",n),h()("#"+e)[0].submit()}},registerClickHandlers:function(e,t,i){if(_._bodyClickEventHandlers)(i?Array.prototype.unshift:Array.prototype.push).apply(_._bodyClickEventHandlers,e);else{_._bodyClickEventHandlers=e;var n=t||"body";h()(n).on("click",(function(e){_._bodyClickEventHandlers&&_._bodyClickEventHandlers.each((function(t){var i=t(e);if(i)throw i!==_.PROPAGATE_EVENT&&Event.stop(e),s.$break}))}))}},TreeWrapper:function(e){var t=this;if(this._treeId=e.treeId,this._resourceUriInput=h()("#"+e.resourceUriInput||0)[0],this._uri=this._resourceUriInput&&this._resourceUriInput.getValue()||e.uri||"/",!e.providerId)throw"There is no tree provider set for tree #{id}".interpolate({id:this._treeId});var i=["providerId","rootUri","organizationId","publicFolderUri","urlGetNode","urlGetChildren"].inject({},(function(t,i){return null!==e[i]&&(t[i]=e[i]),t}));return this._tree=new u.Z.createRepositoryTree(this._treeId,i),this._tree.observe("tree:loaded",(function(){t._tree.openAndSelectNode(h()("#"+t._resourceUriInput)[0].getValue())})),this._tree.observe("leaf:selected",(function(e){t._uri=e.memo.node.param.uri,t._resourceUriInput.setValue(t._uri)})),this._tree.observe("node:selected",(function(){t._resourceUriInput.setValue(t._uri="")})),{getTreeId:function(){return t._treeId},getTree:function(){return t._tree},selectFolder:function(e){t._tree.openAndSelectNode(e)},getSelectedFolderUri:function(){return t._uri}}},switchButtonState:function(e,t){l.Z[t?"enable":"disable"].call(l.Z,e)},switchDisableState:function(e,t){(e=h()(e)[0])&&e[t?"disable":"enable"].call(e)},generateResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return e.replace(new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g"),"_");throw"There is no resourceIdNotSupportedSymbols property in init options."},testResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e);throw"There is no resourceIdNotSupportedSymbols property in init options."},labelValidator:function(e){var t=!0,i="";return e.blank()?(i=_.messages.labelIsEmpty,t=!1):e.length>_.resourceLabelMaxLength&&(i=_.messages.labelToLong,t=!1),{isValid:t,errorMessage:i}},getLabelValidationEntry:function(e){return{element:e,validators:[{method:"mandatory",messages:{mandatory:_.messages.labelIsEmpty}},{method:"minMaxLength",messages:{tooLong:_.messages.labelToLong},options:{maxLength:_.resourceLabelMaxLength}}]}},getIdValidationEntry:function(e){return{element:e,validators:[{method:"resourceIdChars",messages:_.messages},{method:"mandatory",messages:{mandatory:_.messages.resourceIdIsEmpty}},{method:"minMaxLength",messages:{tooLong:_.messages.resourceIdToLong},options:{maxLength:_.resourceIdMaxLength}}]}},resourceIdValidator:function(e){var t=!0,i="";return this._isEditMode||(e.blank()?(i=_.messages.resourceIdIsEmpty,t=!1):e.length>_.resourceIdMaxLength?(i=_.messages.resourceIdToLong,t=!1):_.testResourceId(e)&&(i=_.messages.resourceIdInvalidChars,t=!1)),{isValid:t,errorMessage:i}},getDescriptionValidationEntry:function(e){return{element:e,validators:[{method:"minMaxLength",messages:{tooLong:_.messages.descriptionToLong},options:{maxLength:_.resourceDescriptionMaxLength}}]}},descriptionValidator:function(e){var t=!0,i="";return e.length>_.resourceDescriptionMaxLength&&(i=_.messages.descriptionToLong,t=!1),{isValid:t,errorMessage:i}},dataSourceValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=_.messages.dataSourceInvalid,t=!1),{isValid:t,errorMessage:i}},queryValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=_.messages.queryInvalid,t=!1),{isValid:t,errorMessage:i}},getValidationEntries:function(e){return e.collect((function(e){return e.validationEntry?e.validationEntry:{validator:e.validator,element:e}}))}};const p=_;const I={PAGE_ID:"addResource_inputControl",LABEL_ID:"label",RESOURCE_ID_ID:"name",DESCRIPTION_ID:"description",NEXT_BUTTON_ID:"next",NEXT_AND_SUBMIT_BUTTON_ID:"nextAndSubmit",TYPE_ID:"dataTypeKind",_canGenerateId:!0,initialize:function(e){this._form=h()("#"+this.PAGE_ID).find("form")[0],this._label=h()("#"+this.LABEL_ID)[0],this._resourceId=h()("#"+this.RESOURCE_ID_ID)[0],this._description=h()("#"+this.DESCRIPTION_ID)[0],this._nextButton=h()("#"+this.NEXT_BUTTON_ID),this._nextAndSubmitButton=h()("#"+this.NEXT_AND_SUBMIT_BUTTON_ID),this._typeId=h()("#"+this.TYPE_ID)[0],this._isEditMode=e.isEditMode,this._label.validator=p.labelValidator.bind(this),this._resourceId.validator=p.resourceIdValidator.bind(this),this._description.validator=p.descriptionValidator.bind(this),this._initEvents()},_initEvents:function(){var e=function(e){this._isDataValid()||e.stopPropagation()}.bind(this);this._nextButton.on("click",e),this._nextAndSubmitButton.on("click",e),h()(this._form).on("keyup",function(e){var t=e.target;[this._label,this._resourceId,this._description].include(t)&&(d.n4K.validate(p.getValidationEntries([t])),t==this._resourceId&&this._resourceId.getValue()!=p.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),t==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(p.generateResourceId(this._label.getValue())),d.n4K.validate(p.getValidationEntries([this._resourceId]))))}.bindAsEventListener(this)),this._typeId.observe("change",function(e){1==e.target.value?(this._nextButton.addClass("hidden"),this._nextAndSubmitButton.removeClass("hidden")):(this._nextButton.removeClass("hidden"),this._nextAndSubmitButton.addClass("hidden"))}.bind(this))},_isDataValid:function(){var e=[this._label,this._resourceId,this._description];return d.n4K.validate(p.getValidationEntries(e))}};var g=o.Z.addInputControl.localContext.initOptions;r().extend(window.localContext,o.Z.addInputControl.localContext),r().extend(p.messages,o.Z.addInputControl.resource.messages),I.initialize(g),(0,d.zcy)()&&p.initSwipeScroll()}}]);
//# sourceMappingURL=chunk.224.js.map