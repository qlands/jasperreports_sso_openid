(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[787,4277,4613,2602],{49406:(e,t,i)=>{"use strict";i.r(t);var r=i(97836),o=i.n(r),s=i(71914),a=i(17620),l=i(72157),n=i.n(l),_=i(32758),d={CONTENT_REPOSITORY:"CONTENT_REPOSITORY",LOCAL:"LOCAL",NONE:"NONE",FILE_SYSTEM:"FILE_SYSTEM",LOCATE_EVENT:"resource:locate",ALLOWED_FILE_RESOURCE_EXTENSIONS:["css","ttf","jpg","jpeg","gif","bmp","png","jar","jrxml","properties","jrtx","xml","agxml","docx","doc","ppt","pptx","xls","xlsx","ods","odt","odp","pdf","rtf","html"],initialize:function(e){var t=function(e){return o().isObject(e)?e:n()("#"+e)[0]};this.resourceUri=t(e.resourceInput),this.browseButton=t(e.browseButton),this.filePath=t(e.fileUploadInput),this.fakeFilePath=t(e.fakeFileUploadInput),this.fakeFileInput=t(e.fakeFileUploadInputText),this.newResourceLink=t(e.newResourceLink);try{this._initFileSelector(e)}catch(e){}finally{this._initEvents(e)}return this},_initEvents:function(e){n()(document).on("click","#CONTENT_REPOSITORY, #FILE_SYSTEM, #NONE, #LOCAL",this._clickHandler),"fileResourceTreeDataProvider"===e.providerId&&(n()("#next").on("click",d._nextClickHandler),n()("#filePath").on("change",d._uploadChangeHandler))},_nextClickHandler:function(e){n()("#fileUpload").hasClass("error")&&e.preventDefault()},_uploadChangeHandler:function(e){n()("#fileUpload").removeClass("error");var t=!0;if(n()("#filePath")[0].value){var i=n()("#filePath")[0].value.match(/.*\.([^\.]+)$/);if(i){var r=i[1];o().indexOf(d.ALLOWED_FILE_RESOURCE_EXTENSIONS,r)<0&&(t=!1)}else t=!1}else t=!1;if(!t){var s=a.Z.messages["resource.report.unsupportedFileType.error"]+" "+d.ALLOWED_FILE_RESOURCE_EXTENSIONS.join(", ");n()("#fileUpload").addClass("error").find("span.warning").html(s)}},_clickHandler:function(e){d._updateResourceSelectorState(e.target.id)},_updateResourceSelectorState:function(e){a.Z.switchButtonState(this.filePath,e===this.FILE_SYSTEM),a.Z.switchButtonState(this.fakeFilePath,e===this.FILE_SYSTEM),a.Z.switchButtonState(this.fakeFileInput,e===this.FILE_SYSTEM),a.Z.switchButtonState(this.browseButton,e===this.CONTENT_REPOSITORY),a.Z.switchDisableState(this.resourceUri,e!==this.CONTENT_REPOSITORY);var t=e===this.LOCAL?["disabled","launcher"]:[];this._switchElementClasses(this.newResourceLink,t)},_initFileSelector:function(e){this.fileSelector=new _.Z.FileSelector(o().extend({},e,{uriTextboxId:this.resourceUri,browseButtonId:this.browseButton,title:e.dialogTitle}))},remove:function(e){this.fileSelector.remove()},_switchElementClasses:function(e,t){e&&t&&n()(e).removeClass(t[0]).addClass(t[1])}};const c=d;var u=i(64155);const h={SET_UP_PAGE_ID:"addReport_SetUp",LABEL_ID:"label",RESOURCE_ID_ID:"resourceID",DESCRIPTION_ID:"reportUnit\\.description",FILE_PATH_ID:"filePath",RESOURCE_URI_ID:"resourceUri",FILE_SYSTEM_SOURCE_ID:"FILE_SYSTEM",CONTENT_REPOSITORY_SOURCE_ID:"CONTENT_REPOSITORY",RESOURCE_NAME_ID:"resourceName",EDIT_RESOURCE_BUTTON_ID:"editResourceButton",REMOVE_RESOURCE_BUTTON_ID:"removeResourceButton",ADD_RESOURCE_BUTTON_ID:"addResourceButton",EDIT_CONTROL_BUTTON_ID:"editControlButton",REMOVE_CONTROL_BUTTON_ID:"removeControlButton",ADD_CONTROL_BUTTON_ID:"addControlButton",FILE_NAME_ID:"fileName",FILE_UPLOAD_BUTTON_ID:"fake_upload_button",SAVE_BUTTON_ID:"done",JRXML_FILE_PATH_COOKIE:"jrxmlFilePath",_canGenerateId:!0,initialize:function(e){this._setUpPage=n()("#"+this.SET_UP_PAGE_ID)[0],this._setUpPage&&(this._form=n()(document.body).find("form")[0],this._label=n()("#"+this.LABEL_ID)[0],this._resourceId=n()("#"+this.RESOURCE_ID_ID)[0],this._description=n()("#"+this.DESCRIPTION_ID)[0],this._filePath=n()("#"+this.FILE_PATH_ID)[0],this._resourceUri=n()("#"+this.RESOURCE_URI_ID)[0],this._fileName=n()("#"+this.FILE_NAME_ID)[0],this._fileSystemSource=n()("#"+this.FILE_SYSTEM_SOURCE_ID)[0],this._contentRepositorySource=n()("#"+this.CONTENT_REPOSITORY_SOURCE_ID)[0],this._saveButton=n()("#"+this.SAVE_BUTTON_ID),this._isEditMode=!!e&&e.isEditMode,this._initialSource=this._fileSystemSource.checked?this._fileSystemSource:this._contentRepositorySource,this._jrxmlFileResourceAlreadyUploaded=e.jrxmlFileResourceAlreadyUploaded,this._label.validator=a.Z.labelValidator.bind(this),this._resourceId.validator=a.Z.resourceIdValidator.bind(this),this._description.validator=a.Z.descriptionValidator.bind(this),this._filePath.validator=this._filePathValidator.bind(this),this._resourceUri.validator=this._resourceUriValidator.bind(this),this._initEvents(),this._adjustFileSelectorPosition(),this._fileName.value=this._jrxmlFileResourceAlreadyUploaded);var t={fileUploadInput:"filePath",fakeFileUploadInput:"fake_upload_button",fakeFileUploadInputText:"fileName",resourceInput:"resourceUri",browseButton:"browser_button",uploadButton:"upload_button",treeId:"resourceTreeRepoLocation",dialogTitle:a.Z.messages["resource.Report.Title"],selectLeavesOnly:!0};e&&n()("#"+t.browseButton)[0]&&("fileResource"==e.type?t.providerId="fileResourceTreeDataProvider":"jrxml"==e.type?t.providerId="jrxmlTreeDataProvider":"olapMondrianSchema"==e.type?t.providerId="olapSchemaTreeDataProvider":"folder"==e.type&&(t.treeId="addFileTreeRepoLocation",t.providerId="repositoryExplorerTreeFoldersProvider",t.resourceInput="folderUri"),c.initialize(t),c._updateResourceSelectorState(n()("input[type=radio]:checked").attr("id")))},_initEvents:function(){var e=this;n()("#"+this.FILE_UPLOAD_BUTTON_ID).click((function(t){t.preventDefault(),n()("#"+e.FILE_PATH_ID).trigger("click")})),this._saveButton.on("click",(function(t){e._isDataValid()||t.preventDefault()})),n()(this._form).on("keyup",(function(t){var i=t.target;[e._label,e._resourceId,e._description].include(i)&&(u.n4K.validate(a.Z.getValidationEntries([i])),i==e._resourceId&&e._resourceId.getValue()!=a.Z.generateResourceId(e._label.getValue())&&(e._canGenerateId=!1),i==e._label&&!e._isEditMode&&e._canGenerateId&&(e._resourceId.setValue(a.Z.generateResourceId(e._label.getValue())),u.n4K.validate(a.Z.getValidationEntries([e._resourceId]))))})),this._filePath.observe("change",(function(){(0,u.w1q)()?-1!=this.value.toLowerCase().indexOf("c:\\fakepath\\")?e._fileName.value=this.value.substring("c:\\fakepath\\".length,this.value.length):e._fileName.value=this.value:e._fileName.value=this.files[0].name,n()("#fileUpload").removeClass("error"),e._adjustFileSelectorPosition()}))},_isDataValid:function(){var e=[this._label,this._resourceId,this._description,this._filePath,this._resourceUri];return(0,u.w1q)()?this.file=this._filePath.value:this.file=this._filePath.files[0],this.html=n()(this._filePath).html(),u.n4K.validate(a.Z.getValidationEntries(e))},_filePathValidator:function(e){var t=!0,i="";return!this._fileSystemSource.checked||!e.blank()||this._isEditMode&&this._initialSource==this._fileSystemSource||this._jrxmlFileResourceAlreadyUploaded||(i=a.Z.messages.filePathIsEmpty,t=!1),t?u.n4K.hideError(n()("#fileName")[0]):u.n4K.showError(n()("#fileName")[0],i),{isValid:t,errorMessage:i}},_resourceUriValidator:function(e){var t=!0,i="";return this._contentRepositorySource.checked&&e.blank()&&(i=a.Z.messages.resourceUriIsEmpty,t=!1),{isValid:t,errorMessage:i}},_adjustFileSelectorPosition:function(){var e=n()("#filePath");if((0,u.Isx)()||(0,u.UBd)()||(0,u.D8Z)()||(0,u.UnL)()){var t=20;e.parents("label").hasClass("error")&&(t+=13),e.css({opacity:"0",position:"absolute",right:0,top:t,width:95,height:30})}else e.css({position:"fixed",right:"-1000px",top:"-1000px"})},editResource:function(e){n()("#"+this.RESOURCE_NAME_ID)[0].setValue(e),n()("#"+this.EDIT_RESOURCE_BUTTON_ID)[0].click()},removeResource:function(e){n()("#"+this.RESOURCE_NAME_ID)[0].setValue(e),n()("#"+this.REMOVE_RESOURCE_BUTTON_ID)[0].click()},addResource:function(){n()("#"+this.ADD_RESOURCE_BUTTON_ID)[0].click()},editControl:function(e){n()("#"+this.RESOURCE_NAME_ID)[0].setValue(e),n()("#"+this.EDIT_CONTROL_BUTTON_ID)[0].click()},removeControl:function(e){n()("#"+this.RESOURCE_NAME_ID)[0].setValue(e),n()("#"+this.REMOVE_CONTROL_BUTTON_ID)[0].click()},addControl:function(){n()("#"+this.ADD_CONTROL_BUTTON_ID)[0].click()}};var E;void 0!==s.Z.addJasperReport.localContext&&(E=s.Z.addJasperReport.localContext.initOptions,o().extend(window.localContext,s.Z.addJasperReport.localContext)),o().extend(a.Z.messages,s.Z.addJasperReport.resource.messages),h.initialize(E),(0,u.zcy)()&&a.Z.initSwipeScroll()},94277:(e,t,i)=>{"use strict";i.d(t,{hl:()=>r,YT:()=>s});var r={vars:{element_scrolled:!1,ajax_in_progress:!1,current_flow:null,contextPath:__jrsConfigs__.contextPath},i18n:{}};if(void 0===o)var o=!1;function s(){return __jrsConfigs__.isProVersion}void 0===r&&(r={Mocks:{}}),void 0===r.vars&&(r.vars={element_scrolled:!1,ajax_in_progress:!1,current_flow:null}),void 0===r.Export&&(r.Export={i18n:{"file.name.empty":"export.file.name.empty","file.name.too.long":"export.file.name.too.long","file.name.not.valid":"export.file.name.not.valid","export.select.users":"export.select.users","export.select.roles":"export.select.roles","export.session.expired":"export.session.expired","error.timeout":"export.file.name.empty"},configs:{TIMEOUT:12e5,DELAY:3e3}}),void 0===window.localContext&&(window.localContext={}),__jrsConfigs__.calendar&&(r.i18n.bundledCalendarFormat=__jrsConfigs__.calendar.i18n.bundledCalendarFormat,r.i18n.bundledCalendarTimeFormat=__jrsConfigs__.calendar.i18n.bundledCalendarTimeFormat),window.JRS=r,window.jaspersoft={components:{},i18n:{}},window.isProVersion=s}}]);
//# sourceMappingURL=chunk.787.js.map