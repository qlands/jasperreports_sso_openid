{"version":3,"sources":["webpack://jrs-ui/./src/resource/resource.locate.js","webpack://jrs-ui/./src/resource/resource.report.js","webpack://jrs-ui/./src/addResource/jasperReport/addJasperReport.common.js","webpack://jrs-ui/./src/namespace/namespace.js"],"names":["resourceLocator","CONTENT_REPOSITORY","LOCAL","NONE","FILE_SYSTEM","LOCATE_EVENT","ALLOWED_FILE_RESOURCE_EXTENSIONS","initialize","options","get","element","_","jQuery","this","resourceUri","resourceInput","browseButton","filePath","fileUploadInput","fakeFilePath","fakeFileUploadInput","fakeFileInput","fakeFileUploadInputText","newResourceLink","_initFileSelector","e","_initEvents","document","on","_clickHandler","providerId","_nextClickHandler","_uploadChangeHandler","event","hasClass","preventDefault","removeClass","validFileName","value","match","extension","message","resource","join","addClass","find","html","_updateResourceSelectorState","target","id","classes","_switchElementClasses","fileSelector","picker","uriTextboxId","browseButtonId","title","dialogTitle","remove","SET_UP_PAGE_ID","LABEL_ID","RESOURCE_ID_ID","DESCRIPTION_ID","FILE_PATH_ID","RESOURCE_URI_ID","FILE_SYSTEM_SOURCE_ID","CONTENT_REPOSITORY_SOURCE_ID","RESOURCE_NAME_ID","EDIT_RESOURCE_BUTTON_ID","REMOVE_RESOURCE_BUTTON_ID","ADD_RESOURCE_BUTTON_ID","EDIT_CONTROL_BUTTON_ID","REMOVE_CONTROL_BUTTON_ID","ADD_CONTROL_BUTTON_ID","FILE_NAME_ID","FILE_UPLOAD_BUTTON_ID","SAVE_BUTTON_ID","JRXML_FILE_PATH_COOKIE","_canGenerateId","_setUpPage","_form","body","_label","_resourceId","_description","_filePath","_resourceUri","_fileName","_fileSystemSource","_contentRepositorySource","_saveButton","_isEditMode","isEditMode","_initialSource","checked","_jrxmlFileResourceAlreadyUploaded","jrxmlFileResourceAlreadyUploaded","validator","_filePathValidator","bind","_resourceUriValidator","_adjustFileSelectorPosition","resourceOptions","uploadButton","treeId","selectLeavesOnly","type","attr","self","click","trigger","_isDataValid","include","ValidationModule","getValue","setValue","observe","isIE","toLowerCase","indexOf","substring","length","files","name","elementsToValidate","file","isValid","errorMessage","blank","fp","isIE7","isIE8","isIE9","isIE10","top","parents","css","opacity","position","right","width","height","editResource","resourceName","removeResource","addResource","editControl","removeControl","addControl","jrsConfigs","window","localContext","resourceReport","isIPad","JRS","vars","element_scrolled","ajax_in_progress","current_flow","contextPath","__jrsConfigs__","i18n","isEncryptionOn","isProVersion","Mocks","Export","configs","TIMEOUT","DELAY","calendar","bundledCalendarFormat","bundledCalendarTimeFormat","jaspersoft","components"],"mappings":"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","file":"_chunks/chunk.787.js","sourcesContent":["/*\r\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\r\n * http://www.jaspersoft.com.\r\n *\r\n * Unless you have purchased a commercial license agreement from Jaspersoft,\r\n * the following license terms apply:\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\n\r\n/**\r\n * @version: $Id$\r\n */\r\n\r\nimport jQuery from 'jquery';\r\nimport _ from 'underscore';\r\nimport resource from './resource.base';\r\nimport picker from '../components/components.pickers';\r\n\r\nvar resourceLocator = {\r\n    CONTENT_REPOSITORY : 'CONTENT_REPOSITORY',\r\n    LOCAL : 'LOCAL',\r\n    NONE : 'NONE',\r\n    FILE_SYSTEM : 'FILE_SYSTEM',\r\n    LOCATE_EVENT : 'resource:locate',\r\n    ALLOWED_FILE_RESOURCE_EXTENSIONS: [\r\n        \"css\", //css\r\n        \"ttf\", //font\r\n        \"jpg\", \"jpeg\", \"gif\", \"bmp\", \"png\", //img\r\n        \"jar\", //jar\r\n        \"jrxml\", //jrxml\r\n        \"properties\", //properties\r\n        \"jrtx\", //jrtx\r\n        \"xml\", \"agxml\", //xml\r\n        \"docx\", \"doc\", \"ppt\", \"pptx\", \"xls\", \"xlsx\", \"ods\", \"odt\", \"odp\", \"pdf\", \"rtf\", \"html\" //contentResource\r\n    ],\r\n\r\n    /*\r\n     * Initializes Resource Locator common logic.\r\n     * @param options Object with following properties:\r\n     *     options = {\r\n     *          fileUploadInput : 'filePath',\r\n     *          resourceInput : 'resourceUri',\r\n     *          browseButton : 'browser_button',\r\n     *          newResourceLink : 'link_id',\r\n     *          treeId : 'resourceBrowserTreeId',\r\n     *          providerId : 'treeProviderId',\r\n     *          dialogTitle : 'Select Resource From Repository'\r\n     *      }\r\n     *\r\n     */\r\n    initialize: function(options) {\r\n        var get = function(element) {\r\n            return _.isObject(element) ? element : jQuery('#' + element)[0];\r\n        };\r\n\r\n        this.resourceUri = get(options.resourceInput);\r\n        this.browseButton = get(options.browseButton);\r\n        this.filePath = get(options.fileUploadInput);\r\n        this.fakeFilePath = get(options.fakeFileUploadInput);\r\n        this.fakeFileInput = get(options.fakeFileUploadInputText);\r\n        this.newResourceLink = get(options.newResourceLink);\r\n\r\n        try {\r\n            this._initFileSelector(options);\r\n        } catch(e) {\r\n            /* bypass logging to console */\r\n        } finally {\r\n            this._initEvents(options);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    _initEvents: function(options) {\r\n        jQuery(document).on(\"click\", \"#CONTENT_REPOSITORY, #FILE_SYSTEM, #NONE, #LOCAL\", this._clickHandler);\r\n        if (options.providerId === \"fileResourceTreeDataProvider\") {\r\n            jQuery(\"#next\").on(\"click\", resourceLocator._nextClickHandler);\r\n            jQuery(\"#filePath\").on(\"change\", resourceLocator._uploadChangeHandler);\r\n        }\r\n    },\r\n\r\n    _nextClickHandler: function(event) {\r\n        if (jQuery(\"#fileUpload\").hasClass(\"error\")) {\r\n            event.preventDefault();\r\n        }\r\n    },\r\n\r\n    _uploadChangeHandler: function(event) {\r\n        jQuery(\"#fileUpload\").removeClass(\"error\");\r\n\r\n        var validFileName = true;\r\n\r\n        var fileName = jQuery(\"#filePath\")[0].value;\r\n        if (fileName) {\r\n            var match = jQuery(\"#filePath\")[0].value.match(/.*\\.([^\\.]+)$/);\r\n            if (match) {\r\n                var extension = match[1];\r\n                if (_.indexOf(resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS, extension) < 0) {\r\n                    validFileName = false;\r\n                }\r\n            } else {\r\n                validFileName = false;\r\n            }\r\n        } else {\r\n            validFileName = false;\r\n        }\r\n\r\n        if (!validFileName) {\r\n            var message =\r\n                resource.messages['resource.report.unsupportedFileType.error'] +\r\n                    \" \" +resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS.join(\", \");\r\n\r\n            jQuery(\"#fileUpload\").addClass(\"error\").find(\"span.warning\")\r\n                .html(message);\r\n        }\r\n    },\r\n\r\n    _clickHandler : function(event) {\r\n        resourceLocator._updateResourceSelectorState(event.target.id);\r\n    },\r\n\r\n    _updateResourceSelectorState : function(id) {\r\n        // Update File upload component state.\r\n        resource.switchButtonState(this.filePath, id === this.FILE_SYSTEM);\r\n        resource.switchButtonState(this.fakeFilePath, id === this.FILE_SYSTEM);\r\n        resource.switchButtonState(this.fakeFileInput, id === this.FILE_SYSTEM);\r\n        // Update Resource selector component state: button + text input.\r\n        resource.switchButtonState(this.browseButton, id === this.CONTENT_REPOSITORY);\r\n        resource.switchDisableState(this.resourceUri, id !== this.CONTENT_REPOSITORY);\r\n        // Update Create new resource link state.\r\n        var classes = id === this.LOCAL ? ['disabled', 'launcher'] : [];\r\n        this._switchElementClasses(this.newResourceLink, classes);\r\n    },\r\n\r\n    _initFileSelector : function(options) {\r\n        this.fileSelector = new picker.FileSelector(_.extend({}, options, {\r\n            uriTextboxId: this.resourceUri,\r\n            browseButtonId: this.browseButton,\r\n            title: options.dialogTitle\r\n        }));\r\n    },\r\n\r\n    remove : function(options) {\r\n        this.fileSelector.remove();\r\n    },\r\n\r\n    ///////////////////////////\r\n    // Utility methods.\r\n    ///////////////////////////\r\n    _switchElementClasses : function(element, classes) {\r\n        element && classes && jQuery(element).removeClass(classes[0]).addClass(classes[1]);\r\n    }\r\n};\r\n\r\nexport default resourceLocator;\r\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n\nimport resource from './resource.base';\nimport resourceLocator from './resource.locate';\nimport {ValidationModule, isIE, isIE7, isIE8, isIE9, isIE10} from \"../util/utils.common\";\nimport jQuery from 'jquery';\n\nvar resourceReport = {\n    SET_UP_PAGE_ID: 'addReport_SetUp',\n    LABEL_ID: 'label',\n    RESOURCE_ID_ID: 'resourceID',\n    DESCRIPTION_ID: 'reportUnit\\\\.description',\n    FILE_PATH_ID: 'filePath',\n    RESOURCE_URI_ID: 'resourceUri',\n    FILE_SYSTEM_SOURCE_ID: 'FILE_SYSTEM',\n    CONTENT_REPOSITORY_SOURCE_ID: 'CONTENT_REPOSITORY',\n    RESOURCE_NAME_ID: 'resourceName',\n    EDIT_RESOURCE_BUTTON_ID: 'editResourceButton',\n    REMOVE_RESOURCE_BUTTON_ID: 'removeResourceButton',\n    ADD_RESOURCE_BUTTON_ID: 'addResourceButton',\n    EDIT_CONTROL_BUTTON_ID: 'editControlButton',\n    REMOVE_CONTROL_BUTTON_ID: 'removeControlButton',\n    ADD_CONTROL_BUTTON_ID: 'addControlButton',\n    FILE_NAME_ID: 'fileName',\n    FILE_UPLOAD_BUTTON_ID: 'fake_upload_button',\n    SAVE_BUTTON_ID: 'done',\n    JRXML_FILE_PATH_COOKIE: 'jrxmlFilePath',\n\n    _canGenerateId: true,\n    initialize: function (options) {\n        this._setUpPage = jQuery('#' + this.SET_UP_PAGE_ID)[0];\n\n        if (this._setUpPage) {\n            this._form = jQuery(document.body).find('form')[0];\n            this._label = jQuery('#' + this.LABEL_ID)[0];\n            this._resourceId = jQuery('#' + this.RESOURCE_ID_ID)[0];\n            this._description = jQuery('#' + this.DESCRIPTION_ID)[0];\n            this._filePath = jQuery('#' + this.FILE_PATH_ID)[0];\n            this._resourceUri = jQuery('#' + this.RESOURCE_URI_ID)[0];\n            this._fileName = jQuery('#' + this.FILE_NAME_ID)[0];\n\n            this._fileSystemSource = jQuery('#' + this.FILE_SYSTEM_SOURCE_ID)[0];\n            this._contentRepositorySource = jQuery('#' + this.CONTENT_REPOSITORY_SOURCE_ID)[0];\n\n            this._saveButton = jQuery('#' + this.SAVE_BUTTON_ID);\n\n            this._isEditMode = options ? options.isEditMode : false;\n            this._initialSource = this._fileSystemSource.checked ? this._fileSystemSource : this._contentRepositorySource;\n            this._jrxmlFileResourceAlreadyUploaded = options.jrxmlFileResourceAlreadyUploaded;\n            this._label.validator = resource.labelValidator.bind(this);\n            this._resourceId.validator = resource.resourceIdValidator.bind(this);\n            this._description.validator = resource.descriptionValidator.bind(this);\n            this._filePath.validator = this._filePathValidator.bind(this);\n            this._resourceUri.validator = this._resourceUriValidator.bind(this);\n\n            this._initEvents();\n            this._adjustFileSelectorPosition();\n            this._fileName.value = this._jrxmlFileResourceAlreadyUploaded;\n        }    // Resource locator.\n        // Resource locator.\n        var resourceOptions = {\n            fileUploadInput: 'filePath',\n            fakeFileUploadInput: 'fake_upload_button',\n            fakeFileUploadInputText: 'fileName',\n            resourceInput: 'resourceUri',\n            browseButton: 'browser_button',\n            uploadButton: 'upload_button',\n            treeId: 'resourceTreeRepoLocation',\n            dialogTitle: resource.messages['resource.Report.Title'],\n            selectLeavesOnly: true\n        };\n        if (options && jQuery('#' + resourceOptions.browseButton)[0]) {\n            if (options.type == 'fileResource') {\n                resourceOptions.providerId = 'fileResourceTreeDataProvider';\n            } else if (options.type == 'jrxml') {\n                resourceOptions.providerId = 'jrxmlTreeDataProvider';\n            } else if (options.type == 'olapMondrianSchema') {\n                resourceOptions.providerId = 'olapSchemaTreeDataProvider';\n            } else if (options.type == 'folder') {\n                resourceOptions.treeId = 'addFileTreeRepoLocation';\n                resourceOptions.providerId = 'repositoryExplorerTreeFoldersProvider';\n                resourceOptions.resourceInput = 'folderUri';\n            }\n            resourceLocator.initialize(resourceOptions);\n            resourceLocator._updateResourceSelectorState(jQuery('input[type=radio]:checked').attr('id'));\n        }\n    },\n    _initEvents: function () {\n        var self = this;    //opens file upload selection dialog, when user clicks on ordinary button\n        //opens file upload selection dialog, when user clicks on ordinary button\n        jQuery('#' + this.FILE_UPLOAD_BUTTON_ID).click(function (e) {\n            e.preventDefault();\n            jQuery('#' + self.FILE_PATH_ID).trigger('click');\n        });\n        this._saveButton.on('click', function (e) {\n            if (!self._isDataValid()) {\n                e.preventDefault();\n            }\n        });\n        jQuery(this._form).on('keyup', function (e) {\n            var element = e.target;\n            var targetElements = [\n                self._label,\n                self._resourceId,\n                self._description\n            ];\n            if (targetElements.include(element)) {\n                ValidationModule.validate(resource.getValidationEntries([element]));\n                if (element == self._resourceId && self._resourceId.getValue() != resource.generateResourceId(self._label.getValue())) {\n                    self._canGenerateId = false;\n                }\n\n                if (element == self._label && !self._isEditMode && self._canGenerateId) {\n                    self._resourceId.setValue(resource.generateResourceId(self._label.getValue()));\n\n                    ValidationModule.validate(resource.getValidationEntries([self._resourceId]));\n                }\n            }\n        });\n        this._filePath.observe('change', function () {\n            if (isIE()) {\n                //IE can for security reasons change real patch to file on 'c:\\fakepath\\'\n                //is should not be shown to user, in this case show only filename\n                if (this.value.toLowerCase().indexOf('c:\\\\fakepath\\\\') != -1) {\n                    self._fileName.value = this.value.substring('c:\\\\fakepath\\\\'.length, this.value.length);\n                } else {\n                    self._fileName.value = this.value;\n                }\n            } else {\n                self._fileName.value = this.files[0].name;\n            }\n            jQuery('#' + 'fileUpload').removeClass('error');\n            self._adjustFileSelectorPosition();\n        });\n    },\n    _isDataValid: function () {\n        var elementsToValidate = [\n            this._label,\n            this._resourceId,\n            this._description,\n            this._filePath,\n            this._resourceUri\n        ];\n        if (isIE()) {\n            this.file = this._filePath.value;\n        } else {\n            this.file = this._filePath.files[0];\n        }\n        this.html = jQuery(this._filePath).html();\n\n        return ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    },\n    _filePathValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (this._fileSystemSource.checked && value.blank() && (!this._isEditMode || this._initialSource != this._fileSystemSource) && !this._jrxmlFileResourceAlreadyUploaded) {\n            errorMessage = resource.messages['filePathIsEmpty'];\n            isValid = false;\n        }\n        if (isValid)\n            ValidationModule.hideError(jQuery('#' + 'fileName')[0]);\n        else\n            ValidationModule.showError(jQuery('#' + 'fileName')[0], errorMessage);\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    _resourceUriValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (this._contentRepositorySource.checked && value.blank()) {\n            errorMessage = resource.messages['resourceUriIsEmpty'];\n            isValid = false;\n        }\n\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    _adjustFileSelectorPosition: function () {\n        var fp = jQuery('#filePath');\n        if (isIE7() || isIE8() || isIE9() || isIE10()) {\n            var top = 20, right = 0, width = 95, height = 30, hasError = fp.parents('label').hasClass('error');\n            if (hasError) {\n                // adjust the position because of the error message\n                top += 13;\n            }\n            fp.css({\n                opacity: '0',\n                position: 'absolute',\n                right: right,\n                top: top,\n                width: width,\n                height: height\n            });\n        } else {\n            fp.css({\n                position: 'fixed',\n                right: '-1000px',\n                top: '-1000px'\n            });\n        }\n    },\n    editResource: function (resourceName) {\n        jQuery('#' + this.RESOURCE_NAME_ID)[0].setValue(resourceName);\n        jQuery('#' + this.EDIT_RESOURCE_BUTTON_ID)[0].click();\n    },\n\n    removeResource: function(resourceName) {\n        jQuery('#' + this.RESOURCE_NAME_ID)[0].setValue(resourceName);\n        jQuery('#' + this.REMOVE_RESOURCE_BUTTON_ID)[0].click();\n    },\n\n    addResource: function() {\n        jQuery('#' + this.ADD_RESOURCE_BUTTON_ID)[0].click();\n    },\n\n    editControl: function(resourceName) {\n        jQuery('#' + this.RESOURCE_NAME_ID)[0].setValue(resourceName);\n        jQuery('#' + this.EDIT_CONTROL_BUTTON_ID)[0].click();\n    },\n\n    removeControl: function(resourceName) {\n        jQuery('#' + this.RESOURCE_NAME_ID)[0].setValue(resourceName);\n        jQuery('#' + this.REMOVE_CONTROL_BUTTON_ID)[0].click();\n    },\n\n    addControl: function() {\n        jQuery('#' + this.ADD_CONTROL_BUTTON_ID)[0].click();\n    }\n};\n\n\nexport default resourceReport;\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport resource from '../../resource/resource.base';\nimport resourceReport from '../../resource/resource.report';\nimport {isIPad} from \"../../util/utils.common\";\n\nvar options;\nif (typeof jrsConfigs.addJasperReport.localContext !== 'undefined') {\n    options = jrsConfigs.addJasperReport.localContext.initOptions;\n    _.extend(window.localContext, jrsConfigs.addJasperReport.localContext);\n}\n_.extend(resource.messages, jrsConfigs.addJasperReport.resource.messages);\nresourceReport.initialize(options);\nisIPad() && resource.initSwipeScroll();\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n/* global __jrsConfigs__ */\n//JasperServer namespace  mess\n\n/*\n *  One of Jasperserver namespaces.\n */\nvar JRS = {\n    vars: {\n        element_scrolled: false,\n        ajax_in_progress: false,\n        current_flow: null,\n        contextPath: __jrsConfigs__.contextPath\n    },\n    i18n: {}\n};\nvar Calendar = {};\nif (typeof isEncryptionOn === 'undefined') {\n    var isEncryptionOn = false;\n}\nfunction isProVersion() {\n    return __jrsConfigs__.isProVersion;\n}\nvar jaspersoft = {\n    components: {},\n    i18n: {}\n};\nif (typeof JRS == 'undefined') {\n    JRS = { Mocks: {} };\n}\nif (typeof JRS.vars == 'undefined') {\n    JRS.vars = {\n        element_scrolled: false,\n        ajax_in_progress: false,\n        current_flow: null\n    };\n}    //TODO: move closer to Import/Export\n//TODO: move closer to Import/Export\nif (typeof JRS.Export == 'undefined') {\n    JRS.Export = {\n        i18n: {\n            'file.name.empty': 'export.file.name.empty',\n            'file.name.too.long': 'export.file.name.too.long',\n            'file.name.not.valid': 'export.file.name.not.valid',\n            'export.select.users': 'export.select.users',\n            'export.select.roles': 'export.select.roles',\n            'export.session.expired': 'export.session.expired',\n            'error.timeout': 'export.file.name.empty'\n        },\n        configs: {\n            TIMEOUT: 1200000,\n            DELAY: 3000\n        }\n    };\n}\nif (typeof window.localContext == 'undefined') {\n    window.localContext = {};\n}    //TODO: move to common module\n//TODO: move to common module\nif (__jrsConfigs__.calendar) {\n    JRS.i18n['bundledCalendarFormat'] = __jrsConfigs__.calendar.i18n.bundledCalendarFormat;\n    JRS.i18n['bundledCalendarTimeFormat'] = __jrsConfigs__.calendar.i18n.bundledCalendarTimeFormat;\n}\n\nwindow.JRS = JRS;\nwindow.jaspersoft = jaspersoft;\nwindow.isProVersion = isProVersion;\n\nexport {jaspersoft, JRS, isProVersion};"],"sourceRoot":""}