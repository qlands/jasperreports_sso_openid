(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[6156],{36156:(e,t,i)=>{"use strict";i.r(t);var s=i(97836),r=i.n(s),n=i(71914),a=i(52499),o=i(11364),l=i(64155),d=i(43852),u=i(46539),c=i(72157),_=i.n(c),h={messages:{},resourceLabelMaxLength:100,resourceIdMaxLength:100,resourceDescriptionMaxLength:250,PROPAGATE_EVENT:"propagateEvent",STEP_DISPLAY_ID:"stepDisplay",FLOW_CONTROLS_ID:"flowControls",initSwipeScroll:function(){var e=_()("#"+h.STEP_DISPLAY_ID)[0];e&&new o.Z(e.parent(),e.parents().eq(2),{})},submitForm:function(e,t,i){if(t){var s=(0,l.nB6)(t);i&&i(),_()("#"+e).attr("method","post").attr("action",s),_()("#"+e)[0].submit()}},registerClickHandlers:function(e,t,i){if(h._bodyClickEventHandlers)(i?Array.prototype.unshift:Array.prototype.push).apply(h._bodyClickEventHandlers,e);else{h._bodyClickEventHandlers=e;var s=t||"body";_()(s).on("click",(function(e){h._bodyClickEventHandlers&&h._bodyClickEventHandlers.each((function(t){var i=t(e);if(i)throw i!==h.PROPAGATE_EVENT&&Event.stop(e),a.$break}))}))}},TreeWrapper:function(e){var t=this;if(this._treeId=e.treeId,this._resourceUriInput=_()("#"+e.resourceUriInput||0)[0],this._uri=this._resourceUriInput&&this._resourceUriInput.getValue()||e.uri||"/",!e.providerId)throw"There is no tree provider set for tree #{id}".interpolate({id:this._treeId});var i=["providerId","rootUri","organizationId","publicFolderUri","urlGetNode","urlGetChildren"].inject({},(function(t,i){return null!==e[i]&&(t[i]=e[i]),t}));return this._tree=new u.Z.createRepositoryTree(this._treeId,i),this._tree.observe("tree:loaded",(function(){t._tree.openAndSelectNode(_()("#"+t._resourceUriInput)[0].getValue())})),this._tree.observe("leaf:selected",(function(e){t._uri=e.memo.node.param.uri,t._resourceUriInput.setValue(t._uri)})),this._tree.observe("node:selected",(function(){t._resourceUriInput.setValue(t._uri="")})),{getTreeId:function(){return t._treeId},getTree:function(){return t._tree},selectFolder:function(e){t._tree.openAndSelectNode(e)},getSelectedFolderUri:function(){return t._uri}}},switchButtonState:function(e,t){d.Z[t?"enable":"disable"].call(d.Z,e)},switchDisableState:function(e,t){(e=_()(e)[0])&&e[t?"disable":"enable"].call(e)},generateResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return e.replace(new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g"),"_");throw"There is no resourceIdNotSupportedSymbols property in init options."},testResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e);throw"There is no resourceIdNotSupportedSymbols property in init options."},labelValidator:function(e){var t=!0,i="";return e.blank()?(i=h.messages.labelIsEmpty,t=!1):e.length>h.resourceLabelMaxLength&&(i=h.messages.labelToLong,t=!1),{isValid:t,errorMessage:i}},getLabelValidationEntry:function(e){return{element:e,validators:[{method:"mandatory",messages:{mandatory:h.messages.labelIsEmpty}},{method:"minMaxLength",messages:{tooLong:h.messages.labelToLong},options:{maxLength:h.resourceLabelMaxLength}}]}},getIdValidationEntry:function(e){return{element:e,validators:[{method:"resourceIdChars",messages:h.messages},{method:"mandatory",messages:{mandatory:h.messages.resourceIdIsEmpty}},{method:"minMaxLength",messages:{tooLong:h.messages.resourceIdToLong},options:{maxLength:h.resourceIdMaxLength}}]}},resourceIdValidator:function(e){var t=!0,i="";return this._isEditMode||(e.blank()?(i=h.messages.resourceIdIsEmpty,t=!1):e.length>h.resourceIdMaxLength?(i=h.messages.resourceIdToLong,t=!1):h.testResourceId(e)&&(i=h.messages.resourceIdInvalidChars,t=!1)),{isValid:t,errorMessage:i}},getDescriptionValidationEntry:function(e){return{element:e,validators:[{method:"minMaxLength",messages:{tooLong:h.messages.descriptionToLong},options:{maxLength:h.resourceDescriptionMaxLength}}]}},descriptionValidator:function(e){var t=!0,i="";return e.length>h.resourceDescriptionMaxLength&&(i=h.messages.descriptionToLong,t=!1),{isValid:t,errorMessage:i}},dataSourceValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=h.messages.dataSourceInvalid,t=!1),{isValid:t,errorMessage:i}},queryValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=h.messages.queryInvalid,t=!1),{isValid:t,errorMessage:i}},getValidationEntries:function(e){return e.collect((function(e){return e.validationEntry?e.validationEntry:{validator:e.validator,element:e}}))}};const m=h;const I={LABEL_ID:"labelID",RESOURCE_ID_ID:"resourceID",DESCRIPTION_ID:"description",ITEM_NAME_ID:"name",ITEM_VALUE_ID:"value",SUBMIT_EVENT_ID:"submitEvent",ITEM_TO_DELETE_ID:"itemToDelete",SAVE_BUTTON_PATTERN:"#save",CANCEL_BUTTON_PATTERN:"#cancel",ADD_LINK_ID:"add",LINK_PATTERN:"a.launcher",_canGenerateId:!0,initialize:function(e){this._form=_()(document.body).find("form")[0],this._label=_()("#"+this.LABEL_ID)[0],this._resourceId=_()("#"+this.RESOURCE_ID_ID)[0],this._description=_()("#"+this.DESCRIPTION_ID)[0],this._itemName=_()("#"+this.ITEM_NAME_ID)[0],this._itemValue=_()("#"+this.ITEM_VALUE_ID)[0],this._submitEvent=_()("#"+this.SUBMIT_EVENT_ID)[0],this._itemToDelete=_()("#"+this.ITEM_TO_DELETE_ID)[0],this._addLink=_()("#"+this.ADD_LINK_ID)[0],this._isEditMode=e.isEditMode,this._label.validator=m.labelValidator.bind(this),this._resourceId.validator=m.resourceIdValidator.bind(this),this._description.validator=m.descriptionValidator.bind(this),this._itemName.validator=this._itemNameValidator.bind(this),this._itemValue.validator=this._itemValueValidator.bind(this),this._initEvents()},_initEvents:function(){_()(this._form).on("click",function(e){var t=e.target;if(e.stopPropagation(),(0,l.BwZ)(t,[this.SAVE_BUTTON_PATTERN],!0))this._isDataValid()&&(_()(this._submitEvent).attr("name","_eventId_save"),this._form.submit());else if(t==this._addLink)this._isValueDataValid()&&this._isDataValid()&&(this._submitEvent.writeAttribute("name","_eventId_addItem"),this._form.submit());else if((0,l.BwZ)(t,[this.LINK_PATTERN],!0)&&t!=this._addLink){var i=t.identify();this._itemToDelete.setValue(i),_()(this._submitEvent).attr("name","_eventId_removeItem"),this._form.submit()}else(0,l.BwZ)(t,[this.CANCEL_BUTTON_PATTERN],!0)&&(_()(this._submitEvent).attr("name","_eventId_cancel"),this._form.submit())}.bind(this)),_()(this._form).on("keyup",function(e){var t=e.target;[this._label,this._resourceId,this._description,this._itemName,this._itemValue].include(t)&&(l.n4K.validate(m.getValidationEntries([t])),t==this._resourceId&&this._resourceId.getValue()!=m.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),t==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(m.generateResourceId(this._label.getValue())),l.n4K.validate(m.getValidationEntries([this._resourceId]))))}.bind(this))},_isDataValid:function(){var e=[this._label,this._resourceId,this._description];return l.n4K.validate(m.getValidationEntries(e))},_isValueDataValid:function(){var e=[this._itemName,this._itemValue];return l.n4K.validate(m.getValidationEntries(e))},_itemNameValidator:function(e){var t=!0,i="";return e.blank()&&(i=m.messages.itemNameIsEmpty,t=!1),{isValid:t,errorMessage:i}},_itemValueValidator:function(e){var t=!0,i="";return e.blank()&&(i=m.messages.itemValueIsEmpty,t=!1),{isValid:t,errorMessage:i}}};var p=n.Z.addListOfValues.localContext.initOptions;r().extend(window.localContext,n.Z.addListOfValues.localContext),r().extend(m.messages,n.Z.addListOfValues.resource.messages),I.initialize(p),(0,l.zcy)()&&m.initSwipeScroll()}}]);
//# sourceMappingURL=chunk.6156.js.map