{"version":3,"sources":["webpack://jrs-ui/./src/commons/commons.minimal.main.js","webpack://jrs-ui/./src/core/core.key.events.js","webpack://jrs-ui/./src/repository/repository.search.globalSearchBoxInit.js","webpack://jrs-ui/./src/commons/commons.main.js","webpack://jrs-ui/./src/components/components.searchBox.js","webpack://jrs-ui/./src/core/core.accessibility.js"],"names":["heartbeat","jrsConfigs","aboutDialog","helpLink","$","on","e","preventDefault","webHelp","stdnav","stdnavPluginAnchor","stdnavPluginButton","stdnavPluginForms","stdnavPluginGrid","stdnavPluginList","stdnavPluginActionMenu","stdnavPluginDynamicList","stdnavPluginToolbar","stdnavPluginWorkflowCard","keyManager","ignoreKeyDown","Keys","noBubbleOnKeyUp","document","observe","event","include","keyCode","Event","stop","focused","target","KEY_RETURN","shiftKey","fire","targetEvent","node","KEY_LEFT","KEY_RIGHT","KEY_UP","KEY_DOWN","KEY_PAGEUP","KEY_PAGEDOWN","KEY_HOME","KEY_END","isMetaHeld","KEY_ESC","KEY_TAB","KEY_DELETE","isShiftHeld","actionModel","matched","elem","menuElement","jQuery","layoutModule","selected","find","thisItem","is","parent","setTimeout","onmouseup","curry","memo","matchMeOrUp","identify","primaryNavModule","_searchBox","_containerId","_searchInputId","initialize","this","SearchBox","id","onSearch","text","val","encodeUriParameter","bind","setText","addClass","primaryNavigation","globalSearch","options","_id","_dom","_enabled","_process","_assignHandlers","addMethod","_input","_clearButton","_searchButton","_keyPressHandler","bindAsEventListener","_clearHandler","_searchHandler","_doSearch","getText","blank","removeClass","getValue","setValue","_updateClearButtonVisibility","buttonManager","attr","accessibilityModule","ATTR_TAB_INDEX","ATTR_COMPONENT_TYPE","delayTime","components","currentTabIndex","disabled","each","element","tabIndex","getTabIndex","enable","disable","_focusByType","component","tree","dynamicTree","selectedNodes","last","bShowRoot","getRootNode","getFirstChild","isSelected","select","_doFocus","list","dynamicList","item","getSelectedItems","getItems","first","children","_blurByType","object","focus","_focusComponent","focusFunction","getType","_blurComponent","blurFunction","findTabComponent","match","hasAttribute","parentNode","index","length","parseInt","undefined","getNext","startIndex","nextIndex","Object","isUndefined","getPrevious","previousIndex","focusNext","focusByIndex","focusPrevious","blurCurrent","blurByIndex","stopPropagation"],"mappings":"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","file":"_chunks/chunk.6672.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport './commons.bare.main';\nimport heartbeat from '../components/components.heartbeat';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport aboutDialog from '../components/components.about';\nimport webHelp from '../components/components.webHelp';\nimport $ from 'jquery';\n\n// Basic stdnav plugins from js-sdk\nimport stdnav from 'js-sdk/src/common/stdnav/stdnav';\nimport stdnavPluginAnchor from 'js-sdk/src/common/stdnav/plugins/stdnavPluginAnchor';\nimport stdnavPluginButton from 'js-sdk/src/common/stdnav/plugins/stdnavPluginButton';\nimport stdnavPluginGrid from 'js-sdk/src/common/stdnav/plugins/stdnavPluginGrid';\nimport stdnavPluginList from 'js-sdk/src/common/stdnav/plugins/stdnavPluginList';\nimport stdnavPluginTable from 'js-sdk/src/common/stdnav/plugins/stdnavPluginTable';\nimport stdnavPluginActionMenu from '../stdnav/plugins/stdnavPluginActionMenu';\nimport stdnavPluginDynamicList from '../stdnav/plugins/stdnavPluginDynamicList';\nimport stdnavPluginForms from '../stdnav/plugins/stdnavPluginForms';\nimport stdnavPluginToolbar from '../stdnav/plugins/stdnavPluginToolbar';\nimport stdnavPluginWorkflowCard from 'js-sdk/src/common/stdnav/plugins/stdnavPluginWorkflowCard';\nimport '../config/dateAndTimeSettings';\n\n//Heartbeat\nheartbeat.initialize(jrsConfigs.heartbeatInitOptions);\nheartbeat.start();\njrsConfigs.initAdditionalUIComponents && aboutDialog.initialize();    //Web help\n//Web help\nvar helpLink = $('#helpLink');\nif (helpLink) {\n    helpLink.on('click', function (e) {\n        e.preventDefault();\n        webHelp.displayWebHelp();\n    });\n}\nif (jrsConfigs.enableAccessibility === 'true') {\n    // Basic stdnav plugins from js-sdk\n    stdnav.activate();\n    stdnavPluginAnchor.activate(stdnav);\n    stdnavPluginButton.activate(stdnav);\n    stdnavPluginForms.activate(stdnav);\n    stdnavPluginGrid.activate(stdnav);\n    stdnavPluginList.activate(stdnav);\n    //stdnavPluginTable.activate(stdnav);    // JasperServer-specific stdnav plugins from jrs-ui\n    // JasperServer-specific stdnav plugins from jrs-ui\n    stdnavPluginActionMenu.activate(stdnav);\n    stdnavPluginDynamicList.activate(stdnav);\n    stdnavPluginToolbar.activate(stdnav);\n    stdnavPluginWorkflowCard.activate(stdnav);\n    stdnav.start();\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\n/*\n * event handler for generic key events\n */\n\nimport jQuery from 'jquery';\nimport {\n    Keys,\n    isMetaHeld,\n    isShiftHeld,\n    matchMeOrUp\n} from \"../util/utils.common\";\n\nimport actionModel from '../actionModel/actionModel.modelGenerator';\nimport layoutModule from '../core/core.layout';\nimport primaryNavModule from '../actionModel/actionModel.primaryNavigation';\n\nvar keyManager = {\n    ignoreKeyDown : [\n        Keys.DOM_VK_SHIFT,\n        Keys.DOM_VK_CONTROL,\n        Keys.DOM_VK_ALT\n    ],\n\n    noBubbleOnKeyUp : [\n        Keys.DOM_VK_F10\n    ]\n};\n\ndocument.observe('keyup', function(event){\n    if (keyManager.noBubbleOnKeyUp.include(event.keyCode)) {\n        Event.stop(event);\n    }\n});\n\ndocument.observe('keydown', function(event){\n\n\n    if (keyManager.ignoreKeyDown.include(event.keyCode)) {\n        return;\n    }\n\n    //debug only\n    //window.console && console.log('document.activeElement',document.activeElement);\n    //window.console && console.log('keydown',event.target,event.keyCode);\n\n    var focused = event.target;\n\n    if(event.keyCode == Event.KEY_RETURN) {\n        focused.fire('key:enter', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.shiftKey && (event.keyCode == Keys.DOM_VK_F10)) {\n        //prevent from showing native menu, specially in IE9\n    \tEvent.stop(event);\n        focused.fire('key:contextMenu', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_LEFT) {\n        focused.fire('key:left', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_RIGHT) {\n        focused.fire('key:right', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_UP) {\n        focused.fire('key:up', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_DOWN) {\n        focused.fire('key:down', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_PAGEUP) {\n        focused.fire('key:pageup', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_PAGEDOWN) {\n        focused.fire('key:pagedown', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_HOME) {\n        focused.fire('key:home', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_END) {\n        focused.fire('key:end', {targetEvent: event, node: focused});\n        return;\n    }\n    //ctrl + y\n    if(isMetaHeld(event) && (event.keyCode == 89)) {\n        focused.fire('key:redo', {targetEvent: event, node: focused});\n        return;\n    }\n    //ctrl + z\n    if(isMetaHeld(event) && (event.keyCode == 90)) {\n        focused.fire('key:undo', {targetEvent: event, node: focused});\n        return;\n    }\n    //escape\n    if(event.keyCode == Event.KEY_ESC) {\n        focused.fire('key:escape', {targetEvent: event, node: focused});\n        return;\n    }\n\n    // NOTE: Reacting to the TAB key is not recommended for accessibility\n    // reasons.\n    if(event.keyCode == Event.KEY_TAB) {\n        focused.fire('key:tab', {targetEvent: event, node: focused});\n        return;\n    }\n\n    //delete\n    if(event.keyCode == Event.KEY_DELETE) {\n        focused.fire('key:delete', {targetEvent: event, node: focused});\n        return;\n    }\n\n\n    /**\n     * Adhoc and Dashboard specific keys events\n     */\n\n    //command / ctrl + a\n    if((event.keyCode == 65) && isMetaHeld(event)) {\n        focused.fire('key:selectAll', {targetEvent: event, node: focused});\n        return;\n    }\n\n    //fire for save\n    //command / ctrl + s (save)\n    if((event.keyCode == 83) && isMetaHeld(event) && !isShiftHeld(event)) {\n        focused.fire('key:save', {targetEvent: event, node: focused});\n        return;\n    }\n\n\n    //fire for zoom in\n    //command / ctrl + shift + l (zoom in)\n    if((event.keyCode == 76) && isMetaHeld(event) && isShiftHeld(event)) {\n        focused.fire('key:chartZoomIn', {targetEvent: event, node: focused});\n        return;\n    }\n\n\n    //fire for zoom  out\n    //command / ctrl + shift + o (zoom out)\n    if((event.keyCode == 79) && isMetaHeld(event) && isShiftHeld(event)) {\n        focused.fire('key:chartZoomOut', {targetEvent: event, node: focused});\n        return;\n    }\n\n});\n\n////////////////////////////////////////////////\n// global custom event handlers\n// NOTE: See also Standard Navigation plugins (\"stdnav/plugins\")\n////////////////////////////////////////////////\n\n\ndocument.observe('key:esc', function(event){\n    if(actionModel.isMenuShowing()){\n        actionModel.hideActionModelMenu();\n    }\n});\n\ndocument.observe('key:enter', function(event){\n    var elem = event.target, matched;\n\n    //if menu showing - simulate mouseup\n    var menuElement = jQuery('#' + layoutModule.MENU_ID)[0];\n    if (layoutModule.isVisible(menuElement)) {\n        Event.stop(event);\n        var selected = jQuery(menuElement).find(\":focus,.\" + layoutModule.HOVERED_CLASS)[0];\n        if (selected) {\n            var thisItem = selected;\n            if (!selected.is(layoutModule.MENU_LIST_PATTERN)){\n                thisItem = jQuery(selected).parent(layoutModule.MENU_LIST_PATTERN);\n            }\n            setTimeout(thisItem.onmouseup.curry(event.memo.targetEvent),0);\n        }\n    }\n\n    matched = matchMeOrUp(elem, layoutModule.NAVIGATION_PATTERN);\n    if (matched) {\n        if (matched.identify() == layoutModule.MAIN_NAVIGATION_HOME_ITEM_ID) {\n            Event.stop(event);\n            primaryNavModule.navigationOption(\"home\");\n        } else if (matched.identify() == layoutModule.MAIN_NAVIGATION_LIBRARY_ITEM_ID) {\n            Event.stop(event);\n            primaryNavModule.navigationOption(\"library\");\n        }\n    }\n});\n\nexport default keyManager;\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\nimport SearchBox from '../components/components.searchBox';\nimport primaryNavModule from '../actionModel/actionModel.primaryNavigation';\nimport {encodeUriParameter} from \"../util/utils.common\";\nimport jQuery from 'jquery'\n\nvar globalSearchBox = {\n    _searchBox: null,\n    _containerId: \"globalSearch\",\n    _searchInputId: \"searchInput\",\n\n    initialize: function() {\n        this._searchBox = new SearchBox({\n            id: this._containerId\n        });\n\n        this._searchBox.onSearch = function(text) {\n            jQuery('#' + this._searchInputId).val(text);\n            primaryNavModule.navigationPaths.search.params += '&' + \"searchText=\" + encodeUriParameter(text);\n            primaryNavModule.navigationOption(\"search\");\n            //            $(this._containerId).submit();\n        }.bind(this);\n    },\n\n    setText: function(text) {\n        this._searchBox.setText(text);\n    }\n};\n\nexport default globalSearchBox;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport './commons.minimal.main';\nimport '../namespace/namespace';\nimport '../core/core.accessibility';\nimport '../core/core.events.bis';\nimport '../core/core.key.events';\nimport stdnav from 'js-sdk/src/common/stdnav/stdnav';\nimport actionModel from '../actionModel/actionModel.modelGenerator';\nimport primaryNavigation from '../actionModel/actionModel.primaryNavigation';\nimport globalSearch from '../repository/repository.search.globalSearchBoxInit';\nimport layoutModule from '../core/core.layout';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport $ from 'jquery';\nimport stdnavPluginActionMenu from '../stdnav/plugins/stdnavPluginActionMenu';\nimport stdnavPluginDynamicList from '../stdnav/plugins/stdnavPluginDynamicList';\nimport stdnavPluginToolbar from '../stdnav/plugins/stdnavPluginToolbar';\n\n// add information about locale into body's class\n$('body').addClass('locale-' + jrsConfigs.userLocale);\nlayoutModule.initialize();\nprimaryNavigation.initializeNavigation();    //navigation setup\n//navigation setup\nactionModel.initializeOneTimeMenuHandlers();    //menu setup\n// JRS-specific stdnav plugins from jrs-ui\n//menu setup\n// JRS-specific stdnav plugins from jrs-ui\nstdnavPluginActionMenu.activate(stdnav);\nstdnavPluginDynamicList.activate(stdnav);\nstdnavPluginToolbar.activate(stdnav);\njrsConfigs.initAdditionalUIComponents && globalSearch.initialize();    //isNotNullORUndefined(window.accessibilityModule) && accessibilityModule.initialize();\n//trigger protorype's dom onload manualy\n//isNotNullORUndefined(window.accessibilityModule) && accessibilityModule.initialize();\n//trigger protorype's dom onload manualy\ndocument.fire('dom:loaded');\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: Yuriy Plakosh\n * @version: $Id$\n */\n\n/*\n * Search box class.\n *\n * @param options {JSON Object} - Set of options for search box:\n * <ul>\n *      <li>id - the identifier of search box form element in the DOM</li>\n * </ul>\n */\n\nimport layoutModule from '../core/core.layout';\nimport buttonManager from '../core/core.events.bis';\nimport jQuery from 'jquery';\n\nvar SearchBox = function(options) {\n    this._id = options.id;\n    this._dom = jQuery('#' + this._id)[0];\n    this._enabled = true;\n\n    this._process();\n    this._assignHandlers();\n};\n\n/**\n * Processes DOM.\n */\nSearchBox.addMethod('_process', function() {\n    this._input = jQuery(this._dom).find('input')[0];\n    this._clearButton = jQuery(this._dom).find('.button.searchClear')[0];\n    this._searchButton = jQuery(this._dom).find('.button.search')[0];\n});\n\n/**\n * Assigns handlers.\n */\nSearchBox.addMethod('_assignHandlers', function() {\n    jQuery(this._dom).on('submit', function(e) {\n        Event.stop(e);\n    });\n\n    jQuery(this._input).on(\"keypress\", this._keyPressHandler.bindAsEventListener(this));\n\n    jQuery(this._clearButton).on('click', this._clearHandler.bindAsEventListener(this));\n    jQuery(this._searchButton).on('click', this._searchHandler.bindAsEventListener(this));\n});\n\n/**\n * Key pressed handler for input field.\n */\nSearchBox.addMethod('_keyPressHandler', function(e) {\n    if (this._enabled && Event.KEY_RETURN == e.keyCode) {\n        this._doSearch();\n\n        // Fix to prevent click event handling on clear button when enter key is pressed in the input field.\n        Event.stop(e);\n    }\n});\n\n/**\n * Updates visibility of clear button.\n */\nSearchBox.addMethod('_updateClearButtonVisibility', function() {\n    if (!this.getText().blank()) {\n        jQuery(this._clearButton).addClass(layoutModule.UP_CLASS);\n    } else {\n        jQuery(this._clearButton).removeClass(layoutModule.UP_CLASS);\n    }\n});\n\n/**\n * Click handler for clear button.\n */\nSearchBox.addMethod('_clearHandler', function() {\n    if (this._enabled) {\n        this.setText(\"\");\n        this._doSearch();\n    }\n});\n\n/**\n * Click handler for search button.\n */\nSearchBox.addMethod('_searchHandler', function() {\n    if (this._enabled) {\n        this._doSearch();\n    }\n});\n\n/**\n * Gets search box text.\n */\nSearchBox.addMethod('getText', function() {\n    return this._input.getValue();\n});\n\n/**\n * Sets search box text.\n */\nSearchBox.addMethod('setText', function(text) {\n    this._input.setValue(text);\n    this._updateClearButtonVisibility();\n});\n\n/**\n * Enables search box.\n */\nSearchBox.addMethod('enable', function() {\n    buttonManager.enable(this._clearButton);\n    buttonManager.enable(this._searchButton);\n    jQuery(this._input).attr(layoutModule.READONLY_ATTR_NAME, null);\n    jQuery(this._dom).attr(layoutModule.DISABLED_ATTR_NAME, null);\n\n    this._enabled = true;\n});\n\n/**\n * Disables search box.\n */\nSearchBox.addMethod('disable', function() {\n    buttonManager.disable(this._clearButton);\n    buttonManager.disable(this._searchButton);\n    jQuery(this._input).attr(layoutModule.READONLY_ATTR_NAME, layoutModule.READONLY_ATTR_NAME);\n    jQuery(this._dom).attr(layoutModule.DISABLED_ATTR_NAME, layoutModule.DISABLED_ATTR_NAME);\n\n    this._enabled = false;\n});\n\n/**\n * Does search action.\n */\nSearchBox.addMethod('_doSearch', function(text) {\n    this._updateClearButtonVisibility();\n    this.onSearch(this.getText());\n});\n\n/**\n * Is invoked when search action was performed (search button pressed, clear button pressed, enter key pressed in the\n * text input field). This method should be replaced in the instance of SearchBox class to handle search action.\n *\n * @param text the text in the search box.\n */\nSearchBox.addMethod('onSearch', function(text) {\n    // No-op.\n});\n\nexport default SearchBox;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n\nimport dynamicTree from '../dynamicTree/dynamicTree.utils';\nimport buttonManager from '../core/core.events.bis';\nimport actionModel from '../actionModel/actionModel.modelGenerator';\nimport layoutModule from '../core/core.layout';\nimport {isShiftHeld} from \"../util/utils.common\";\nimport {dynamicList} from '../components/list.base';\nimport jQuery from 'jquery';\n\nvar accessibilityModule = {\n    ATTR_TAB_INDEX: 'data-tab-index',\n    ATTR_COMPONENT_TYPE: 'data-component-type',\n    delayTime: 500,\n    components: [],\n    currentTabIndex: -1,\n    disabled: true,\n    initialize: function () {\n        var elements = jQuery('*[' + this.ATTR_TAB_INDEX + ']');\n        elements.each(function (element) {\n            var tabIndex = this.getTabIndex(element);\n            tabIndex > 0 && (this.components[tabIndex] = element);\n        }.bind(this));\n        this.enable();\n    },\n    enable: function () {\n        this.disabled = false;\n    },\n    disable: function () {\n        this.disabled = true;\n    },\n    _focusByType: {\n        'tree': function (component) {\n            var id = jQuery(component).attr('id');\n            var tree = dynamicTree.trees[id];\n            if (tree) {\n                var node = tree.selectedNodes.last();\n                node = node || (tree.bShowRoot ? tree.getRootNode() : tree.getRootNode().getFirstChild());\n                if (node) {\n                    node.isSelected() || node.select();\n                    accessibilityModule._doFocus(node);\n                }\n            }\n        },\n        'list': function (component) {\n            var id = jQuery(component).attr('id');\n            var list = dynamicList.lists[id];\n            if (list) {\n                var item = list.getSelectedItems().last();\n                item = item || list.getItems().first();\n                if (item) {\n                    item.isSelected() || item.select();\n                    accessibilityModule._doFocus(item);\n                }\n            }\n        },\n        'search': function (component) {\n            var target = component.children('input');\n            target && target.select();\n            accessibilityModule._doFocus(target);\n        },\n        'navigation': function (component) {\n            var target = component.children('#main_home');\n            buttonManager.over(target.children(layoutModule.BUTTON_PATTERN));\n            accessibilityModule._doFocus(target);\n        },\n        'linkList': function (component) {\n            buttonManager.over(component.children('a'));\n            accessibilityModule._doFocus(component);\n        }\n    },\n    _blurByType: {\n        'navigation': function (component) {\n            actionModel.hideMenu();    //deselect object.\n            //deselect object.\n            component.find('.over').each(function (object) {\n                buttonManager.out(object);\n            });\n        },\n        'linkList': function (component) {\n            component.find('a.over').each(function (object) {\n                buttonManager.out(object);\n            });\n        }\n    },\n    _doFocus: function (target) {\n        setTimeout(function () {\n            target.focus();\n        }, this.delayTime);\n    },\n    _focusComponent: function (component) {\n        var focusFunction = component && this.getType(component) && this._focusByType[this.getType(component)];\n        return focusFunction && focusFunction(component);\n    },\n    _blurComponent: function (component) {\n        var blurFunction = component && this.getType(component) && this._blurByType[this.getType(component)];\n        return blurFunction && blurFunction(component);\n    },\n    findTabComponent: function (component) {\n        var match;\n        while (component && !match) {\n            match = component.hasAttribute && component.hasAttribute(this.ATTR_TAB_INDEX) && component;\n            component = jQuery('#' + component.parentNode)[0];    //            console.log(\"findTabComponent\")\n        }\n        return match;\n    },\n    getTabIndex: function (component) {\n        var tabIndex = -1;\n        if (component && component.hasAttribute) {\n            component.hasAttribute(this.ATTR_TAB_INDEX) || (component = accessibilityModule.findTabComponent(component));\n            var index = component ? jQuery(component).attr(this.ATTR_TAB_INDEX) : this.currentTabIndex;\n            try {\n                index && index.length > 0 && (tabIndex = parseInt(index));\n            } catch (e) {\n            }\n        }\n        return tabIndex;\n    },\n    getType: function (component) {\n        return component && component.hasAttribute(this.ATTR_COMPONENT_TYPE) ? jQuery(component).attr(this.ATTR_COMPONENT_TYPE) : undefined;\n    },\n    getNext: function (startIndex) {\n        var nextIndex = -1;\n        if (this.components.length > 0) {\n            startIndex || (startIndex = this.currentTabIndex);\n            startIndex < 0 && (startIndex = 0);\n            nextIndex = startIndex + 1;\n            while (Object.isUndefined(this.components[nextIndex]) && nextIndex != startIndex) {\n                nextIndex++;\n                nextIndex < this.components.length || (nextIndex = 0);    //                console.log(\"getNext\")\n            }\n        }\n        return nextIndex;\n    },\n    getPrevious: function (startIndex) {\n        var previousIndex = -1;\n        if (this.components.length > 0) {\n            startIndex || (startIndex = this.currentTabIndex);\n            startIndex < 0 && (startIndex = 0);\n            previousIndex = startIndex - 1;\n            while (Object.isUndefined(this.components[previousIndex]) && previousIndex != startIndex) {\n                previousIndex--;\n                previousIndex > -1 || (previousIndex = this.components.length - 1);    //console.log(\"getPrevious\");\n            }\n        }\n        return previousIndex;\n    },\n    focusNext: function (startIndex) {\n        this.focusByIndex(this.getNext(startIndex));\n    },\n    focusPrevious: function (startIndex) {\n        this.focusByIndex(this.getPrevious(startIndex));\n    },\n    focusByIndex: function (index) {\n        index > -1 && (this.currentTabIndex = index) && this._focusComponent(this.components[index]);\n    },\n    blurCurrent: function () {\n        var component = this.components[this.currentTabIndex];\n        component && this._blurComponent(component);\n    },\n    blurByIndex: function (index) {\n        var component = this.components[index];\n        component && this._blurComponent(component);\n    }\n};\ndocument.observe('key:tab', function (event) {\n    if (!accessibilityModule.disabled) {\n        var tabIndex = accessibilityModule.getTabIndex(event.element());\n        accessibilityModule.blurCurrent();\n        isShiftHeld(event) ? accessibilityModule.focusPrevious(tabIndex) : accessibilityModule.focusNext(tabIndex);\n        event.preventDefault();\n        event.stopPropagation();\n        return false;\n    }\n});    //document.onfocusout = function(e) {\n//    var event = e ? e : Event.extend(window.event);\n//    var tabIndex = accessibilityModule.getTabIndex(event.target);\n//\n//    accessibilityModule.blurByIndex(tabIndex);\n//};\n//\n//document.addEventListener && document.addEventListener('blur', document.onfocusout, true);\n\nexport default accessibilityModule;\n"],"sourceRoot":""}