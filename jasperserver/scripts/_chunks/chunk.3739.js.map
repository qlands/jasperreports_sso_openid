{"version":3,"sources":["webpack://jrs-ui/./src/components/components.templateengine.js","webpack://jrs-ui/./src/namespace/namespace.js","webpack://jrs-ui/./src/i18n/ImportExportValidationBundle.properties.js","webpack://jrs-ui/./src/tenantImportExport/export/model/ResourcesModel.js","webpack://jrs-ui/./src/tenantImportExport/export/factory/exportModelAttributesFactory.js","webpack://jrs-ui/./src/tenantImportExport/export/model/ExportModel.js","webpack://jrs-ui/./src/tenantImportExport/export/model/AuthorityPickerModel.js","webpack://jrs-ui/./src/tenantImportExport/export/view/AuthorityPickerView.js","webpack://jrs-ui/./src/tenantImportExport/export/template/authorityPickerTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/template/authorityPickerOptionsTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/view/ExportDependentResourcesDialogView.js","webpack://jrs-ui/./src/tenantImportExport/export/template/assetsToIncludeExtendedVersionTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/template/eventsToIncludeTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/template/rolesAndUsersToIncludeTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/factory/exportTemplateFactory.js","webpack://jrs-ui/./src/tenantImportExport/export/template/repositoryExportTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/view/ExportView.js","webpack://jrs-ui/./src/tenantImportExport/export/template/exportDataFileTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/template/exportOptionsContainerTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/util/i18nMessage.js"],"names":["jQuery","_","jaspersoft","render","templateText","model","type","template","this","STD_PLACEHOLDERS","result","String","each","val","index","regExp","RegExp","replace","renderUrl","encode","url","encodeURI","getTemplateText","templateId","html","createTemplate","length","createTemplateFromText","createTemplateSection","section","concreteSectionRegexpPattern","regexp","templateSectionText","match","JRS","vars","element_scrolled","ajax_in_progress","current_flow","contextPath","__jrsConfigs__","i18n","isEncryptionOn","isProVersion","components","Mocks","Export","configs","TIMEOUT","DELAY","window","localContext","calendar","bundledCalendarFormat","bundledCalendarTimeFormat","bundle","Object","keys","reduce","acc","key","Backbone","fetch","request","attributesByType","commonAttributes","roles","users","everything","userForRoles","rolesForUser","includeReports","includeOtherResourceFiles","includeDataSources","includeDependentObjects","includeAttributes","includeAttributeValues","events","includeAccessEvents","includeAuditEvents","includeMonitoringEvents","proAssets","includeDomains","includeAdHocViews","includeDashboards","tenantAssets","includeSubOrganizations","serverAssets","includeServerSettings","exportTypesEnum","i18nMessage","i18nMessageUtil","typeMap","ExportModel","BaseModel","defaults","validation","fileName","required","msg","maxLength","fn","test","uris","state","toExportTask","parameters","param","initialize","resources","ResourcesModel","save","dfd","$","tmpModel","self","exportModel","res","get","someResourceIsChecked","done","push","resolve","getResourceTypes","resourceTypes","response","fail","reject","trigger","cancel","id","destroy","includeReportJobs","repositoryExportOptions","scheduledJobs","ExportOptions","uri","organizationsFolderUri","orgTemplateFolderUri","matches","jrsConfigs","exec","organization","last","first","tenantExportOptions","getConvertedParameters","secureKeyTypeEnum","reset","opts","exportModelAttributesFactory","clear","set","includeRepositoryPermissions","skipProfileAttributesValues","attributeNames","value","prototype","BackboneValidation","items","Engine","urlTemplate","context","parse","responce","role","user","defaultErrorHandler","xnr","data","JSON","responseText","error","status","setContext","searchString","excludeSubOrgs","instance","inst","isBeetween","a","b","c","Math","max","min","cursor","baseCursor","selecting","scrollSpeed","options","on","renderList","arguments","upHandler","evt","stopScroll","el","initOptions","mainTemplate","optionsTemplate","$el","children","subEl","find","delegateEvents","attributes","element","attr","height","scrollTop","getSelected","memo","selected","span","join","search","addClass","removeClass","_selectAllHandler","selectAll","keyHandler","which","setDisabled","$selectAll","undelegateEvents","highlightSet","what","toggleClass","silent","selectNone","selectInverse","selectItem","n","unSelectItem","selectRange","begin","end","selectionStarted","ctrlKey","metaKey","target","parents","shiftKey","mouseEntered","mouseLeave","previous","next","relatedTarget","selectionFinished","startScroll","hasClass","direction","document","body","scrollTimer","setInterval","scrollList","clearInterval","off","BaseWarningDialogView","constructor","resizable","buttons","label","i18n2","action","primary","close","open","message","exportTemplateByType","rolesAndUsersToIncludeTemplate","assetsToIncludeExtendedVersionTemplate","eventsToIncludeTemplate","ExportView","className","computeds","includeAccessEventsChecked","enableAttributesValues","deps","enableReportJobs","isKeyDefaultValue","keyType","isKeyUniversalValue","isKeyUseCustom","stateModel","ExportStateModel","customKeyStateModel","CustomKeyModel","epoxifyView","loadingDialog","LoadingDialog","content","notification","Notification","dependentResourcesDialogView","ExportDependentResourcesDialogView","listenTo","_onModelChange","handleExportPhase","location","reload","notFoundNotification","delay","unexpectedErrorNotification","show","downloadFile","call","_showNotification","cancelExportTask","_onRepositoryBrowserButtonClick","keyFileDialog","_clearSecureKeyErrors","_onKeyTypeChange","event","radioValue","_onCustomKeyInput","selectedIndex","isServerType","_isServerLevel","isServerOrRootType","stopListening","filterAuthoritiesBySubOrgs","_resetModel","encryptionHint","awsSettings","getCustomKeys","responseJSON","customKeyFailure","alias","renderSecTemplate","i","text","append","doExport","isValid","unset","notificationOptions","phase","brokenDependencies","_getBrokenDependencies","contextMixin","rolesList","usersList","bindWithRoles","selection","onUsersToRolesChange","rolesToUsers","bindWithUsers","onRolesToUsersChange","usersToRoles","changeEnabledState","includeRolesByUsers","is","_includeUsersOrRoles","includeUsersWithRoles","includeSelectedRolesUsersOnly","sendParameters","item","username","tenantId","name","isVisible","warnings","paths","code","path","_clickOnCheckbox","checkbox","disabled","checked","modelOptions","initializeAuthorityPickers","AuthorityPickerView","AuthorityModel","customClass","title","selectLabel","secretKeyTemplate","outerHTML","exportTemplateFactory","isServerLevel","isServerCe","isRepository","isSubOrgLevel","toJSON","secureKeyTypes","showCustomKey","showKeyValue","exportMode","applyEpoxyBindings","iframe","createElement","src","style","display","epoxyViewMixin","ARGS_TYPE","classUtil","args","Array","slice","toString","argsType","_getArgsType","_interpolateIndexArgs","_interpolateObjectArgs","firstArg","separator","formattedArgs","argument","l","parameter","create"],"mappings":"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","file":"_chunks/chunk.3739.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: inesterenko\n * @version: $Id$\n */\nimport jQuery from \"jquery\";\nimport _ from \"underscore\";\nimport {jaspersoft} from \"../namespace/namespace\";\n\n//TODO: this module from controls.core.js, remove it from controls.core.js\njaspersoft.components.templateEngine = (function(jQuery, _){\n\n    // Provide functionality to get templates\n\n    return {\n\n        // Populate template with data\n        render:function (templateText, model, type) {\n            if (!type){\n                //Mustache by default\n                return _.template(templateText)(model);\n            }else if(type == this.STD_PLACEHOLDERS){\n                var result = String(templateText);\n                _.each(model,  function(val, index){\n                    var regExp = new RegExp(\"\\\\{\"+index+\"\\\\}\");\n                    result = result.replace(regExp, val);\n                });\n                return result;\n            }\n        },\n        renderUrl:function(templateText, model, encode){\n            var url = _.template(templateText)(model);\n            if(encode){\n                url = encodeURI(url);\n            }\n            return url;\n        },\n        // Return template's text\n        getTemplateText:function (templateId) {\n            var scriptTag = jQuery(\"#\" + templateId);\n            return scriptTag.html();\n        },\n\n        // Return template's function for given id\n        createTemplate:function (templateId) {\n            var scriptTag = jQuery(\"#\" + templateId);\n            var templateText = scriptTag.html();\n\n            if (templateText && templateText.length > 0) {\n                return function (model) {\n                    return _.template(templateText)(model);\n                };\n            }\n        },\n\n        createTemplateFromText: function(templateText){\n            if (templateText && templateText.length > 0) {\n                return function (model) {\n                    return _.template(templateText)(model);\n                };\n            }\n        },\n\n        // Cut template's text chunk and wrap with a function\n        createTemplateSection:function (section, templateId) {\n            var regexpTemplate = '<!--#val-->(\\\\s|\\\\S)*<!--/val-->';\n            var concreteSectionRegexpPattern = regexpTemplate.replace(/val/g, section);\n            var regexp = new RegExp(concreteSectionRegexpPattern, \"g\");\n            var templateText = this.getTemplateText(templateId);\n            var templateSectionText = templateText.match(regexp)[0];\n            return  function (model) {\n                return _.template(templateSectionText)(model);\n            };\n        },\n\n        STD_PLACEHOLDERS : \"std_placeholder\"\n\n    };\n\n})(\n    jQuery,\n    _\n);\n\nexport default jaspersoft.components.templateEngine;\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n/* global __jrsConfigs__ */\n//JasperServer namespace  mess\n\n/*\n *  One of Jasperserver namespaces.\n */\nvar JRS = {\n    vars: {\n        element_scrolled: false,\n        ajax_in_progress: false,\n        current_flow: null,\n        contextPath: __jrsConfigs__.contextPath\n    },\n    i18n: {}\n};\nvar Calendar = {};\nif (typeof isEncryptionOn === 'undefined') {\n    var isEncryptionOn = false;\n}\nfunction isProVersion() {\n    return __jrsConfigs__.isProVersion;\n}\nvar jaspersoft = {\n    components: {},\n    i18n: {}\n};\nif (typeof JRS == 'undefined') {\n    JRS = { Mocks: {} };\n}\nif (typeof JRS.vars == 'undefined') {\n    JRS.vars = {\n        element_scrolled: false,\n        ajax_in_progress: false,\n        current_flow: null\n    };\n}    //TODO: move closer to Import/Export\n//TODO: move closer to Import/Export\nif (typeof JRS.Export == 'undefined') {\n    JRS.Export = {\n        i18n: {\n            'file.name.empty': 'export.file.name.empty',\n            'file.name.too.long': 'export.file.name.too.long',\n            'file.name.not.valid': 'export.file.name.not.valid',\n            'export.select.users': 'export.select.users',\n            'export.select.roles': 'export.select.roles',\n            'export.session.expired': 'export.session.expired',\n            'error.timeout': 'export.file.name.empty'\n        },\n        configs: {\n            TIMEOUT: 1200000,\n            DELAY: 3000\n        }\n    };\n}\nif (typeof window.localContext == 'undefined') {\n    window.localContext = {};\n}    //TODO: move to common module\n//TODO: move to common module\nif (__jrsConfigs__.calendar) {\n    JRS.i18n['bundledCalendarFormat'] = __jrsConfigs__.calendar.i18n.bundledCalendarFormat;\n    JRS.i18n['bundledCalendarTimeFormat'] = __jrsConfigs__.calendar.i18n.bundledCalendarTimeFormat;\n}\n\nwindow.JRS = JRS;\nwindow.jaspersoft = jaspersoft;\nwindow.isProVersion = isProVersion;\n\nexport {jaspersoft, JRS, isProVersion};","\n        import {store, MERGED_BUNDLES_NAME} from 'bundleStore';\n        \n        let bundle;\n        \n        if ('ImportExportValidationBundle' !== MERGED_BUNDLES_NAME) {\n            store['ImportExportValidationBundle'] = store['ImportExportValidationBundle'] || {};\n            bundle = store['ImportExportValidationBundle'];\n        } else {\n            bundle = Object.keys(store).reduce((acc, key) => {\n                return {\n                    ...acc,\n                    ...store[key]\n                }\n            }, {});\n        }\n                                     \n        export default bundle;\n    ","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Backbone from 'backbone';\nimport request from 'js-sdk/src/common/transport/request';\n\nexport default Backbone.Model.extend({\n    url: 'rest_v2/settings/exportResourceOptions',\n    fetch: function () {\n        return request({\n            url: this.url,\n            type: 'GET'\n        });\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport exportTypesEnum from '../enum/exportTypesEnum';\n\nvar attributesByType = {};\nvar commonAttributes = {\n    roles: null,\n    users: null,\n    everything: true,\n    userForRoles: false,\n    rolesForUser: false,\n    includeReports: true,\n    includeOtherResourceFiles: true,\n    includeDataSources: true,\n    includeDependentObjects: true,\n    includeAttributes: true,\n    includeAttributeValues: true\n};\nvar events = {\n    includeAccessEvents: false,\n    includeAuditEvents: false,\n    includeMonitoringEvents: false\n};\nvar proAssets = {\n    includeDomains: true,\n    includeAdHocViews: true,\n    includeDashboards: true\n};\nvar tenantAssets = { includeSubOrganizations: true };\nvar serverAssets = { includeServerSettings: true };\nattributesByType[exportTypesEnum.ROOT_TENANT] = _.extend({}, commonAttributes, events, proAssets, tenantAssets, serverAssets);\nattributesByType[exportTypesEnum.TENANT] = _.extend({}, commonAttributes, proAssets, tenantAssets);\nattributesByType[exportTypesEnum.SERVER_PRO] = _.extend({}, commonAttributes, events, proAssets, tenantAssets, serverAssets);\nattributesByType[exportTypesEnum.SERVER_CE] = _.extend({}, commonAttributes, serverAssets, { includeAccessEvents: true });\nexport default function (type) {\n    return attributesByType[type];\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: Zakhar Tomchenko\n * @version:\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport BackboneValidation from 'js-sdk/src/common/extension/backboneValidationExtension';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport i18n from '../../../i18n/ImportExportValidationBundle.properties';\nimport BaseModel from 'js-sdk/src/common/model/BaseModel';\nimport ResourcesModel from '../model/ResourcesModel';\nimport exportModelAttributesFactory from '../factory/exportModelAttributesFactory';\nimport exportTypesEnum from '../enum/exportTypesEnum';\nimport i18nMessageUtil from 'js-sdk/src/common/util/i18nMessage';\nimport secureKeyTypeEnum from '../../import/enum/secureKeyTypeEnum';\n\nvar i18nMessage = i18nMessageUtil.extend({ bundle: i18n });\n\nvar MAX_LENGTH = 256,\n    typeMap = {\n        includeReports: \"report\",\n        includeDomains: \"domain\",\n        includeAdHocViews: \"adhocDataView\",\n        includeDataSources: \"dataSource\",\n        includeDashboards: \"dashboard\",\n        includeOtherResourceFiles: \"others\" // TODO WAT?\n    },\n\n    ExportModel = BaseModel.extend({\n\n        defaults: {\n            \"uris\": [\"/\"],\n            \"fileName\": \"export.zip\",\n            \"encryptFile\": false,\n            \"includeRepositoryPermissions\": true,\n            \"includeScheduledReportJobs\": true,\n            \"includeDependencies\": true,\n            \"includeFullResourcePath\": true,\n            'keyType': '',\n            'keyAlias' :'',\n            'invalidKeyError': '',\n            'invalidSecureFileContentError': '',\n            'customKeyElements' : '',\n            'showCustomKey' : true,\n            'key-Alias': ''\n        },\n\n        validation: {\n            fileName: [\n                {\n                    required: true,\n                    msg: new i18nMessage(\"export.file.name.empty\")\n                },\n                {\n                    maxLength: MAX_LENGTH,\n                    msg: new i18nMessage(\"export.file.name.too.long\", MAX_LENGTH)\n                },\n                {\n                    fn: function(fileName) {\n                        if (/[\\\\/?*%:|\"<>]/g.test(fileName)) {\n                            return new i18nMessage(\"export.file.name.contains.not.supported.characters\");\n                        }\n                        if (/^[\\.]{1,2}$/g.test(fileName)) {\n                            return new i18nMessage(\"export.file.name.not.valid\");\n                        }\n                    }\n                }\n            ],\n            uris: [\n                {\n                    fn: function() {\n                        var state = this.toExportTask();\n\n                        return !(state.uris || state.roles || state.users || _.filter(state.parameters, function (param) {\n                            return param !== \"role-users\" && param !== \"users-roles\";\n                        }).length);\n                    }\n                }\n            ]\n        },\n\n        initialize: function () {\n            BaseModel.prototype.initialize.call(this);\n            _.bindAll(this, \"url\", \"save\", \"cancel\", \"toExportTask\", \"reset\");\n\n            this.resources = new ResourcesModel();\n        },\n\n        url: function () {\n            return \"rest_v2/export\"\n        },\n\n        save: function () {\n            var dfd = new $.Deferred(),\n                tmpModel = new Backbone.Model(),\n                self = this;\n\n            tmpModel.url = this.url;\n\n            var parameters = {};\n\n            getResourceTypes(this).done(function(resourceTypes) {\n                resourceTypes && (parameters.resourceTypes = resourceTypes);\n\n                tmpModel.save(_.extend(self.toExportTask(), parameters)).done(function(response) {\n                    dfd.resolve(response);\n                }).fail(function(response) {\n                    dfd.reject(response);\n                    self.trigger(\"error\", self, response);\n                })\n            });\n\n            return dfd;\n        },\n\n        cancel: function() {\n            var url = this.url() + \"/\" + this.id;\n\n            this.destroy({url: url});\n        },\n\n\n        toExportTask: function () {\n            var everything = this.get(\"everything\"),\n                roles = this.get(\"roles\"),\n                users = this.get(\"users\"),\n                uris = _.clone(this.get(\"uris\")),\n                includeReportJobs = everything || (this.get(\"includeReports\") && this.get(\"includeScheduledReportJobs\"));\n\n            var repositoryExportOptions = {\n                uris: uris,\n                scheduledJobs: this.get(\"includeScheduledReportJobs\") ? uris : null,\n                parameters: []\n            };\n            _.extend(repositoryExportOptions, this.ExportOptions());\n            this.get(\"includeRepositoryPermissions\") && repositoryExportOptions.parameters.push(\"repository-permissions\");\n\n            !this.get(\"includeDependencies\") && repositoryExportOptions.parameters.push(\"skip-dependent-resources\");\n\n            // drop parent org prefix from paths, add required attributes if exporting from sub-org and includeFullResourcePath is unchecked\n            var matches = subOrgLevelMatches(uris && uris[0]);\n            if (matches && !this.get(\"includeFullResourcePath\")) {\n                repositoryExportOptions.organization = matches.last();\n                repositoryExportOptions.parameters.push(\"skip-suborganizations\", \"skip-attribute-values\");\n                repositoryExportOptions.uris = _.map(uris, function(uri) {\n                    return uri.replace(matches.first(),\"\");\n                });\n                repositoryExportOptions.scheduledJobs = this.get(\"includeScheduledReportJobs\") ? repositoryExportOptions.uris : null;\n            }\n\n            var tenantExportOptions = {\n                uris: someResourceIsChecked(this) ? uris : null,\n                roles: !_.isEmpty(roles) ? roles : null,\n                users: !_.isEmpty(users) ? users : null,\n                scheduledJobs: includeReportJobs ? uris : null,\n                organization: this.get(\"organization\"),\n                parameters: getConvertedParameters(this)\n            };\n            _.extend(tenantExportOptions, this.ExportOptions());\n\n            return this.type !== exportTypesEnum.REPOSITORY\n                ? tenantExportOptions\n                : repositoryExportOptions;\n        },\n\n        ExportOptions: function() {\n            if ( this.get(\"keyType\") ===secureKeyTypeEnum.CUSTOMKEY ) {\n                return {'keyAlias' : this.get(\"keyAlias\")};\n            } else if( this.get(\"keyType\") ===secureKeyTypeEnum.UNIVERSALKEY ) {\n                return {'keyAlias' : this.get(\"keyType\")};\n            } else{\n                return {'keyAlias' : secureKeyTypeEnum.DEFAULTKEY};\n            }\n        },\n\n        reset: function(opts, type) {\n            this.type = type;\n\n            var defaults = _.extend({}, this.defaults, exportModelAttributesFactory(type));\n\n            this.clear().set(_.extend({}, defaults, opts));\n        }\n    });\n\n_.extend(ExportModel.prototype, BackboneValidation.mixin);\n\nfunction getConvertedParameters(exportModel) {\n    var res = [],\n        includeRepositoryPermissions,\n        skipProfileAttributesValues;\n\n    if (exportModel.get(\"everything\")) {\n        res.push(\"everything\");\n\n        exportModel.get(\"includeAccessEvents\") && res.push(\"include-access-events\");\n    } else {\n        includeRepositoryPermissions = someResourceIsChecked(exportModel) && exportModel.get(\"includeRepositoryPermissions\") && !_.isEmpty(exportModel.get(\"uris\"));\n        skipProfileAttributesValues = !exportModel.get(\"includeAttributeValues\") || !exportModel.get(\"includeAttributes\");\n\n        exportModel.get(\"userForRoles\") && res.push(\"role-users\");\n        exportModel.get(\"rolesForUser\") && res.push(\"users-roles\");\n\n        includeRepositoryPermissions && res.push(\"repository-permissions\");\n        !exportModel.get(\"includeSubOrganizations\") && res.push(\"skip-suborganizations\");\n\n        exportModel.get(\"includeAttributes\") && res.push(\"include-attributes\");\n        skipProfileAttributesValues && res.push(\"skip-attribute-values\");\n\n        exportModel.get(\"includeServerSettings\") && res.push(\"include-server-settings\");\n        (!someResourceIsChecked(exportModel) || !exportModel.get(\"includeDependentObjects\")) && res.push(\"skip-dependent-resources\");\n    }\n\n    exportModel.get(\"includeAuditEvents\") && res.push(\"include-audit-events\");\n\n    exportModel.get(\"includeMonitoringEvents\") && res.push(\"include-monitoring-events\");\n\n    exportModel.get(\"encryptFile\") && res.push(\"encrypted\");\n\n    return res;\n}\n\nfunction getResourceTypes(exportModel) {\n    var res = [],\n        dfd = new $.Deferred();\n\n    !exportModel.get(\"everything\") && someResourceIsChecked(exportModel)\n        ? exportModel.resources.fetch().done(function(resources) {\n            for (var key in typeMap) {\n                exportModel.get(key) && res.push(resources[typeMap[key]]);\n            }\n\n            dfd.resolve(_.flatten(res));\n        })\n        : dfd.resolve(null);\n\n    return dfd;\n}\n\nfunction someResourceIsChecked(exportModel) {\n    var attributeNames = _.keys(typeMap);\n\n    return _.filter(attributeNames, function(value) {\n        return exportModel.get(value);\n    }).length;\n}\n\nfunction subOrgLevelMatches(uri) {\n    var organizationsFolderUri = jrsConfigs.organizationsFolderUri || \"/organizations\";\n    var orgTemplateFolderUri = jrsConfigs.orgTemplateFolderUri || \"/org_template\";\n    var regExp = new RegExp(\"^(\" + organizationsFolderUri + \"(?!\" + orgTemplateFolderUri + \")/([^/]+))+\");\n    return regExp.exec(uri);\n}\n\nexport default ExportModel;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @author: ztomchenco\n * @version: $Id$\n */\nimport Backbone from 'backbone';\nimport Engine from '../../../components/components.templateengine';\nimport _ from 'underscore';\n\nexport default Backbone.Model.extend({\n\n    defaults: {\n        items: []\n    },\n\n    url: function () {\n        return Engine.renderUrl(this.urlTemplate, this.context, true);\n    },\n\n    parse: function (responce) {\n        return {items: responce ? ((responce.role) ? responce.role : responce.user) : []};\n    },\n\n    defaultErrorHandler: function (model, xnr) {\n        var data;\n        try {\n            data = JSON.parse(xnr.responseText);\n        } catch (error) { // this is not JSON\n            data = null;\n        }\n        this.trigger(\"error:server\", xnr.status, data, model);\n    },\n\n    setContext: function (context) {\n        this.context = _.extend(this.context || {\n            searchString: \"\",\n            excludeSubOrgs: false\n        }, context);\n        this.fetch({error: _.bind(this.defaultErrorHandler, this)});\n    }\n\n}, {\n    instance: function (urlTemplate, context) {\n        var inst = new this();\n        inst.urlTemplate = urlTemplate;\n        context && inst.setContext(context);\n        return inst;\n    }\n});\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport jQuery from 'jquery';\nimport Backbone from 'backbone';\nimport mainTemplate from '../template/authorityPickerTemplate.htm';\nimport optionTemplate from '../template/authorityPickerOptionsTemplate.htm';\nimport _ from 'underscore';\n\nfunction isBeetween(a, b, c) {\n    return c <= Math.max(a, b) && c >= Math.min(a, b);\n}\nexport default Backbone.View.extend({\n    events: {\n        'click .button.search': 'search',\n        'click .button.searchClear': 'clear',\n        'click .button-select-all': '_selectAllHandler',\n        'keydown input[type=text]': 'keyHandler',\n        'mousedown li': 'selectionStarted',\n        'mouseenter li': 'mouseEntered',\n        'mouseleave li': 'mouseLeave',\n        'mouseup ul': 'selectionFinished',\n        'mouseenter ul': 'stopScroll',\n        'mouseleave ul': 'startScroll'\n    },\n    cursor: -1,\n    baseCursor: -1,\n    selecting: false,\n    scrollSpeed: 30,\n    initialize: function (options) {\n        this.model.on('change', _.bind(this.renderList, this));\n        this.model.on('error:server', _.bind(function () {\n            this.trigger('error:server', arguments);\n        }, this));\n        this.upHandler = _.bind(function (evt) {\n            this.stopScroll(evt);\n            this.selecting = false;\n        }, this);\n        this.el = false;\n        this.initOptions = options;\n    },\n    render: function () {\n        if (!this.mainTemplate)\n            this.mainTemplate = _.template(mainTemplate);\n        if (!this.optionsTemplate)\n            this.optionsTemplate = _.template(optionTemplate);\n        if (!this.el) {\n            this.$el = jQuery('<div></div>').html(this.mainTemplate(this.initOptions)).children();\n            this.el = this.$el[0];\n            this.subEl = this.$el.find('.authorityPicker ul');\n            this.delegateEvents();\n        }\n        this.model.context || this.model.setContext();\n        return this;\n    },\n    renderList: function () {\n        this.subEl.html(this.optionsTemplate(this.model.attributes)).find('li').each(function (index, element) {\n            jQuery(element).attr('index', index);\n        });\n        this.cursor = -1;\n        this.baseCursor = -1;\n        this.scrollSpeed = this.subEl.find('li:eq(0)').height();\n        this.subEl.scrollTop(0);\n        this.trigger('change:selection', []);\n        return this;\n    },\n    getSelected: function () {\n        return _.reduce(this.subEl.find('.selected'), function (memo, el) {\n            var selected = _.map(jQuery(el).find('span'), function (span) {\n                return jQuery(span).html();\n            });\n            memo.push(selected.join('|'));\n            return memo;\n        }, []);\n    },\n    search: function () {\n        var searchString = this.$el.find('input[type=text]').val();\n        this.model.setContext({ searchString: searchString });\n        if (searchString) {\n            this.$el.find('.button.searchClear').addClass('up');\n        } else {\n            this.$el.find('.button.searchClear').removeClass('up');\n        }\n    },\n    _selectAllHandler: function () {\n        this.selectAll();\n    },\n    clear: function () {\n        this.$el.find('input[type=text]').val('');\n        this.search();\n    },\n    keyHandler: function (evt) {\n        if (evt.which === 13) {\n            this.search();\n        }\n    },\n    setDisabled: function (value) {\n        var $selectAll = this.$el.find('.button-select-all').children();\n        if (value) {\n            this.subEl.addClass('disabled');\n            $selectAll.addClass('disabled');\n            this.undelegateEvents();\n        } else {\n            this.subEl.removeClass('disabled');\n            $selectAll.removeClass('disabled');\n            this.delegateEvents();\n        }\n        this.$el.find('input[type=text]').attr('disabled', value);\n    },\n    highlightSet: function (what) {\n        this.subEl.find('li').each(function (index, element) {\n            element = jQuery(element);\n            var selected = _.map(element.find('span'), function (span) {\n                return jQuery(span).html();\n            });\n            element.toggleClass('highlighted', _.contains(what, selected.join('|')));\n        });\n    },\n    selectAll: function (silent) {\n        this.subEl.find('li').each(function (index, element) {\n            jQuery(element).addClass('selected');\n        });\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectNone: function (silent) {\n        this.subEl.find('li').each(function (index, element) {\n            jQuery(element).removeClass('selected');\n        });\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectInverse: function (silent) {\n        this.subEl.find('li').each(function (index, element) {\n            jQuery(element).toggleClass('selected');\n        });\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectItem: function (n, silent) {\n        this.subEl.find('li[index=' + n + ']').addClass('selected');\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    unSelectItem: function (n, silent) {\n        this.subEl.find('li[index=' + n + ']').removeClass('selected');\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectRange: function (a, b, silent) {\n        var begin = Math.min(a, b);\n        var end = Math.max(a, b);\n        this.subEl.find('li:lt(' + (end + 1) + ')').each(function (index, element) {\n            if (index >= begin) {\n                jQuery(element).addClass('selected');\n            }\n        });\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectionStarted: function (evt) {\n        this.selecting = true;\n        if (!(evt.ctrlKey || evt.metaKey)) {\n            this.selectNone(true);\n        }\n        var index = +jQuery(evt.target).parents('li').toggleClass('selected').attr('index');\n        if (evt.shiftKey) {\n            if (this.cursor != -1) {\n                this.selectRange(this.cursor, index, true);\n            }\n        } else {\n            this.cursor = index;\n            this.baseCursor = this.cursor;\n        }\n    },\n    mouseEntered: function (evt) {\n        if (this.selecting) {\n            this.cursor = +jQuery(evt.target).parents('li').addClass('selected').attr('index');\n        }\n    },\n    mouseLeave: function (evt) {\n        if (this.selecting) {\n            var previous = jQuery(evt.target).parents('li');\n            var next = jQuery(evt.relatedTarget).parents('li');\n            if (isBeetween(this.cursor, this.baseCursor, +next.attr('index'))) {\n                previous.removeClass('selected');\n            }\n        }\n    },\n    selectionFinished: function (evt) {\n        this.selecting = false;\n        this.trigger('change:selection', this.getSelected());\n    },\n    startScroll: function (evt) {\n        if (this.selecting) {\n            if (jQuery(evt.relatedTarget).hasClass('upper')) {\n                this.direction = -1;\n            } else if (jQuery(evt.relatedTarget).hasClass('lower')) {\n                this.direction = 1;\n            } else {\n                this.selecting = false;\n                return;\n            }\n            jQuery(document.body).on('mouseup', this.upHandler);\n            this.scrollTimer = setInterval(_.bind(this.scrollList, this), 200);\n        }\n    },\n    stopScroll: function (evt) {\n        if (this.selecting) {\n            clearInterval(this.scrollTimer);\n            this.direction = 0;\n            jQuery(document.body).off('mouseup', this.upHandler);\n        }\n    },\n    scrollList: function () {\n        this.subEl.scrollTop(+this.subEl.scrollTop() + this.scrollSpeed * this.direction);\n        if (isBeetween(this.cursor, this.baseCursor, this.cursor + this.direction)) {\n            this.unSelectItem(this.cursor, true);\n        } else {\n            this.selectItem(this.cursor + this.direction, true);\n        }\n        this.cursor = this.cursor + this.direction;\n    }\n});","export default \"<div class=\\\"control combo {{- customClass}} \\\" title=\\\"{{- title}}\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <span class=\\\"wrap\\\">{{- title}}</span>\\n        <span class=\\\"control searchLockup \\\">\\n            <div class=\\\"wrap\\\">\\n                <input type=\\\"text\\\" tabindex=\\\"\\\">\\n            </div>\\n            <b class=\\\"right\\\">\\n                <a class=\\\"button searchClear\\\"></a>\\n            </b>\\n            <a class=\\\"button search up\\\"></a>\\n        </span>\\n\\n    <div class=\\\"authorityPicker\\\" onselectstart=\\\"return false\\\">\\n        <div class=\\\"selectBorder upper\\\"></div>\\n        <ul class=\\\"list\\\"></ul>\\n        <div class=\\\"selectBorder lower\\\"></div>\\n    </div>\\n\\n    <div class=\\\"button-select-all\\\" title=\\\"{{- selectLabel }}\\\">\\n        <i class=\\\"icon\\\"></i>\\n        <a class=\\\"label\\\">\\n            <span class=\\\"text\\\">{{- selectLabel }}</span>\\n        </a>\\n    </div>\\n</div>\";","export default \"{{ for (var i = 0, l = items.length; i<l; i++){ }}\\n<li class=\\\"leaf\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"\\\"><span class=\\\"leftColumn\\\">{{- items[i].name}}{{- items[i].username}}</span>\\n        {{ if (items[i].tenantId){ }}\\n            <span class=\\\"rightColumn\\\">{{- items[i].tenantId }}</span>\\n        {{ } }}\\n    </div>\\n</li>\\n{{ } }}\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport i18n from 'js-sdk/src/i18n/CommonBundle.properties';\nimport i18n2 from '../../../i18n/ImportExportBundle.properties';\nimport BaseWarningDialogView from '../../view/BaseWarningDialogView';\n\nexport default BaseWarningDialogView.extend({\n    constructor: function (options) {\n        options || (options = {});\n        _.extend(options, {\n            resizable: true,\n            buttons: [\n                {\n                    label: i18n2['export.button.continue'],\n                    action: 'export',\n                    primary: true\n                },\n                {\n                    label: i18n['button.cancel'],\n                    action: 'cancel',\n                    primary: false\n                }\n            ]\n        });\n        BaseWarningDialogView.prototype.constructor.call(this, options);\n        this.on('button:export', _.bind(this.close, this));\n        this.on('button:cancel', _.bind(this.close, this));\n    },\n    open: function (options) {\n        _.extend(options, { message: i18n2['export.dialog.broken.dependencies.intro'] });\n        BaseWarningDialogView.prototype.open.call(this, options);\n    }\n});","export default \"<div class=\\\"section resources tenant-options\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.resources\\\"] }}</p>\\n\\n    <div class=\\\"group\\\">\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.data.sources\\\"] }}</label>\\n            <input class=\\\"includeDataSources\\\" name=\\\"includeDataSources\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeDataSources, disabled:everything\\\">\\n        </div>\\n        {{ if(!isServerCe) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.domains\\\"] }}</label>\\n            <input class=\\\"includeDomains\\\" name=\\\"includeDomains\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeDomains, disabled:everything\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.ad.hoc.views\\\"] }}</label>\\n            <input class=\\\"includeAdHocViews\\\" name=\\\"includeAdHocViews\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeAdHocViews, disabled:everything\\\">\\n        </div>\\n        {{ } }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.reports\\\"] }}</label>\\n            <input class=\\\"includeReports\\\" name=\\\"includeReports\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeReports, disabled:everything\\\">\\n        </div>\\n        {{ if(!isServerCe) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.dashboards\\\"] }}</label>\\n            <input class=\\\"includeDashboards\\\" name=\\\"includeDashboards\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeDashboards, disabled:everything\\\">\\n        </div>\\n        {{ } }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.scheduled.report.jobs\\\"] }}</label>\\n            <input class=\\\"includeScheduledReportJobs\\\" name=\\\"includeScheduledReportJobs\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeScheduledReportJobs, enabled:enableReportJobs\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.other.resources\\\"] }}</label>\\n            <input class=\\\"includeOtherResourceFiles\\\" name=\\\"includeOtherResourceFiles\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeOtherResourceFiles, disabled:everything\\\">\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"section assets tenant-options\\\">\\n    <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.assets\\\"] }}</p>\\n\\n    <div class=\\\"group\\\">\\n        {{ if(!isServerCe) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.sub.organizations\\\"] }}</label>\\n            <input class=\\\"includeSubOrganizations\\\" name=\\\"includeSubOrganizations\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeSubOrganizations, disabled:everything\\\">\\n        </div>\\n        {{ } }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.dependent.objects\\\"] }}</label>\\n            <input class=\\\"includeDependentObjects\\\" name=\\\"includeDependentObjects\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeDependentObjects, enabled:someResourceIsChecked\\\">\\n        </div>\\n\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.repository.permissions\\\"] }}</label>\\n            <input class=\\\"includeRepositoryPermissions\\\" name=\\\"includeRepositoryPermissions\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeRepositoryPermissions, enabled:someResourceIsChecked\\\">\\n        </div>\\n        {{ if (isServerOrRootType) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.server.settings\\\"] }}</label>\\n            <input class=\\\"includeServerSettings\\\" name=\\\"includeServerSettings\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeServerSettings, disabled:everything\\\">\\n        </div>\\n        {{ } }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.attributes\\\"] }}</label>\\n            <input class=\\\"includeAttributes\\\" name=\\\"includeAttributes\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeAttributes, disabled:everything\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.attribute.values\\\"] }}</label>\\n            <input class=\\\"includeAttributeValues\\\" name=\\\"includeAttributeValues\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeAttributeValues, enabled:enableAttributesValues\\\">\\n        </div>\\n    </div>\\n</div>\\n\";","export default \"<div class=\\\"section events\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.events\\\"] }}</p>\\n    <div class=\\\"group\\\">\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.events.access.events\\\"] }}</label>\\n            <input class=\\\"includeAccessEvents\\\" name=\\\"includeAccessEvents\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeAccessEvents, enabled:everything\\\">\\n        </div>\\n        {{ if(!isServerCe) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.events.audit.events\\\"] }}</label>\\n            <input class=\\\"includeAuditEvents\\\" name=\\\"includeAuditEvents\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeAuditEvents\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.events.monitoring.events\\\"] }}</label>\\n            <input class=\\\"includeMonitoringEvents\\\" name=\\\"includeMonitoringEvents\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeMonitoringEvents\\\">\\n        </div>\\n        {{ } }}\\n    </div>\\n</div>\";","export default \"<div class=\\\"section roles-users\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.roles.users\\\"] }}</p>\\n    <div class=\\\"group rolesAndUsers\\\">\\n        <div class=\\\"control radio\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\" for=\\\"selectedUsersRoles\\\">{{- i18n[\\\"export.dialog.roles.users.selected.roles.users\\\"] }}</label>\\n            <input id=\\\"selectedUsersRoles\\\" class=\\\"selectedUsersRoles\\\" name=\\\"sample\\\" type=\\\"radio\\\" data-bind=\\\"disabled:everything\\\" checked=\\\"checked\\\">\\n        </div>\\n        <div class=\\\"control radio\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\" for=\\\"usersWithSelectedRoles\\\">{{- i18n[\\\"export.dialog.roles.users.users.with.selected.roles\\\"] }}</label>\\n            <input id=\\\"usersWithSelectedRoles\\\" class=\\\"usersWithSelectedRoles\\\" name=\\\"sample\\\" type=\\\"radio\\\" data-bind=\\\"disabled:everything\\\">\\n        </div>\\n        <div class=\\\"control radio\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\" for=\\\"rolesWithSelectedUsers\\\">{{- i18n[\\\"export.dialog.roles.users.roles.with.selected.users\\\"] }}</label>\\n            <input id=\\\"rolesWithSelectedUsers\\\" class=\\\"rolesWithSelectedUsers\\\" name=\\\"sample\\\" type=\\\"radio\\\" data-bind=\\\"disabled:everything\\\">\\n        </div>\\n    </div>\\n    <div class=\\\"group\\\">\\n        <div class=\\\"selectRolesUsers column two control pickWells\\\"></div>\\n    </div>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport assetsToIncludeExtendedVersionTemplate from '../template/assetsToIncludeExtendedVersionTemplate.htm';\nimport eventsToIncludeTemplate from '../template/eventsToIncludeTemplate.htm';\nimport exportDataFileTemplate from '../template/exportDataFileTemplate.htm';\nimport rolesAndUsersToIncludeTemplate from '../template/rolesAndUsersToIncludeTemplate.htm';\nimport exportOptionsContainerTemplate from '../template/exportOptionsContainerTemplate.htm';\nimport repositoryExportTemplate from '../template/repositoryExportTemplate.htm';\nimport exportTypesEnum from '../enum/exportTypesEnum';\nimport secretKeyTemplate from '../../templates/secretKeyTemplate.htm'\n\nvar exportTemplateByType = {};\nexportTemplateByType[exportTypesEnum.ROOT_TENANT] = [\n    rolesAndUsersToIncludeTemplate,\n    assetsToIncludeExtendedVersionTemplate,\n    eventsToIncludeTemplate\n].join('');\nexportTemplateByType[exportTypesEnum.TENANT] = [\n    rolesAndUsersToIncludeTemplate,\n    assetsToIncludeExtendedVersionTemplate\n].join('');\nexportTemplateByType[exportTypesEnum.SERVER_PRO] = [\n    rolesAndUsersToIncludeTemplate,\n    assetsToIncludeExtendedVersionTemplate,\n    eventsToIncludeTemplate\n].join('');\nexportTemplateByType[exportTypesEnum.SERVER_CE] = [\n    rolesAndUsersToIncludeTemplate,\n    assetsToIncludeExtendedVersionTemplate,\n    eventsToIncludeTemplate\n].join('');\nexportTemplateByType[exportTypesEnum.REPOSITORY] = [\n    repositoryExportTemplate\n].join('');\nexport default function (options) {\n    options = options || {};    // eslint-disable-next-line xss/htmlOutputRule\n    // eslint-disable-next-line xss/htmlOutputRule\n    return exportDataFileTemplate + secretKeyTemplate + $(exportOptionsContainerTemplate).append(exportTemplateByType[options.type])[0].outerHTML;\n}","export default \"<div class=\\\"section resources\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <p>{{- i18n[\\\"export.dialog.options\\\"] }}</p>\\n    <div class=\\\"group\\\">\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.report.jobs\\\"] }}</label>\\n            <input class=\\\"includeScheduledReportJobs\\\" name=\\\"includeScheduledReportJobs\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeScheduledReportJobs\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.include.permissions\\\"] }}</label>\\n            <input class=\\\"includeRepositoryPermissions\\\" name=\\\"includeRepositoryPermissions\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeRepositoryPermissions\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.include.dependencies\\\"] }} </label>\\n            <input class=\\\"includeDependencies\\\" name=\\\"includeDependencies\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeDependencies\\\">\\n        </div>\\n        {{ if (isSubOrgLevel) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.include.full.repo.path\\\"] }}</label>\\n            <input class=\\\"includeFullResourcePath\\\" name=\\\"includeFullResourcePath\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeFullResourcePath\\\">\\n        </div>\\n        {{ } }}\\n    </div>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: Zakhar Tomchenko\n * @version:\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport ExportModel from '../model/ExportModel';\nimport ExportStateModel from '../model/ExportStateModel';\nimport AuthorityModel from '../model/AuthorityPickerModel';\nimport AuthorityPickerView from './AuthorityPickerView';\nimport LoadingDialog from './LoadingDialog';\nimport ExportDependentResourcesDialogView from './ExportDependentResourcesDialogView';\nimport Notification from 'js-sdk/src/common/component/notification/Notification';\nimport epoxyViewMixin from 'js-sdk/src/common/view/mixin/epoxyViewMixin';\nimport exportTemplateFactory from '../factory/exportTemplateFactory';\nimport exportTypesEnum from '../enum/exportTypesEnum';\nimport i18n from '../../../i18n/ImportExportBundle.properties';\nimport i18n2 from 'js-sdk/src/i18n/CommonBundle.properties';\n\nimport awsSettings from '../../../settings/awsSettings.settings';\nimport secureKeyTypeEnum from \"../../import/enum/secureKeyTypeEnum\";\nimport CustomKeyModel from '../../model/CustomKeyModel';\n\nvar ExportView = Backbone.View.extend({\n    className: \"export-view\",\n\n    events: {\n        \"change .usersWithSelectedRoles\": \"includeRolesByUsers\",\n        \"change .rolesWithSelectedUsers\": \"includeUsersWithRoles\",\n        \"change .selectedUsersRoles\": \"includeSelectedRolesUsersOnly\",\n        \"change input.jr-jDefaultKey, input.jr-jKeyValue, input.jr-jKeyFile , input.jr-juniversalKeyValue,  input.jr-jCustomKey\": \"_onKeyTypeChange\",\n        \"click .section .checkBox label\": \"_clickOnCheckbox\",\n        \"click button.jr-jRepositoryBrowserButton\": \"_onRepositoryBrowserButtonClick\",\n        \"change .control.select.inline\": \"_onCustomKeyInput\"\n    },\n\n    computeds: {\n        includeAccessEventsChecked: function() {\n            return this.model.get(\"everything\") ? this.model.get(\"includeAccessEvents\") : false;\n        },\n\n        enableAttributesValues: {\n            deps: [\"everything\", \"includeAttributes\"],\n            get: function(everything, includeAttributes) {\n                return !everything && includeAttributes;\n            }\n        },\n\n        enableReportJobs: {\n            deps: [\"everything\", \"includeReports\"],\n            get: function(everything, includeReports) {\n                return !everything && includeReports;\n            }\n        },\n\n        someResourceIsChecked: {\n            deps: [\"everything\", \"includeReports\", \"includeAdHocViews\", \"includeDashboards\", \"includeDomains\", \"includeDataSources\", \"includeOtherResourceFiles\"],\n            get: function(everything, includeReports, includeAdHocViews, includeDashboards, includeDomains, includeDataSources, includeOtherResourceFiles) {\n                return !everything && (includeReports || includeAdHocViews || includeDashboards || includeDomains || includeDataSources || includeOtherResourceFiles);\n            }\n        },\n\n        isKeyDefaultValue: {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.DEFAULTKEY;\n            }\n        },\n\n        isKeyUniversalValue: {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.UNIVERSALKEY;\n            }\n        },\n\n        isKeyUseCustom: {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.CUSTOMKEY;\n            }\n        }\n    },\n\n    initialize: function(options = {}) {\n        _.bindAll(this, \"render\", \"doExport\", \"handleExportPhase\", \"filterAuthoritiesBySubOrgs\",\n            \"bindWithRoles\", \"bindWithUsers\", \"changeEnabledState\", \"includeRolesByUsers\", \"includeUsersWithRoles\",\n            \"includeSelectedRolesUsersOnly\", \"sendParameters\", \"onRolesToUsersChange\", \"onUsersToRolesChange\",\n            \"_isServerLevel\", \"_includeUsersOrRoles\", \"_showNotification\", \"_getBrokenDependencies\",\n            \"_clickOnCheckbox\", \"_onModelChange\", \"_resetModel\");\n\n        this.model || (this.model = new ExportModel());\n        this.stateModel = new ExportStateModel();\n        this.customKeyStateModel = new CustomKeyModel();\n\n        this.epoxifyView();\n\n        this.loadingDialog = new LoadingDialog({\n            content: i18n2[\"dialog.overlay.loading\"]\n        });\n\n        this.notification = new Notification();\n\n        this.dependentResourcesDialogView = new ExportDependentResourcesDialogView();\n\n        this.listenTo(this.model, \"change\", this._onModelChange);\n        this.listenTo(this.stateModel, \"change:phase\", this.handleExportPhase, this);\n\n        this.listenTo(this.model, \"error:unauthorized\", window.location.reload);\n        this.listenTo(this.stateModel, \"error:unauthorized\", window.location.reload);\n\n\n        var notFoundNotification = {\n                delay: false,\n                message: i18n[\"export.error.cancelled\"]\n            },\n            unexpectedErrorNotification = {\n                delay: false,\n                message: i18n[\"export.error.unexpected\"]\n            };\n\n        this.listenTo(this.model, \"error:notFound\", _.bind(this.notification.show, this.notification, notFoundNotification));\n        this.listenTo(this.stateModel, \"error:notFound\", _.bind(this.notification.show, this.notification, notFoundNotification));\n\n        this.listenTo(this.model, \"error:internalServerError\", _.bind(this.notification.show, this.notification, unexpectedErrorNotification));\n        this.listenTo(this.stateModel, \"error:internalServerError\", _.bind(this.notification.show, this.notification, unexpectedErrorNotification));\n\n        this.listenTo(this.model, \"error\", _.bind(this.loadingDialog.close, this.loadingDialog));\n        this.listenTo(this.stateModel, \"error\", _.bind(this.loadingDialog.close, this.loadingDialog));\n\n        this.listenTo(this.dependentResourcesDialogView, \"button:export\", _.compose(\n            _.bind(this.dependentResourcesDialogView.close, this.dependentResourcesDialogView),\n            _.bind(function() {\n                downloadFile.call(this);\n                this._showNotification({message: i18n[\"export.finished\"], type: \"success\"});\n            }, this)));\n        this.listenTo(this.dependentResourcesDialogView, \"button:cancel\", _.bind(cancelExportTask, this, ExportStateModel.STATE.CANCELLED));\n    },\n    _onRepositoryBrowserButtonClick: function() {\n        this.keyFileDialog.open();\n    },\n    _clearSecureKeyErrors: function() {\n        this.model.set({\n            'invalidKeyError': '',\n            'invalidSecureFileContentError': ''\n        });\n    },\n\n    _onKeyTypeChange: function(event) {\n        let radioValue = event.target.value;\n\n        this.model.set('keyType', radioValue);\n\n        this._clearSecureKeyErrors();\n    },\n\n    _onCustomKeyInput: function(evt){\n        const index = evt.target.selectedIndex;\n        const element = $(\".control.select.inline\").find('option')[index];\n        this.model.set('keyAlias', element.value, {silent: true});\n    },\n\n\n    render: function(options) {\n        options = options || {};\n\n        this.type = options.type;\n\n        var isServerType = this._isServerLevel(this.type),\n            isServerOrRootType = isServerType || this.type === exportTypesEnum.ROOT_TENANT;\n\n        isServerOrRootType\n            ? this.$el.addClass(\"with-events\")\n            : this.$el.removeClass(\"with-events\");\n\n        this.stopListening(this.model, \"change:includeSubOrganizations\", this.filterAuthoritiesBySubOrgs);\n\n        this._resetModel(options);\n\n        let encryptionHint = i18n['export.dialog.file.properties.encryption.hint'];\n\n        if (awsSettings.productTypeIsJrsAmi || awsSettings.productTypeIsMpAmi) {\n            encryptionHint = i18n['export.dialog.file.properties.encryption.hint.aws'];\n        }\n        var self = this;\n        this.customKeyStateModel.getCustomKeys().done(function(response) {\n            if(response && response.responseJSON && response.responseJSON.error){\n                customKeyFailure(self, options, encryptionHint, isServerOrRootType, isServerType, response);\n            } else {\n                response.length && self.model.set('keyAlias',response[0].alias);\n                renderSecTemplate(self, options, encryptionHint, isServerOrRootType, isServerType, response);\n                for (var i = 0; i < response.length; ++i) {\n                    var element = $(\"<option />\").attr(\"value\", response[i].alias);\n                    element.text(response[i].label ? response[i].label : response[i].alias);\n                    self.$el.find('#importCustomKey').append(element);\n                }\n            }\n        }).fail(function (response) {\n            customKeyFailure(self, options, encryptionHint, isServerOrRootType, isServerType, response);\n        });\n        return this;\n    },\n\n    doExport: function() {\n        var self = this;\n\n        if (this.model.isValid(true)) {\n            this.loadingDialog.open();\n            this.model.save().done(function(status) {\n                self.stateModel.unset(\"warnings\", {silent: true});\n                self.stateModel.set(status);\n                self.model.set(\"id\", status.id);\n            });\n        }\n    },\n\n    handleExportPhase: function() {\n        var phase = this.stateModel.get(\"phase\"),\n            brokenDependencies = this._getBrokenDependencies(),\n            notificationOptions;\n\n        if (phase == ExportStateModel.STATE.READY) {\n            this.loadingDialog.close();\n            if (!_.isEmpty(brokenDependencies)) {\n                this.dependentResourcesDialogView.open({items: brokenDependencies});\n            } else {\n                downloadFile.call(this);\n                notificationOptions = {\n                    message: i18n[\"export.finished\"],\n                    type: \"success\"\n                };\n            }\n        }\n\n        if (phase == ExportStateModel.STATE.FAILED) {\n            notificationOptions = {\n                message: i18n[\"export.error.unexpected\"]\n            };\n        }\n\n        if (phase == ExportStateModel.STATE.CANCELLED) {\n            notificationOptions = {\n                message: i18n[\"export.error.cancelled\"]\n            };\n        }\n\n        notificationOptions && this._showNotification(notificationOptions);\n    },\n\n    filterAuthoritiesBySubOrgs: function(){\n        var contextMixin = {excludeSubOrgs: !this.model.get(\"includeSubOrganizations\")};\n\n        this.rolesList.model.setContext(contextMixin);\n        this.usersList.model.setContext(contextMixin);\n    },\n\n    bindWithRoles: function(selection) {\n        this.model.set({roles: selection});\n        this.onUsersToRolesChange();\n        if (selection.length) {\n            this.rolesToUsers.setContext({roles: selection});\n        } else {\n            this.rolesToUsers.set({items: []});\n        }\n    },\n\n    bindWithUsers: function(selection) {\n        this.model.set({users: selection});\n        this.onRolesToUsersChange();\n        if (selection.length) {\n            this.usersToRoles.setContext({users: selection});\n        } else {\n            this.usersToRoles.set({items: []});\n        }\n    },\n\n    changeEnabledState: function() {\n        var value = this.model.get(\"everything\");\n\n        this.rolesList.setDisabled(value || this.model.get(\"rolesForUser\"));\n        this.usersList.setDisabled(value || this.model.get(\"userForRoles\"));\n        if (value) {\n            this.rolesList.selectNone();\n            this.usersList.selectNone();\n        }\n    },\n\n    includeRolesByUsers: function(evt) {\n        var val = $(evt.target).is(\":checked\");\n        this.model.set({rolesForUser: !val, userForRoles: val});\n        this.onRolesToUsersChange();\n\n        this._includeUsersOrRoles(!val, val);\n    },\n\n    includeUsersWithRoles: function(evt) {\n        var val = $(evt.target).is(\":checked\");\n        this.model.set({rolesForUser: val, userForRoles: !val});\n        this.onUsersToRolesChange();\n\n        this._includeUsersOrRoles(val, !val);\n    },\n\n    includeSelectedRolesUsersOnly: function(evt) {\n        if ($(evt.target).is(\":checked\")) {\n            this.model.set({userForRoles: false, rolesForUser: false});\n            this.onRolesToUsersChange();\n            this.onUsersToRolesChange();\n\n            this._includeUsersOrRoles(false, false);\n        }\n    },\n    sendParameters: function(evt) {\n        this.model.isValid(true) && this.model.save();\n    },\n\n    onRolesToUsersChange: function() {\n        if (this.model.get(\"userForRoles\")) {\n            this.usersList.highlightSet(_.map(this.rolesToUsers.get(\"items\"), function(item) {\n                return item.username + (item.tenantId ? \"|\" + item.tenantId : \"\")\n            }));\n            this.rolesList.highlightSet([]);\n        } else {\n            this.usersList.highlightSet([]);\n        }\n    },\n\n    onUsersToRolesChange: function() {\n        if (this.model.get(\"rolesForUser\")) {\n            this.rolesList.highlightSet(_.map(this.usersToRoles.get(\"items\"), function(item) {\n                return item.name + (item.tenantId ? \"|\" + item.tenantId : \"\")\n            }));\n            this.usersList.highlightSet([]);\n        } else {\n            this.rolesList.highlightSet([]);\n        }\n    },\n\n    _isServerLevel: function(type) {\n        return type === exportTypesEnum.SERVER_CE || type === exportTypesEnum.SERVER_PRO;\n    },\n\n    _includeUsersOrRoles: function(rolesForUser, userForRoles) {\n        this.rolesList.setDisabled(rolesForUser);\n        this.usersList.setDisabled(userForRoles);\n        this.rolesList.selectNone();\n        this.usersList.selectNone();\n    },\n\n    _showNotification: function(options) {\n        options = _.defaults(options, {type: \"warning\"});\n\n        this.loadingDialog.isVisible() && this.loadingDialog.close();\n        this.notification.show({\n            delay: false,\n            message: options.message,\n            type: options.type\n        });\n    },\n\n    _getBrokenDependencies: function() {\n        var warnings = this.stateModel.get(\"warnings\"),\n            paths = [];\n\n        _.each(warnings, function(value) {\n            if (value.code === \"export.broken.dependency\") {\n                paths.push(value.parameters);\n            }\n        });\n\n        return _.flatten(_.sortBy(paths, function (path) { return path; }));\n    },\n\n    _clickOnCheckbox: function(evt) {\n        var checkbox = $(evt.target).next();\n        if (!checkbox[0].disabled) {\n            this.model.set(checkbox[0].name, !checkbox[0].checked);\n        }\n    },\n\n    _onModelChange: function() {\n        this.model.isValid(true);\n    },\n\n    _resetModel: function(options) {\n        var modelOptions = {\n            organization: this.type == exportTypesEnum.REPOSITORY ? null : options.tenantId\n        };\n\n        if (this.type === exportTypesEnum.ROOT_TENANT || this.type === exportTypesEnum.TENANT) {\n            var fileName = this.type === exportTypesEnum.ROOT_TENANT ? \"root_export.zip\" : options.tenantId + \"_export.zip\";\n\n            _.extend(modelOptions, {fileName: fileName});\n        }\n\n        this.model.reset(modelOptions, this.type);\n    }\n});\n\n_.extend(ExportView.prototype, epoxyViewMixin);\n\nfunction customKeyFailure(self, options, encryptionHint, isServerOrRootType, isServerType, response) {\n    renderSecTemplate(self, options, encryptionHint, isServerOrRootType, isServerType, []);\n    self.notification.show({\n        delay: false,\n        message: response && response.responseJSON && response.responseJSON.message\n    });\n    self.trigger('error', self, response);\n}\n\nfunction initializeAuthorityPickers(options){\n    this.rolesList = new AuthorityPickerView({\n        model: AuthorityModel.instance(\"rest_v2/{{if (tenantId) { }}organizations/{{-tenantId}}/{{ } }}roles?q={{-searchString}}{{ if (excludeSubOrgs) { }}&includeSubOrgs=false{{ } }}\", {tenantId: options.tenantId}),\n        customClass: \"selectedRoles\",\n        title: i18n[\"export.dialog.roles.users.roles.label\"],\n        selectLabel: i18n[\"export.dialog.roles.users.select.all.roles.label\"]\n    });\n\n    this.rolesList.on(\"change:selection\", this.bindWithRoles);\n    this.rolesList.render();\n\n    this.usersList = new AuthorityPickerView({\n        model: AuthorityModel.instance(\"rest_v2/{{if (tenantId) { }}organizations/{{-tenantId}}/{{ } }}users?q={{-searchString}}{{ if (excludeSubOrgs) { }}&includeSubOrgs=false{{ } }}\", {tenantId: options.tenantId}),\n        customClass: \"select selectedUsers\",\n        title: i18n[\"export.dialog.roles.users.users.label\"],\n        selectLabel: i18n[\"export.dialog.roles.users.select.all.users.label\"]\n    });\n\n    this.usersList.on(\"change:selection\", this.bindWithUsers);\n    this.usersList.render();\n\n    this.rolesToUsers = AuthorityModel.instance(\"rest_v2/users?hasAllRequiredRoles=false{{ if (roles) for (var i = 0; i < roles.length; i++) { }}&requiredRole={{-roles[i]}}{{ } }}\");\n    this.rolesToUsers.on(\"change\", this.onRolesToUsersChange);\n\n    this.usersToRoles = AuthorityModel.instance(\"rest_v2/roles?hasAllUsers=false{{ if (users) for (var i = 0; i < users.length; i++) { }}&user={{-users[i]}}{{ } }}\");\n    this.usersToRoles.on(\"change\", this.onUsersToRolesChange);\n\n    this.changeEnabledState();\n    this.listenTo(this.model, \"change:everything\", this.changeEnabledState);\n\n    this.$el.find(\".selectRolesUsers\").append(this.rolesList.el).append(this.usersList.el);\n\n    this.listenTo(this.model, \"change:includeSubOrganizations\", this.filterAuthoritiesBySubOrgs);\n}\nfunction renderSecTemplate(self, options, encryptionHint, isServerOrRootType, isServerType, response) {\n    self.template = _.template(exportTemplateFactory(options))({\n        everything: false,\n        i18n: i18n,\n        i18n2: i18n2,\n        encryptionHint: encryptionHint,\n        isServerOrRootType: isServerOrRootType,\n        isServerLevel: isServerType,\n        isServerCe: self.type === exportTypesEnum.SERVER_CE,\n        isRepository: self.type === exportTypesEnum.REPOSITORY,\n        isSubOrgLevel: options.isSubOrgLevel,\n        model: _.extend(self.model.toJSON(), {\n            secureKeyTypes: secureKeyTypeEnum\n        }),\n        showCustomKey: response.length === 0 ? false : true,\n        showKeyValue: false,\n        exportMode: true\n    });\n    self.$el.html(self.template);\n    if (self.$(\".selectRolesUsers\").length) {\n        initializeAuthorityPickers.call(self, options);\n    }\n    self.applyEpoxyBindings();\n}\n\nfunction downloadFile() {\n    var iframe = document.createElement(\"iframe\");\n    iframe.src = this.model.url() + \"/\" + this.stateModel.id + \"/\" + this.model.get(\"fileName\");\n    iframe.style.display = \"none\";\n    $(\"body\").append(iframe);\n}\n\nfunction cancelExportTask(phase) {\n    this.model.cancel();\n    this.stateModel.set(\"phase\", phase);\n}\n\nexport default ExportView;","export default \"<div class=\\\"section file-name\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{ if (!isRepository) { }} <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.file.properties\\\"] }}</p> {{ } }}\\n    <div class=\\\"group\\\">\\n        <div class=\\\"control input\\\" data-bind=\\\"validationErrorClass:fileName\\\" data-model-attr=\\\"fileName\\\">\\n            <span class=\\\"wrap\\\">{{- i18n[\\\"export.dialog.file.properties.data.file.name\\\"]}}</span>\\n            <input type=\\\"text\\\" class=\\\"fileName\\\"  data-bind=\\\"value:fileName, events:['keyup']\\\"/>\\n            <p class=\\\"message hint jr-jEncryptionHint\\\">{{- encryptionHint }}</p>\\n            <span class=\\\"message warning fileNameMessage\\\" data-bind=\\\"validationErrorText:fileName\\\" data-model-attr=\\\"fileName\\\"></span>\\n        </div>\\n\\n        {{ if (0) { }}\\n        <div class=\\\"control checkBox encryptFileWrapper\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.file.properties.encrypt.file\\\"] }}</label>\\n            <input class=\\\"encryptFile\\\" name=\\\"encryptFile\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:encryptFile\\\">\\n        </div>\\n        {{ } }}\\n    </div>\\n</div>\\n\";","export default \"<div class=\\\"export-options\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{ if (!isRepository) { }}\\n    <p class=\\\"title export-options-title\\\">{{- i18n[\\\"export.dialog.options\\\"] }}</p>\\n    <div class=\\\"section everything\\\">\\n        <div class=\\\"control checkBox everything\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.everything\\\"] }}</label>\\n            <input class=\\\"everything\\\" name=\\\"everything\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:everything\\\">\\n        </div>\\n    </div>\\n    {{ } }}\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport classUtil from './classUtil';\nvar ARGS_TYPE = {\n    INDEX: 'index',\n    KEY_VALUE: 'keyValue'\n};\nvar DEFAILT_KEY_VALUE_SEPARATOR = ', ';\nvar i18nMessage = classUtil.extend({\n    constructor: function (code) {\n        this.code = code;\n        this.args = Array.prototype.slice.call(arguments, 1);\n    },\n    bundle: {}\n});\ni18nMessage.prototype.toString = function () {\n    var text = this.bundle[this.code];\n    if (!text) {\n        return this.code;\n    }\n    var argsType = this._getArgsType(this.args);\n    if (argsType === ARGS_TYPE.INDEX) {\n        text = this._interpolateIndexArgs(this.args, text);\n    } else if (argsType === ARGS_TYPE.KEY_VALUE) {\n        text = this._interpolateObjectArgs(this.args, text);\n    }\n    return text;\n};\ni18nMessage.prototype._getArgsType = function (args) {\n    if (args && args.length) {\n        var firstArg = _.first(args);\n        return _.isObject(firstArg) ? ARGS_TYPE.KEY_VALUE : ARGS_TYPE.INDEX;\n    }\n};\ni18nMessage.prototype._interpolateObjectArgs = function (args, text) {\n    var separator = args[0].separator || DEFAILT_KEY_VALUE_SEPARATOR;\n    var formattedArgs = args.reduce(function (memo, argument) {\n        var key = argument.key, value = argument.value;\n        if (memo[key]) {\n            memo[key] = memo[key] + separator;\n        } else {\n            memo[key] = '';\n        }\n        memo[key] = memo[key] + value;\n        return memo;\n    }, {});\n    text = _.keys(formattedArgs).reduce(function (memo, key) {\n        var value = formattedArgs[key], regexp = '\\\\{' + key + '\\\\}';\n        return memo.replace(new RegExp(regexp, 'g'), value);\n    }, text);\n    return text;\n};\ni18nMessage.prototype._interpolateIndexArgs = function (args, text) {\n    for (var i = 0, l = args.length; i < l; i++) {\n        var parameter = args[i], regexp = '\\\\{' + i + '\\\\}';\n        text = text.replace(new RegExp(regexp, 'g'), parameter);\n    }\n    return text;\n};\ni18nMessage.create = function (bundle) {\n    return function (code) {\n        var message = Object.create(i18nMessage.prototype);\n        message = _.extend(message, {\n            bundle: bundle,\n            code: code,\n            args: Array.prototype.slice.call(arguments, 1)\n        });\n        return message.toString(message);\n    };\n};\nexport default i18nMessage;"],"sourceRoot":""}