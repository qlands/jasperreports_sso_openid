{"version":3,"sources":["webpack://jrs-ui/./src/resource/resource.base.js","webpack://jrs-ui/./src/resource/resource.dataType.js","webpack://jrs-ui/./src/components/components.calendarInput.js","webpack://jrs-ui/./src/addResource/dataType/addDataType.common.js","webpack://jrs-ui/./src/config/dateAndTimeSettings.js","webpack://jrs-ui/./src/settings/settingsStore.js","webpack://jrs-ui/../js-sdk/src/common/extension/jQueryDatepickerExtension.js","webpack://jrs-ui/../js-sdk/src/common/extension/jQueryTimepickerExtension.js","webpack://jrs-ui/../js-sdk/src/components/dateAndTime/DateAndTimePicker.js","webpack://jrs-ui/../js-sdk/src/components/dateAndTime/template/dateTimePopupContainer.htm","webpack://jrs-ui/./src/settings/dateTimeSettings.settings.js"],"names":["resource","messages","resourceLabelMaxLength","resourceIdMaxLength","resourceDescriptionMaxLength","PROPAGATE_EVENT","STEP_DISPLAY_ID","FLOW_CONTROLS_ID","initSwipeScroll","display","jQuery","TouchController","parent","parents","eq","submitForm","formId","params","fillForm","url","buildActionUrl","attr","submit","registerClickHandlers","handlers","observeElementSelector","addAtBeginning","_bodyClickEventHandlers","Array","prototype","unshift","push","apply","selector","on","event","each","clickEventHandler","result","Event","stop","$break","TreeWrapper","options","that","this","_treeId","treeId","_resourceUriInput","resourceUriInput","_uri","getValue","uri","providerId","interpolate","id","treeOptions","inject","treeOption","key","_tree","dynamicTree","observe","openAndSelectNode","memo","node","param","setValue","getTreeId","getTree","selectFolder","folderUri","getSelectedFolderUri","switchButtonState","button","state","buttonManager","call","switchDisableState","element","disable","generateResourceId","name","window","localContext","initOptions","resourceIdNotSupportedSymbols","replace","RegExp","testResourceId","resourceId","test","labelValidator","value","isValid","errorMessage","blank","length","getLabelValidationEntry","validators","method","mandatory","tooLong","maxLength","getIdValidationEntry","resourceIdValidator","_isEditMode","getDescriptionValidationEntry","descriptionValidator","dataSourceValidator","trim","queryValidator","getValidationEntries","elementsToValidate","collect","validationEntry","validator","PAGE_ID","DATA_TYPE_ID","LABEL_ID","RESOURCE_ID_ID","DESCRIPTION_ID","SAVE_BUTTON_ID","CHANGE_TYPE_BUTTON_ID","_canGenerateId","initialize","_form","find","_dataType","_label","_resourceId","_description","_saveButton","_changeTypeButton","isEditMode","_initEvents","click","bindAsEventListener","e","_isDataValid","stopPropagation","target","include","ValidationModule","bind","CalendarInputComponent","container","jquery","onChange","onchange","isReadOnly","readOnly","hasDate","date","hasTime","time","pickerOptions","_","defaultPickerOptions","dateTimeSettings","picker","field","showOn","buttonText","changeYear","changeMonth","showButtonPanel","onChangeMonthYear","beforeShow","create","inputField","cancelEventBubbling","append","pickerType","next","addClass","val","jrsConfigs","minPicker","$","maxPicker","resourceDataType","isIPad","userLocale","availableLocales","postfix","locale","substring","DateAndTimePicker","_jasperPrefix","_mainDivId","_jasperPopupClass","originalNewInst","arguments","dpDiv","removeClass","originalGoToToday","_selectDate","$input","opts","year","month","datepicker","timepicker","currentYear","selectedYear","currentMonth","selectedMonth","currentDay","selectedDay","_updateDateTime","instance","originalOnTimeChange","_onTimeChange","$timeObj","setSelectionRange","DATE_TIME_DEFAULTS","stepHour","stepMinute","stepSecond","showSecond","constrainInput","TIME_DEFAULTS","log","logger","err","warn","Backbone","constructor","hasOwnProperty","dateFormat","timeFormat","inline","el","skipMoving","discoverPickerType","provideDefaultPickerOptions","fixPopupPositionAndStyling","self","$el","_callPickerAction","getDate","getTime","setDate","debug","show","hide","remove","empty","off","stopListening","setDefaults","configs","Helpers","movePickerRelativelyToTriggerIcon","stylePopupContainer","type","originalBeforeShowFn","afterInject","inst","input","offset","left","width","parseFloat","css","move","offsetWidth","marginLeft","$dpDiv","$popupContainer","$parent","is","detach"],"mappings":"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","file":"_chunks/chunk.7256.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport {$break} from 'prototype';\nimport TouchController from '../util/touch.controller';\nimport {buildActionUrl} from \"../util/utils.common\";\nimport buttonManager from '../core/core.events.bis';\nimport dynamicTree from '../dynamicTree/dynamicTree.utils';\nimport jQuery from 'jquery';\n\nvar resource = {\n    messages: {},\n    resourceLabelMaxLength: 100,\n    resourceIdMaxLength: 100,\n    resourceDescriptionMaxLength: 250,\n    PROPAGATE_EVENT: 'propagateEvent',\n    STEP_DISPLAY_ID: 'stepDisplay',\n    FLOW_CONTROLS_ID: 'flowControls',\n    initSwipeScroll: function () {\n        var display = jQuery('#' + resource.STEP_DISPLAY_ID)[0];    //        var hasControls = $(resource.FLOW_CONTROLS_ID).childElements().length > 0;\n        //\n        //        var scrollElement = hasControls ? display.up() : display;\n        //        var hasControls = $(resource.FLOW_CONTROLS_ID).childElements().length > 0;\n        //\n        //        var scrollElement = hasControls ? display.up() : display;\n        display && new TouchController(display.parent(), display.parents().eq(2), {}    //            debug: true\n        );\n    },\n    submitForm: function (formId, params, fillForm) {\n        if (!params) {\n            return;\n        }    // prepare action url\n        // prepare action url\n        var url = buildActionUrl(params);\n        fillForm && fillForm();    // write form attributes and submit it\n        // write form attributes and submit it\n        jQuery('#' + formId).attr('method', 'post').attr('action', url);\n        jQuery('#' + formId)[0].submit();\n    },\n    // Setup main event handler for click events on Add Resource pages.\n    registerClickHandlers: function (handlers, observeElementSelector, addAtBeginning) {\n        if (resource._bodyClickEventHandlers) {\n            //If we want some handlers to fire before others we should pass addAtBeginning = true\n            (addAtBeginning ? Array.prototype.unshift : Array.prototype.push).apply(resource._bodyClickEventHandlers, handlers);\n            return;\n        }\n        resource._bodyClickEventHandlers = handlers;\n        var selector = observeElementSelector || 'body';\n        jQuery(selector).on('click', function (event) {\n            resource._bodyClickEventHandlers && resource._bodyClickEventHandlers.each(function (clickEventHandler) {\n                var result = clickEventHandler(event);    //if handler returns some result\n                //this means that we have found necessary handler so\n                //do not need to process other\n                //if handler returns some result\n                //this means that we have found necessary handler so\n                //do not need to process other\n                if (result) {\n                    if (result !== resource.PROPAGATE_EVENT) {\n                        Event.stop(event);\n                    }\n                    throw $break;\n                }\n            });\n        });\n    },\n    TreeWrapper: function (options) {\n        var that = this;\n        this._treeId = options.treeId;\n        this._resourceUriInput = jQuery('#' + options.resourceUriInput || '#resourceUri')[0];\n        this._uri = this._resourceUriInput && this._resourceUriInput.getValue() || options.uri || '/';\n        if (!options.providerId)\n            throw 'There is no tree provider set for tree #{id}'.interpolate({ id: this._treeId });    // Setup folders tree\n        // Setup folders tree\n        var treeOptions = [\n            'providerId',\n            'rootUri',\n            'organizationId',\n            'publicFolderUri',\n            'urlGetNode',\n            'urlGetChildren'\n        ].inject({}, function (treeOption, key) {\n            options[key] !== null && (treeOption[key] = options[key]);\n            return treeOption;\n        });\n        this._tree = new dynamicTree.createRepositoryTree(this._treeId, treeOptions);\n        this._tree.observe('tree:loaded', function () {\n            that._tree.openAndSelectNode(jQuery('#' + that._resourceUriInput)[0].getValue());\n        });\n        this._tree.observe('leaf:selected', function (event) {\n            that._uri = event.memo.node.param.uri;\n            that._resourceUriInput.setValue(that._uri);\n        });\n        this._tree.observe('node:selected', function () {\n            that._resourceUriInput.setValue(that._uri = '');\n        });\n        return {\n            getTreeId: function () {\n                return that._treeId;\n            },\n            getTree: function () {\n                return that._tree;\n            },\n            selectFolder: function (folderUri) {\n                that._tree.openAndSelectNode(folderUri);\n            },\n            getSelectedFolderUri: function () {\n                return that._uri;\n            }\n        };\n    },\n    ////////////////////////////////\n    // Utility Methods\n    ////////////////////////////////\n    switchButtonState: function (button, state) {\n        buttonManager[state ? 'enable' : 'disable'].call(buttonManager, button);\n    },\n    switchDisableState: function (element, disable) {\n        (element = jQuery(element)[0]) && element[disable ? 'disable' : 'enable'].call(element);\n    },\n    generateResourceId: function (name) {\n        if (window.localContext && window.localContext.initOptions && window.localContext.initOptions.resourceIdNotSupportedSymbols) {\n            return name.replace(new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols, 'g'), '_');\n        } else {\n            throw 'There is no resourceIdNotSupportedSymbols property in init options.';\n        }\n    },\n    testResourceId: function (resourceId) {\n        if (window.localContext && window.localContext.initOptions && window.localContext.initOptions.resourceIdNotSupportedSymbols) {\n            return new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols, 'g').test(resourceId);\n        } else {\n            throw 'There is no resourceIdNotSupportedSymbols property in init options.';\n        }\n    },\n    labelValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['labelIsEmpty'];\n            isValid = false;\n        } else if (value.length > resource.resourceLabelMaxLength) {\n            errorMessage = resource.messages['labelToLong'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getLabelValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [\n                {\n                    method: 'mandatory',\n                    messages: { mandatory: resource.messages['labelIsEmpty'] }\n                },\n                {\n                    method: 'minMaxLength',\n                    messages: { tooLong: resource.messages['labelToLong'] },\n                    options: { maxLength: resource.resourceLabelMaxLength }\n                }\n            ]\n        };\n    },\n    getIdValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [\n                {\n                    method: 'resourceIdChars',\n                    messages: resource.messages\n                },\n                {\n                    method: 'mandatory',\n                    messages: { mandatory: resource.messages['resourceIdIsEmpty'] }\n                },\n                {\n                    method: 'minMaxLength',\n                    messages: { tooLong: resource.messages['resourceIdToLong'] },\n                    options: { maxLength: resource.resourceIdMaxLength }\n                }\n            ]\n        };\n    },\n    /**\n     * The context of this method should contain _isEditMode property. Id it is true then validator will not validate\n     * the value but will return isValid=true.\n     */\n    resourceIdValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (!this._isEditMode) {\n            if (value.blank()) {\n                errorMessage = resource.messages['resourceIdIsEmpty'];\n                isValid = false;\n            } else if (value.length > resource.resourceIdMaxLength) {\n                errorMessage = resource.messages['resourceIdToLong'];\n                isValid = false;\n            } else if (resource.testResourceId(value)) {\n                errorMessage = resource.messages['resourceIdInvalidChars'];\n                isValid = false;\n            }\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getDescriptionValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [{\n                method: 'minMaxLength',\n                messages: { tooLong: resource.messages['descriptionToLong'] },\n                options: { maxLength: resource.resourceDescriptionMaxLength }\n            }]\n        };\n    },\n    descriptionValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.length > resource.resourceDescriptionMaxLength) {\n            errorMessage = resource.messages['descriptionToLong'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    dataSourceValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.trim() === '') {\n            errorMessage = resource.messages['dataSourceInvalid'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    queryValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.trim() === '') {\n            errorMessage = resource.messages['queryInvalid'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getValidationEntries: function (elementsToValidate) {\n        // To use this method all elements should have validator or validationEntry property set.\n        return elementsToValidate.collect(function (element) {\n            if (element.validationEntry) {\n                return element.validationEntry;\n            } else {\n                return {\n                    validator: element.validator,\n                    element: element\n                };\n            }\n        });\n    }\n};\n\nexport default resource;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport jQuery from 'jquery';\nimport resource from './resource.base';\nimport {ValidationModule} from \"../util/utils.common\";\n\nvar resourceDataType = {\n    PAGE_ID: 'addResource_dataType',\n    DATA_TYPE_ID: 'dataType\\\\.dataTypeType',\n    LABEL_ID: 'dataType\\\\.label',\n    RESOURCE_ID_ID: 'dataType\\\\.name',\n    DESCRIPTION_ID: 'dataType\\\\.description',\n    SAVE_BUTTON_ID: 'done',\n    CHANGE_TYPE_BUTTON_ID: 'changeCombo',\n    _canGenerateId: true,\n    initialize: function (options) {\n        this._form = jQuery('#' +this.PAGE_ID).find('form')[0];\n        this._dataType = jQuery('#' +this.DATA_TYPE_ID)[0];\n        this._label = jQuery('#' +this.LABEL_ID)[0];\n        this._resourceId = jQuery('#' +this.RESOURCE_ID_ID)[0];\n        this._description = jQuery('#' +this.DESCRIPTION_ID)[0];\n        this._saveButton = jQuery('#' +this.SAVE_BUTTON_ID);\n        this._changeTypeButton = jQuery('#' +this.CHANGE_TYPE_BUTTON_ID)[0];\n        this._isEditMode = options.isEditMode;\n        this._label.validator = resource.labelValidator.bind(this);\n        this._resourceId.validator = resource.resourceIdValidator.bind(this);\n        this._description.validator = resource.descriptionValidator.bind(this);\n        this._initEvents();\n    },\n    _initEvents: function () {\n        this._dataType.observe('change', function () {\n            this._changeTypeButton.click();\n        }.bindAsEventListener(this));\n        this._saveButton.on('click', function (e) {\n            if (!this._isDataValid()) {\n                e.stopPropagation();\n            }\n        }.bindAsEventListener(this));\n        jQuery(this._form).on('keyup', function (e) {\n            var element = e.target;\n            var targetElements = [\n                this._label,\n                this._resourceId,\n                this._description\n            ];\n            if (targetElements.include(element)) {\n                ValidationModule.validate(resource.getValidationEntries([element]));\n                if (element == this._resourceId && this._resourceId.getValue() != resource.generateResourceId(this._label.getValue())) {\n                    this._canGenerateId = false;\n                }\n                if (element == this._label && !this._isEditMode && this._canGenerateId) {\n                    this._resourceId.setValue(resource.generateResourceId(this._label.getValue()));\n                    ValidationModule.validate(resource.getValidationEntries([this._resourceId]));\n                }\n            }\n        }.bind(this));\n    },\n    _isDataValid: function () {\n        var elementsToValidate = [\n            this._label,\n            this._resourceId,\n            this._description\n        ];\n        return ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    }\n};\n\nexport default resourceDataType;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport jQuery from 'jquery';\nimport _ from 'underscore';\nimport dateTimeSettings from '../settings/dateTimeSettings.settings';\nimport {cancelEventBubbling} from '../util/utils.common';\nimport '../config/dateAndTimeSettings';\n\nvar CalendarInputComponent = function (options) {\n    this.container = null;\n    if (typeof options.container !== 'undefined') {\n        this.container = typeof options.container.jquery === 'undefined' ? jQuery(options.container) : options.container;\n    }\n    this.name = options.name;\n    this.id = options.name.replace('.', '_');\n    this.value = options.value;\n    this.onChange = options.onchange || null;\n    this.isReadOnly = typeof options.readOnly === 'undefined' ? false : options.readOnly;\n    this.hasDate = typeof options.date !== 'undefined' && options.date !== '' && options.date === 'true';\n    this.hasTime = typeof options.time !== 'undefined' && options.time !== '' && options.time === 'true';\n    this.pickerOptions = _.extend({}, this.defaultPickerOptions);\n    this.hasDate && _.extend(this.pickerOptions, dateTimeSettings.datepicker);\n    this.hasTime && _.extend(this.pickerOptions, dateTimeSettings.timepicker);\n    if (typeof options.picker !== 'undefined' && _.isObject(options.picker)) {\n        _.extend(this.pickerOptions, options.picker);\n    }\n    this.field = null;\n};\nCalendarInputComponent.prototype.defaultPickerOptions = {\n    showOn: 'button',\n    buttonText: '',\n    changeYear: true,\n    changeMonth: true,\n    showButtonPanel: true,\n    onChangeMonthYear: null,\n    beforeShow: jQuery.datepicker.movePickerRelativelyToTriggerIcon\n};\nCalendarInputComponent.prototype.create = function () {\n    var inputField = jQuery('<input type=\\'text\\'/>').attr({\n        name: this.name,\n        id: this.id,\n        value: this.value\n    });\n    inputField.on('mousedown', cancelEventBubbling);\n    if (this.onChange) {\n        inputField.on('change', this.onChange);\n    }\n    if (this.isReadOnly) {\n        inputField.attr('disabled', 'disabled');\n    }\n    this.field = inputField;\n    this.container.append(this.field);\n    if (!this.isReadOnly) {\n        var pickerType = this.hasDate ? 'date' : '';\n        pickerType += this.hasTime ? 'time' : '';\n        pickerType += 'picker';\n        jQuery.fn[pickerType].call(inputField, this.pickerOptions).next().addClass('button').addClass('picker');    // Prototype.js compatibility\n        // Prototype.js compatibility\n        inputField[0].getValue = function () {\n            return jQuery(this).val();\n        };\n    }\n};\nexport default CalendarInputComponent;","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport resourceDataType from '../../resource/resource.dataType';\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport CalendarInputComponent from '../../components/components.calendarInput';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport resource from '../../resource/resource.base';\nimport {isIPad} from \"../../util/utils.common\";\n\nvar options = jrsConfigs.addDataType.localContext.initOptions;\n_.extend(window.localContext, jrsConfigs.addDataType.localContext);\n_.extend(resource.messages, jrsConfigs.addDataType.resource.messages);\nif (hasDateOrTimePickers()) {\n    var minPicker = new CalendarInputComponent(jrsConfigs.addDataType.minValueText);\n    minPicker.container = $('label.minPicker');\n    minPicker.create();\n    var maxPicker = new CalendarInputComponent(jrsConfigs.addDataType.maxValueText);\n    maxPicker.container = $('label.maxPicker');\n    maxPicker.create();\n}\nresourceDataType.initialize(options);\nisIPad() && resource.initSwipeScroll();    //workraround to make jquery-ui work properly with 'jr' prefix\n//workraround to make jquery-ui work properly with 'jr' prefix\n$('body').addClass('jr');\n\nfunction hasDateOrTimePickers() {\n    return _.indexOf([\n        3,\n        4,\n        5\n    ], jrsConfigs.addDataType.type) > -1;\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport $ from 'jquery';\nimport _ from 'underscore';\n\nimport dateTimeSettings from '../settings/dateTimeSettings.settings';\nimport DateAndTimePicker from 'js-sdk/src/components/dateAndTime/DateAndTimePicker';\n\nfunction getLocale(userLocale, availableLocales) {\n    var postfix = 'en';\n    if (userLocale) {\n        if (_.contains(availableLocales, userLocale)) {\n            postfix = userLocale;\n        } else if (_.contains(availableLocales, userLocale.substring(0, 2))) {\n            postfix = userLocale.substring(0, 2);\n        }\n    }\n    return postfix.replace('_', '-');\n}\nvar locale = getLocale(jrsConfigs.userLocale, jrsConfigs.availableLocales);\nDateAndTimePicker.setDefaults({\n    locale: locale,\n    date: dateTimeSettings.datepicker,\n    time: dateTimeSettings.timepicker\n});\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// This settings store will be filled with the actual settings loaded from the server\n\nexport default {};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\n\nimport 'jquery-ui/ui/widgets/datepicker';\n\nvar _jasperPrefix = \"jr\";\nvar _jasperPopupClass = \"jr-jDatepickerPopupContainer\";\n\nvar datepickerId = $.datepicker.dpDiv.attr(\"id\"),\n    _mainDivId = _jasperPrefix + \"-\" + datepickerId;\n\n$.datepicker._mainDivId = _mainDivId;\n\n$.datepicker.dpDiv.attr(\"id\", _mainDivId);\n\n$.datepicker.dpDiv.removeClass();\n\nvar dpDivClass = _jasperPopupClass\n    + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all '\n    + _jasperPrefix;\n\n$.datepicker.dpDiv.addClass(dpDivClass);\n\nvar originalNewInst = $.datepicker._newInst;\n\n$.datepicker._newInst = function() {\n    var result = originalNewInst.apply($.datepicker, arguments);\n\n    result.dpDiv.removeClass(_jasperPrefix);\n    result.dpDiv.addClass(_jasperPrefix);\n\n    return result;\n};\n\nvar originalGoToToday = $.datepicker._gotoToday;\n\n$.datepicker._gotoToday = function(id) {\n    originalGoToToday.call(this, id);\n    this._selectDate(id);\n};\n\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\n\nimport './jQueryDatepickerExtension';\nimport './jQueryUiSliderAccessExtension';\nimport 'jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon';\n\nvar originalNewInst = $.timepicker._newInst;\n\n$.timepicker._newInst = function($input, opts) {\n    if (!opts.onChangeMonthYear) {\n        opts.onChangeMonthYear = function(year, month, datepicker, timepicker) {\n            datepicker.currentYear = datepicker.selectedYear;\n            datepicker.currentMonth = datepicker.selectedMonth;\n            datepicker.currentDay = datepicker.selectedDay;\n\n            timepicker._updateDateTime(datepicker);\n        };\n    }\n\n    var instance = originalNewInst.call($.timepicker, $input, opts);\n\n    var originalOnTimeChange = instance._onTimeChange;\n\n    instance._onTimeChange = function() {\n        this.$timeObj[0].setSelectionRange = null;\n\n        return originalOnTimeChange.apply(this, arguments);\n    };\n\n    return instance;\n};\n\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n* @author: Igor Nesterenko\n* @version: $Id$\n*/\n\nimport Backbone from 'backbone';\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport popupContainerTemplate from './template/dateTimePopupContainer.htm';\n\nimport logger from \"../../common/logging/logger\";\n\nimport \"../../common/extension/jQueryTimepickerExtension\";\n\nvar DATE_TIME_DEFAULTS = {\n        stepHour: 1,\n        stepMinute: 1,\n        stepSecond: 1,\n        showSecond: true,\n        changeMonth: true,\n        changeYear: true,\n        showButtonPanel: true,\n        onChangeMonthYear: null,\n        constrainInput: false\n    },\n    TIME_DEFAULTS = {\n        showSecond:true,\n        constrainInput:false\n    };\n\nlet log = logger.register(\"DateAndTimePicker\");\n\n$.timepicker.log = function (err) {\n    //redirect error messages to our logger\n    log.warn(err);\n};\n\nexport default Backbone.View.extend({\n\n    /**\n     * @constructor DateAndTimePicker\n     * @class DateAndTimePicker\n     * @classdesc DateAndTimePicker decorator over jQuery datetime pickers\n     * @extends Backbone.View\n     * @param {object} options - mixin on Backbone standard properties and jQuery datetime pickers\n     * @description - You have to pass 'el' property to point to element in DOM. We have next behaviour\n     *  - by default it renders with  datetimepicker\n     *  - if only `dateFormat` it renders with datepicker\n     *  - if only `timeFormat` it renders with  timepicker\n     *  - if `dateFormat` and `timeFormat` specified it renders with datetimepicker\n     */\n\n    constructor: function (options) {\n        this.pickerOptions = _.clone(options);\n\n        if (this.pickerOptions.hasOwnProperty(\"dateFormat\") && !_.isString(this.pickerOptions.dateFormat)) {\n            delete this.pickerOptions.dateFormat;\n        }\n        if (this.pickerOptions.hasOwnProperty(\"timeFormat\") && !_.isString(this.pickerOptions.timeFormat)) {\n            delete this.pickerOptions.timeFormat;\n        }\n\n        this.inline = !!this.pickerOptions.el || false;\n        this.skipMoving = this.pickerOptions.skipMoving || false;\n        //clean up from backbone props\n        delete this.pickerOptions.el;\n        delete this.pickerOptions.skipMoving;\n\n        this.pickerType = discoverPickerType(this.pickerOptions);\n\n        this.pickerOptions = provideDefaultPickerOptions(this.pickerOptions, this.pickerType);\n\n        this.pickerOptions = fixPopupPositionAndStyling(this.pickerOptions, this.skipMoving);\n\n        this.log = options.log ? options.log : log;\n\n        Backbone.View.apply(this, arguments);\n    },\n\n    initialize: function () {\n        var self = this;\n\n        //initialize picker\n        this.$el[this.pickerType](this.pickerOptions);\n\n        this._callPickerAction = function (options) {\n            self.$el[self.pickerType](options);\n        }\n    },\n\n    /**\n     * @return {Date} - standart date object\n     * @description Return Date if components has it\n     */\n\n    getDate: function(){\n        var date;\n\n        if (this.pickerType !== \"timepicker\"){\n            date = this.$el[this.pickerType].getDate();\n        }else{\n            date = this.$el[this.pickerType].getTime();\n        }\n        return date;\n    },\n\n    /**\n     * @params {Date|String} date\n     * @return this\n     */\n\n    setDate: function(date){\n\n        if (!date) return this;\n\n        try{\n            //try to convert string to date object\n            // we don't need to convert time because setTime method accepts string time format\n            if (_.isString(date)){\n                if (this.pickerType === \"datetimepicker\") {\n                    date = $.datepicker.parseDateTime(this.pickerOptions.dateFormat, this.pickerOptions.timeFormat,  date);\n                } else if (this.pickerType === \"datepicker\") {\n                    date = $.datepicker.parseDate(this.pickerOptions.dateFormat, date);\n                }\n            }\n\n            if (this.pickerType === \"datepicker\"){\n                this.$el[this.pickerType](\"setDate\", date);\n            }else if (this.pickerType === \"timepicker\") {\n                this.$el[this.pickerType](\"setTime\", date);\n            }else if (this.pickerType === \"datetimepicker\"){\n                this.$el[this.pickerType](\"setTime\", date);\n                this.$el[this.pickerType](\"setDate\", date);\n            }\n\n        }catch(err){\n            this.log.debug(err);\n        }\n        return this;\n    },\n\n    /**\n     * @description Show picker\n     */\n\n    show: function () {\n        this._callPickerAction(\"show\");\n        return this;\n    },\n\n    /**\n     * @description Hide picker\n     */\n\n    hide: function () {\n        this._callPickerAction(\"hide\");\n        return this;\n    },\n\n    remove: function () {\n        this._callPickerAction(\"destroy\");\n        if (this.inline) {\n            this.$el.empty().off();\n            this.stopListening();\n        } else {\n            Backbone.View.prototype.remove.apply(this, arguments);\n        }\n\n    }\n\n}, {\n\n    /**\n     * @param {object} configs - which should contains 'locale', configs for 'date' amd configs for 'time'\n     * @description Provide defaults for locale specific configuration\n     */\n\n    setDefaults : function(configs){\n        $.datepicker.regional[configs.locale] = configs.date;\n        $.datepicker.setDefaults(configs.date);\n        $.timepicker.setDefaults(configs.time);\n    },\n\n    Helpers : {\n\n        fixPopupPositionAndStyling: fixPopupPositionAndStyling,\n\n        movePickerRelativelyToTriggerIcon: movePickerRelativelyToTriggerIcon,\n\n        stylePopupContainer: stylePopupContainer,\n\n        discoverPickerType: discoverPickerType,\n\n        provideDefaultPickerOptions: provideDefaultPickerOptions\n    }\n});\n\nfunction discoverPickerType(options) {\n    var result = \"datetimepicker\";\n    if (options.dateFormat && options.timeFormat) {\n        return result;\n    } else if (options.dateFormat) {\n        result = \"datepicker\"\n    } else if (options.timeFormat) {\n        result = \"timepicker\"\n    }\n    return result;\n}\n\nfunction provideDefaultPickerOptions(options, type){\n\n    var result = options;\n\n    if (\"datetimepicker\" == type || \"datepicker\" == type){\n        result = _.defaults(options, DATE_TIME_DEFAULTS);\n    }else if(\"timepicker\" == type){\n        result = _.defaults(options, TIME_DEFAULTS)\n    }\n\n    return result;\n}\n\nfunction fixPopupPositionAndStyling(options, skipMoving) {\n\n    var originalBeforeShowFn = options.beforeShow;\n\n    options.beforeShow = function () {\n        stylePopupContainer.apply(this, arguments);\n        skipMoving || movePickerRelativelyToTriggerIcon.apply(this, arguments);\n        originalBeforeShowFn && originalBeforeShowFn.apply(this, arguments);\n    };\n\n    options.afterInject = function() {\n        stylePopupContainer.apply(this, [this.$input[0], this.inst]);\n    };\n\n    return options;\n}\n\nfunction movePickerRelativelyToTriggerIcon(input, inst) {\n    var offset = $(input).offset().left;\n    var width = parseFloat(inst.dpDiv.css(\"width\").replace(\"px\", \"\"));\n    var move = offset + input.offsetWidth + width < $(window).width();\n    inst.dpDiv.css({\n        marginLeft: move ? input.offsetWidth + \"px\" : 0\n    });\n}\n\nfunction stylePopupContainer(input, inst) {\n    var $popupContainer = inst.dpDiv,\n        $parent = $popupContainer.parent(),\n        $dpDiv;\n\n    if ($parent && $parent.is('body')) {\n        $dpDiv = $popupContainer.detach();\n        $popupContainer = $(popupContainerTemplate);\n        $popupContainer.append($dpDiv);\n        $('body').append($popupContainer);\n    }\n}\n","export default \"<div class=\\\"jr-jDatepickerPopupContainer jr\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n</div>\\n\";","\n        import settingsStore from 'settingsStore';\n        settingsStore['dateTimeSettings'] = settingsStore['dateTimeSettings'] || {};\n        export default settingsStore['dateTimeSettings'];\n    "],"sourceRoot":""}