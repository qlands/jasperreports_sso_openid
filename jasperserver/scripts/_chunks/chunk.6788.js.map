{"version":3,"sources":["webpack://jrs-ui/./src/components/components.about.js","webpack://jrs-ui/./src/components/components.heartbeat.js","webpack://jrs-ui/./src/components/components.toolbarButtons.js","webpack://jrs-ui/./src/components/components.webHelp.js","webpack://jrs-ui/./src/config/dateAndTimeSettings.js","webpack://jrs-ui/./src/settings/settingsStore.js","webpack://jrs-ui/./src/stdnav/plugins/stdnavPluginActionMenu.js","webpack://jrs-ui/./src/stdnav/plugins/stdnavPluginDynamicList.js","webpack://jrs-ui/./src/stdnav/plugins/stdnavPluginForms.js","webpack://jrs-ui/./src/stdnav/plugins/stdnavPluginToolbar.js","webpack://jrs-ui/../js-sdk/src/common/extension/jQueryDatepickerExtension.js","webpack://jrs-ui/../js-sdk/src/common/extension/jQueryTimepickerExtension.js","webpack://jrs-ui/../js-sdk/src/common/stdnav/plugins/stdnavPluginAnchor.js","webpack://jrs-ui/../js-sdk/src/common/stdnav/plugins/stdnavPluginButton.js","webpack://jrs-ui/../js-sdk/src/common/stdnav/plugins/stdnavPluginGrid.js","webpack://jrs-ui/../js-sdk/src/common/stdnav/plugins/stdnavPluginList.js","webpack://jrs-ui/../js-sdk/src/common/stdnav/plugins/stdnavPluginTable.js","webpack://jrs-ui/../js-sdk/src/common/stdnav/plugins/stdnavPluginWorkflowCard.js","webpack://jrs-ui/../js-sdk/src/common/util/eventAutomation.js","webpack://jrs-ui/../js-sdk/src/components/dateAndTime/DateAndTimePicker.js","webpack://jrs-ui/../js-sdk/src/components/dateAndTime/template/dateTimePopupContainer.htm","webpack://jrs-ui/./src/settings/dateTimeSettings.settings.js"],"names":["about","initialize","aboutBox","registerListeners","show","dom","jQuery","hasClass","dialogs","_hide","$about","$aboutBoxCloseButton","on","e","preventDefault","stopPropagation","init","DOM_ID","PERMIT_CHECKBOX_ID","options","this","_baseUrl","baseUrl","_showDialog","showDialog","_sendClientInfo","sendClientInfo","_dom","_permit","_okButton","find","layoutModule","_okHandler","bind","url","checked","ajaxNonReturningUpdate","errorHandler","baseErrorHandler","start","focus","_doSendClientInfo","params","navigator","appName","appVersion","screen","width","height","colorDepth","postData","appendPostData","UP","DOWN","OVER","DISABLED","PRESSED","CONTENT_PREFIX","MenuClass","TOOLBAR_MENU_CLASS","ACTION_MODEL_TAG","CAPSULE_PATTERN","showButtonMenu","event","object","context","attr","model","actionModel","setActionModel","newActionModel","isToolBarButton","button","enable","buttonManager","disable","setButtonState","webHelpModule","currentContext","displayWebHelp","webHelpModuleState","__jrsConfigs__","helpURL","hostURL","pagePrefix","getPageForContext","window","name","open","setCurrentContext","userLocale","availableLocales","postfix","locale","jrsConfigs","_","substring","replace","DateAndTimePicker","date","dateTimeSettings","time","logger","log","gserial","stdnavPluginActionMenu","serial","menu_item_callbacks","click","prototype","zinit","selector","activate","behavior","_onDown","_onExit","_fixFocus","_fixSuperfocus","_onFocusIn","_onFocusOut","_onSubfocusIn","_onLeft","_onRight","_onSuperfocusIn","_onSuperfocusOut","_onUp","stdnav","navtype","navtype_tags","deactivate","element","newFocus","$el","$","is","items","length","lis","closest","prop","$root","$elem","$parentList","lastMenuBarItem","$currentList","_parentTabindex","$thisItem","$matched","$selected","primaryNavigation","removeAttr","$nav","document","activeElement","_focus_prev_menu_entry","entry","children","prev","next","debug","_focus_next_menu_entry","$ul","subel","_onExitHandler","$prev","$next","$menu","addClass","removeClass","stdnavPluginDynamicList","_ariaPrep","_ariaRefresh","_onEnter","el","error","$links","eventAutomation","$listEl","warn","listObj","dynamicList","getCursorElement","_fixSubfocus","$closestList","ghosts","stdnavPluginForms","parent","first","StdnavPluginToolbar","_onEnterOrEntered","$items","not","key","item","$item","$labeledEl","hide","$toolbar","prevAll","each","elem","nextAll","$button","$input","_setParentElem","simulateEl","select","_jasperPrefix","_mainDivId","_jasperPopupClass","originalNewInst","result","apply","arguments","dpDiv","originalGoToToday","id","call","_selectDate","opts","onChangeMonthYear","year","month","datepicker","timepicker","currentYear","selectedYear","currentMonth","selectedMonth","currentDay","selectedDay","_updateDateTime","instance","originalOnTimeChange","_onTimeChange","$timeObj","setSelectionRange","stdnavPluginAnchor","_onLeftOrUp","_onRightOrDown","newSubfocus","undefined","stdnavPluginButton","localLogger","stdnavPluginGrid","_onHover","_findSubfocus","sfels","rows","cells","sfel","newsf","row","newrow","iter","col","stdnavPluginList","$list","label","labelledBy","itemPlural","index","itemLabel","itemLabelledBy","text","_onClick","$newFocus","stdnavPluginTable","$table","_getPreviousSection","prevSection","thisSection","_getNextSection","nextSection","$closestTable","fixedSubfocus","StdnavPluginWorkflowCard","eq","newPosition","newSelectedButton","mouseEventOptions","bubbles","cancelable","view","defaultView","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","relatedTarget","srcElement","triggerNativeEvent","eventName","target","ev","ie","browserDetection","documentElement","createEvent","MouseEvent","initMouseEvent","eventOptions","initEvent","bubble","dispatchEvent","createEventObject","fireEvent","simulateClickSequence","simulateDoubleClickSequence","DATE_TIME_DEFAULTS","stepHour","stepMinute","stepSecond","showSecond","changeMonth","changeYear","showButtonPanel","constrainInput","TIME_DEFAULTS","err","Backbone","constructor","pickerOptions","hasOwnProperty","dateFormat","timeFormat","inline","skipMoving","pickerType","discoverPickerType","provideDefaultPickerOptions","fixPopupPositionAndStyling","self","_callPickerAction","getDate","getTime","setDate","remove","empty","off","stopListening","setDefaults","configs","Helpers","movePickerRelativelyToTriggerIcon","stylePopupContainer","type","originalBeforeShowFn","beforeShow","afterInject","inst","input","offset","left","parseFloat","css","move","offsetWidth","marginLeft","$dpDiv","$popupContainer","$parent","detach","append"],"mappings":"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","file":"_chunks/chunk.6788.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @author: Yuriy Plakosh\n * @version: $Id$\n */\nimport jQuery from 'jquery';\nimport dialogs from './components.dialogs';\n\nvar about = {\n    /**\n     * Initialize about module.\n     */\n    initialize: function () {\n        about.aboutBox.registerListeners();\n    }\n};\n///////////////////////////\n// About box component\n///////////////////////////\nabout.aboutBox = {\n    /**\n     * Shows about box.\n     */\n    show: function () {\n        var dom = jQuery('#aboutBox');\n        if (dom.hasClass('hidden')) {\n            dialogs.popup.show(dom[0], true);\n        }\n    },\n    _hide: function () {\n        var dom = jQuery('#aboutBox');\n        if (!dom.hasClass('hidden')) {\n            dialogs.popup.hide(dom[0]);\n        }\n    },\n\n    registerListeners : function() {\n        var $about = jQuery(\"#about\"),\n            $aboutBoxCloseButton = jQuery(\"#aboutBox button\");\n\n        $about.on('click', function(e) {\n            e.preventDefault();\n            about.aboutBox.show();\n        });\n\n        $aboutBoxCloseButton.on('click', function(e) {\n            about.aboutBox._hide();\n            e.stopPropagation();\n        });\n\n    }\n};\n\nexport default about;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport layoutModule from '../core/core.layout';\nimport {ajaxNonReturningUpdate, appendPostData} from \"../core/core.ajax\";\nimport {baseErrorHandler} from \"../core/core.ajax.utils\";\nimport dialogs from './components.dialogs';\nimport jQuery from 'jquery';\n\nvar heartbeat = {\n    init: false,\n    DOM_ID: \"heartbeatOptin\",\n    PERMIT_CHECKBOX_ID: \"heartbeatCheck\",\n\n    initialize: function(options) {\n        this._baseUrl = options.baseUrl;\n        this._showDialog = options.showDialog;\n        this._sendClientInfo = options.sendClientInfo;\n\n        this._dom = jQuery('#' + this.DOM_ID)[0];\n        if (!this._dom) {\n            return;\n        }\n        this._permit = jQuery('#' + this.PERMIT_CHECKBOX_ID)[0];\n        this._okButton = jQuery(this._dom).find(layoutModule.BUTTON_PATTERN)[0];\n\n        jQuery(this._okButton).on(\"click\", this._okHandler.bind(this));\n        this.init = true;\n    },\n\n    _okHandler: function() {\n        dialogs.popup.hide(this._dom);\n\n        var url = this._baseUrl +\"/heartbeat.html?permit=\" + this._permit.checked;\n\n        ajaxNonReturningUpdate(url, { errorHandler: baseErrorHandler });\n    },\n\n    start: function() {\n        if (this.init === false) {\n            return;\n        }\n\n        if (this._showDialog) {\n            dialogs.popup.show(this._dom);\n\n            this._okButton.focus();\n        }\n        if (this._sendClientInfo) {\n            this._doSendClientInfo();\n        }\n    },\n\n    _doSendClientInfo: function() {\n        try {\n            var params = {};\n            params[\"navAppName\"] = navigator.appName;\n            params[\"navAppVersion\"] = navigator.appVersion;\n            params[\"scrWidth\"] = screen.width;\n            params[\"scrHeight\"] = screen.height;\n            params[\"scrColorDepth\"] = screen.colorDepth;\n            var postData = appendPostData(\"\", params);\n\n            var url = this._baseUrl + \"/heartbeatInfo.html\";\n\n            ajaxNonReturningUpdate(url, {postData: postData});\n        } catch(e) {\n            // Ignore.\n        }\n    }\n};\n\nexport default heartbeat;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport jQuery from 'jquery';\nimport actionModel from '../actionModel/actionModel.modelGenerator';\nimport buttonManager from '../core/core.events.bis';\n\n////////////////////////////////////////////////\n// Generic toolbar button utils\n////////////////////////////////////////////////\n\nvar toolbarButtonModule = {\n\n    UP : \"up\",\n    DOWN : \"down\",\n    OVER : \"over\",\n    DISABLED : \"disabled\",\n    PRESSED : \"pressed\",\n    CONTENT_PREFIX : \"toolbar_\", //action model\n    MenuClass : \"menu vertical dropDown\",\n    TOOLBAR_MENU_CLASS : \"menu vertical dropDown fitable\",\n    ACTION_MODEL_TAG : \"adhocActionModel\",\n    CAPSULE_PATTERN : \"capsule\",\n\n    /**\n     * Used by all toolbar components to show menu\n     * @param event\n     * @param object object we want the menu for\n     */\n    showButtonMenu : function(event, object){\n        object = jQuery(object);\n        var context = this.CONTENT_PREFIX + object.attr(\"id\"),\n            model = this.ACTION_MODEL_TAG == 'adhocActionModel' ? this.actionModel : this.ACTION_MODEL_TAG;\n\n        actionModel.showDropDownMenu(event, object, context, this.TOOLBAR_MENU_CLASS, model);\n    },\n\n    setActionModel: function(newActionModel){\n        this.actionModel = newActionModel;\n    },\n\n    /**\n     * Test to see if the button clicked is a toolbar type\n     * @param button\n     */\n    isToolBarButton : function(button){\n        if (button){\n            return (jQuery(button).hasClass(\"capsule\"));\n        } else{\n            return false;\n        }\n\n    },\n\n    /**\n     * Used to enable toolbar button\n     * @param button\n     * @param enable\n     */\n    enable : function(button, enable){\n        buttonManager.enable(button);\n    },\n\n    /**\n     * Used to disable toolbar button\n     * @param button\n     */\n    disable : function(button){\n        buttonManager.disable(button);\n    },\n\n    /**\n     * Used to enable or disable button based on adhoc state variables\n     * @param button\n     * @param enable\n     */\n    setButtonState : function(button, enable){\n        if(enable){\n            this.enable(button);\n        }else{\n            this.disable(button);\n        }\n    }\n};\n\nexport default toolbarButtonModule;\n\n\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport __jrsConfigs__ from 'js-sdk/src/jrs.configs';\n\nvar webHelpModule = {\n    currentContext: 'default',\n    displayWebHelp: function () {\n        // If webHelpModuleState is undefined doesn't display Web Help\n        var webHelpModuleState = __jrsConfigs__.webHelpModuleState;\n        if (!webHelpModuleState) {\n            return;\n        }\n        var helpURL = webHelpModuleState.hostURL + '/' + webHelpModuleState.pagePrefix + webHelpModule.getPageForContext();\n        window.name = '';\n        var runPopup = window.open(helpURL, 'MCWebHelp');\n        runPopup.focus();\n    },\n    getPageForContext: function () {\n        return __jrsConfigs__.webHelpModuleState.contextMap[webHelpModule.currentContext];\n    },\n    setCurrentContext: function (context) {\n        webHelpModule.currentContext = context;\n    }\n};\n\nexport default webHelpModule;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport $ from 'jquery';\nimport _ from 'underscore';\n\nimport dateTimeSettings from '../settings/dateTimeSettings.settings';\nimport DateAndTimePicker from 'js-sdk/src/components/dateAndTime/DateAndTimePicker';\n\nfunction getLocale(userLocale, availableLocales) {\n    var postfix = 'en';\n    if (userLocale) {\n        if (_.contains(availableLocales, userLocale)) {\n            postfix = userLocale;\n        } else if (_.contains(availableLocales, userLocale.substring(0, 2))) {\n            postfix = userLocale.substring(0, 2);\n        }\n    }\n    return postfix.replace('_', '-');\n}\nvar locale = getLocale(jrsConfigs.userLocale, jrsConfigs.availableLocales);\nDateAndTimePicker.setDefaults({\n    locale: locale,\n    date: dateTimeSettings.datepicker,\n    time: dateTimeSettings.timepicker\n});\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// This settings store will be filled with the actual settings loaded from the server\n\nexport default {};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @author: ${username}\n * @version: $Id$\n */\n\n/* Standard Navigation library (stdnav) plugin\n * Elements: LI, OL, UL\n * Navtype:  actionmenu\n *\n * Plugin for \"actionModel\"-based menus, such as the JRS main menu, which\n * handle mouse and touch events, but offer no keyboard support.  (Note\n * that \"actionModel\" itself is not used in a Backbone context yet, in\n * case its name suggests that to you; it's a coincidence.)\n *\n * This module supports enhancements intended to improve compliance with\n * section 508 of the Rehabilitation Act of 1973, 29 USC 798, as amended\n * 1998.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport stdnav from 'js-sdk/src/common/stdnav/stdnav';\nimport actionModel from '../../actionModel/actionModel.modelGenerator';\nimport buttonManager from '../../core/core.events.bis';\nimport layoutModule from '../../core/core.layout';\nimport primaryNavigation from '../../actionModel/actionModel.primaryNavigation';\nimport log from 'js-sdk/src/common/logging/logger';\n\nvar logger = log.register(\"stdnav\"),\n    singleton = null,\n    gserial = 0;\n\n// ===EXTERNAL SYMBOLS USED:=============================================\n// layoutModule\n\n// Local object definition.\n\nvar stdnavPluginActionMenu = function () {\n    gserial++;\n    this.serial = gserial;\n    this.menu_item_callbacks = {\n        click: {}\n    };\n};\n\n_.extend(stdnavPluginActionMenu.prototype, {\n    zinit: function (selector) {\n        return this;\n    },\n\n    // Registers the 'actionMenu' navtype with stdnav.  Both stdnav and ActionMenu\n    // must be loaded and activated before this can be done.\n    activate: function () {\n        // This is the behaviour hash for the navtype.  These defaults pass\n        // everything through to the browser, and are normally overridden\n        // with $.extend based on specific tagnames and stdnav attributes.\n        this.behavior = {\n            'down': [this, this._onDown, null],\n            'enter': null,\n            'exit': [this, this._onExit, null],\n            'fixfocus': [this, this._fixFocus, null],\n            'fixsubfocus': [this, this._fixFocus, null],\n            'fixsuperfocus': [this, this._fixSuperfocus, null],\n            'focusin': [this, this._onFocusIn, null],\n            'focusout': [this, this._onFocusOut, null],\n            'subfocusin': [this, this._onSubfocusIn, null],\n            'left': [this, this._onLeft, null],\n            //'mouseout': [this, this._onMouseOut, null],\n            //'mouseover': [this, this._onMouseOver, null],\n            'right': [this, this._onRight, null],\n            'superfocusin': [this, this._onSuperfocusIn, null],\n            'superfocusout': [this, this._onSuperfocusOut, null],\n            'up': [this, this._onUp, null],\n            'inherit': false,\n            'inheritable': true\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n\n    // Unregisters the 'actionMenu' navtype from stdnav.  This must be done\n    // before deactivating/unloading stdnav.\n    deactivate: function () {\n        stdnav.unregisterNavtype(this.navtype, this);\n    },\n\n    /* ====== Focus Management ====== */\n\n\n    // Focus adjustment callback.  Ensures that if the DIV or UL elements\n    // themselves are given focus, that it is promoted to the first LI.\n    _fixFocus: function (element) {\n        var newFocus;\n        var $el = $(element);\n        if ($el.is('div,ul,ol')) {\n            // The usual case: the entire menu is gaining focus.  One of\n            // the reasons this can happen, of course, is in response to a\n            // mouse click, not a TAB press-- as a result, check to see if\n            // any of the menu options has the \"pressed\" CSS class, and\n            // focus that, if it does.  However, ignore the \"over\" class,\n            // as the mouse pointer can wind up anywhere for a blind user\n            // by total coincidence, so it must be ignored when setting\n            // focus in response to TAB.\n            //\n            // If nothing seems to be in use yet, select the first list\n            // item-- if there ARE any.\n            //\n            // Failing even that, select the list itself.\n            var items = $el.find('.pressed');\n            if (items.length > 0) {\n                newFocus = items[0];\n            } else {\n                items = $el.find('li');\n                if (items.length > 0) {\n                    newFocus = items[0];\n                } else {\n                    // The entire list is empty-- set focus to the root list element\n                    // after all.\n                    newFocus = element;\n                }\n            }\n        } else if ($el.is('li')) {\n            // Focus is already appropriate.\n            newFocus = element;\n        } else {\n            // Assume we're in a span or something within a list item.\n            var lis = $el.closest('li');\n            if (lis.length > 0) {\n                if ($(lis[0]).prop['js-navigable'] === false) {\n                    // Clicked on a header or something; focus the list instead.\n                    newFocus = $el.closest('ul,ol');\n                } else {\n                    newFocus = lis[0];\n                }\n            } else {\n                // Clicked on non-list-item content inside the list.\n                // This COULD happen, but probably indicates a bad template.\n                // Either way, don't crash.\n                newFocus = $el.find('li');\n                if (newFocus.length > 0) {\n                    newFocus = newFocus[0];\n                }\n            }\n        }\n        return newFocus;\n    },\n\n    // Superfocus adjustment callback.  Because of the way actionModel\n    // works, the menu is expected to be rooted in an enclosing DIV that\n    // contains the list, so use the DIV for the superfocus region.\n    // However, context menus are _not_\n    _fixSuperfocus: function (element) {\n        var newSuperfocus;\n        var $root = $(element).closest('.menuRoot,.dropDown,.context');\n        if ($root.length > 0) {\n            newSuperfocus = $root[0];\n        } else {\n            // FAULT, let StdNav fall back to BODY\n            newSuperfocus = null;\n        }\n        return newSuperfocus;\n    },\n\n    _onSuperfocusIn: function(element){\n        var $elem = $(element),\n            $parentList = $(this.lastMenuBarItem).closest(\".menuRoot\"),\n            $currentList = $elem.closest(\".menu\").length && $elem;\n\n        if( $currentList && ($parentList.attr(\"tabindex\")>-1)){\n            this._parentTabindex = $parentList.attr(\"tabindex\");\n\n            if (this._parentTabindex>-1) {\n                $currentList.attr('js-suspended-tabindex', this._parentTabindex);\n                $currentList.find(\"li:first\").attr('tabindex', this._parentTabindex);\n            } else {\n                $elem.attr('js-suspended-tabindex', 'none');\n                $currentList.find(\"li:first\").attr('tabindex', -1);\n            }\n\n            // Explicitly make the element unfocusable-- temporarily.\n            $currentList.attr('tabindex', '-1');\n            $parentList.attr(\"tabindex\", \"-1\");\n        }\n\n        return element;\n    },\n\n    _onFocusIn: function (element) {\n        var\n            $thisItem,\n            $matched;\n        var $selected = $(element);\n        if ($selected.length>0) {\n            $thisItem = $selected.closest(layoutModule.NAVIGATION_PATTERN);\n            if ($thisItem.length>0) {\n                // An item in the main menu bar has been focused.\n                buttonManager.over($thisItem.find(layoutModule.BUTTON_PATTERN)[0]);\n                //buttonManager.over($thisItem.find(layoutModule.MENU_LIST_PATTERN)[0]);\n                $matched = $thisItem.closest(layoutModule.NAVIGATION_MUTTON_PATTERN);\n                if ($matched.length>0) {\n                    // The item has a submenu-- show it.\n                    //actionModel.hideMenu();\n                    primaryNavigation.showNavButtonMenu(null, $matched[0]);\n                } else {\n                    // An item with no drop-down menu has been focused;\n                    // ensure any drop-down menus for other items are closed.\n                    actionModel.hideMenu();\n                }\n            } else {\n                $thisItem = $selected.closest(layoutModule.MENU_LIST_PATTERN);\n                if ($thisItem.length>0) {\n                    // An item in a drop-down or context menu has been focused.\n                    buttonManager.over($thisItem.find(layoutModule.BUTTON_PATTERN)[0]);\n                    /* FIXME: flyouts (none exist in main menu right now)\n                    if ($matched.length>0) {\n                        // NOTE: This function expects an event object that will\n                        // not exist for keyboard navigation and automation\n                        // purposes.  Fix that code flow-- DO NOT try to synthesize\n                        // an event or provide a surrogate object.  This flow\n                        // must work for a null object.\n                        primaryNavigation.showNavButtonMenu(null, $matched[0]);\n                    }\n                    */\n                }\n            }\n        }\n        return element;\n    },\n\n    _onFocusOut: function (element) {\n        var\n            $thisItem = $(element).closest(layoutModule.NAVIGATION_PATTERN);\n\n        if ($thisItem.length>0) {\n            // A top-level item in the main menu bar has lost focus.\n            //actionModel.hideMenu();\n            // Don't remove the style if we've moved into a drop-down menu.\n            if (this.lastMenuBarItem!==element){\n                buttonManager.out($thisItem.find(layoutModule.BUTTON_PATTERN)[0]);\n                $thisItem.removeAttr(\"tabindex\");\n            }\n            //buttonManager.out($thisItem.find(layoutModule.MENU_LIST_PATTERN)[0]);\n        } else {\n            $thisItem = $(element).closest(layoutModule.MENU_LIST_PATTERN);\n            if ($thisItem.length>0) {\n                // An item in a drop-down or context menu has lost focus.\n                buttonManager.out($thisItem.find(layoutModule.BUTTON_PATTERN)[0]);\n                $thisItem.removeAttr(\"tabindex\");\n            }\n        }\n        return null;\n    },\n\n    // When the entire menu loses superfocus, ensure that any remaining\n    // hover events and classes for actionMenu fire as expected, and that\n    // the context menu is hidden.\n    _onSuperfocusOut: function(element){\n        var $nav = $(\"#\"+layoutModule.MAIN_NAVIGATION_ID);\n\n        if ($nav.length<1){\n            // There is no main navigation in embedded mode.\n            return element;\n        }\n        // Hide the dropdown menu unless the new focus is _in_ the\n        // dropdown menu.  Because of the way actionModel works, the\n        // dropdown menu is NOT a DOM descendant of the main menu.\n        var newFocus=$(document.activeElement);\n        if (newFocus.closest('.dropDown,.context').length<1){\n            var $selected = $nav.find(\".\" + layoutModule.HOVERED_CLASS);\n            if ($selected.length>0) {\n                buttonManager.out($selected[0]);\n            }\n            actionModel.hideMenu();\n\n            // Explicitly make the element unfocusable-- temporarily.\n            var $ul = $(this.lastMenuBarItem).closest(\".menuRoot\");\n\n            $ul.attr(\"tabindex\", this._parentTabindex);\n\n            this.lastMenuBarItem = null;\n        }\n    },\n\n    /* ====== MENU BEHAVIOR ====== */\n    _focus_prev_menu_entry: function (entry) {\n        var newFocus;\n        var wasOpen = false;\n\n        if (entry.hasClass('node') && (!entry.children('.menu').hasClass('is-closed'))) {\n            wasOpen = true;\n        }\n        newFocus = entry.prev();\n        if (newFocus.length === 0) {\n            // Wrap around to the end\n            newFocus = entry;\n            while (newFocus.next().length > 0) {\n                newFocus = newFocus.next();\n            }\n        }\n        logger.debug('Granting focus to ' + newFocus.attr('id'));\n        stdnav.setSubfocus(newFocus);\n        if (wasOpen === true) {\n            //this._open_submenu(newFocus.children('.menu'));\n        }\n    },\n\n    _focus_next_menu_entry: function (entry) {\n        var newFocus;\n        var wasOpen = false;\n\n        if (entry.hasClass('node') && (!entry.children('.menu').hasClass('is-closed'))) {\n            wasOpen = true;\n        }\n        newFocus = entry.next();\n        if (newFocus.length === 0) {\n            // Wrap around to the beginning\n            newFocus = entry;\n            while (newFocus.prev().length > 0) {\n                newFocus = newFocus.prev();\n            }\n        }\n        logger.debug('Granting focus to ' + newFocus.attr('id'));\n        stdnav.setSubfocus(newFocus);\n        if (wasOpen === true) {\n            //this._open_submenu(newFocus.children('.menu'));\n        }\n    },\n\n    /* ========== NAVTYPE BEHAVIOR CALLBACKS =========== */\n\n    _onSubfocusIn: function (element) {\n        var $ul = $(element).closest(\".menuRoot\");\n\n        if($ul.attr('js-suspended-tabindex')>-1){\n            $(element).attr(\"tabindex\", $ul.attr('js-suspended-tabindex'));\n        } else if ($ul.attr('tabindex')>-1){\n            $(element).attr(\"tabindex\", $ul.attr('tabindex'));\n            $ul.attr('js-suspended-tabindex', $ul.attr('tabindex'));\n        }\n\n        // Handle menus hosted in non-focusable elements (such as a cell in a grid).\n        if (($(element).prop('nodeName') === 'li') === false) {\n            // Find a usable child element.\n            var subel = this._fixFocus(element);\n            // Adjust subfocus without firing callbacks.\n            stdnav.setSubfocus(subel, false);\n        }\n    },\n\n    _onExit: function (element) {\n        var $el = $(element);\n        if (!$el.closest(\"#\"+layoutModule.MAIN_NAVIGATION_ID).length && $el.find(\"p\").length > 0) {\n            // Closes everything and returns focus to the menu root itself.\n            element = this._onExitHandler(element);\n        } else {\n            // Closes everything and returns focus to the global entry-point (main search input).\n            element = $(\"#\"+layoutModule.MAIN_SEARCH_INPUT_ID)[0];\n        }\n\n        return element;\n    },\n\n    /* ========== MOUSE BEHAVIOR =========== */\n    /*\n    _onMouseOver: function(element){\n        // Keyboard navigation within the menu can\n        return null;\n    },\n\n    _onMouseOut: function(element){\n        return null;\n    },\n    */\n\n    /* ========== KEYBOARD BEHAVIOR =========== */\n    _onLeft: function (element){\n        var $thisItem = $(element).closest(layoutModule.NAVIGATION_PATTERN);\n        var $prev=$(element);\n\n        if(!$thisItem.length && $(element).closest(\".menu\").length){\n            $thisItem = $(this._onExitHandler(element));\n        }\n\n        if ($thisItem.length>0){\n            // We're in the menu bar.\n            $prev = $thisItem.prev(layoutModule.NAVIGATION_PATTERN);\n        } else {\n            $thisItem = $(element).closest(layoutModule.MENU_LIST_PATTERN);\n            if ($thisItem.length>0){\n                // We're in the drop list.  Get the previous item for the\n                // last menu bar item and redirect focus to that.\n                $prev=$(this.lastMenuBarItem).prev(layoutModule.NAVIGATION_PATTERN);\n            }\n        }\n        if ($prev.length>0) {\n            return $prev[0];\n        } else {\n            // FIXME: Wrap menu\n            return element;\n        }\n    },\n\n    _onRight: function (element) {\n        var $thisItem = $(element).closest(layoutModule.NAVIGATION_PATTERN);\n        var $next=$(element);\n\n        if(!$thisItem.length && $(element).closest(\".menu\").length){\n            $thisItem = $(this._onExitHandler(element));\n        }\n\n        if ($thisItem.length>0){\n            // We're in the menu bar.\n            $next = $thisItem.next(layoutModule.NAVIGATION_PATTERN);\n        } else {\n            $thisItem = $(element).closest(layoutModule.MENU_LIST_PATTERN);\n            if ($thisItem.length>0){\n                // We're in the drop list.  Get the previous item for the\n                // last menu bar item and redirect focus to that.\n                $next=$(this.lastMenuBarItem).next(layoutModule.NAVIGATION_PATTERN);\n            }\n        }\n        if ($next.length>0) {\n            return $next[0];\n        } else {\n            // FIXME: Wrap menu\n            return element;\n        }\n    },\n\n    _onUp: function (element) {\n        var $prev = $(element);\n        // Figure out whether we're in the main menu or the popup.\n        var $menu = $(document.activeElement).closest(\".\"+actionModel.DROP_DOWN_MENU_CLASS);\n        if ($menu.length>0){\n            // We're in a drop-down or context menu.\n            var $thisItem=$(document.activeElement).closest(layoutModule.MENU_LIST_PATTERN);\n            $prev=$thisItem.prev(layoutModule.MENU_LIST_PATTERN);\n            // Oddly, trying to add \":not(.separator)\" to the pattern\n            // above did not work; the separator was indeed skipped, but\n            // the menu item after it was not returned.  This code skips\n            // over any number of adjacent separators.\n            while ($prev.is(layoutModule.SEPARATOR_PATTERN)){\n                $prev=$prev.prev(layoutModule.MENU_LIST_PATTERN);\n            }\n            // If we were already at the top, we want to move back into the\n            // menu bar.\n            if ($prev.length<1){\n                $prev=$(this.lastMenuBarItem);\n            }\n        } else {\n            // If we're not in a popup/context menu, we should be in the main\n            // menu bar itself.  Up-arrow has no effect here.\n            return element;\n        }\n        if ($prev.length>0){\n            return $prev[0];\n        } else {\n            return this._onExitHandler(element);\n        }\n    },\n\n    _onDown: function (element) {\n        var $next = $(element);\n        // Figure out whether we're in the main menu or the popup.\n        var $menu = $(document.activeElement).closest(\".\"+actionModel.DROP_DOWN_MENU_CLASS);\n        if ($menu.length>0){\n            // We're in a drop-down or context menu.\n            var $thisItem=$(document.activeElement).closest(layoutModule.MENU_LIST_PATTERN);\n            $next=$thisItem.next(layoutModule.MENU_LIST_PATTERN);\n            // Oddly, trying to add \":not(.separator)\" to the pattern\n            // above did not work; the separator was indeed skipped, but\n            // the menu item after it was not returned.  This code skips\n            // over any number of adjacent separators.\n            while ($next.is(layoutModule.SEPARATOR_PATTERN)){\n                $next=$next.next(layoutModule.MENU_LIST_PATTERN);\n            }\n        } else {\n            // If we're not in a popup/context menu, we should be in the main\n            // menu bar itself.  No other cases should occur, but they are\n            // ignored if they do.\n            $menu = $(document.activeElement).closest(\".\"+layoutModule.MENU_ROOT_CLASS);\n            if ($menu.length<1){\n                return element;\n            }\n            // The drop-down menu should have been displayed when this\n            // node was focused.  Therefore, we need merely move focus to\n            // the first element in the drop-down menu-- unless this menu\n            // bar item has no drop-down, in which case we do nothing.\n            // We also need to store where we were in the menu bar, in case\n            // we come back to it via up-arrow or ESCAPE.\n            if (actionModel.isMenuShowing()) {\n                this.lastMenuBarItem=element;\n                $(element).addClass(\"isParent\");\n\n                $next=$(layoutModule.MENU_LIST_PATTERN);\n\n                $menu = $next.closest(\".menuRoot\");\n                $menu.attr(\"tabindex\", $(element).attr(\"tabindex\"));\n            }\n        }\n        if ($next.length>0){\n            return $next[0];\n        } else {\n            return element;\n        }\n    },\n\n    _onExitHandler: function (element) {\n        element = this.lastMenuBarItem;\n        if (!element) {\n            element = $(\".isParent\")[0];\n        }\n        $(element).removeClass(\"isParent\");\n        return element;\n    }\n});\n\n// SECOND EXTENSION PASS - ATTRIBUTES\n// Hash members in this pass can reference functions from the last pass.\n$.extend(stdnavPluginActionMenu.prototype, {\n    // This is the name of the new navtype.  Each stdnav plugin must\n    // define a unique name.\n    navtype: 'actionmenu',\n\n    // This arrray extends the tag-to-navtype map in stdnav.  If your\n    // plugin should apply to all elements of a given type, add those\n    // element tagnames, in lower case, to this array.  It is normally\n    // empty, and the page templates simply set an appropriate\n    // \"data-navtype=\" attribute to get the expected behavior.\n    //\n    // NOTE: The HTML5 \"menu\" element is still very broken.  In practice\n    // our menus are built with list items and use \"js-navtype\" overrides to\n    // this type.\n    //\n    // CASE SENSITIVE - USE UPPER-CASE!\n    navtype_tags: []\n});\n\nexport default new stdnavPluginActionMenu();\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport eventAutomation from 'js-sdk/src/common/util/eventAutomation';\nimport stdnav from 'js-sdk/src/common/stdnav/stdnav';\nimport {dynamicList} from '../../components/list.base';\nimport log from 'js-sdk/src/common/logging/logger';\n\nvar logger = log.register(\"stdnav\");\n\nvar version = '0.0.1';\nvar singleton = null;\nvar gserial = 0;\nvar stdnavPluginDynamicList = function () {\n    gserial++;\n    this.serial = gserial;\n};\n// FIRST EXTENSION PASS - FUNCTIONS\n// Provides forward-references for hashes in the second pass, so that\n// references in that second pass to functions declared here resolve\n// (since the entire pass is applied at once, they cannot be combined).\n$.extend(stdnavPluginDynamicList.prototype, {\n    zinit: function (selector) {\n        logger.debug('stdnavPluginDynamicList.init(' + selector + ')\\n');\n        return this;\n    },\n    // Registers the 'dynamiclist' navtype with stdnav.  stdnav must be loaded and\n    // activated before this can be done.\n    activate: function () {\n        // This is the behaviour hash for the navtype.  These defaults pass\n        // everything through to the browser, and are normally overridden\n        // with $.extend based on specific tagnames and stdnav attributes.\n        //\n        // For dynamic lists, pass arrow keys through to the existing keyboard\n        // behavior.\n        this.behavior = {\n            'ariaprep': [\n                this,\n                this._ariaPrep,\n                null\n            ],\n            'ariarefresh': [\n                this,\n                this._ariaRefresh,\n                null\n            ],\n            'click': null,\n            'down': null,\n            'end': null,\n            'enter': [\n                this,\n                this._onEnter,\n                null\n            ],\n            'fixfocus': [\n                this,\n                this._fixFocus,\n                null\n            ],\n            'fixsuperfocus': [\n                this,\n                this._fixSuperfocus,\n                null\n            ],\n            'home': null,\n            'inherit': true,\n            'inheritable': true,\n            'left': null,\n            'pagedown': null,\n            'pageup': null,\n            'right': null,\n            'superfocusin': [\n                stdnav,\n                stdnav.basicSuperfocusIn,\n                {\n                    'maxdepth': 1,\n                    'focusSelector': 'li',\n                    'ghostfocus': false\n                }\n            ],\n            'superfocusout': [\n                stdnav,\n                stdnav.basicSuperfocusOut,\n                { 'ghostfocus': false }\n            ],\n            'up': null\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n    // Unregisters the 'dynamiclist' navtype from stdnav.  This must be done\n    // before deactivating/unloading stdnav.\n    deactivate: function () {\n        stdnav.unregisterNavtype(this.navtype, this.behavior);\n    },\n    // This callback is run when the page is initially rendered.  Add the\n    // appropriate ARIA tags for the handled construt, if they do not already\n    // exist.  The element passed will be the superfocus for the construct\n    // being instrumented, but this construct may not actually have focus at\n    // the time this function is called.\n    _ariaPrep: function (el) {\n        $(el).attr('role', 'application');\n        $(el).attr('aria-label', 'Dynamic List');\n        return null;\n    },\n    // This callback is run when the superfocus changes to the construct.\n    // Its two purposes are to update existing constructs, and to handle\n    // dynamically-created content whose creation was not detected during\n    // initial page construction (possibly because no part of the construct\n    // existed yet).  The element passed will be the superfocus for the\n    // construct, but this construct may not actually have focus at the time\n    // this function is called.\n    _ariaRefresh: function (el) {\n        $(el).attr('role', 'application');\n        $(el).attr('aria-label', 'Dynamic List');\n        return null;\n    },\n    _onEnter: function (element) {\n        var $el = $(element);\n        if ($el.is('.supercursor')) {\n            // If a sublist is expanded, and a subitem has an active cursor,\n            // then the parent item gets the \"supercursor\" class instead,\n            // and should NEVER get keyboard focus at the same time (or the\n            // cursor would have been removed from the sublist and this item\n            // would have \"cursor\" instead of \"supercursor\" class).\n            logger.error('dynamicList item has supercursor class-- should not have focus while this is true.');\n            if ($el.find('ul > li.cursor') < 0) {\n                logger.error('...additionally, no sublist item appears to have the cursor class.');\n            }\n        } else {\n            // Using \"stdnav.getClosestNavigableDescendant\" here would just\n            // give us the sublist, if any, if that appears in the markup\n            // prior to the actual link on this item.  Therefore, explicitly\n            // look for buttons, links, and form fields only.\n            var $links = $el.find('a,:input');\n            if ($links.length > 0) {\n                // Fire the click handler\n                eventAutomation.simulateClickSequence($links[0]);\n            }\n        }    // DO NOT move focus.\n        // DO NOT move focus.\n        return element;\n    },\n    // Focus adjustment callback.  Given an element somewhere within a\n    // dynamicList, including the list itself, return the element which should\n    // have get focused.  This is done by obtaining the cursor for the list.\n    _fixFocus: function (element) {\n        var $listEl = $(element).closest('[js-navtype=\\'' + this.navtype + '\\']');\n        if ($listEl.length < 1) {\n            logger.warn('Can\\'t find a dynamic list to fix focus to');\n            return element;\n        }\n        var listObj = dynamicList.getDynamicListForElement($listEl[0]);\n        if (stdnav.nullOrUndefined(listObj)) {\n            logger.warn('Can\\'t map a dynamic list to fix focus to');\n            return element;\n        }\n        return listObj.getCursorElement();\n    },\n    // Subfocus adjustment callback.  Use the same element that has focus.\n    _fixSubfocus: function (element) {\n        return null;\n    },\n    // Superfocus adjustment callback.  Given an element somewhere within a\n    // sub-DOM within a list, ensures that the list itself (OL,UL) is given\n    // superfocus.\n    _fixSuperfocus: function (element) {\n        var newSuperfocus;\n        var $closestList = $(element).closest('ol,ul');\n        if ($closestList.length > 0) {\n            newSuperfocus = $closestList[0];\n        } else {\n            // FAULT, let StdNav fall back to BODY\n            newSuperfocus = null;\n        }\n        return newSuperfocus;\n    },\n    /* ========== NAVTYPE BEHAVIOR CALLBACKS =========== */\n    // The list has been entered from another control, and superfocus has been\n    // set appropriately.  Browser focus may be temporarily on the control's\n    // container.  Return the element which should receive browser focus for\n    // accessibility purposes.\n    _onSuperfocusIn: function (element) {\n        var newFocus;    // This should fire on the list itself, not the item.\n        // This should fire on the list itself, not the item.\n        var ghosts = $(element).children('li .ghostfocus');\n        if (ghosts.length > 0) {\n            ghosts.removeClass('ghostfocus');    // Promote ghost.\n            // Promote ghost.\n            newFocus = ghosts[0];\n        } else {\n            // No ghosts.  Set focus to first item.\n            var items = $(element).children('li[js-navigable!=\"false\"]');\n            if (items.length > 0) {\n                newFocus = items[0];\n            } else {\n                // For visual reasons, in the case of an empty list, we give up and\n                // set subfocus to the list itself.\n                newFocus = element;\n            }\n        }\n        return newFocus;\n    },\n    // The list is being exited for another control, and superfocus has been\n    // lost.\n    _onSuperfocusOut: function (element) {\n    }    // FIXME: ghostfocus\n});    // SECOND EXTENSION PASS - ATTRIBUTES\n// Hash members in this pass can reference functions from the last pass.\n// SECOND EXTENSION PASS - ATTRIBUTES\n// Hash members in this pass can reference functions from the last pass.\n$.extend(stdnavPluginDynamicList.prototype, {\n    // This is the name of the new navtype.  Each stdnav plugin must\n    // define a unique name.\n    navtype: 'dynamiclist',\n    // This arrary extends the tag-to-navtype map in stdnav.  If your\n    // plugin should apply to all elements of a given type, add those\n    // element tagnames, in lower case, to this array.  It is normally\n    // empty, and the page templates simply set an appropriate\n    // \"data-navtype=\" attribute to get the expected behavior.\n    //\n    // The normal List plugin should handle UL and OL tags by default.\n    navtype_tags: []\n});\nvar newStdnavPluginDynamicList = new stdnavPluginDynamicList();\nexport default newStdnavPluginDynamicList;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n* @author: ${username}\n* @version: $Id$\n*/\n\n/* Standard Navigation library (stdnav) plugin\n* Elements: FORM, INPUT, OPTION, OPTGROUP, SELECT, TEXTAREA\n* Navtype:  forms (element default)\n*\n* Plugin for the \"forms\" navtype.  This is the default-- AND STRONGLY\n* RECOMMENDED-- behavior for forms and inputs.  Primarily needed to ensure\n* that input controls inside of lists and grids can properly obtain focus,\n* and also so they don't get inappropriate navigation effects intended for\n* their parents.  Be aware that \"button\" has its own plugin.\n*\n* Note that screen readers take classic, standard web forms more seriously\n* than practically anything else.  They implement them well, and in general\n* you will want to stay out of their way.  Avoid unexpected focus changes\n* when dealing with forms.\n*\n* This module supports enhancements intended to improve compliance with\n* section 508 of the Rehabilitation Act of 1973, 29 USC 798, as amended\n* 1998.\n*/\nimport $ from 'jquery';\nimport log from \"js-sdk/src/common/logging/logger\";\nimport stdnav from 'js-sdk/src/common/stdnav/stdnav';\n\nimport eventAutomation from \"js-sdk/src/common/util/eventAutomation\";\n\nimport layoutModule from \"../../core/core.layout\";\n\nlet logger = log.register('stdnav');\n\nvar version = \"0.0.1\",\n    singleton = null,\n    gserial = 0;\n\n// TODO: get rid of dependency on JRS mark-up\nlayoutModule.INPUT_ZOOM_VALUE = 'input#zoom_value';\nlayoutModule.INPUT_SEARCH_REPORT = 'input#search_report';\nlayoutModule.PAGE_CURRENT = 'input#page_current';\n\nlayoutModule.MENU_VWROPTIONS = '#vwroptions .menu.vertical.dropDown.fitable';\nlayoutModule.MENU_VWROPTIONS_LIST = '#vwroptions .menu.vertical.dropDown.fitable li';\n\n// Local object definition.\n\nvar stdnavPluginForms = function () {\n    gserial++;\n    this.serial = gserial;\n};\n\n// FIRST EXTENSION PASS - FUNCTIONS\n// Provides forward-references for hashes in the second pass, so that\n// references in that second pass to functions declared here resolve\n// (since the entire pass is applied at once, they cannot be combined).\n$.extend(stdnavPluginForms.prototype, {\n    zinit: function (selector) {\n        logger.debug('stdnavPluginForms.init(' + selector + \")\\n\");\n        return this;\n    },\n\n    // Registers the 'forms' navtype with stdnav.  stdnav must be loaded and\n    // activated before this can be done.\n    activate: function () {\n        // This is the behaviour hash for the navtype.  These defaults pass\n        // everything through to the browser, and are normally overridden\n        // with $.extend based on specific tagnames and stdnav attributes.\n        //\n        // For dynamic lists, pass arrow keys through to the existing keyboard\n        // behavior.\n        this.behavior = {\n            'ariaprep': [this, this._ariaPrep, null],\n            'ariarefresh': [this, this._ariaRefresh, null],\n            'down': [this, this._onDown, null],\n            'enter': [this, this._onEnter, null],\n            'exit': [this, this._onExit, null],\n            'inherit': false,\n            'inheritable': true,\n            'fixsuperfocus': [stdnav, stdnav.basicFixSuperfocus, null],\n            'superfocusin': [stdnav, stdnav.basicSuperfocusIn, {\n                'maxdepth': 1,\n                'focusSelector': ':input',\n                'ghostfocus': false\n            }]\n        }\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n\n    // Unregisters the 'forms' navtype from stdnav.  This must be done\n    // before deactivating/unloading stdnav.\n    deactivate: function () {\n        stdnav.unregisterNavtype(this.navtype, this.behavior);\n    },\n\n    // This callback is run when the page is initially rendered.  Add the\n    // appropriate ARIA tags for the handled construct, if they do not already\n    // exist.  The element passed will be the superfocus for the construct\n    // being instrumented, but this construct may not actually have focus at\n    // the time this function is called.\n    _ariaPrep: function (el) {\n        $(el).attr('role', 'form');\n        return null;\n    },\n\n    // This callback is run when the superfocus changes to the construct.\n    // Its two purposes are to update existing constructs, and to handle\n    // dynamically-created content whose creation was not detected during\n    // initial page construction (possibly because no part of the construct\n    // existed yet).  The element passed will be the superfocus for the\n    // construct, but this construct may not actually have focus at the time\n    // this function is called.\n    _ariaRefresh: function (el) {\n        $(el).attr('role', 'form');\n        return null;\n    },\n\n    /* ========== NAVTYPE BEHAVIOR CALLBACKS =========== */\n\n    /* ========== KEYBOARD BEHAVIOR =========== */\n    //ToDo need refactor!!!\n    _onDown: function(element){\n        var $el = $(element);\n        if($el.is(\"input#zoom_value\")){\n            this.parent = element;\n            $el.closest(\"li\").addClass(\"isParent\");\n            eventAutomation.simulateClickSequence($('button#zoom_value_button')[0]);\n            $(layoutModule.MENU_VWROPTIONS_LIST).first().find(\"p\").addClass(\"over\");\n            element = $(layoutModule.MENU_VWROPTIONS_LIST).first()[0];\n        } else if($el.is(\"input#search_report\")){\n            this.parent = element;\n            $el.closest(\"li\").addClass(\"isParent\");\n            eventAutomation.simulateClickSequence($('button#search_options')[0]);\n            $(layoutModule.MENU_VWROPTIONS_LIST).first().find(\"p\").addClass(\"over\");\n            element = $(layoutModule.MENU_VWROPTIONS_LIST).first()[0]\n        }\n\n        return element;\n    },\n\n    _onExit: function(element){\n        var $el = $(element);\n\n        if($el.is(layoutModule.INPUT_ZOOM_VALUE)){\n            element = $(\"li.zoom.leaf.j-dropdown\")[0];\n        } else if ($el.is(layoutModule.INPUT_SEARCH_REPORT)){\n            element = $(\"li.search.leaf.j-dropdown\")[0];\n        } else if ($el.is(layoutModule.PAGE_CURRENT)){\n            element = $(\"li.paging.leaf.j-dropdown\")[0];\n        }\n\n        return element;\n    },\n\n    _onEnter: function(element){\n        var $el = $(element);\n\n        if($el.is(layoutModule.INPUT_ZOOM_VALUE)){\n            element = $(\"li.zoom.leaf.j-dropdown\")[0];\n        } else if ($el.is(layoutModule.INPUT_SEARCH_REPORT)){\n            element = $(\"li.search.leaf.j-dropdown\")[0];\n        } else if ($el.is(layoutModule.PAGE_CURRENT)){\n            element = $(\"li.paging.leaf.j-dropdown\")[0];\n        }\n\n        return element;\n    }\n});\n\n// SECOND EXTENSION PASS - ATTRIBUTES\n// Hash members in this pass can reference functions from the last pass.\n$.extend(stdnavPluginForms.prototype, {\n    // This is the name of the new navtype.  Each stdnav plugin must\n    // define a unique name.\n    navtype: 'forms',\n\n    // This arrary extends the tag-to-navtype map in stdnav.  If your\n    // plugin should apply to all elements of a given type, add those\n    // element tagnames, in lower case, to this array.  It is normally\n    // empty, and the page templates simply set an appropriate\n    // \"data-navtype=\" attribute to get the expected behavior.\n    // Note that 'button' has its own plugin.\n    // USE UPPER-CASE!\n    navtype_tags: ['FORM', 'INPUT', 'OPTGROUP', 'OPTION', 'SELECT', 'TEXTAREA']\n});\nvar newStdnavPluginForms = new stdnavPluginForms();\nexport default newStdnavPluginForms;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id: $\n */\n\n/* Standard Navigation library (stdnav) plugin\n * Elements: LI, OL, UL\n * Navtype:  toolbar\n *\n * Plugin for toolbar menus, which may consist of simple buttons, text inputs,\n * buttons with drop-down options, tabs, etc. It handles the basic keyboard\n * navigation: moving left/right, opening the drop-downs, firing the actions.\n *\n * This module supports enhancements intended to improve compliance with\n * section 508 of the Rehabilitation Act of 1973, 29 USC 798, as amended\n * 1998.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport stdnav from 'js-sdk/src/common/stdnav/stdnav';\nimport buttonManager from '../../core/core.events.bis';\nimport layoutModule from '../../core/core.layout';\nimport primaryNavigation from '../../components/components.toolbarButtons';\nimport eventAutomation from 'js-sdk/src/common/util/eventAutomation';\nimport actionModel from '../../actionModel/actionModel.modelGenerator';\n\nvar gserial = 0;\n\n// TODO: get rid of dependency on JRS mark-up\nlayoutModule.TOOLBAR_MENU_PATTERN = 'ul.j-toolbar';\nlayoutModule.TOOLBAR_MENU_ITEM_PATTERN = 'ul.j-toolbar li';\n\nlayoutModule.BUTTON_ZOOM_VALUE = 'button#zoom_value_button';\nlayoutModule.BUTTON_SEARCH_REPORT = 'button#search_report_button';\nlayoutModule.BUTTON_SEARCH_OPTIONS = 'button#search_options';\nlayoutModule.BUTTON_FILE_OPTIONS = 'button#fileOptions';\nlayoutModule.BUTTON_EXPORT = 'button#export';\n\nlayoutModule.INPUT_ZOOM_VALUE = 'input#zoom_value';\nlayoutModule.INPUT_SEARCH_REPORT = 'input#search_report';\n\nlayoutModule.VIEWER_TOOLBAR = '#viewerToolbar';\nlayoutModule.MENU_VWROPTIONS = '#vwroptions .menu.vertical.dropDown.fitable';\nlayoutModule.MENU_VWROPTIONS_LIST = '#vwroptions .menu.vertical.dropDown.fitable li';\n\n\nvar StdnavPluginToolbar = function () {\n    gserial++;\n    this.serial = gserial;\n};\n\n_.extend(StdnavPluginToolbar.prototype, {\n    zinit: function (selector) {\n        return this;\n    },\n\n    // Registers the 'toolbar' navtype with stdnav.  Both stdnav and toolbar\n    // must be loaded and activated before this can be done.\n    activate: function () {\n        // This is the behaviour hash for the navtype.  These defaults pass\n        // everything through to the browser, and are normally overridden\n        // with $.extend based on specific tagnames and stdnav attributes.\n        this.behavior = {\n            'ariaprep': [this, this._ariaPrep, null],\n            'ariarefresh': [this, this._ariaRefresh, null],\n            'down': [this, this._onDown, null],\n            'enter': [this, this._onEnterOrEntered, null],\n            'exit': [this, this._onExit, null],\n            'fixfocus': [this, this._fixFocus, null],\n            'fixsubfocus': [this, this._fixFocus, null],\n            'fixsuperfocus': [this, this._fixSuperfocus, null],\n            'focusin': [this, this._onFocusIn, null],\n            'focusout': [this, this._onFocusOut, null],\n            'left': [this, this._onLeft, null],\n            'right': [this, this._onRight, null],\n            'subfocusin': [this, this._onSubfocusIn, null],\n            'superfocusin': [this, this._onSuperfocusIn, null],\n            'superfocusout': [this, this._onSuperfocusOut, null],\n            'up': [this, this._onUp, null],\n            'inherit': false\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n\n    // Unregisters the 'toolbar' navtype from stdnav.  This must be done\n    // before deactivating/unloading stdnav.\n    deactivate: function () {\n        stdnav.unregisterNavtype(this.navtype, this);\n    },\n\n    // This callback is run when the page is initially rendered.  Add the\n    // appropriate ARIA tags for the handled construt, if they do not already\n    // exist.  The element passed will be the superfocus for the construct\n    // being instrumented, but this construct may not actually have focus at\n    // the time this function is called.\n    _ariaPrep: function (el) {\n        this._ariaRefresh(el);\n    },\n\n    // This callback is run when the superfocus changes to the construct.\n    // Its two purposes are to update existing constructs, and to handle\n    // dynamically-created content whose creation was not detected during\n    // initial page construction (possibly because no part of the construct\n    // existed yet).  The element passed will be the superfocus for the\n    // construct, but this construct may not actually have focus at the time\n    // this function is called.\n    _ariaRefresh: function (el) {\n        var $items = $(el).find('li').not(\".divider\");\n        $(el).attr('role', 'application');\n        $.each($items, function (key, item) {\n            var $item = $(item);\n            $item.attr('role', 'option');\n            var $labeledEl = $item.find(\"[aria-label]\");\n            if (!$item.attr('aria-label') && $labeledEl.length) {\n                $item.attr('aria-label', $labeledEl.attr('aria-label'));\n            }\n        });\n        return null;\n    },\n\n    /* ====== Focus Management ====== */\n\n\n    // Focus adjustment callback.  Ensures that if the DIV or UL elements\n    // themselves are given focus, that it is promoted to the first LI.\n    _fixFocus: function (element) {\n        var newFocus;\n        var $el = $(element);\n        if ($el.is('div,ul,ol')) {\n            // The usual case: the entire menu is gaining focus.  One of\n            // the reasons this can happen, of course, is in response to a\n            // mouse click, not a TAB press-- as a result, check to see if\n            // any of the menu options has the \"pressed\" CSS class, and\n            // focus that, if it does.  However, ignore the \"over\" class,\n            // as the mouse pointer can wind up anywhere for a blind user\n            // by total coincidence, so it must be ignored when setting\n            // focus in response to TAB.\n            //\n            // If nothing seems to be in use yet, select the first list\n            // item-- if there ARE any.\n            //\n            // Failing even that, select the list itself.\n            var items = $el.find('.pressed');\n            if (items.length > 0) {\n                newFocus = items[0];\n            } else {\n                items = $el.find('li').not(\".divider\");\n                if (items.length > 0) {\n                    newFocus = items[0];\n                } else {\n                    // The entire list is empty-- set focus to the root list element\n                    // after all.\n                    newFocus = element;\n                }\n            }\n        } else if ($el.is('button')) {\n            // Focus is already appropriate.\n            newFocus = element;\n        } else {\n            // Assume we're in a span or something within a list item.\n            var lis = $el.closest('li');\n            if (lis.length > 0) {\n                if ($(lis[0]).prop['js-navigable'] === false) {\n                    // Clicked on a header or something; focus the list instead.\n                    newFocus = $el.closest('ul,ol');\n                } else {\n                    newFocus = lis[0];\n                }\n            }\n        }\n\n        // Avoid focusing disabled button\n        if ($(newFocus).is(\":disabled\") || $(newFocus).find(\".button,.mutton\").is(\":disabled\")) {\n            newFocus = stdnav.closestNavigableAncestor(newFocus);\n        }\n\n        // this code is necessary to fix JS-63350\n        if (newFocus[0] === $el[0]) {\n            newFocus = null;\n        }\n\n        return newFocus;\n    },\n\n    // Superfocus adjustment callback.  Because of the way actionModel\n    // works, the menu is expected to be rooted in an enclosing DIV that\n    // contains the list, so use the DIV for the superfocus region.\n    // However, context menus are _not_\n    _fixSuperfocus: function (element) {\n        var newSuperfocus;\n        var $root = $(element).closest('ul');\n        if ($root.length > 0) {\n            newSuperfocus = $root[0];\n        } else {\n            // FAULT, let StdNav fall back to BODY\n            newSuperfocus = null;\n        }\n        return newSuperfocus;\n    },\n\n    /* ========== NAVTYPE BEHAVIOR CALLBACKS =========== */\n\n    _onSuperfocusIn: function(element){\n        var $elem = $(element),\n            $parentList = $(this.parent).closest(layoutModule.TOOLBAR_MENU_PATTERN),\n            $currentList = $elem.closest(\".menu\").length && $elem;\n\n        if( $currentList && ($parentList.attr(\"tabindex\")>-1)){\n            this._parentTabindex = $parentList.attr(\"tabindex\");\n\n            if (this._parentTabindex>-1) {\n                $currentList.attr('js-suspended-tabindex', this._parentTabindex);\n                $currentList.find(\"li:first\").attr('tabindex', this._parentTabindex);\n            } else {\n                $elem.attr('js-suspended-tabindex', 'none');\n                $currentList.find(\"li:first\").attr('tabindex', -1);\n            }\n\n            // Explicitly make the element unfocusable-- temporarily.\n            $currentList.attr('tabindex', '-1');\n            $parentList.attr(\"tabindex\", \"-1\");\n        }\n\n        return element;\n    },\n\n    _onSubfocusIn: function(element){\n        var $ul = $(element).closest(layoutModule.TOOLBAR_MENU_PATTERN);\n\n        if($ul.attr('js-suspended-tabindex')>-1){\n            $(element).attr(\"tabindex\", $ul.attr('js-suspended-tabindex'));\n        } else if ($ul.attr('tabindex')>-1){\n            $(element).attr(\"tabindex\", $ul.attr('tabindex'));\n            $ul.attr('js-suspended-tabindex', $ul.attr('tabindex'));\n        }\n    },\n\n    _onFocusIn: function (element) {\n        var $thisItem,\n            $matched;\n\n        var $selected = $(element);\n        if ($selected.length>0) {\n            $thisItem = $selected.closest(layoutModule.TOOLBAR_MENU_ITEM_PATTERN);\n            if ($thisItem.length>0) {\n                // An item in the main menu bar has been focused.\n                buttonManager.over($thisItem.find(\".button\")[0]);\n                //buttonManager.over($thisItem.find(layoutModule.MENU_LIST_PATTERN)[0]); //ToDo\n                $matched = $thisItem.find(\".mutton\");\n\n                if ($matched.length>0 && !buttonManager.isDisabled($matched.context)) {\n                    // The item has a submenu-- show it.\n                    //actionModel.hideMenu();\n                    primaryNavigation.showButtonMenu(null, $matched[0]);\n                } else {\n                    // An item with no drop-down menu has been focused;\n                    // ensure any drop-down menus for other items are closed.\n                    actionModel.hideMenu();\n                    $(layoutModule.MENU_VWROPTIONS).hide();\n                }\n            } else {\n                $thisItem = $selected.is(\".menu li\")? $selected : $selected.closest(\".menu\");\n                if ($thisItem.length>0) {\n                    // An item in a drop-down or context menu has been focused.\n                    buttonManager.over($thisItem.find(\"p\")[0]);\n                }\n\n                // TODO: get rid of dependency on JRS mark-up\n                if($selected.is(layoutModule.BUTTON_ZOOM_VALUE) || $selected.is(layoutModule.BUTTON_SEARCH_REPORT)\n                    || $selected.is(layoutModule.BUTTON_SEARCH_OPTIONS)){\n                    $selected.click();\n                }\n            }\n        }\n        return element;\n    },\n\n    _onFocusOut: function (element) {\n        var $thisItem = $(element).closest(layoutModule.TOOLBAR_MENU_ITEM_PATTERN);\n\n        if ($thisItem.length>0) {\n            // A top-level item in the main menu bar has lost focus.\n            //actionModel.hideMenu();\n            // Don't remove the style if we've moved into a drop-down menu.\n            if (this.lastMenuBarItem !== element){\n                buttonManager.out($thisItem.find(layoutModule.BUTTON_PATTERN)[0]);\n                $thisItem.removeAttr(\"tabindex\");\n            }\n            //buttonManager.out($thisItem.find(layoutModule.MENU_LIST_PATTERN)[0]);\n        } else {\n            $thisItem = $(element).closest(layoutModule.MENU_LIST_PATTERN);\n            if ($thisItem.length>0) {\n                // An item in a drop-down or context menu has lost focus.\n                buttonManager.out($thisItem.find(layoutModule.BUTTON_PATTERN)[0]);\n                $thisItem.removeAttr(\"tabindex\");\n            }\n        }\n\n        return null;\n    },\n\n    _onSuperfocusOut: function(element){\n        var $toolbar = $(layoutModule.VIEWER_TOOLBAR);\n\n        if ($toolbar.length<1){\n            // There is no main navigation in embedded mode.\n            return element;\n        }\n        // Hide the dropdown menu unless the new focus is _in_ the\n        // dropdown menu.  Because of the way actionModel works, the\n        // dropdown menu is NOT a DOM descendant of the toolbar.\n        var newFocus=$(document.activeElement);\n        if (newFocus.closest('.dropDown').length<1){\n            var $selected = $toolbar.find(\".\" + layoutModule.HOVERED_CLASS);\n\n            if ($selected.length>0) {\n                buttonManager.out($selected[0]);\n            }\n\n            actionModel.hideMenu();\n            $(layoutModule.MENU_VWROPTIONS).hide();\n\n            // Explicitly make the element unfocusable-- temporarily.\n            var $ul = $(this.parent).closest(layoutModule.TOOLBAR_MENU_PATTERN);\n\n            $ul.attr(\"tabindex\", this._parentTabindex);\n\n            this.parent = null;\n            this.lastMenuBarItem = null;\n            $(\".isParent\").removeClass(\"isParent\");\n        }\n    },\n\n    /* ========== KEYBOARD BEHAVIOR =========== */\n\n\n    /* ========== KEYBOARD BEHAVIOR =========== */\n    _onLeft: function (element){\n        var $thisItem = $(element).closest(layoutModule.TOOLBAR_MENU_ITEM_PATTERN);\n        var $prev=$(element);\n\n        if(!$thisItem.length && $(element).closest(\".menu\").length){\n            $thisItem = $(this._onExitHandler(element));\n        }\n\n        if ($thisItem.length>0){\n            var $prevAll = $thisItem.prevAll(layoutModule.TOOLBAR_MENU_ITEM_PATTERN);\n            $prevAll.each(function(key, elem){\n                var $elem = $(elem);\n                if(!$elem.hasClass(\"divider\") && $elem.find(\"button:disabled\").length === 0 && $elem.find(\"button:hidden\").length === 0){\n                    $prev = $elem;\n                    return false;\n                }\n            });\n        }\n\n        return $prev[0];\n    },\n\n    _onRight: function (element) {\n        var $thisItem = $(element).closest(layoutModule.TOOLBAR_MENU_ITEM_PATTERN);\n        var $next=$(element);\n\n        if(!$thisItem.length && $(element).closest(\".menu\").length){\n            $thisItem = $(this._onExitHandler(element));\n        }\n\n        if ($thisItem.length>0){\n            var $nextAll = $thisItem.nextAll(layoutModule.TOOLBAR_MENU_ITEM_PATTERN);\n            $nextAll.each(function(key, elem){\n                var $elem = $(elem);\n                if(!$elem.hasClass(\"divider\") && $elem.find(\"button:disabled\").length === 0 && $elem.find(\"button:hidden\").length === 0){\n                    $next = $elem;\n                    return false;\n                }\n            });\n        }\n\n        return $next[0];\n    },\n\n    _onUp: function (element) {\n        var $prev = $(element);\n\n        if($(element).closest(\".menu\").length){\n            if($prev.prev().length){\n                $prev.find(\"p\").removeClass(layoutModule.HOVERED_CLASS);\n                $prev = $prev.prev().hasClass(\"separator\") ? $prev.prev().prev() : $prev.prev();\n                $prev.find(\"p\").addClass(layoutModule.HOVERED_CLASS);\n            } else {\n                $prev.length = 0;\n            }\n        }\n\n        if ($prev.length>0){\n            return $prev[0];\n        } else {\n            return this._onExitHandler(element);\n        }\n    },\n\n    _onDown: function (element) {\n        var $menu,\n            $button,\n            $next = $(element),\n            $input = $next.find(\"input\");\n\n        // TODO: get rid of dependency on JRS mark-up\n        if ($input.is(layoutModule.INPUT_ZOOM_VALUE) ){\n            $button = $(layoutModule.BUTTON_ZOOM_VALUE);\n        } else if ($input.is(layoutModule.INPUT_SEARCH_REPORT) ){\n            $button = $(layoutModule.BUTTON_SEARCH_OPTIONS);\n        }\n\n        if($button && $button.length){\n            this._setParentElem(element);\n\n            eventAutomation.simulateClickSequence($button[0]);\n            $(layoutModule.MENU_VWROPTIONS_LIST).first().find(\"p\").addClass(layoutModule.HOVERED_CLASS);\n            return  $(layoutModule.MENU_VWROPTIONS_LIST).first()[0];\n        }\n\n        if($next.parent().is(\"ul.buttonSet\")){\n            // TODO: get rid of dependency on JRS mark-up\n            if ($next.find(layoutModule.BUTTON_FILE_OPTIONS + \",\" + layoutModule.BUTTON_EXPORT).length === 0)  {\n                return element;\n            }\n            $(\"#\"+layoutModule.MENU_ID).removeClass(\"hidden\");\n            $menu = $(\"#\"+layoutModule.MENU_ID + \" ul\");\n        } else {\n            $menu = $next.closest(\"ul\").not(\".j-toolbar\");\n        }\n\n        if($(element).closest(\".menu\").length){\n            if($next.next().length){\n                $next.find(\"p\").removeClass(layoutModule.HOVERED_CLASS);\n                $next = $next.next().hasClass(\"separator\") ? $next.next().next() : $next.next();\n                $next.find(\"p\").addClass(layoutModule.HOVERED_CLASS);\n            }\n        } else if($(element).closest(\".buttonSet\").length) {\n            $next = $menu.find(\"li\").first();\n\n            this._setParentElem(element);\n            // this.lastMenuBarItem = element;\n        }\n\n        return $next[0];\n    },\n\n    _onExit: function(element){\n        var $el = $(element);\n        if($el.find(\"p\").length>0){\n            element = this._onExitHandler(element);\n        } else {\n            element = $(\"#\"+layoutModule.MAIN_SEARCH_INPUT_ID)[0];\n        }\n\n        return element;\n    },\n\n    _onEnterOrEntered: function (element) {\n        // Activate the link.\n        var simulateEl;\n        var $el = $(element);\n\n        if($el.hasClass(\"j-dropdown\")){\n            this._setParentElem(element);\n            element = $el.find(\"input\")[0];\n\n            // select the existing text value\n            if (element) {\n                $(element).select();\n            }\n        }\n\n        if($el.find(\"p\").length>0){\n            simulateEl = $el.find(\"p\")[0];\n        } else if ($el.find(\"input\").length === 0) {\n            simulateEl = $el.find(\".button\")[0];\n        }\n\n        // TODO: get rid of dependency on JRS mark-up\n        if(simulateEl && $(this.parent).find(layoutModule.BUTTON_FILE_OPTIONS).length === 0 &&\n            $(this.parent).find(layoutModule.BUTTON_EXPORT).length === 0){\n            eventAutomation.simulateClickSequence(simulateEl);\n        }\n\n        if($(element).find(\"p\").length>0){\n            element = this._onExitHandler(element);\n        }\n\n        return element;\n    },\n\n    _setParentElem: function(element){\n        this.parent = element;\n        $(element).addClass(\"isParent\");\n        this.lastMenuBarItem = element;\n    },\n\n    _onExitHandler: function (element) {\n        element = this.parent;\n        if(!element){\n            element = $(\".isParent\")[0];\n        }\n\n        $(element).removeClass(\"isParent\");\n        return element;\n    }\n});\n\n$.extend(StdnavPluginToolbar.prototype, {\n    // This is the name of the new navtype.  Each stdnav plugin must\n    // define a unique name.\n    navtype: 'toolbar',\n\n    // This arrray extends the tag-to-navtype map in stdnav.  If your\n    // plugin should apply to all elements of a given type, add those\n    // element tagnames, in lower case, to this array.  It is normally\n    // empty, and the page templates simply set an appropriate\n    // \"data-navtype=\" attribute to get the expected behavior.\n    // CASE SENSITIVE - USE UPPER-CASE!\n    navtype_tags: []\n});\n\nexport default new StdnavPluginToolbar();\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\n\nimport 'jquery-ui/ui/widgets/datepicker';\n\nvar _jasperPrefix = \"jr\";\nvar _jasperPopupClass = \"jr-jDatepickerPopupContainer\";\n\nvar datepickerId = $.datepicker.dpDiv.attr(\"id\"),\n    _mainDivId = _jasperPrefix + \"-\" + datepickerId;\n\n$.datepicker._mainDivId = _mainDivId;\n\n$.datepicker.dpDiv.attr(\"id\", _mainDivId);\n\n$.datepicker.dpDiv.removeClass();\n\nvar dpDivClass = _jasperPopupClass\n    + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all '\n    + _jasperPrefix;\n\n$.datepicker.dpDiv.addClass(dpDivClass);\n\nvar originalNewInst = $.datepicker._newInst;\n\n$.datepicker._newInst = function() {\n    var result = originalNewInst.apply($.datepicker, arguments);\n\n    result.dpDiv.removeClass(_jasperPrefix);\n    result.dpDiv.addClass(_jasperPrefix);\n\n    return result;\n};\n\nvar originalGoToToday = $.datepicker._gotoToday;\n\n$.datepicker._gotoToday = function(id) {\n    originalGoToToday.call(this, id);\n    this._selectDate(id);\n};\n\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\n\nimport './jQueryDatepickerExtension';\nimport './jQueryUiSliderAccessExtension';\nimport 'jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon';\n\nvar originalNewInst = $.timepicker._newInst;\n\n$.timepicker._newInst = function($input, opts) {\n    if (!opts.onChangeMonthYear) {\n        opts.onChangeMonthYear = function(year, month, datepicker, timepicker) {\n            datepicker.currentYear = datepicker.selectedYear;\n            datepicker.currentMonth = datepicker.selectedMonth;\n            datepicker.currentDay = datepicker.selectedDay;\n\n            timepicker._updateDateTime(datepicker);\n        };\n    }\n\n    var instance = originalNewInst.call($.timepicker, $input, opts);\n\n    var originalOnTimeChange = instance._onTimeChange;\n\n    instance._onTimeChange = function() {\n        this.$timeObj[0].setSelectionRange = null;\n\n        return originalOnTimeChange.apply(this, arguments);\n    };\n\n    return instance;\n};\n\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n* @author: ${username}\n* @version: $Id$\n*/\n\n/* Standard Navigation library (stdnav) plugin\n* Elements: A\n* Navtype:  anchor (element default)\n*\n* Plugin for the \"anchor\" navtype.  This is the default behavior for \"A\"\n* tags, handling both normal \"HREF\" links and \"#\" internal/Backbone/fake\n* button links.\n*\n* This module supports enhancements intended to improve compliance with\n* section 508 of the Rehabilitation Act of 1973, 29 USC 798, as amended\n* 1998.\n*/\nimport $ from 'jquery';\nimport eventAutomation from '../../util/eventAutomation';\nimport log from \"../../logging/logger\";\nimport stdnav from '../stdnav';\n\nvar version = \"0.0.1\",\n    singleton = null,\n    gserial = 0;\n\nlet logger = log.register('stdnav');\n\n// Local object definition.\n\nvar stdnavPluginAnchor = function () {\n    gserial++;\n    this.serial = gserial;\n};\n\n// FIRST EXTENSION PASS - FUNCTIONS\n// Provides forward-references for hashes in the second pass, so that\n// references in that second pass to functions declared here resolve\n// (since the entire pass is applied at once, they cannot be combined).\n$.extend(stdnavPluginAnchor.prototype, {\n    zinit: function (selector) {\n        logger.debug('stdnavPluginAnchor.init(' + selector + \")\\n\");\n        return this;\n    },\n\n    // Registers the 'anchor' navtype with stdnav.  stdnav must be loaded and\n    // activated before this can be done.\n    activate: function () {\n        // This is the behaviour hash for the navtype.  These defaults pass\n        // everything through to the browser, and are normally overridden\n        // with $.extend based on specific tagnames and stdnav attributes.\n        this.behavior = {\n            'ariaprep': [this, this._ariaPrep, null],\n            'ariarefresh': [this, this._ariaRefresh, null],\n            'down': [this, this._onLeftOrUp, null],\n            'enter': [this, this._onEnterOrEntered, null],\n            'inherit': false,\n            'inheritable': true,\n            'left': [this, this._onLeftOrUp, null],\n            'right': [this, this._onRightOrDown, null],\n            'up': [this, this._onRightOrDown, null]\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n\n    // Unregisters the 'anchor' navtype from stdnav.  This must be done\n    // before deactivating/unloading stdnav.\n    deactivate: function () {\n        stdnav.unregisterNavtype('anchor', this.behavior);\n    },\n\n    // This callback is run when the page is initially rendered.  Add the\n    // appropriate ARIA tags for the handled construct, if they do not already\n    // exist.  The element passed will be the superfocus for the construct\n    // being instrumented, but this construct may not actually have focus at\n    // the time this function is called.\n    _ariaPrep: function (el) {\n        $(el).attr('role', 'link');\n        /*\n        var label = $(el).attr('aria-label');\n        if (stdnav.nullOrUndefined(label)) {\n            $(el).attr('aria-label', $(el).text());\n        }\n        */\n        return null;\n    },\n\n    // This callback is run when the superfocus changes to the construct.\n    // Its two purposes are to update existing constructs, and to handle\n    // dynamically-created content whose creation was not detected during\n    // initial page construction (possibly because no part of the construct\n    // existed yet).  The element passed will be the superfocus for the\n    // construct, but this construct may not actually have focus at the time\n    // this function is called.\n    _ariaRefresh: function (el) {\n        $(el).attr('role', 'link');\n        /*\n        var label = $(el).attr('aria-label');\n        if (stdnav.nullOrUndefined(label)) {\n            $(el).attr('aria-label', $(el).text());\n        }\n        */\n        return null;\n    },\n\n    // Utility function: given a list, ensure the most appropriate element\n    // available (in this case, the top-level anchor node, only) has focus.\n    _fixSubfocus: function (element) {\n        var newSubfocus;\n        var $el = $(element);\n\n        if ($el.is('A')) {\n            newSubfocus = $el;\n        } else {\n            newSubfocus = $(element).closest('A');\n            if (newSubfocus === undefined) {\n                // Safety\n                return undefined;\n            }\n        }\n\n        // Nothing in or under this node should have ghostfocus; clear anything\n        // that does, and ensure that only the anchor element itself has subfocus.\n        newSubfocus.find('.ghostfocus').removeClass('.ghostfocus');\n        newSubfocus.children().find('.subfocus').removeClass('.subfocus');\n        return newSubfocus;\n    },\n\n    /* ========== NAVTYPE BEHAVIOR CALLBACKS =========== */\n\n    _onFocusIn: function (element) {\n        var newSubfocus;\n        // This should fire on the list itself, not the item.\n        var ghosts = $(element).children('.ghostfocus');\n        if (ghosts.length > 0) {\n            ghosts.removeClass('ghostfocus');\n            // Promote ghost.\n            newSubfocus = this._fixSubfocus(ghosts[0]);\n        } else {\n            // Set subfocus to first item, without firing callbacks.\n            var items = $(element).children('li[js-navigable!=\"false\"]');\n            if (items.length > 0) {\n                newSubfocus = this._fixSubfocus(items[0]);\n            } else {\n                // For visual reasons, in the case of an empty list, we give up and\n                // set subfocus to the list itself.\n                newSubfocus = element;\n            }\n        }\n        return newSubfocus;\n    },\n\n    _onLeftOrUp: function(element) {\n        var $prev=$(element).prev('a');\n        if ($prev.length<1){\n            return element;\n        }\n        return $prev[0];\n    },\n\n    _onRightOrDown: function(element) {\n        var $next=$(element).next('a');\n        if ($next.length<1){\n            return element;\n        }\n        return $next[0];\n    },\n\n    //FIXME: Do not set ghostfocus on focus out\n\n    _onSubfocusIn: function (element) {\n        if ($(element).prop('nodeName') != 'A') {\n            // Find a usable child element.\n            var subel = this._fixSubfocus(element);\n            // Adjust subfocus without firing callbacks.\n            stdnav.setSubfocus(subel, false);\n        }\n    },\n\n    // When activated as a member of a navigable control, such as a list or\n    // table, this is a cascade event from the navigable control's \"enter\"\n    // handler, which will cause our \"enter\" handler to fire.  However, if\n    // the anchor is a simple link, such as an <a> tag embedded in a <p> block,\n    // it will be a simple tabstop, which is therefore focusable.  If such a\n    // link is focused, pressing ENTER will fire our \"enter\" handler.  The same\n    // logic works for both cases, so this callback should be mapped to both\n    // events.\n    _onEnterOrEntered: function (element) {\n        // Activate the link.\n        var $el = $(element);\n        if ($el.is('a')) {\n            // Fire the click handler\n            eventAutomation.simulateClickSequence(element);\n        }\n        return element;\n    }\n});\n\n// SECOND EXTENSION PASS - ATTRIBUTES\n// Hash members in this pass can reference functions from the last pass.\n$.extend(stdnavPluginAnchor.prototype, {\n    // This is the name of the new navtype.  Each stdnav plugin must\n    // define a unique name.\n    navtype: 'anchor',\n\n    // This arrary extends the tag-to-navtype map in stdnav.  If your\n    // plugin should apply to all elements of a given type, add those\n    // element tagnames, in lower case, to this array.  It is normally\n    // empty, and the page templates simply set an appropriate\n    // \"data-navtype=\" attribute to get the expected behavior.\n    //\n    // CASE SENSITIVE - USE UPPER-CASE!\n    navtype_tags: ['A']\n});\nvar newStdnavPluginAnchor = new stdnavPluginAnchor();\nexport default newStdnavPluginAnchor;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n* @author: ${username}\n* @version: $Id$\n*/\n\n/* Standard Navigation library (stdnav) plugin\n* Elements: BUTTON\n* Navtype:  button (element default)\n*\n* Plugin for the \"button\" navtype.  This is the default behavior for \"BUTTON\"\n* elements.\n*\n* This module supports enhancements intended to improve compliance with\n* section 508 of the Rehabilitation Act of 1973, 29 USC 798, as amended\n* 1998.\n*/\n\nimport $ from 'jquery';\nimport eventAutomation from '../../util/eventAutomation';\nimport log from \"../../logging/logger\";\nimport stdnav from '../stdnav';\n\nvar version = \"0.0.1\",\n    singleton = null,\n    gserial = 0;\n\nlet logger = log.register(\"stdnav\");\n\n// Local object definition.\n\nvar stdnavPluginButton = function () {\n    gserial++;\n    this.serial = gserial;\n};\n\n// FIRST EXTENSION PASS - FUNCTIONS\n// Provides forward-references for hashes in the second pass, so that\n// references in that second pass to functions declared here resolve\n// (since the entire pass is applied at once, they cannot be combined).\n$.extend(stdnavPluginButton.prototype, {\n    zinit: function (selector) {\n        logger.debug('stdnavPluginButton.init(' + selector + \")\\n\");\n        return this;\n    },\n\n    // Registers the 'button' navtype with stdnav.  stdnav must be loaded and\n    // activated before this can be done.\n    activate: function () {\n        // This is the behaviour hash for the navtype.  These defaults pass\n        // everything through to the browser, and are normally overridden\n        // with $.extend based on specific tagnames and stdnav attributes.\n        this.behavior = {\n            'enter': [this, this._onEnterOrEntered, null],\n            'entered': [this, this._onEnterOrEntered, null],\n            'exit': [this, this._onExit, null],\n            'toggle': [this, this._onEnterOrEntered, null],\n            'inherit': false,\n            'inheritable': true\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n\n    // Unregisters the 'button' navtype from stdnav.  This must be done\n    // before deactivating/unloading stdnav.\n    deactivate: function () {\n        stdnav.unregisterNavtype('button', this.behavior);\n    },\n\n    // Utility function: given a list, ensure the most appropriate element\n    // available (in this case, the top-level link node, only) has focus.\n    _fixSubfocus: function (element) {\n        var newSubfocus;\n        var $el = $(element);\n\n        if ($el.is(\"BUTTON,[role='button']\")) {\n            newSubfocus = $el;\n        } else {\n            newSubfocus = $(element).closest(\"BUTTON,[role='button']\");\n            if (newSubfocus === undefined) {\n                // Safety\n                return undefined;\n            }\n        }\n\n        // Nothing in or under this node should have ghostfocus; clear anything\n        // that does, and ensure that only the link element itself has subfocus.\n        newSubfocus.find('.ghostfocus').removeClass('.ghostfocus');\n        newSubfocus.children().find('.subfocus').removeClass('.subfocus');\n        return newSubfocus;\n    },\n\n    /* ========== NAVTYPE BEHAVIOR CALLBACKS =========== */\n\n    _onFocusIn: function (element) {\n        var newSubfocus;\n        // This should fire on the list itself, not the item.\n        var ghosts = $(element).children('.ghostfocus');\n        if (ghosts.length > 0) {\n            ghosts.removeClass('ghostfocus');\n            // Promote ghost.\n            newSubfocus = this._fixSubfocus(ghosts[0]);\n        } else {\n            // Set subfocus to first item, without firing callbacks.\n            var items = $(element).children('li[js-navigable!=\"false\"]');\n            if (items.length > 0) {\n                newSubfocus = this._fixSubfocus(items[0]);\n            } else {\n                // For visual reasons, in the case of an empty list, we give up and\n                // set subfocus to the list itself.\n                newSubfocus = element;\n            }\n        }\n        return newSubfocus;\n    },\n\n    //FIXME: Do not set ghostfocus on focus out\n\n    _onSubfocusIn: function (element) {\n        if ($(element).prop('nodeName') != 'BUTTON') {\n            // Find a usable child element.\n            var subel = this._fixSubfocus(element);\n            // Adjust subfocus without firing callbacks.\n            stdnav.setSubfocus(subel, false);\n        }\n    },\n\n    // When activated as a member of a navigable control, such as a list or\n    // table, this is a cascade event from the navigable control's \"enter\"\n    // handler, which will cause our \"entered\" handler to fire.  However, if\n    // the anchor is a simple link, such as an <a> tag embedded in a <p> block,\n    // it will be a simple tabstop, which is therefore focusable.  If such a\n    // link is focused, pressing ENTER will fire our \"enter\" handler.  The same\n    // logic works for both cases, so this callback should be mapped to both\n    // events.\n    _onEnterOrEntered: function (element) {\n        // Activate the link.\n        var $el = $(element);\n        if ($el.is(\"BUTTON,[role='button']\")) {\n            eventAutomation.simulateClickSequence(element);\n        }\n        return element;\n    },\n\n    _onExit: function(){\n        return $('#searchInput')[0]; // re-use the common exit handler (stdnav.basicExit())\n    }\n});\n\n// SECOND EXTENSION PASS - ATTRIBUTES\n// Hash members in this pass can reference functions from the last pass.\n$.extend(stdnavPluginButton.prototype, {\n    // This is the name of the new navtype.  Each stdnav plugin must\n    // define a unique name.\n    navtype: 'button',\n\n    // This arrary extends the tag-to-navtype map in stdnav.  If your\n    // plugin should apply to all elements of a given type, add those\n    // element tagnames, in lower case, to this array.  It is normally\n    // empty, and the page templates simply set an appropriate\n    // \"data-navtype=\" attribute to get the expected behavior.\n    //\n    // CASE SENSITIVE - USE UPPER-CASE!\n    navtype_tags: ['BUTTON']\n});\nvar newStdnavPluginButton = new stdnavPluginButton();\nexport default newStdnavPluginButton;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport logger from \"../../logging/logger\";\nimport stdnav from '../stdnav';\n\nlet localLogger = logger.register(\"stdnavPluginGrid\");\n\nvar version = '0.0.1';\nvar singleton = null;\nvar gserial = 0;\nvar stdnavPluginGrid = function () {\n    gserial++;\n    this.serial = gserial;\n};\n$.extend(stdnavPluginGrid.prototype, {\n    zinit: function (selector) {\n        localLogger.debug('stdnavPluginGrid.init(' + selector + ')\\n');\n        return this;\n    },\n    activate: function () {\n        this.behavior = {\n            'focusin': [\n                this,\n                stdnav.basicFocusIn,\n                {\n                    'maxdepth': 2,\n                    'subfocusclass': 'gridcell'\n                }\n            ],\n            'focusout': [\n                this,\n                stdnav.ghostFocusOut,\n                null\n            ],\n            'subfocusin': [\n                this,\n                this._onSubfocusIn,\n                null\n            ],\n            'left': [\n                this,\n                this._onLeft,\n                null\n            ],\n            'right': [\n                this,\n                this._onRight,\n                null\n            ],\n            'up': [\n                this,\n                this._onUp,\n                null\n            ],\n            'down': [\n                this,\n                this._onDown,\n                null\n            ],\n            'hoverin': [\n                this,\n                this._onHover,\n                null\n            ],\n            'inherit': true,\n            'inheritable': true\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n    deactivate: function () {\n        stdnav.unregisterNavtype(this.navtype, this.behavior);\n    },\n    _findSubfocus: function (el) {\n        var grid = $(el).closest('.grid');\n        var sfels = grid.find('.subfocus');\n        if (sfels !== undefined) {\n            return $(sfels[0]);\n        }\n    },\n    _fixSubfocus: function (element) {\n        var ghosts;\n        var newSubfocus;\n        if (element.hasClass('grid')) {\n            ghosts = element.children('.gridrow').children('.gridcell .ghostfocus');\n            if (ghosts.length > 0) {\n                newSubfocus = ghosts[0];\n            } else {\n                var rows = element.children('.gridrow');\n                if (rows.length > 0) {\n                    var cells = $(rows[0]).children('.gridcell');\n                    if (cells.length > 0) {\n                        newSubfocus = cells[0];\n                    } else {\n                        newSubfocus = rows[0];\n                    }\n                } else {\n                    newSubfocus = element;\n                }\n            }\n        } else if (element.hasClass('gridrow')) {\n            ghosts = element.children('.gridcell .ghostfocus');\n            newSubfocus = ghosts[0];\n        } else if (element.hasClass('gridcell')) {\n            newSubfocus = element;\n        }\n        return newSubfocus;\n    },\n    _onSubfocusIn: function (element) {\n        if ($(element).hasClass('gridcell') === false) {\n            var subel = this._fixSubfocus($(element));\n            stdnav.setSubfocus(subel, false);\n        }\n    },\n    _onLeft: function (element) {\n        var sfel = this._findSubfocus(element);\n        var newsf = $(false);\n        if (sfel.hasClass('gridcell')) {\n            newsf = sfel.prev('.gridcell');\n        }\n        if (newsf.length === 1) {\n            stdnav.setSubfocus(newsf);\n        }\n        return false;\n    },\n    _onRight: function (element) {\n        var sfel = this._findSubfocus(element);\n        var newsf = $(false);\n        if (sfel.hasClass('gridcell')) {\n            newsf = sfel.next('.gridcell');\n        }\n        if (newsf.length === 1) {\n            stdnav.setSubfocus(newsf);\n        }\n        return false;\n    },\n    _onUp: function (element) {\n        var sfel = this._findSubfocus(element);\n        var row;\n        var newrow = $(false);\n        var newsf = $(false);\n        if (sfel.hasClass('gridcell')) {\n            row = sfel.closest('.gridrow');\n            if (row.length === 1) {\n                newrow = row.prev('.gridrow');\n            }\n            if (newrow.length === 1) {\n                var iter = sfel;\n                var col = -1;\n                do {\n                    col++;\n                    iter = $(iter.prev('.gridcell')[0]);\n                } while (iter.length > 0);\n                newsf = $(newrow.find('.gridcell')[0]);\n                while (col > 0) {\n                    iter = newsf.next('.gridcell');\n                    if (iter.length > 0) {\n                        newsf = $(iter[0]);\n                    }\n                    col--;\n                }\n            }\n        }\n        if (newsf.length === 1) {\n            stdnav.setSubfocus(newsf);\n        }\n        return false;\n    },\n    _onDown: function (element) {\n        var sfel = this._findSubfocus(element);\n        var row;\n        var newrow = $(false);\n        var newsf = $(false);\n        if (sfel.hasClass('gridcell')) {\n            row = sfel.closest('.gridrow');\n            if (row.length > 0) {\n                newrow = row.next('.gridrow');\n            }\n            if (newrow.length > 0) {\n                var iter = sfel;\n                var col = -1;\n                do {\n                    col++;\n                    iter = $(iter.prev('.gridcell')[0]);\n                } while (iter.length > 0);\n                newsf = $(newrow.find('.gridcell')[0]);\n                while (col > 0) {\n                    iter = newsf.next('.gridcell');\n                    if (iter.length > 0) {\n                        newsf = $(iter[0]);\n                    }\n                    col--;\n                }\n            }\n        }\n        if (newsf.length === 1) {\n            stdnav.setSubfocus(newsf);\n        }\n        return false;\n    }\n});\n$.extend(stdnavPluginGrid.prototype, {\n    navtype: 'grid',\n    navtype_tags: []\n});\nvar newStdnavPluginGrid = new stdnavPluginGrid();\nexport default newStdnavPluginGrid;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport logger from \"../../logging/logger\";\nimport stdnav from '../stdnav';\n\nlet localLogger = logger.register(\"stdnavPluginList\");\n\nvar version = '0.0.1';\nvar singleton = null;\nvar gserial = 0;\nvar stdnavPluginList = function () {\n    gserial++;\n    this.serial = gserial;\n};\n$.extend(stdnavPluginList.prototype, {\n    zinit: function (selector) {\n        localLogger.debug('stdnavPluginList.init(' + selector + ')\\n');\n        return this;\n    },\n    activate: function () {\n        this.behavior = {\n            'ariaprep': [\n                this,\n                this._ariaPrep,\n                null\n            ],\n            'ariarefresh': [\n                this,\n                this._ariaRefresh,\n                null\n            ],\n            'down': [\n                this,\n                this._onDown,\n                null\n            ],\n            'fixfocus': [\n                this,\n                this._fixFocus,\n                null\n            ],\n            'fixsuperfocus': [\n                this,\n                this._fixSuperfocus,\n                null\n            ],\n            'inherit': true,\n            'inheritable': true,\n            'left': [\n                this,\n                this._onLeft,\n                null\n            ],\n            'right': [\n                this,\n                this._onRight,\n                null\n            ],\n            'up': [\n                this,\n                this._onUp,\n                null\n            ],\n            'superfocusin': [\n                stdnav,\n                stdnav.basicSuperfocusIn,\n                {\n                    'maxdepth': 1,\n                    'focusSelector': 'li',\n                    'ghostfocus': false\n                }\n            ],\n            'superfocusout': [\n                stdnav,\n                stdnav.basicSuperfocusOut,\n                { 'ghostfocus': false }\n            ]\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n    deactivate: function () {\n        stdnav.unregisterNavtype('list', this.behavior);\n    },\n    _ariaPrep: function (el) {\n        this._ariaRefresh(el);\n    },\n    _ariaRefresh: function (el) {\n        var $list = $(el);\n        $list.attr('role', 'application');\n        var label = $list.attr('aria-label');\n        var labelledBy = $list.attr('aria-labelledby');\n        var $items = $list.children('li');\n        var itemPlural = $list.attr('js-itemplural');\n        if (itemPlural === '' || !itemPlural) {\n            itemPlural = 'items';\n        }\n        if (stdnav.nullOrUndefined(label) && stdnav.nullOrUndefined(labelledBy)) {\n            var allLinks = $items.find('a');\n            if (allLinks.length === $items.length) {\n                $list.attr('aria-label', 'List of ' + $items.length + ' links.');\n            } else {\n                $list.attr('aria-label', 'List of ' + $items.length + itemPlural);\n            }\n        }\n        $.each($items, function (index, item) {\n            var $item = $(item);\n            var $itemLinks = $item.find('a');\n            if ($itemLinks.length > 0) {\n                $item.attr('role', 'link');\n                var itemLabel = $item.attr('aria-label');\n                var itemLabelledBy = $item.attr('aria-labelledby');\n                if (stdnav.nullOrUndefined(itemLabel) && stdnav.nullOrUndefined(itemLabelledBy)) {\n                    var itemText = $item.text();\n                    itemLabel = itemText + '. ' + (index + 1) + ' of ' + $items.length + ' ' + itemPlural + '.';\n                    $item.attr('aria-label', itemLabel);\n                }\n            }\n        });\n        return null;\n    },\n    _fixFocus: function (element) {\n        var ghosts;\n        var newFocus;\n        var $el = $(element);\n        if ($el.is('fieldset') && $el.children('ul.inputSet').length) {\n            return element;\n        }\n        if ($el.is('ul,ol')) {\n            ghosts = $el.children('li .ghostfocus');\n            if (ghosts.length > 0) {\n                newFocus = ghosts[0];\n            } else {\n                var items = $el.children('li');\n                if (items.length > 0) {\n                    newFocus = items[0];\n                } else {\n                    newFocus = element;\n                }\n            }\n        } else if ($el.is('li')) {\n            newFocus = element;\n        } else {\n            var lis = $el.closest('li');\n            if (lis.length > 0) {\n                if ($(lis[0]).prop['js-navigable'] === false) {\n                    newFocus = $el.closest('ul,ol');\n                } else {\n                    newFocus = lis[0];\n                }\n            } else {\n                newFocus = $el.closest('ul,ol');\n            }\n        }\n        return newFocus;\n    },\n    _fixSubfocus: function (element) {\n        return null;\n    },\n    _fixSuperfocus: function (element) {\n        var newSuperfocus;\n        var $closestList = $(element).closest('ol,ul');\n        if ($closestList.length > 0) {\n            newSuperfocus = $closestList[0];\n        } else {\n            newSuperfocus = null;\n        }\n        return newSuperfocus;\n    },\n    _onClick: function (element) {\n        $(element).closest('ul, ol').focus();\n        stdnav.setSubfocus(this._fixSubfocus(element));\n    },\n    _onSuperfocusIn: function (element) {\n        var newFocus;\n        var ghosts = $(element).children('li .ghostfocus');\n        if (ghosts.length > 0) {\n            ghosts.removeClass('ghostfocus');\n            newFocus = ghosts[0];\n        } else {\n            var items = $(element).children('li[js-navigable!=\"false\"]');\n            if (items.length > 0) {\n                newFocus = items[0];\n            } else {\n                newFocus = element;\n            }\n        }\n        return newFocus;\n    },\n    _onSuperfocusOut: function (element) {\n    },\n    _onLeft: function (element) {\n        var newFocus = element;\n        var $list = $(element).closest('ul,ol');\n        if ($list.hasClass('horizontal')) {\n            var $newFocus = $(element).prev('li');\n            if ($newFocus.length === 0) {\n                if ($list.attr('js-stdnav-wrap') == 'wrap') {\n                    var $items = $list.children('li');\n                    if ($items.length > 0) {\n                        newFocus = $items[$items.length - 1];\n                    }\n                }\n            } else {\n                newFocus = $newFocus[0];\n            }\n        }\n        return newFocus;\n    },\n    _onRight: function (element) {\n        var newFocus = element;\n        var $list = $(element).closest('ul,ol');\n        if ($list.hasClass('horizontal')) {\n            var $newFocus = $(element).next('li');\n            if ($newFocus.length === 0) {\n                if ($list.attr('js-stdnav-wrap') == 'wrap') {\n                    var $items = $list.children('li');\n                    if ($items.length > 0) {\n                        newFocus = $items[0];\n                    }\n                }\n            } else {\n                newFocus = $newFocus[0];\n            }\n        }\n        return newFocus;\n    },\n    _onUp: function (element) {\n        var newFocus = element;\n        var $list = $(element).closest('ul,ol');\n        if (!$list.hasClass('horizontal')) {\n            var $newFocus = $(element).prev('li');\n            if ($newFocus.length === 0) {\n                if ($list.attr('js-stdnav-wrap') == 'wrap') {\n                    var $items = $list.children('li');\n                    if ($items.length > 0) {\n                        newFocus = $items[$items.length - 1];\n                    }\n                }\n            } else {\n                newFocus = $newFocus[0];\n            }\n        }\n        return newFocus;\n    },\n    _onDown: function (element) {\n        var newFocus = element;\n        var $list = $(element).closest('ul,ol');\n        if (!$list.hasClass('horizontal')) {\n            var $newFocus = $(element).next('li');\n            if ($newFocus.length === 0) {\n                if ($list.attr('js-stdnav-wrap') == 'wrap') {\n                    var $items = $list.children('li');\n                    if ($items.length > 0) {\n                        newFocus = $items[0];\n                    }\n                }\n            } else {\n                newFocus = $newFocus[0];\n            }\n        }\n        return newFocus;\n    }\n});\n$.extend(stdnavPluginList.prototype, {\n    navtype: 'list',\n    navtype_tags: [\n        'UL',\n        'OL'\n    ]\n});\nvar newStdnavPluginList = new stdnavPluginList();\nexport default newStdnavPluginList;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport logger from \"../../logging/logger\";\nimport stdnav from '../stdnav';\n\nlet localLogger = logger.register(\"stdnavPluginTable\");\n\nvar version = '0.0.1';\nvar singleton = null;\nvar gserial = 0;\nvar stdnavPluginTable = function () {\n    gserial++;\n    this.serial = gserial;\n};\n$.extend(stdnavPluginTable.prototype, {\n    zinit: function (selector) {\n        localLogger.debug('stdnavPluginTable.init(' + selector + ')\\n');\n        return this;\n    },\n    activate: function () {\n        this.behavior = {\n            'ariaprep': [\n                this,\n                this._ariaPrep,\n                null\n            ],\n            'ariarefresh': [\n                this,\n                this._ariaRefresh,\n                null\n            ],\n            'down': [\n                this,\n                this._onDown,\n                null\n            ],\n            'fixfocus': [\n                this,\n                this._fixFocus,\n                null\n            ],\n            'fixsuperfocus': [\n                this,\n                this._fixSuperfocus,\n                null\n            ],\n            'inherit': true,\n            'inheritable': true,\n            'left': [\n                this,\n                this._onLeft,\n                null\n            ],\n            'mousedown': [\n                stdnav,\n                stdnav.basicMouseDown\n            ],\n            'right': [\n                this,\n                this._onRight,\n                null\n            ],\n            'up': [\n                this,\n                this._onUp,\n                null\n            ],\n            'superfocusin': [\n                stdnav,\n                stdnav.basicSuperfocusIn,\n                {\n                    'maxdepth': 4,\n                    'focusSelector': 'td',\n                    'ghostfocus': false\n                }\n            ],\n            'superfocusout': [\n                stdnav,\n                stdnav.basicSuperfocusOut,\n                { 'ghostfocus': false }\n            ]\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n    deactivate: function () {\n        stdnav.unregisterNavtype(this.navtype, this.behavior);\n    },\n    _ariaPrep: function (el) {\n        this._ariaRefresh(el);\n    },\n    _ariaRefresh: function (el) {\n        var $table = $(el);\n        $table.attr('role', 'application');\n        var label = $table.attr('aria-label');\n        var labelledBy = $table.attr('aria-labelledby');\n        var $items = $table.find('td,th');\n        if (stdnav.nullOrUndefined(label) && stdnav.nullOrUndefined(labelledBy)) {\n            var allLinks = $items.find('a');\n            if (allLinks.length === $items.length) {\n                $table.attr('aria-label', 'Table of ' + $items.length + ' links.');\n            } else {\n                $table.attr('aria-label', 'Table of ' + $items.length + ' cells.');\n            }\n        }\n        $.each($items, function (index, item) {\n            var $item = $(item);\n            var $itemLinks = $item.find('a');\n            if ($itemLinks.length > 0) {\n                $item.attr('role', 'link');\n                var itemLabel = $item.attr('aria-label');\n                var itemLabelledBy = $item.attr('aria-labelledby');\n                if (stdnav.nullOrUndefined(itemLabel) && stdnav.nullOrUndefined(itemLabelledBy)) {\n                    var itemText = $item.text();\n                    itemLabel = itemText;\n                    $item.attr('aria-label', itemLabel);\n                }\n            }\n        });\n        return null;\n    },\n    _findSubfocus: function (el) {\n        var table = $(el).closest('table');\n        var sfels = table.find('.subfocus');\n        if (sfels !== undefined) {\n            return $(sfels[0]);\n        }\n    },\n    _getPreviousSection: function (element) {\n        var thisSection = $(element).closest('thead,tbody,tfoot');\n        var prevSection;\n        if (thisSection === undefined) {\n            return undefined;\n        }\n        switch (thisSection.prop('nodeType')) {\n        case 'TFOOT':\n            prevSection = thisSection.parent().children('TBODY');\n            break;\n        case 'TBODY':\n            prevSection = thisSection.parent().children('THEAD');\n            break;\n        case 'THEAD':\n            break;\n        default:\n        }\n        if (prevSection !== undefined && prevSection.length > 0) {\n            return prevSection[0];\n        }\n        return undefined;\n    },\n    _getNextSection: function (element) {\n        var thisSection = $(element).closest('thead,tbody,tfoot');\n        var nextSection;\n        if (thisSection === undefined) {\n            return undefined;\n        }\n        switch (thisSection.prop('nodeType')) {\n        case 'THEAD':\n            nextSection = thisSection.parent().children('TBODY');\n            break;\n        case 'TBODY':\n            nextSection = thisSection.parent().children('TFOOT');\n            break;\n        case 'TFOOT':\n            break;\n        default:\n        }\n        if (nextSection !== undefined && nextSection.length > 0) {\n            return nextSection[0];\n        }\n        return undefined;\n    },\n    _fixSuperfocus: function (element) {\n        var newSuperfocus;\n        var $closestTable = $(element).closest('table');\n        if ($closestTable.length > 0) {\n            newSuperfocus = $closestTable[0];\n        } else {\n            newSuperfocus = null;\n        }\n        return newSuperfocus;\n    },\n    _fixFocus: function (element) {\n        var newFocus;\n        switch ($(element).prop('nodeName')) {\n        case 'TH':\n        case 'TD':\n            newFocus = element;\n            break;\n        case 'TR':\n            newFocus = stdnav.closestDescendant(element, 'td,th .ghostfocus', null, 1);\n            if (newFocus === undefined) {\n                newFocus = stdnav.closestDescendant(element, 'td,th', null, 1);\n                if (newFocus === undefined) {\n                    newFocus = $(element).prev('tr');\n                    if (newFocus === undefined) {\n                        newFocus = this._fixFocus($(element).parent());\n                    }\n                }\n            }\n            break;\n        case 'THEAD':\n        case 'TBODY':\n        case 'TFOOT':\n            newFocus = stdnav.closestDescendant(element, 'td,th .ghostfocus', null, 2);\n            if (newFocus === undefined) {\n                newFocus = stdnav.closestDescendant(element, 'td,th', null, 2);\n                if (newFocus === undefined) {\n                    var nextSection = this._getNextSection(element);\n                    if (nextSection === undefined) {\n                        newFocus = this._fixFocus($(element).closest('table'));\n                    } else {\n                        newFocus = this._fixFocus(nextSection);\n                    }\n                }\n            }\n            break;\n        case 'COLGROUP':\n        case 'COL':\n            newFocus = this._fixFocus($(element).closest('table'));\n            break;\n        case 'CAPTION':\n            newFocus = this._fixFocus($(element).closest('table'));\n            break;\n        case 'TABLE':\n            newFocus = stdnav.closestDescendant(element, 'td,th .ghostfocus', null, 5);\n            if (newFocus === undefined) {\n                newFocus = stdnav.closestDescendant(element, 'td,th', null, 5);\n                if (newFocus === undefined) {\n                    newFocus = element;\n                }\n            }\n            break;\n        default:\n            newFocus = this._fixFocus($(element).closest('td,th,table'));\n        }\n        return newFocus;\n    },\n    _onSubfocusIn: function (element) {\n        var fixedSubfocus = element;\n        if ($(element).is('td') === false) {\n            fixedSubfocus = this._fixSubfocus($(element));\n            stdnav.setSubfocus(fixedSubfocus, false);\n        }\n        $.call(this, stdnav.basicSubfocusIn, fixedSubfocus);\n    },\n    _onLeft: function (element) {\n        var sfel = this._findSubfocus(element);\n        var newsf = $(false);\n        if (sfel.is('td')) {\n            newsf = sfel.prev('td');\n        }\n        if (newsf.length === 1) {\n            return newsf;\n        }\n        return element;\n    },\n    _onRight: function (element) {\n        var sfel = this._findSubfocus(element);\n        var newsf = $(false);\n        if (sfel.is('td')) {\n            newsf = sfel.next('td');\n        }\n        if (newsf.length === 1) {\n            return newsf;\n        }\n        return element;\n    },\n    _onUp: function (element) {\n        var sfel = this._findSubfocus(element);\n        var row;\n        var newrow = $(false);\n        var newsf = $(false);\n        if (sfel.is('td')) {\n            row = sfel.closest('tr');\n            if (row.length === 1) {\n                newrow = row.prev('tr');\n            }\n            if (newrow.length == 1) {\n                var iter = sfel;\n                var col = -1;\n                do {\n                    col++;\n                    iter = $(iter.prev('td')[0]);\n                } while (iter.length > 0);\n                newsf = $(newrow.find('td')[0]);\n                while (col > 0) {\n                    iter = newsf.next('td');\n                    if (iter.length > 0) {\n                        newsf = $(iter[0]);\n                    }\n                    col--;\n                }\n            }\n        }\n        if (newsf.length === 1) {\n            return newsf;\n        }\n        return element;\n    },\n    _onDown: function (element) {\n        var sfel = this._findSubfocus(element);\n        var row;\n        var newrow = $(false);\n        var newsf = $(false);\n        if (sfel.is('td')) {\n            row = sfel.closest('tr');\n            if (row.length > 0) {\n                newrow = row.next('tr');\n            }\n            if (newrow.length > 0) {\n                var iter = sfel;\n                var col = -1;\n                do {\n                    col++;\n                    iter = $(iter.prev('td')[0]);\n                } while (iter.length > 0);\n                newsf = $(newrow.find('td')[0]);\n                while (col > 0) {\n                    iter = newsf.next('td');\n                    if (iter.length > 0) {\n                        newsf = $(iter[0]);\n                    }\n                    col--;\n                }\n            }\n        }\n        if (newsf.length === 1) {\n            return newsf;\n        }\n        return element;\n    }\n});\n$.extend(stdnavPluginTable.prototype, {\n    navtype: 'table',\n    navtype_tags: ['TABLE']\n});\nvar newStdnavPluginTable = new stdnavPluginTable();\nexport default newStdnavPluginTable;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport logger from \"../../logging/logger\";\nimport stdnav from '../stdnav';\n\n\nlet localLogger = logger.register(\"stdnavPluginWorkflowCard\");\nlet version = '0.0.1';\nlet singleton = null;\nlet gserial = 0;\n\nlet StdnavPluginWorkflowCard = function StdnavPluginWorkflowCard() {\n    gserial++;\n    this.serial = gserial;\n};\n\n$.extend(StdnavPluginWorkflowCard.prototype, {\n    zinit: function zinit(selector) {\n        localLogger.debug('stdnavPluginWorkflowCard.init(' + selector + ')\\n');\n        return this;\n    },\n    activate: function activate() {\n        this.behavior = {\n            'ariaprep': [this, this._ariaPrep, null],\n            'ariarefresh': [this, this._ariaRefresh, null],\n            'right': [this, this._onRight, null],\n            'left': [this, this._onLeft, null],\n            'fixfocus': [this, this._fixFocus, null],\n            'fixsuperfocus': [this, this._fixSuperfocus, null],\n            'focusin': [this, this._onFocusIn, null],\n            'inherit': true,\n            'inheritable': true\n        };\n        stdnav.registerNavtype(this.navtype, this.behavior, this.navtype_tags);\n    },\n    deactivate: function deactivate() {\n        stdnav.unregisterNavtype('list2', this.behavior);\n    },\n    _ariaPrep: function _ariaPrep(el) {\n        this._ariaRefresh(el);\n    },\n    _ariaRefresh: function _ariaRefresh(el) {\n        let $list = $(el);\n        $list.attr('role', 'application');\n        let label = $list.attr('aria-label');\n        let labelledBy = $list.attr('aria-labelledby');\n        let $items = $list.children('li');\n        let itemPlural = $list.attr('js-itemplural');\n\n        if (itemPlural === '' || !itemPlural) {\n            itemPlural = 'items';\n        }\n\n        if (stdnav.nullOrUndefined(label) && stdnav.nullOrUndefined(labelledBy)) {\n            let allLinks = $items.find('a');\n\n            if (allLinks.length === $items.length) {\n                $list.attr('aria-label', 'List of ' + $items.length + ' links.');\n            } else {\n                $list.attr('aria-label', 'List of ' + $items.length + itemPlural);\n            }\n        }\n\n        $.each($items, function (index, item) {\n            let $item = $(item);\n            let $itemLinks = $item.find('a');\n\n            if ($itemLinks.length > 0) {\n                $item.attr('role', 'link');\n                let itemLabel = $item.attr('aria-label');\n                let itemLabelledBy = $item.attr('aria-labelledby');\n\n                if (stdnav.nullOrUndefined(itemLabel) && stdnav.nullOrUndefined(itemLabelledBy)) {\n                    let itemText = $item.text();\n                    itemLabel = itemText + '. ' + (index + 1) + ' of ' + $items.length + ' ' + itemPlural + '.';\n                    $item.attr('aria-label', itemLabel);\n                }\n            }\n        });\n        return null;\n    },\n    _fixFocus: function _fixFocus(element) {\n        let $el = $(element);\n\n        if ($el.is(\"li\")) {\n            element = $el.find(\"button\").eq(0)[0];\n        }\n\n        return element;\n    },\n    _fixSuperfocus: function _fixSuperfocus(element) {\n        let newSuperfocus;\n        let $closestList = $(element).closest('li');\n\n        if ($closestList.length > 0) {\n            newSuperfocus = $closestList[0];\n        } else {\n            newSuperfocus = null;\n        }\n\n        return newSuperfocus;\n    },\n\n    _onClick: function _onClick(element) {\n        $(element).closest('li').focus();\n        stdnav.setSubfocus(this._fixSubfocus(element));\n    },\n\n    _onFocusIn: function _onFocusIn(element) {\n        let $el = $(element);\n\n        if (!$el.is(\"li>div button\")) {\n            element = $el.closest(\"li>div\").find(\"button\")[0];\n        }\n\n        return element;\n    },\n    _onLeft: function _onLeft() {\n        let currentPosition = $(\"li.superfocus button\").index($(\"button.subfocus\"));\n        let newPosition = currentPosition - 1;\n        let newSelectedButton = $(\"li.superfocus button\").eq(newPosition);\n        return newPosition >= 0 && newSelectedButton[0];\n    },\n    _onRight: function _onRight() {\n        let currentPosition = $(\"li.superfocus button\").index($(\"button.subfocus\"));\n        let newPosition = currentPosition + 1;\n        let newSelectedButton = $(\"li.superfocus button\").eq(newPosition);\n        return newSelectedButton.length && newSelectedButton[0];\n    }\n});\n$.extend(StdnavPluginWorkflowCard.prototype, {\n    navtype: 'workflowCard',\n    navtype_tags: ['li', 'button']\n});\n\nlet stdnavPluginWorkflowCard = new StdnavPluginWorkflowCard();\nexport default stdnavPluginWorkflowCard;\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport browserDetection from './browserDetection';\nimport $ from 'jquery';\nexport default {\n    mouseEventOptions: {\n        bubbles: true,\n        cancelable: true,\n        view: document.defaultView,\n        detail: 0,\n        screenX: 0,\n        screenY: 0,\n        clientX: 0,\n        clientY: 0,\n        ctrlKey: false,\n        altKey: false,\n        shiftKey: false,\n        metaKey: false,\n        button: 0,\n        relatedTarget: null,\n        srcElement: null\n    },\n    triggerNativeEvent: function (eventName, target, options) {\n        var ie = browserDetection.isIE(), ev;\n        target = target || (ie ? document.documentElement : window);\n        if (document.createEvent) {\n            var opts;\n            switch (eventName) {\n            case 'click':\n            case 'doubleclick':\n            case 'mousedown':\n            case 'mousemove':\n            case 'mouseout':\n            case 'mouseover':\n            case 'mouseup':\n                opts = $.extend({}, this.mouseEventOptions, options);\n                opts.srcElement = target;\n                if (typeof MouseEvent === 'function') {\n                    ev = new MouseEvent(eventName, opts);\n                } else {\n                    ev = document.createEvent('MouseEvents');\n                    ev.initMouseEvent(eventName, opts.bubbles, opts.cancelable, opts.view, opts.detail, opts.screenX, opts.screenY, opts.clientX, opts.clientY, opts.ctrlKey, opts.altKey, opts.shiftKey, opts.metaKey, opts.button, opts.relatedTarget);\n                }\n                break;\n            default:\n                opts = $.extend({}, this.eventOptions, options);\n                opts.srcElement = target;\n                ev = document.createEvent('HTMLEvents');\n                ev.initEvent(eventName, opts.bubble, opts.cancelable);\n            }\n            target.dispatchEvent(ev);\n        } else {\n            ev = document.createEventObject();\n            ev.srcElement = target;\n            if (eventName == 'click' && typeof target.click !== 'undefined') {\n                target.click();\n            } else {\n                target.fireEvent('on' + eventName, ev);\n            }\n        }\n    },\n    simulateClickSequence: function (element) {\n        this.triggerNativeEvent('mousedown', element);\n        this.triggerNativeEvent('mouseup', element);\n        this.triggerNativeEvent('click', element);\n    },\n    simulateDoubleClickSequence: function (element) {\n        this.triggerNativeEvent('mousedown', element);\n        this.triggerNativeEvent('mouseup', element);\n        this.triggerNativeEvent('click', element);\n        this.triggerNativeEvent('mousedown', element);\n        this.triggerNativeEvent('mouseup', element);\n        this.triggerNativeEvent('click', element);\n        this.triggerNativeEvent('dblclick', element);\n    }\n};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n* @author: Igor Nesterenko\n* @version: $Id$\n*/\n\nimport Backbone from 'backbone';\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport popupContainerTemplate from './template/dateTimePopupContainer.htm';\n\nimport logger from \"../../common/logging/logger\";\n\nimport \"../../common/extension/jQueryTimepickerExtension\";\n\nvar DATE_TIME_DEFAULTS = {\n        stepHour: 1,\n        stepMinute: 1,\n        stepSecond: 1,\n        showSecond: true,\n        changeMonth: true,\n        changeYear: true,\n        showButtonPanel: true,\n        onChangeMonthYear: null,\n        constrainInput: false\n    },\n    TIME_DEFAULTS = {\n        showSecond:true,\n        constrainInput:false\n    };\n\nlet log = logger.register(\"DateAndTimePicker\");\n\n$.timepicker.log = function (err) {\n    //redirect error messages to our logger\n    log.warn(err);\n};\n\nexport default Backbone.View.extend({\n\n    /**\n     * @constructor DateAndTimePicker\n     * @class DateAndTimePicker\n     * @classdesc DateAndTimePicker decorator over jQuery datetime pickers\n     * @extends Backbone.View\n     * @param {object} options - mixin on Backbone standard properties and jQuery datetime pickers\n     * @description - You have to pass 'el' property to point to element in DOM. We have next behaviour\n     *  - by default it renders with  datetimepicker\n     *  - if only `dateFormat` it renders with datepicker\n     *  - if only `timeFormat` it renders with  timepicker\n     *  - if `dateFormat` and `timeFormat` specified it renders with datetimepicker\n     */\n\n    constructor: function (options) {\n        this.pickerOptions = _.clone(options);\n\n        if (this.pickerOptions.hasOwnProperty(\"dateFormat\") && !_.isString(this.pickerOptions.dateFormat)) {\n            delete this.pickerOptions.dateFormat;\n        }\n        if (this.pickerOptions.hasOwnProperty(\"timeFormat\") && !_.isString(this.pickerOptions.timeFormat)) {\n            delete this.pickerOptions.timeFormat;\n        }\n\n        this.inline = !!this.pickerOptions.el || false;\n        this.skipMoving = this.pickerOptions.skipMoving || false;\n        //clean up from backbone props\n        delete this.pickerOptions.el;\n        delete this.pickerOptions.skipMoving;\n\n        this.pickerType = discoverPickerType(this.pickerOptions);\n\n        this.pickerOptions = provideDefaultPickerOptions(this.pickerOptions, this.pickerType);\n\n        this.pickerOptions = fixPopupPositionAndStyling(this.pickerOptions, this.skipMoving);\n\n        this.log = options.log ? options.log : log;\n\n        Backbone.View.apply(this, arguments);\n    },\n\n    initialize: function () {\n        var self = this;\n\n        //initialize picker\n        this.$el[this.pickerType](this.pickerOptions);\n\n        this._callPickerAction = function (options) {\n            self.$el[self.pickerType](options);\n        }\n    },\n\n    /**\n     * @return {Date} - standart date object\n     * @description Return Date if components has it\n     */\n\n    getDate: function(){\n        var date;\n\n        if (this.pickerType !== \"timepicker\"){\n            date = this.$el[this.pickerType].getDate();\n        }else{\n            date = this.$el[this.pickerType].getTime();\n        }\n        return date;\n    },\n\n    /**\n     * @params {Date|String} date\n     * @return this\n     */\n\n    setDate: function(date){\n\n        if (!date) return this;\n\n        try{\n            //try to convert string to date object\n            // we don't need to convert time because setTime method accepts string time format\n            if (_.isString(date)){\n                if (this.pickerType === \"datetimepicker\") {\n                    date = $.datepicker.parseDateTime(this.pickerOptions.dateFormat, this.pickerOptions.timeFormat,  date);\n                } else if (this.pickerType === \"datepicker\") {\n                    date = $.datepicker.parseDate(this.pickerOptions.dateFormat, date);\n                }\n            }\n\n            if (this.pickerType === \"datepicker\"){\n                this.$el[this.pickerType](\"setDate\", date);\n            }else if (this.pickerType === \"timepicker\") {\n                this.$el[this.pickerType](\"setTime\", date);\n            }else if (this.pickerType === \"datetimepicker\"){\n                this.$el[this.pickerType](\"setTime\", date);\n                this.$el[this.pickerType](\"setDate\", date);\n            }\n\n        }catch(err){\n            this.log.debug(err);\n        }\n        return this;\n    },\n\n    /**\n     * @description Show picker\n     */\n\n    show: function () {\n        this._callPickerAction(\"show\");\n        return this;\n    },\n\n    /**\n     * @description Hide picker\n     */\n\n    hide: function () {\n        this._callPickerAction(\"hide\");\n        return this;\n    },\n\n    remove: function () {\n        this._callPickerAction(\"destroy\");\n        if (this.inline) {\n            this.$el.empty().off();\n            this.stopListening();\n        } else {\n            Backbone.View.prototype.remove.apply(this, arguments);\n        }\n\n    }\n\n}, {\n\n    /**\n     * @param {object} configs - which should contains 'locale', configs for 'date' amd configs for 'time'\n     * @description Provide defaults for locale specific configuration\n     */\n\n    setDefaults : function(configs){\n        $.datepicker.regional[configs.locale] = configs.date;\n        $.datepicker.setDefaults(configs.date);\n        $.timepicker.setDefaults(configs.time);\n    },\n\n    Helpers : {\n\n        fixPopupPositionAndStyling: fixPopupPositionAndStyling,\n\n        movePickerRelativelyToTriggerIcon: movePickerRelativelyToTriggerIcon,\n\n        stylePopupContainer: stylePopupContainer,\n\n        discoverPickerType: discoverPickerType,\n\n        provideDefaultPickerOptions: provideDefaultPickerOptions\n    }\n});\n\nfunction discoverPickerType(options) {\n    var result = \"datetimepicker\";\n    if (options.dateFormat && options.timeFormat) {\n        return result;\n    } else if (options.dateFormat) {\n        result = \"datepicker\"\n    } else if (options.timeFormat) {\n        result = \"timepicker\"\n    }\n    return result;\n}\n\nfunction provideDefaultPickerOptions(options, type){\n\n    var result = options;\n\n    if (\"datetimepicker\" == type || \"datepicker\" == type){\n        result = _.defaults(options, DATE_TIME_DEFAULTS);\n    }else if(\"timepicker\" == type){\n        result = _.defaults(options, TIME_DEFAULTS)\n    }\n\n    return result;\n}\n\nfunction fixPopupPositionAndStyling(options, skipMoving) {\n\n    var originalBeforeShowFn = options.beforeShow;\n\n    options.beforeShow = function () {\n        stylePopupContainer.apply(this, arguments);\n        skipMoving || movePickerRelativelyToTriggerIcon.apply(this, arguments);\n        originalBeforeShowFn && originalBeforeShowFn.apply(this, arguments);\n    };\n\n    options.afterInject = function() {\n        stylePopupContainer.apply(this, [this.$input[0], this.inst]);\n    };\n\n    return options;\n}\n\nfunction movePickerRelativelyToTriggerIcon(input, inst) {\n    var offset = $(input).offset().left;\n    var width = parseFloat(inst.dpDiv.css(\"width\").replace(\"px\", \"\"));\n    var move = offset + input.offsetWidth + width < $(window).width();\n    inst.dpDiv.css({\n        marginLeft: move ? input.offsetWidth + \"px\" : 0\n    });\n}\n\nfunction stylePopupContainer(input, inst) {\n    var $popupContainer = inst.dpDiv,\n        $parent = $popupContainer.parent(),\n        $dpDiv;\n\n    if ($parent && $parent.is('body')) {\n        $dpDiv = $popupContainer.detach();\n        $popupContainer = $(popupContainerTemplate);\n        $popupContainer.append($dpDiv);\n        $('body').append($popupContainer);\n    }\n}\n","export default \"<div class=\\\"jr-jDatepickerPopupContainer jr\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n</div>\\n\";","\n        import settingsStore from 'settingsStore';\n        settingsStore['dateTimeSettings'] = settingsStore['dateTimeSettings'] || {};\n        export default settingsStore['dateTimeSettings'];\n    "],"sourceRoot":""}