{"version":3,"sources":["webpack://jrs-ui/../bi-repository/src/bi/repository/enum/repositoryResourceTypes.js","webpack://jrs-ui/../bi-repository/src/bi/repository/enum/olapConnectionTypesEnum.js","webpack://jrs-ui/../bi-repository/src/bi/repository/dialog/processor/factory/processorsFactory.js","webpack://jrs-ui/../bi-repository/src/bi/repository/dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm","webpack://jrs-ui/../bi-repository/src/bi/repository/dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm","webpack://jrs-ui/../bi-repository/src/bi/repository/factory/repositoryTreeFactory.js","webpack://jrs-ui/../bi-repository/src/bi/repository/util/extractRootLevelDataFromHtmlResponse.ts","webpack://jrs-ui/../bi-repository/src/bi/repository/util/resourcesTreeGetDataUriFnUtil.js","webpack://jrs-ui/./src/settings/settingsStore.js","webpack://jrs-ui/../js-sdk/src/common/component/dialog/AlertDialog.js","webpack://jrs-ui/../js-sdk/src/common/component/tooltip/Tooltip.js","webpack://jrs-ui/../js-sdk/src/common/component/panel/trait/collapsiblePanelTrait.js","webpack://jrs-ui/../js-sdk/src/common/component/list/model/ScalableListModel.js","webpack://jrs-ui/../js-sdk/src/common/component/list/model/BaseListWithSelectionModel.js","webpack://jrs-ui/../js-sdk/src/common/component/list/model/ListWithSelectionModel.js","webpack://jrs-ui/../js-sdk/src/common/component/list/view/ScalableList.js","webpack://jrs-ui/../js-sdk/src/common/component/list/templates/viewPortChunksTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/list/templates/itemsTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/list/view/ListWithSelection.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/trait/addToSelectionModelTrait.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/TreeLevel.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/template/treeLevelListTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/tree/Tree.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/template/treeLevelTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/tree/TreeDataLayer.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/plugin/TooltipPlugin.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/plugin/TreePlugin.js","webpack://jrs-ui/../js-sdk/src/common/extension/backboneValidationExtension.js","webpack://jrs-ui/../js-sdk/src/common/component/dialog/template/alertDialogTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/tooltip/template/tooltipTemplate.htm","webpack://jrs-ui/./src/settings/treeComponent.settings.js"],"names":["RESOURCE_LOOKUP","DASHBOARD","LEGACY_DASHBOARD","REPORT_UNIT","TOPIC","ADHOC_DATA_VIEW","FILE","BUNDLE_FILE","SECURITY_FILE","FOLDER","SECURE_FILE","PROP","ACCESS_GRANT_SCHEMA","DATA_TYPE","JDBC_DATA_SOURCE","AWS_DATA_SOURCE","AZURE_SQL_DATA_SOURCE","JNDI_DATA_SOURCE","VIRTUAL_DATA_SOURCE","CUSTOM_DATA_SOURCE","BEAN_DATA_SOURCE","XMLA_CONNECTION","LIST_OF_VALUES","REPORT_OPTIONS","QUERY","OLAP_UNIT","DOMAIN_TOPIC","DOMAIN","SEMANTIC_LAYER_DATA_SOURCE","SECURE_MONDRIAN_CONNECTION","MONDRIAN_XMLA_DEFINITION","MONDRIAN_CONNECTION","INPUT_CONTROL","ORGANIZATION","OLAP_CUBE","repositoryResourceTypes","processors","folderTreeProcessor","processItem","item","_readonly","value","permissionMask","treeNodeProcessor","_node","_","olapConnectionTypesEnum","resourceType","i18nItemProcessor","i18n","commonMessagesBundle","filterPublicFolderProcessor","uri","defaultSettings","filterEmptyFoldersProcessor","_links","content","cssClassItemProcessor","cssClass","fakeUriProcessor","match","replace","processorName","repositoryFoldersTreeFactory","options","types","listView","olapDataLayer","TreeDataLayer","requestType","dataUriTemplate","jrsConfigs","processorsFactory","levelDataId","getDataArray","data","getTreeConstructor","instance","itemsTemplate","treeItemsTemplate","repositoryFoldersTreeLevelTemplate","listItemHeight","selection","allowed","multiple","rootless","collapsed","lazyLoad","getDataUri","resourcesTreeGetDataUriFnUtil","getFolderUri","contextPath","recursive","type","containerType","forceTotalCount","forceFullPage","cache","searchKey","pageSize","customDataLayers","getDataLayer","customizedGetDataLayerFunc","getDataSize","status","xhr","getResponseHeader","getTreeListInstance","bufferSize","treeBufferSize","additionalCssClasses","collapserSelector","openClass","closedClass","getCustomRootDataLayer","this","resource","getTreeInstance","tooltipOptions","contentTemplate","constr","Tree","TooltipTreePlugin","create","rootLevelProcessors","processor","push","getTreeRootLevelProcessors","extractRootLevelDataFromHtmlResponse","publicFolder","children","fakeRoot","id","label","computePermissionMask","extra","accept","dataType","level","getLevel","contentType","JSON","stringify","defaultDataLayer","mask","isWritable","isRemovable","isAdministrable","settings","html","trim","parse","params","folderUri","encodeURIComponent","reduce","memo","exclude","Dialog","alertDialogTemplate","constructor","modal","message","title","buttons","action","primary","initialize","arguments","on","close","setMessage","xssUtil","whiteList","rendered","renderContent","$contentContainer","Backbone","template","tooltipTemplate","delay","offset","x","y","attribute","cssClasses","contentSelector","triggerEvents","el","attachTo","$","length","Error","_shown","$attachTo","tooltip","selector","_onMouseMove","_onMouseLeave","_render","model","dfd","_event","toJSON","$el","find","empty","append","_showTooltip","resolve","show","_timer","setTimeout","_updatePosition","trigger","hide","clearTimeout","detach","tooltipHeight","innerHeight","tooltipWidth","innerWidth","windowHeight","window","height","windowWidth","width","shiftY","shiftX","pageY","pageX","css","top","left","event","remove","off","container","detachFrom","collapseControlPressed","evt","allowPropagation","stopPropagation","onCollapseControlPressed","toggleCollapsedState","stopListeningToCollapser","$collapser","expandOnDblClickSelector","abstractPanelTrait","onConstructor","collapserClass","collapsiblePanelClass","allowEventPropagation","allowMouseDownEventPropagation","beforeSetElement","call","afterSetElement","addClass","prepend","onRemove","set","items","silent","getData","loadFactor","_fetchComplete","values","attributes","total","bufferEndIndex","Math","max","min","bufferStartIndex","afterFetchComplete","_isBufferReloadNecessary","topVisibleItem","bottomVisibleItem","get","topLoadFactor","bottomLoadFactor","fetchFailed","responseStatus","error","fetch","bottom","force","bufferCenter","floor","bufferHalf","limit","done","fail","reset","ScalableListModel","select","_addToSelection","index","_removeFromSelection","_clearSelection","_selectionContains","_getSelection","_triggerSelectionChange","_addRangeToSelection","rangeStart","rangeEnd","i","start","end","getSelection","_fetchAllDataAndModifySelection","modifySelection","onDone","addValueToSelection","selectionStartIndex","addRangeToSelection","Array","prototype","slice","that","removeValueFromSelection","toggleSelection","selectionContains","clearSelection","selectAll","self","firstIteration","invertSelection","BaseListWithSelectionModel","undefined","_isSelectionEmpty","hasOwnProperty","_selectPendingSelection","pendingSelection","_convertInitialArrayToSelection","_calcSelectionStartIndex","parseInt","ListModel","listItemSelector","events","chunksTemplate","defaultChunkHeight","chunkHeight","scrollTimeout","manualScrollInterval","lazy","defaultItemHeight","render","initListeners","listenTo","onModelChange","onFetchFailed","onScroll","scrollTimer","_fetchVisibleData","renderData","postProcessChunkModelItem","_renderItems","bufferStart","bufferEnd","firstChunkWithData","itemsPerChunk","ceil","lastChunkWithData","each","chunk","chunkModel","_getChunkModel","totalItems","itemHeight","chunkHtml","_renderViewChunks","chunks","_getViewChunksModel","$firstViewChunk","totalChunksToShow","lastChunkHeight","viewChunks","_calcViewPortConstants","viewPortConstantsInitialized","outerHeight","_calcViewPortHeight","viewPortHeight","itemsPerView","_getItemsPerView","_renderData","firstItemForChunk","lastItemForChunk","visibleItems","_getVisibleItems","scrollPos","_getScrollPos","elOffset","viewChunkOffset","has","resize","is","componentHeight","_componentHeight","callback","keepPosition","scrollTop","once","apply","scrollTo","newTopVisibleItemPos","itemPos","BUTTONS","LEFT","RIGHT","ScalableList","ListWithSelectionModel","globalEvents","eventListenerPattern","markerClass","selectedClass","_initSelection","delegateEvents","res","onMousedown","onMousemove","onMousedblclick","onItemEvent","onGlobalMouseup","undelegateEvents","selectionAllowed","leftButtonSelection","right","selectValue","selectRange","deselectValue","onGlobalMousemove","selected","getDisabled","itemData","_getDomItemData","currentTarget","_singleSelect","selectionChanged","_triggerSelectionChanged","_triggerDblclicked","getItemByEvent","e","element","eventType","which","buttonType","mouseDownPos","_getMousePos","_multiSelect","_allowMouseMoveSelection","_stopAutoScroll","_mouseMoved","leftMouseButtonPressed","rightMouseButtonPressed","mousePosY","clientY","scrollInterval","setInterval","_autoScroll","removeClass","visibleRangeStart","visibleRangeEnd","$item","attr","newScrollPos","viewPortTop","shouldScroll","_selectRangeOnAutoScroll","oldScrollPos","clearInterval","shiftKey","ctrlKey","metaKey","getValue","parent","modelItem","mousePos","abs","clientX","setValue","modelOptions","selectNone","setDisabled","disabled","addToSelection","ListWithSelectionModelExtended","addToSelectionModelTrait","Panel","traits","collapsiblePanelTrait","_isReady","owner","levelHeight","plugins","defaults","l","plugin","dataLayer","_getDataProvider","list","List","cid","listRendered","listRenderError","itemsSelected","itemsDblClicked","_onOpen","obtainDataOptions","obtainData","request","dataProvider","DataProviderWithSearchCache","getDataOptions","context","loadingClass","setElement","open","depth","itemsIterator","levelId","refresh","recalcConstraints","fetchVisibleData","resetSelection","hasItems","clearCache","clear","key","parentLevelId","predefinedData","splice","isReady","count","result","keys","isLevelToExclude","levelsToExclude","topLevel","handler","opts","ITEM_ACTIONS","_plugins","_type","_options","listTemplate","concat","rootLevel","TreeLevel","rootLevelHeight","addLevels","visitedLevels","treeInitialized","expand","treeRemoved","nodeId","collapse","_getNodeByLevelId","listContainingLevel","itemOfLevel","node","nodeElement","itsList","parentLevel","parentPath","split","join","nodeInfo","deselect","addItem","parentId","_getNodeItems","updateItem","_addItem","childItems","_updateItem","updatedChildItems","_selectTreeNode","pathToSelect","$scrollContainer","onceRootNodeIsReady","selectItemAfterFolderTreeIsOpened","folderToSelect","levelIdToSelect","getLevelId","$tree","$selectedItem","tmp","pathToOpen","substr","lastIndexOf","_openPath","path","pathFragmentToOpen","splitPath","levelIdToOpen","repositoryPath","nodesOnTop","topLevelCase","indexOf","use","extend","constructorPlugin","constructorOptions","levelName","ClassUtil","extractId","headers","Accept","url","dataSize","process","reject","responseText","_process","invokeProcessors","changeDataStructure","processedData","processedItem","j","le","TreePlugin","Tooltip","listensToList","itemsRendered","dataLayerObtained","numberUtils","NumberUtils","originalValidate","Validation","attrs","valid","view","invalid","doesNotContainSymbols","forbiddenSymbols","RegExp","test","integerNumber","isNumberInt","some","fn","typeFn","hexColor","xRegExpPattern","customValue","startsWithLetter","containsOnlyWordCharacters","search","arrayMinLength","minLength"],"mappings":"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","file":"_chunks/chunk.3422.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default {\n    RESOURCE_LOOKUP: 'resourceLookup',\n    DASHBOARD: 'dashboard',\n    LEGACY_DASHBOARD: 'legacyDashboard',\n    REPORT_UNIT: 'reportUnit',\n    TOPIC: 'topic',\n    ADHOC_DATA_VIEW: 'adhocDataView',\n    FILE: 'file',\n    BUNDLE_FILE: 'bundleFile',\n    SECURITY_FILE:'securityFile',\n    FOLDER: 'folder',\n    SECURE_FILE: 'secureFile',\n    PROP: 'prop',\n    ACCESS_GRANT_SCHEMA: 'accessGrantSchema',\n    DATA_TYPE: 'dataType',\n    JDBC_DATA_SOURCE: 'jdbcDataSource',\n    AWS_DATA_SOURCE: 'awsDataSource',\n    AZURE_SQL_DATA_SOURCE: 'azureSqlDataSource',\n    JNDI_DATA_SOURCE: 'jndiJdbcDataSource',\n    VIRTUAL_DATA_SOURCE: 'virtualDataSource',\n    CUSTOM_DATA_SOURCE: 'customDataSource',\n    BEAN_DATA_SOURCE: 'beanDataSource',\n    XMLA_CONNECTION: 'xmlaConnection',\n    LIST_OF_VALUES: 'listOfValues',\n    REPORT_OPTIONS: 'reportOptions',\n    QUERY: 'query',\n    OLAP_UNIT: 'olapUnit',\n    DOMAIN_TOPIC: 'domainTopic',\n    DOMAIN: 'domain',\n    SEMANTIC_LAYER_DATA_SOURCE: 'semanticLayerDataSource',\n    SECURE_MONDRIAN_CONNECTION: 'secureMondrianConnection',\n    MONDRIAN_XMLA_DEFINITION: 'mondrianXmlaDefinition',\n    MONDRIAN_CONNECTION: 'mondrianConnection',\n    INPUT_CONTROL: 'inputControl',\n    ORGANIZATION: 'organization',\n    OLAP_CUBE: 'olapCube'\n};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport repositoryResourceTypes from '../enum/repositoryResourceTypes';\nexport default [\n    repositoryResourceTypes.MONDRIAN_CONNECTION,\n    repositoryResourceTypes.SECURE_MONDRIAN_CONNECTION,\n    repositoryResourceTypes.XMLA_CONNECTION\n];","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport defaultSettings from 'js-sdk/src/jrs.configs';\nimport olapConnectionTypesEnum from '../../../enum/olapConnectionTypesEnum';\nimport repositoryResourceTypes from '../../../enum/repositoryResourceTypes';\nimport commonMessagesBundle from 'js-sdk/src/i18n/CommonBundle.properties';\nfunction cssClassItemProcessor(item) {\n    switch (item.value.resourceType) {\n    case repositoryResourceTypes.REPORT_UNIT:\n        item.cssClass = 'report';\n        break;\n    case repositoryResourceTypes.DOMAIN_TOPIC:\n        item.cssClass = 'domain topic';\n        break;\n    case repositoryResourceTypes.SEMANTIC_LAYER_DATA_SOURCE:\n        item.cssClass = 'domain';\n        break;\n    case repositoryResourceTypes.OLAP_CUBE:\n        item.cssClass = 'olap';\n        break;\n    default:\n        break;\n    }\n    return item;\n}\nvar processors = {\n    folderTreeProcessor: {\n        processItem: function (item) {\n            item._readonly = !(item.value.permissionMask == 1 || item.value.permissionMask & 4);\n            return item;\n        }\n    },\n    treeNodeProcessor: {\n        processItem: function (item) {\n            item._node = _.contains(_.union([repositoryResourceTypes.FOLDER], olapConnectionTypesEnum), item.value.resourceType);\n            return item;\n        }\n    },\n    i18nItemProcessor: {\n        processItem: function (item) {\n            item.i18n = commonMessagesBundle;\n            return item;\n        }\n    },\n    filterPublicFolderProcessor: {\n        processItem: function (item) {\n            if (item.value.uri !== '/root' + defaultSettings.publicFolderUri && item.value.uri !== '/root' + defaultSettings.tempFolderUri) {\n                return item;\n            }\n        }\n    },\n    filterEmptyFoldersProcessor: {\n        processItem: function (item) {\n            if (!(item.value.resourceType === 'folder' && item.value._links.content === '')) {\n                return item;\n            }\n        }\n    },\n    cssClassItemProcessor: { processItem: cssClassItemProcessor },\n    fakeUriProcessor: {\n        processItem: function (item) {\n            if (item.value.uri && item.value.uri.match(/^\\/root/)) {\n                item.value.uri = item.value.uri.replace('/root', '');\n            }\n            return item;\n        }\n    }\n};\nfunction processorsFactory(processorName) {\n    return processors[processorName];\n}\nexport default processorsFactory;","export default \"<p class=\\\"message label\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- model.i18n['tooltip.name'] }}</p>\\n<p class=\\\"message\\\">{{- model.value.label }}</p>\\n<p class=\\\"message label\\\">{{- model.i18n['tooltip.path'] }}</p>\\n<p class=\\\"message\\\">{{- model.value.uri }}</p>\";","export default \"<ul class=\\\"list collapsible\\\" style=\\\"top: {{- top}}px; position: relative;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\t{{ _.each(items, function(item){ }}\\n\\t<li class=\\\"{{- item._node ? 'node closed' : 'leaf'}} {{- item.selected ? 'selected' : ''}} {{- item._readonly ? 'readonly' : ''}}\\\" data-index=\\\"{{- item.index }}\\\" tabindex=\\\"-1\\\">\\n\\t\\t<p class=\\\"wrap button draggable\\\" data-tooltip='true'><b class=\\\"icon\\\"></b> {{- item.value.label }} </p>\\n\\t\\t<div class=\\\"subcontainer\\\" ></div>\\n\\t</li>\\n\\t{{ }) }}\\n</ul>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Tree from 'js-sdk/src/common/component/tree/Tree';\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from 'js-sdk/src/i18n/CommonBundle.properties';\nimport TreeDataLayer from 'js-sdk/src/common/component/tree/TreeDataLayer';\nimport processorsFactory from '../dialog/processor/factory/processorsFactory';\nimport TooltipTreePlugin from 'js-sdk/src/common/component/tree/plugin/TooltipPlugin';\nimport repositoryResourceTypes from '../enum/repositoryResourceTypes';\nimport olapConnectionTypesEnum from '../enum/olapConnectionTypesEnum';\nimport resourcesTreeGetDataUriFnUtil from '../util/resourcesTreeGetDataUriFnUtil';\nimport extractRootLevelDataFromHtmlResponse from '../util/extractRootLevelDataFromHtmlResponse';\nimport tooltipTemplate from '../dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm';\nimport repositoryFoldersTreeLevelTemplate from '../dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\n\nvar LIST_ITEM_HEIGHT = 22;\nvar TREE_BUFFER_SIZE = 5000;\n\nvar repositoryFoldersTreeFactory = function (options) {\n    options = options || {};\n    if (!options.types) {\n        throw 'Resources types required';\n    }\n    if (!options.listView) {\n        return getTreeInstance(options);\n    } else {\n        return getTreeListInstance(options);\n    }\n};\nfunction getTreeConstructor(options) {\n    var tooltipOptions = _.extend({}, {\n        i18n: i18n,\n        contentTemplate: tooltipTemplate\n    }, options.tooltipOptions);\n    return options.constr || Tree.use(TooltipTreePlugin, tooltipOptions).create();\n}\nfunction getTreeInstance(options) {\n    options = options || {};\n    var processors = options.processors = _.map(options.processors, function (processorName) {\n        return processorsFactory(processorName);\n    });\n    var TreeConstructor = getTreeConstructor(options);\n    return TreeConstructor.instance({\n        listItemHeight: LIST_ITEM_HEIGHT,\n        bufferSize: options.treeBufferSize || TREE_BUFFER_SIZE,\n        additionalCssClasses: 'folders',\n        collapserSelector: options.collapserSelector,\n        openClass: options.openClass,\n        closedClass: options.closedClass,\n        levelDataId: 'uri',\n        itemsTemplate: options.treeItemsTemplate || repositoryFoldersTreeLevelTemplate,\n        collapsed: true,\n        lazyLoad: true,\n        rootless: true,\n        getDataUri: resourcesTreeGetDataUriFnUtil({\n            getFolderUri: getFolderUri,\n            contextPath: jrsConfigs.contextPath,\n            recursive: false,\n            type: options.types,\n            containerType: options.containerType,\n            forceTotalCount: true,\n            forceFullPage: true\n        }),\n        selection: {\n            allowed: true,\n            multiple: false\n        },\n        customDataLayers: {\n            //workaround for correct viewing of '/public' and '/' folder labels\n            '/': getCustomRootDataLayer(options)\n        },\n        processors: processors,\n        getDataArray: function (data) {\n            if (data && data[repositoryResourceTypes.RESOURCE_LOOKUP]) {\n                data = data[repositoryResourceTypes.RESOURCE_LOOKUP];\n                var levelDataId = this.levelDataId, first = _.first(data);\n                if (!first[levelDataId].match(/^\\/public/)) {\n                    data = _.map(data, function (resource) {\n                        resource.uri = '/root' + resource[levelDataId];\n                        return resource;\n                    });\n                }\n                return data;\n            }\n            return [];\n        },\n        getDataSize: function (data, status, xhr) {\n            return +xhr.getResponseHeader('Total-Count');\n        },\n        getDataLayer: customizedGetDataLayerFunc\n    });\n}\nfunction getTreeRootLevelProcessors(processors) {\n    var rootLevelProcessors = [];\n    var filterPublicFolderProcessor = processorsFactory('filterPublicFolderProcessor');\n    _.each(processors, function (processor) {\n        if (processor !== filterPublicFolderProcessor) {\n            rootLevelProcessors.push(processor);\n        }\n    });\n    return rootLevelProcessors;\n}\nfunction getCustomRootDataLayer(options) {\n    var processors = options.processors;\n    var rootLevelProcessors = getTreeRootLevelProcessors(processors);\n    var uri = '/flow.html?_flowId=searchFlow&method=getNode&provider=repositoryExplorerTreeFoldersProvider&uri=/&depth=1';\n    return _.extend(new TreeDataLayer({\n        dataUriTemplate: options.contextPath + uri,\n        processors: rootLevelProcessors,\n        getDataArray: function (data) {\n            data = extractRootLevelDataFromHtmlResponse(data);\n\n            var publicFolder = _.find(data.children, function (item) {\n                    return item.uri === '/public';\n                }), fakeRoot = [{\n                    id: '/root',\n                    label: data.label,\n                    uri: '/',\n                    resourceType: 'folder',\n                    permissionMask: computePermissionMask(data.extra),\n                    _links: { content: '@fakeContentLink' }\n                }];\n            if (publicFolder) {\n                fakeRoot.push({\n                    id: '/public',\n                    label: publicFolder.label,\n                    uri: '/public',\n                    resourceType: 'folder',\n                    permissionMask: computePermissionMask(publicFolder.extra),\n                    _links: { content: '@fakeContentLink' }\n                });\n            }\n            return fakeRoot;\n        }\n    }), {\n        accept: 'text/html',\n        dataType: 'text'\n    });\n}\nfunction getTreeListInstance(options) {\n    var olapDataLayer = getOlapDataLayer(), processors = options.processors;\n    var TreeConstructor = getTreeConstructor(options);\n    return TreeConstructor.instance({\n        itemsTemplate: options.treeItemsTemplate || repositoryFoldersTreeLevelTemplate,\n        listItemHeight: LIST_ITEM_HEIGHT,\n        selection: {\n            allowed: true,\n            multiple: false\n        },\n        rootless: true,\n        collapsed: true,\n        lazyLoad: true,\n        getDataUri: resourcesTreeGetDataUriFnUtil({\n            getFolderUri: getFolderUri,\n            contextPath: jrsConfigs.contextPath,\n            recursive: true,\n            type: options.types,\n            containerType: options.containerType,\n            forceTotalCount: true,\n            forceFullPage: true\n        }),\n        levelDataId: 'uri',\n        cache: {\n            searchKey: 'searchString',\n            pageSize: 100\n        },\n        processors: processors,\n        customDataLayers: { 'olapDataLayer': olapDataLayer },\n        getDataLayer: customizedGetDataLayerFunc,\n        getDataArray: function (data) {\n            return data && data[repositoryResourceTypes.RESOURCE_LOOKUP] ? data[repositoryResourceTypes.RESOURCE_LOOKUP] : [];\n        },\n        getDataSize: function (data, status, xhr) {\n            return +xhr.getResponseHeader('Total-Count');\n        }\n    });\n}\nfunction getOlapDataLayer() {\n    return new TreeDataLayer({\n        requestType: 'POST',\n        dataUriTemplate: jrsConfigs.contextPath + '/rest_v2/connections',\n        processors: [\n            processorsFactory('i18nItemProcessor'),\n            processorsFactory('cssClassItemProcessor')\n        ],\n        levelDataId: 'uri',\n        getDataArray: function (data) {\n            return data && data[repositoryResourceTypes.RESOURCE_LOOKUP] ? data[repositoryResourceTypes.RESOURCE_LOOKUP] : [];\n        }\n    });\n}\nfunction customizedGetDataLayerFunc(level) {\n    var resourceType, isOlapResource;\n    level = level.item ? level : this.getLevel(level.id);\n    if (level) {\n        resourceType = level.item.value.resourceType;\n        isOlapResource = _.contains(olapConnectionTypesEnum, resourceType);\n        if (!isOlapResource) {\n            return this.customDataLayers && this.customDataLayers[level.id] ? this.customDataLayers[level.id] : this.defaultDataLayer;\n        } else {\n            var olapDataLayer = _.clone(this.customDataLayers['olapDataLayer']);\n            _.extend(olapDataLayer, {\n                accept: 'application/repository.' + resourceType + '.metadata+json',\n                contentType: 'application/repository.' + resourceType + '+json',\n                data: JSON.stringify(resourceType)\n            });\n            return olapDataLayer;\n        }\n    }\n}\n\nfunction getFolderUri(id) {\n    if (id.match(/^\\/root/)) {\n        return id.replace(\"/root\", \"\");\n    } else {\n        return id;\n    }\n}\nfunction computePermissionMask(extra) {\n    var mask = 2;\n    extra.isWritable && (mask = mask | 4);\n    extra.isRemovable && (mask = mask | 16);\n    extra.isAdministrable && (mask = 1);\n    return mask;\n}\nrepositoryFoldersTreeFactory.settings = jrsConfigs;\nexport default repositoryFoldersTreeFactory;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default (html: string) => {\n    const match = html.trim().match(/^<div\\s?(?:(?:.*)=(?:['\"]).*(?:['\"]))*>(.*)<\\/div>/);\n    return JSON.parse(match ? match[1] : '{}');\n};\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\n\nexport default function(options) {\n\n    return function(params) {\n        var uri = \"\";\n\n        uri += options.contextPath + \"/rest_v2/api/resources?\";\n\n        if (options.getFolderUri) {\n            var folderUri = options.getFolderUri(params.id);\n\n            if (folderUri) {\n                uri += \"folderUri=\" + encodeURIComponent(folderUri);\n            }\n        } else {\n            uri += \"folderUri=\" + encodeURIComponent(params.id);\n        }\n\n        if (options.recursive) {\n            uri += \"&recursive=true\";\n        } else {\n            uri += \"&recursive=false\";\n        }\n\n        if (options.type) {\n            uri += options.type.reduce(function(memo, type) {\n                memo += \"&type=\" + type;\n\n                return memo;\n            }, \"\");\n        }\n\n        if (options.containerType) {\n            uri += \"&containerType=\" + options.containerType;\n        }\n\n        if (options.exclude) {\n            uri += \"&excludeFolder=\" + options.exclude;\n        }\n\n        uri += \"&offset={{= offset }}&limit={{= limit }}\";\n\n        if (options.forceTotalCount) {\n            uri += \"&forceTotalCount=true\";\n        }\n\n        if (options.forceFullPage) {\n            uri += \"&forceFullPage=true\";\n        }\n\n        return _.template(uri, params);\n    }\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// This settings store will be filled with the actual settings loaded from the server\n\nexport default {};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport Dialog from './Dialog';\nimport xssUtil from '../../util/xssUtil';\nimport alertDialogTemplate from './template/alertDialogTemplate.htm';\nimport i18n from '../../../i18n/CommonBundle.properties';\nexport default Dialog.extend({\n    contentTemplate: _.template(alertDialogTemplate),\n    constructor: function (options) {\n        options || (options = {});\n        Dialog.prototype.constructor.call(this, {\n            modal: options.modal !== false,\n            message: options.message,\n            additionalCssClasses: 'alertDialog ' + (options.additionalCssClasses || ''),\n            title: options.title || i18n['dialog.exception.title'],\n            buttons: [{\n                label: i18n['button.close'],\n                action: 'close',\n                primary: true\n            }]\n        }, options);\n    },\n    initialize: function (options) {\n        Dialog.prototype.initialize.apply(this, arguments);\n        this.on('button:close', this.close);\n        this.setMessage(options.message);\n    },\n    setMessage: function (message) {\n        message = xssUtil.softHtmlEscape(message, {whiteList: [\"br\"]});\n        this.content = this.contentTemplate({ message: message });\n        var rendered = this.renderContent();\n        this.$contentContainer.html(rendered);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport tooltipTemplate from './template/tooltipTemplate.htm';\nexport default Backbone.View.extend({\n    template: _.template(tooltipTemplate),\n    delay: 500,\n    offset: {\n        x: 10,\n        y: 10\n    },\n    attribute: 'data-tooltip',\n    cssClasses: 'panel info tooltip',\n    contentSelector: '.body',\n    triggerEvents: false,\n    el: function () {\n        return this.template({ cssClasses: this.cssClasses });\n    },\n    constructor: function (options) {\n        options || (options = {});\n        if (!options.attachTo || $(options.attachTo).length === 0) {\n            throw new Error('Tooltip should be attached to an element');\n        }\n        if (!options.contentTemplate) {\n            throw new Error('Tooltip should have contentTemplate');\n        }\n        this._shown = false;\n        this.$attachTo = $(options.attachTo);\n        this.$attachTo[0].tooltip = this;\n        options.delay && (this.delay = options.delay);\n        options.offset && (this.offset = options.offset);\n        options.attribute && (this.attribute = options.attribute);\n        options.cssClasses && (this.cssClasses = options.cssClasses);\n        this.contentTemplate = options.contentTemplate;\n        this.i18n = options.i18n || {};\n        !_.isUndefined(options.triggerEvents) && (this.triggerEvents = options.triggerEvents);\n        this.selector = '[' + this.attribute + ']';\n        _.bindAll(this, 'show', '_onMouseMove', '_onMouseLeave');\n        this.$attachTo.on('mousemove touchmove', this.selector, this._onMouseMove);\n        this.$attachTo.on('mouseleave touchend', this.selector, this._onMouseLeave);\n        Backbone.View.prototype.constructor.apply(this, arguments);\n    },\n    _render: function (model, options, dfd) {\n        if (this._event) {\n            model = model instanceof Backbone.Model ? model.toJSON() : model;\n            var content = _.template(this.contentTemplate)({\n                model: model,\n                i18n: this.i18n,\n                options: options || {}\n            });\n            this.$el.find('.body').empty().append(content);\n            this._showTooltip();\n        }\n        dfd.resolve();\n    },\n    show: function (model, options) {\n        var dfd = new $.Deferred();\n        this._timer = setTimeout(_.bind(this._render, this, model, options, dfd), this.delay);\n        return dfd;\n    },\n    _showTooltip: function () {\n        $('body').append(this.$el);\n        this._updatePosition();\n        this._shown = true;\n        this.triggerEvents && this.trigger('show', this);\n    },\n    hide: function () {\n        this.contentTemplate && this._timer && clearTimeout(this._timer);\n        this.$el.detach();\n        this._shown = false;\n        this.triggerEvents && this.trigger('hide', this);\n    },\n    _updatePosition: function () {\n        var tooltipHeight = this.$el.innerHeight(), tooltipWidth = this.$el.innerWidth(), windowHeight = $(window).height(), windowWidth = $(window).width(), shiftY = this.offset.y, shiftX = this.offset.x;\n        if (tooltipHeight + this._event.pageY + this.offset.y + 3 >= windowHeight) {\n            shiftY = -this.offset.y - tooltipHeight;\n        }\n        if (tooltipWidth + this._event.pageX + this.offset.x + 3 >= windowWidth) {\n            shiftX = -this.offset.x - tooltipWidth;\n        }\n        this.$el.css({\n            top: this._event.pageY + shiftY,\n            left: this._event.pageX + shiftX\n        });\n    },\n    _onMouseMove: function (event) {\n        this._event = event;\n    },\n    _onMouseLeave: function () {\n        this._shown && this.hide();\n        this._timer && clearTimeout(this._timer);\n        this._event = null;\n    },\n    remove: function () {\n        this._shown && this.hide();\n        this._timer && clearTimeout(this._timer);\n        this.$attachTo.off('mousemove touchmove', this.selector, this._onMouseMove);\n        this.$attachTo.off('mouseleave touchend', this.selector, this._onMouseLeave);\n        Backbone.View.prototype.remove.apply(this, arguments);\n    }\n}, {\n    attachTo: function (container, options) {\n        var Tooltip = this;\n        options || (options = {});\n        options.attachTo = container || 'body';\n        return new Tooltip(options);\n    },\n    detachFrom: function (container) {\n        container = $(container)[0];\n        container.tooltip && container.tooltip.remove();\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport abstractPanelTrait from './abstractPanelTrait';\nfunction collapseControlPressed(evt, allowPropagation) {\n    !allowPropagation && evt.stopPropagation();\n    this.onCollapseControlPressed ? this.onCollapseControlPressed(evt) : this.toggleCollapsedState();\n}\nfunction stopListeningToCollapser() {\n    this.$collapser && this.$collapser.off('mousedown');\n    this.$el && this.$el.find(this.expandOnDblClickSelector).off('dblclick');\n}\nexport default _.extend({}, abstractPanelTrait, {\n    onConstructor: function (options) {\n        this.collapserClass = options.collapserClass || 'buttonIconToggle';\n        this.collapserSelector = options.collapserSelector || '.buttonIconToggle';\n        this.collapsiblePanelClass = options.collapsiblePanelClass || 'collapsiblePanel';\n        this.expandOnDblClickSelector = options.expandOnDblClickSelector || '> p:first';\n        this.allowEventPropagation = !!options.allowMouseDownEventPropagation;\n        this.onCollapseControlPressed = options.onCollapseControlPressed;\n    },\n    beforeSetElement: function () {\n        stopListeningToCollapser.call(this);\n    },\n    afterSetElement: function () {\n        this.$el.addClass(this.collapsiblePanelClass);\n        this.$collapser = this.$(this.collapserSelector);\n        if (!this.$collapser.length) {\n            this.$collapser = $('<button></button>').addClass(this.collapserClass);\n            this.$('> .header').prepend(this.$collapser);\n        }\n        this.$collapser.on('mousedown', _.bind(collapseControlPressed, this, this.allowEventPropagation));\n        this.$el.find(this.expandOnDblClickSelector).on('dblclick', _.bind(collapseControlPressed, this));\n    },\n    onRemove: function () {\n        stopListeningToCollapser.call(this);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Backbone from 'backbone';\nimport _ from 'underscore';\nvar DEFAULT_BUFFER_SIZE = 100;\nvar DEFAULT_LOAD_FACTOR = 0.95;\nvar ScalableListModel = Backbone.Model.extend({\n    initialize: function (options) {\n        _.bindAll(this, '_fetchComplete', 'fetchFailed', 'afterFetchComplete', 'fetch');\n        this.set({ items: [] }, { silent: true });\n        this.getData = options.getData;\n        this.bufferSize = options.bufferSize || DEFAULT_BUFFER_SIZE;\n        this.loadFactor = options.loadFactor || DEFAULT_LOAD_FACTOR;\n    },\n    _fetchComplete: function (values) {\n        this.attributes.total = values.total;\n        this.set({ items: values.data }, { silent: true });\n        this.attributes.bufferEndIndex = Math.max(0, Math.min(this.attributes.bufferStartIndex + this.bufferSize - 1, this.attributes.bufferStartIndex + values.data.length - 1));\n        if (this.attributes.bufferEndIndex < this.attributes.bufferStartIndex + this.bufferSize - 1) {\n            this.attributes.total = Math.min(values.total, this.attributes.bufferEndIndex + 1);\n        }\n        this.afterFetchComplete && this.afterFetchComplete(values.data, this.attributes.total);\n        this.trigger('change', this);\n    },\n    _isBufferReloadNecessary: function (topVisibleItem, bottomVisibleItem) {\n        if (typeof this.get('bufferStartIndex') === 'undefined' || typeof this.get('bufferEndIndex') === 'undefined') {\n            return true;\n        }\n        if (topVisibleItem >= 0 && topVisibleItem < this.get('bufferStartIndex') || bottomVisibleItem < this.get('total') && bottomVisibleItem > this.get('bufferEndIndex')) {\n            return true;\n        }\n        if (topVisibleItem === this.get('bufferStartIndex') && bottomVisibleItem === this.get('bufferEndIndex')) {\n            return false;\n        }\n        var topLoadFactor = 1 - (topVisibleItem - this.get('bufferStartIndex')) / this.bufferSize;\n        var bottomLoadFactor = 1 - (this.get('bufferEndIndex') - bottomVisibleItem) / this.bufferSize;\n        return this.get('bufferStartIndex') > 0 && topLoadFactor >= this.loadFactor || this.get('bufferEndIndex') < this.get('total') && bottomLoadFactor >= this.loadFactor;\n    },\n    afterFetchComplete: function (items, total) {\n    },\n    fetchFailed: function (responseStatus, error) {\n        this.trigger('fetchFailed', responseStatus, error);\n    },\n    fetch: function (options) {\n        options = _.extend({\n            top: this.get('bufferStartIndex') || 0,\n            bottom: this.get('bufferEndIndex') || this.bufferSize - 1\n        }, options);\n        if (options.force || this._isBufferReloadNecessary(options.top, options.bottom)) {\n            if (options.top !== this.attributes.bufferStartIndex || options.bottom !== this.attributes.bufferEndIndex || options.force) {\n                var bufferCenter = options.top + Math.floor((options.bottom - options.top) / 2);\n                var bufferHalf = Math.floor(this.bufferSize / 2);\n                this.attributes.bufferStartIndex = Math.max(0, bufferCenter - bufferHalf);\n                if (this.get('total') && !options.force) {\n                    this.attributes.bufferEndIndex = Math.min(this.get('total'), this.attributes.bufferStartIndex + this.bufferSize) - 1;\n                } else {\n                    this.attributes.bufferEndIndex = this.attributes.bufferStartIndex + this.bufferSize - 1;\n                }\n            }\n            this.getData({\n                offset: this.get('bufferStartIndex'),\n                limit: this.get('bufferEndIndex') - this.get('bufferStartIndex') + 1\n            }).done(this._fetchComplete).fail(this.fetchFailed);\n        } else {\n            this.afterFetchComplete && this.afterFetchComplete(this.get('items'), this.get('total'));\n        }\n    },\n    reset: function (options) {\n        this.attributes = {};\n        this.set({ items: [] }, { silent: true });\n        if (!options || !options.silent) {\n            this.trigger('change', this);\n        }\n    }\n});\nexport default ScalableListModel;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @author: Sergey Prilukin\n * @version: $Id$\n */\n\n/**\n * @class BaseListWithSelectionModel\n * @classdesc Model extended from ScalableListModel which allows to work with selection.\n * Base class for other selection implementations\n *\n * Model API (in addition to ScalableListModel API):\n *      addValueToSelection         - adds one value to selection and triggers \"selection:add\" event\n *      addRangeToSelection         - adds range from last adding of single selection to passed\n *                                    index and triggers \"selection:addRange\"\n *      removeValueFromSelection    - removes value from selection and triggers \"selection:remove\"\n *      toggleSelection             - toggles selection and triggers appropriate event\n *      selectionContains           - return true if value is selected and false otherwise\n *      clearSelection              - clear selection and trigger \"selection:clear\" event\n *      getSelection                - returns current selection as sparse array\n *      select                      - select passed values\n *      selectAll                   - select all values\n *      invertSelection             - inverts selection\n *\n * this Model implementation looks for following additional options in hash provided to constructor:\n *      selection       - initial selection\n */\nimport _ from 'underscore';\nimport ScalableListModel from './ScalableListModel';\n\nvar BaseListWithSelectionModel = ScalableListModel.extend(\n    /** @lends BaseListWithSelectionModel.prototype */\n    {\n\n        initialize: function(options) {\n            ScalableListModel.prototype.initialize.call(this, options);\n\n            this.select(options.value, {silent: true});\n        },\n\n        /* Methods which supposed to be overridden */\n\n        /**\n         * Adding to selection should be done only through this method.\n         * No direct change of this.selection object is allowed\n         */\n        _addToSelection: function(value, index) {\n            throw \"Not implemented\";\n        },\n\n        /**\n         * Removing from selection should be done only through this method.\n         * No direct change of this.selection object is allowed\n         */\n        _removeFromSelection: function(value, index) {\n            throw \"Not implemented\";\n        },\n\n        /**\n         * Clearing selection should be done only through this method.\n         * No direct change of this.selection object is allowed\n         */\n        _clearSelection: function() {\n            throw \"Not implemented\";\n        },\n\n        /**\n         * Selection contains should be checked only through this method\n         * No direct change of this.selection object is allowed\n         */\n        _selectionContains: function(value, index) {\n            throw \"Not implemented\";\n        },\n\n        /**\n         * Returns current selection\n         * No direct change of this.selection object is allowed\n         */\n        _getSelection: function() {\n            throw \"Not implemented\";\n        },\n\n        /* Internal helper methods */\n\n        _triggerSelectionChange: function(options) {\n            if (!options || !options.silent) {\n                this.trigger(\"change\");\n            }\n\n            this.trigger(\"selection:change\");\n        },\n\n        _addRangeToSelection: function(data, rangeStart, rangeEnd) {\n            for (var i = 0; i < data.length; i++) {\n                this._addToSelection(data[i].value, i + rangeStart);\n            }\n\n            this.trigger(\"selection:addRange\", {start: rangeStart, end: rangeEnd, selection: this.getSelection()});\n        },\n\n        _fetchAllDataAndModifySelection: function(modifySelection, onDone) {\n            this.getData().done(function(values) {\n                for (var i = 0; i < values.data.length; i++) {\n                    modifySelection(values.data[i].value, i);\n                }\n\n                onDone && onDone();\n            }).fail(this.fetchFailed);\n\n            return this;\n        },\n\n        /*-------------------------\n         * API\n         -------------------------*/\n\n        /*\n            Adds value selection and triggers add event\n        */\n        addValueToSelection: function(value, index) {\n            this.selectionStartIndex = index;\n            this._addToSelection(value, index);\n            return this.trigger(\"selection:add\", {value: value, index: index});\n        },\n\n        /*\n            Adds value selection and triggers add event\n        */\n        addRangeToSelection: function(value, index) {\n\n            //No range determined - use single item selection\n            if (typeof this.selectionStartIndex === \"undefined\") {\n                this.addValueToSelection(value, index);\n                return;\n            }\n\n            //Same element selected no need to fire range selection\n            if (this.selectionStartIndex === index) {\n                return;\n            }\n\n            //Calculate range dimensions\n            var rangeStart = Math.min(this.selectionStartIndex, index);\n            var rangeEnd = Math.max(this.selectionStartIndex, index);\n            this.selectionStartIndex = index;\n\n            if (rangeStart >= this.get(\"bufferStartIndex\") && rangeEnd <= this.get(\"bufferEndIndex\")) {\n                //All data from this range already fetched\n                var data = Array.prototype.slice.call(this.get(\"items\"),\n                    rangeStart - this.get(\"bufferStartIndex\"), rangeEnd - this.get(\"bufferStartIndex\") + 1);\n                this._addRangeToSelection(data, rangeStart, rangeEnd);\n            } else {\n                //Need to fetch data\n                var that = this;\n                this.getData({\n                    offset: rangeStart,\n                    limit: rangeEnd - rangeStart + 1}\n                ).done(function(values) {\n                    that._addRangeToSelection(values.data, rangeStart, rangeEnd);\n                }).fail(this.fetchFailed);\n            }\n        },\n\n        /*\n             Removes value from selection and triggers remove event\n         */\n        removeValueFromSelection: function(value, index) {\n            this._removeFromSelection(value, index);\n            this.trigger(\"selection:remove\", {value: value, index: index});\n        },\n\n        /*\n            Does selection toggle for passed value\n         */\n        toggleSelection: function(value, index) {\n            if (this.selectionContains(value, index)) {\n                this.removeValueFromSelection(value, index);\n            } else {\n                this.addValueToSelection(value, index);\n            }\n        },\n\n        /*\n            Returns true if value present in selection\n        */\n        selectionContains: function(value, index) {\n            return this._selectionContains(value, index);\n        },\n\n        /*\n            Removes all items from selection\n         */\n        clearSelection: function() {\n            this._clearSelection();\n            return this.trigger(\"selection:clear\");\n        },\n\n        /*\n            Returns all selected values\n        */\n        getSelection: function() {\n            return this._getSelection();\n        },\n\n        /*\n            Selects passed selection\n         */\n        select: function(selection, options) {\n            throw \"Not implemented\";\n        },\n\n        /*\n            Selects all values\n         */\n        selectAll: function() {\n            var self = this,\n                firstIteration = true;\n\n            this._fetchAllDataAndModifySelection(function(value, index) {\n\n                //this is necessary when getData is slow operation\n                //so model will not be empty too early\n                if (firstIteration) {\n                    self._clearSelection();\n                    firstIteration = false;\n                }\n\n                self._addToSelection(value, index);\n            }, _.bind(this._triggerSelectionChange, this));\n        },\n\n        /*\n            Inverts selection\n         */\n        invertSelection: function() {\n            var self = this;\n\n            this._fetchAllDataAndModifySelection(function(value, index) {\n                if (self._selectionContains(value, index)) {\n                    self._removeFromSelection(value, index);\n                } else {\n                    self._addToSelection(value, index);\n                }\n            }, _.bind(this._triggerSelectionChange, this));\n        }\n    });\n\nexport default BaseListWithSelectionModel;\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport BaseListWithSelectionModel from './BaseListWithSelectionModel';\nvar ListWithSelectionModel = BaseListWithSelectionModel.extend({\n    _addToSelection: function (value, index) {\n        this.selection[index] = value;\n    },\n    _removeFromSelection: function (value, index) {\n        this.selection[index] = undefined;\n    },\n    _clearSelection: function () {\n        this.selection = [];\n    },\n    _selectionContains: function (value, index) {\n        return this.selection[index] === value;\n    },\n    _getSelection: function () {\n        return this.selection;\n    },\n    _isSelectionEmpty: function (selection) {\n        if (!selection) {\n            return true;\n        } else if (_.isArray(selection) && selection.length === 0) {\n            return true;\n        } else if (_.isArray(selection) || typeof selection === 'string') {\n            return false;\n        }\n        for (var index in selection) {\n            if (selection.hasOwnProperty(index) && selection[index] !== undefined) {\n                return false;\n            }\n        }\n        return true;\n    },\n    _selectPendingSelection: function (pendingSelection, options) {\n        if (this.get('bufferStartIndex') === 0 && this.get('bufferEndIndex') == this.get('total') - 1) {\n            this._convertInitialArrayToSelection(this.get('items'), pendingSelection, options);\n        } else {\n            var that = this;\n            this.getData().done(function (values) {\n                that._convertInitialArrayToSelection(values.data, pendingSelection, options);\n            }).fail(this.fetchFailed);\n        }\n    },\n    _convertInitialArrayToSelection: function (data, pendingSelection, options) {\n        for (var i = 0; i < data.length; i++) {\n            if (pendingSelection[data[i].value]) {\n                this._addToSelection(data[i].value, i);\n            }\n        }\n        this._triggerSelectionChange(options);\n    },\n    _triggerSelectionChange: function (options) {\n        this._calcSelectionStartIndex && this._calcSelectionStartIndex();\n        BaseListWithSelectionModel.prototype._triggerSelectionChange.call(this, options);\n    },\n    _calcSelectionStartIndex: function () {\n        if (typeof this.selectionStartIndex !== 'undefined') {\n            return;\n        }\n        for (var index in this.selection) {\n            if (this.selection.hasOwnProperty(index) && this.selection[index] !== undefined) {\n                this.selectionStartIndex = parseInt(index, 10);\n                break;\n            }\n        }\n    },\n    select: function (selection, options) {\n        this._clearSelection();\n        if (this._isSelectionEmpty(selection)) {\n            this._triggerSelectionChange(options);\n            return;\n        }\n        if (_.isArray(selection) || typeof selection === 'string') {\n            var pendingSelection = {};\n            if (typeof selection === 'string') {\n                pendingSelection[selection] = true;\n            } else {\n                for (var i = 0; i < selection.length; i++) {\n                    pendingSelection[selection[i]] = true;\n                }\n            }\n            this._selectPendingSelection(pendingSelection, options);\n        } else {\n            for (var index in selection) {\n                if (selection.hasOwnProperty(index)) {\n                    var value = selection[index];\n                    if (value !== undefined) {\n                        this._addToSelection(value, index);\n                    }\n                }\n            }\n            this._triggerSelectionChange(options);\n        }\n    }\n});\nexport default ListWithSelectionModel;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport Backbone from 'backbone';\nimport _ from 'underscore';\nimport ScalableListModel from '../model/ScalableListModel';\nimport defaultChunksTemplate from '../templates/viewPortChunksTemplate.htm';\nimport defaultItemsTemplate from '../templates/itemsTemplate.htm';\nvar DEFAULT_VIEW_PORT_CHUNK_HEIGHT = 1000000;\nvar DEFAULT_SCROLL_TIMEOUT = 50;\nvar DEFAULT_MANUAL_SCROLL_INTERVAL = 50;\nvar DEFAULT_LIST_ITEM_HEIGHT = 21;\nvar MIN_ITEM_HEIGHT_TRESHOLD = 2;\nvar ScalableList = Backbone.View.extend({\n    ListModel: ScalableListModel,\n    listItemSelector: 'li',\n    events: {\n        'scroll': 'onScroll',\n        'touchmove': 'onScroll'\n    },\n    attributes: { 'style': 'overflow-y: auto; height: 100px' },\n    initialize: function (options) {\n        _.bindAll(this, '_fetchVisibleData');\n        this.model = options.model || new this.ListModel(options);\n        this.chunksTemplate = _.template(options.chunksTemplate || defaultChunksTemplate);\n        this.itemsTemplate = _.template(options.itemsTemplate || defaultItemsTemplate);\n        this.defaultChunkHeight = this.chunkHeight = options.chunkHeight || DEFAULT_VIEW_PORT_CHUNK_HEIGHT;\n        this.scrollTimeout = typeof options.scrollTimeout !== 'undefined' ? options.scrollTimeout : DEFAULT_SCROLL_TIMEOUT;\n        this.manualScrollInterval = options.manualScrollInterval || DEFAULT_MANUAL_SCROLL_INTERVAL;\n        this.lazy = options.lazy;\n        this.defaultItemHeight = options.listItemHeight || DEFAULT_LIST_ITEM_HEIGHT;\n        this.listItemSelector = options.listItemSelector || this.listItemSelector;\n        this.render();\n        this.initListeners();\n        if (!this.lazy) {\n            this.model.fetch();\n        }\n        return this;\n    },\n    initListeners: function () {\n        this.listenTo(this.model, 'change', this.onModelChange, this);\n        this.listenTo(this.model, 'fetchFailed', this.onFetchFailed, this);\n    },\n    render: function () {\n        return this;\n    },\n    onScroll: function (event) {\n        if (this.scrollTimeout > 0) {\n            clearTimeout(this.scrollTimer);\n            this.scrollTimer = setTimeout(this._fetchVisibleData, this.scrollTimeout);\n        } else {\n            this._fetchVisibleData();\n        }\n    },\n    onModelChange: function () {\n        this.renderData();\n    },\n    onFetchFailed: function (responseStatus, error) {\n        this.trigger('listRenderError', responseStatus, error);\n    },\n    postProcessChunkModelItem: function (item, i) {\n        item.index = this.model.get('bufferStartIndex') + i;\n        if (item.label === undefined) {\n            item.label = item.value;\n        }\n        item.label = $.trim(item.label);\n    },\n    _renderItems: function () {\n        var bufferStart = this.model.get('bufferStartIndex');\n        var bufferEnd = this.model.get('bufferEndIndex');\n        var firstChunkWithData = this.itemsPerChunk ? Math.ceil((bufferStart + 1) / this.itemsPerChunk) : 1;\n        var lastChunkWithData = this.itemsPerChunk ? Math.ceil((bufferEnd + 1) / this.itemsPerChunk) : 1;\n        var that = this;\n        this.$el.find('.j-view-port-chunk').each(function (index, chunk) {\n            var chunkModel = that._getChunkModel({\n                index: index + 1,\n                firstChunkWithData: firstChunkWithData,\n                lastChunkWithData: lastChunkWithData,\n                bufferStart: bufferStart,\n                bufferEnd: bufferEnd,\n                total: that.totalItems,\n                itemsPerChunk: that.itemsPerChunk,\n                itemHeight: that.itemHeight,\n                chunkHeight: that.chunkHeight,\n                model: that.model\n            });\n            var chunkHtml = chunkModel ? that.itemsTemplate(chunkModel) : '';\n            $(chunk).html(chunkHtml);\n        });\n    },\n    _renderViewChunks: function (force) {\n        if (this.totalItems !== this.model.get('total') || force) {\n            this.totalItems = this.model.get('total');\n            this.$el.html(this.chunksTemplate({\n                _: _,\n                chunks: this._getViewChunksModel()\n            }));\n            this.$firstViewChunk = this.$el.find('.j-view-port-chunk:first');\n        }\n    },\n    _getViewChunksModel: function () {\n        var totalChunksToShow = this.itemsPerChunk ? Math.ceil(this.totalItems / this.itemsPerChunk) : 1;\n        var lastChunkHeight = totalChunksToShow > 0 ? this.itemHeight ? this.totalItems * this.itemHeight - (totalChunksToShow - 1) * this.chunkHeight : this.chunkHeight : 1;\n        var viewChunks = [];\n        for (var i = 1; i < totalChunksToShow; i++) {\n            viewChunks.push({ height: this.chunkHeight });\n        }\n        viewChunks.push({ height: lastChunkHeight });\n        return viewChunks;\n    },\n    _calcViewPortConstants: function (options) {\n        options = options || {};\n        if (!this.viewPortConstantsInitialized) {\n            this.itemHeight = this.defaultItemHeight;\n            if (this.$firstViewChunk) {\n                this.itemHeight = this.$el.find(this.listItemSelector + ':first').outerHeight(true);\n                if (!this.itemHeight || this.itemHeight <= MIN_ITEM_HEIGHT_TRESHOLD) {\n                    this.itemHeight = this.defaultItemHeight;\n                    this.viewPortConstantsInitialized = false;\n                } else {\n                    this.viewPortConstantsInitialized = true;\n                }\n            }\n            this._calcViewPortHeight();\n            this.itemsPerChunk = Math.floor(this.defaultChunkHeight / this.itemHeight);\n            this.chunkHeight = this.itemsPerChunk * this.itemHeight;\n            this._renderViewChunks(true);\n            this._renderItems();\n        }\n    },\n    _calcViewPortHeight: function () {\n        this.viewPortHeight = this.$el.height();\n        this.itemsPerView = Math.floor(this.viewPortHeight / this.itemHeight) - 1;\n    },\n    _getItemsPerView: function () {\n        this._renderData();\n        return this.itemsPerView;\n    },\n    _getChunkModel: function (options) {\n        var index = options.index;\n        if (index < options.firstChunkWithData || index > options.lastChunkWithData) {\n            return null;\n        }\n        var firstItemForChunk = options.itemsPerChunk ? Math.max(options.bufferStart, options.itemsPerChunk * (index - 1)) : options.bufferStart;\n        var lastItemForChunk = options.itemsPerChunk ? Math.min(options.bufferEnd, options.itemsPerChunk * index - 1) : options.bufferEnd;\n        var top = options.itemHeight ? firstItemForChunk * options.itemHeight - (index - 1) * options.chunkHeight : 0;\n        var items = Array.prototype.slice.call(options.model.get('items'), firstItemForChunk - options.bufferStart, lastItemForChunk - options.bufferStart + 1);\n        _.each(items, function (item, i) {\n            this.postProcessChunkModelItem(item, i + (firstItemForChunk - options.bufferStart));\n        }, this);\n        return {\n            top: top,\n            items: items\n        };\n    },\n    _fetchVisibleData: function () {\n        var visibleItems = this._getVisibleItems();\n        this.model.fetch({\n            top: visibleItems.top,\n            bottom: visibleItems.bottom\n        });\n    },\n    _getVisibleItems: function () {\n        var scrollPos = this._getScrollPos();\n        var total = this.model.get('total');\n        var topVisibleItem = Math.min(total - this.itemsPerView, Math.floor(scrollPos / this.itemHeight));\n        var bottomVisibleItem = Math.min(total - 1, topVisibleItem + this.itemsPerView + 1);\n        return {\n            top: topVisibleItem,\n            bottom: bottomVisibleItem\n        };\n    },\n    _getScrollPos: function () {\n        this._renderData();\n        var scrollPos = 0;\n        if (this.$firstViewChunk) {\n            var elOffset = this.$el.offset();\n            var viewChunkOffset = this.$firstViewChunk.offset();\n            if (elOffset && viewChunkOffset) {\n                scrollPos = elOffset.top - viewChunkOffset.top;\n            }\n        }\n        return scrollPos;\n    },\n    renderData: function () {\n        if (this.lazy || !this.model.has('bufferStartIndex') || !this.model.has('bufferEndIndex')) {\n            this.lazy = null;\n            this.model.fetch();\n        } else {\n            this._renderData();\n        }\n        return this;\n    },\n    _renderData: function () {\n        this.trigger('before:render:data');\n        this._renderViewChunks();\n        this._renderItems();\n        this._calcViewPortConstants();\n        this.trigger('render:data');\n    },\n    resize: function () {\n        if (!this.$el.is(':visible')) {\n            return;\n        }\n        var componentHeight = this.$el.outerHeight();\n        if (componentHeight === this._componentHeight) {\n            return;\n        } else {\n            this._componentHeight = componentHeight;\n        }\n        this.viewPortConstantsInitialized = false;\n        this._renderData();\n    },\n    fetch: function (callback, options) {\n        this.lazy = false;\n        options = options || {};\n        var scrollPos;\n        if (options.keepPosition) {\n            scrollPos = this.$el.get(0).scrollTop;\n        } else {\n            this.reset({\n                silent: true,\n                lazy: false\n            });\n        }\n        this.model.once('change', function () {\n            if (options.keepPosition) {\n                this.$el.scrollTop(scrollPos);\n            }\n            callback && callback.apply(this, arguments);\n        }, this).fetch({ force: true });\n    },\n    reset: function (options) {\n        options = _.defaults(options || {}, { lazy: true });\n        this.$el.scrollTop(0);\n        this.lazy = options.lazy;\n        this.model.reset(options);\n    },\n    scrollTo: function (index) {\n        if (typeof index !== 'number') {\n            return;\n        }\n        var scrollPos = this._getScrollPos();\n        if (!this.viewPortConstantsInitialized) {\n            return;\n        }\n        this._calcViewPortHeight();\n        var newTopVisibleItemPos = null;\n        var itemPos = index * this.itemHeight;\n        if (itemPos < scrollPos) {\n            newTopVisibleItemPos = itemPos;\n        } else if (itemPos + this.itemHeight > scrollPos + this.viewPortHeight) {\n            newTopVisibleItemPos = itemPos + this.itemHeight - this.viewPortHeight;\n        }\n        if (newTopVisibleItemPos !== null) {\n            this.$el.scrollTop(newTopVisibleItemPos);\n        }\n    }\n});\nexport default ScalableList;","export default \"{{_.each(chunks, function(chunk) { }}\\n<div class=\\\"j-view-port-chunk\\\" style=\\\"height: {{- chunk.height}}px\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n</div>\\n{{ }); }}\\n\";","export default \"<ul class=\\\"jr-mSelectlist jr\\\" style=\\\"top: {{- top}}px; position: relative;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{_.each(items, function(item) { }}\\n    <li class=\\\"jr-mSelectlist-item {{ if (item.selected) print('jr-isSelected'); }} jr\\\" title=\\\"{{ print(item.label && item.label.trim() ? _.xssHardEscape(item.label) : '&nbsp;')}}\\\" data-index=\\\"{{- item.index}}\\\">\\n        <div class=\\\"jr-mSelectlist-item-wrapper jr\\\">\\n            <a class=\\\"jr-mSelectlist-item-text jr\\\">{{ print(item.label && item.label.trim() ? _.xssHardEscape(item.label) : '&nbsp;')}}</a>\\n        </div>\\n    </li>\\n    {{ }); }}\\n</ul>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport ListWithSelectionModel from '../model/ListWithSelectionModel';\nimport ScalableList from './ScalableList';\nvar MOUSE_MOVE_MIN_PIXELS = 1;\nvar BUTTONS = {\n    LEFT: 'left',\n    RIGHT: 'right'\n};\nvar ListWithSelection = ScalableList.extend({\n    ListModel: ListWithSelectionModel,\n    globalEvents: true,\n    initialize: function (options) {\n        _.bindAll(this, 'onGlobalMouseup', 'onGlobalMousemove', '_autoScroll', 'fetch');\n        this.eventListenerPattern = options.eventListenerPattern || 'li';\n        this.markerClass = options.markerClass ? options.markerClass : '';\n        this.selectedClass = options.selectedClass ? options.selectedClass : 'selected';\n        this._initSelection(options.selection);\n        return ScalableList.prototype.initialize.call(this, options);\n    },\n    delegateEvents: function () {\n        var res = ScalableList.prototype.delegateEvents.apply(this, arguments);\n        this.$el.on('mousedown', this.eventListenerPattern, _.bind(this.onMousedown, this)).on('mousemove', this.eventListenerPattern, _.bind(this.onMousemove, this)).on('dblclick', this.eventListenerPattern, _.bind(this.onMousedblclick, this)).on('contextmenu', this.eventListenerPattern, _.bind(this.onItemEvent, this, this.$el)).on('mouseout', this.eventListenerPattern, _.bind(this.onItemEvent, this, this.$el)).on('mouseover', this.eventListenerPattern, _.bind(this.onItemEvent, this, this.$el));\n        !this.globalEvents && this.$el.on('mouseup', this.eventListenerPattern, this.onGlobalMouseup);\n        return res;\n    },\n    undelegateEvents: function () {\n        var res = ScalableList.prototype.undelegateEvents.apply(this, arguments);\n        this.$el.off('mouseup').off('mousedown').off('mousemove').off('dblclick').off('contextmenu').off('mouseout').off('mouseover');\n        return res;\n    },\n    _initSelection: function (selection) {\n        selection = _.extend({ allowed: {} }, selection);\n        var selectionAllowed = selection.allowed ?? {}, leftButtonSelection = !_.isObject(selectionAllowed) ? selectionAllowed : selectionAllowed.left;\n        this.selection = {\n            allowed: {\n                left: typeof leftButtonSelection !== 'undefined' ? leftButtonSelection : true,\n                right: typeof selectionAllowed.right !== 'undefined' ? selectionAllowed.right : false\n            },\n            multiple: typeof selection.multiple !== 'undefined' ? selection.multiple : true\n        };\n    },\n    initListeners: function () {\n        ScalableList.prototype.initListeners.call(this);\n        this.listenTo(this.model, 'selection:clear', this.clearSelection, this);\n        this.listenTo(this.model, 'selection:add', this.selectValue, this);\n        this.listenTo(this.model, 'selection:addRange', this.selectRange, this);\n        this.listenTo(this.model, 'selection:remove', this.deselectValue, this);\n        this.globalEvents && $('body').on('mouseup', this.onGlobalMouseup).on('mousemove', this.onGlobalMousemove);\n    },\n    postProcessChunkModelItem: function (item, i) {\n        ScalableList.prototype.postProcessChunkModelItem.call(this, item, i);\n        item.selected = this.model.selectionContains && this.model.selectionContains(item.value, item.index);\n    },\n    onMousedblclick: function (event) {\n        if (!this.selection.multiple) {\n            if ((this.selection.allowed.left || this.selection.allowed.right) && !this.getDisabled()) {\n                var itemData = this._getDomItemData(event.currentTarget);\n                this._singleSelect(event, itemData.value, itemData.index);\n                if (this.selectionChanged) {\n                    this._triggerSelectionChanged();\n                    this._triggerDblclicked();\n                    this.selectionChanged = false;\n                }\n            }\n        }\n    },\n    getItemByEvent: function (e) {\n        return this._getDomItemData(e.currentTarget).item;\n    },\n    onItemEvent: function (element, e) {\n        var eventType = e.type, item = this.getItemByEvent(e);\n        this.trigger('list:item:' + eventType, item, e);\n    },\n    onMousedown: function (event) {\n        if (!this.getDisabled() && (this.selection.allowed.left && event.which === 1 || this.selection.allowed.right && event.which === 3)) {\n            var buttonType = event.which === 1 ? BUTTONS.LEFT : BUTTONS.RIGHT;\n            if (this.selection.multiple) {\n                this[buttonType + 'MouseButtonPressed'] = true;\n                this.mouseDownPos = this._getMousePos(event);\n            }\n            var itemData = this._getDomItemData(event.currentTarget);\n            this.selection.multiple ? this._multiSelect(event, itemData.value, itemData.index) : this._singleSelect(event, itemData.value, itemData.index);\n        }\n    },\n    onMousemove: function (event) {\n        if (this._allowMouseMoveSelection()) {\n            this._stopAutoScroll();\n            if (this._mouseMoved(event, this.mouseDownPos)) {\n                this.mouseDownPos = this._getMousePos(event);\n                var itemData = this._getDomItemData(event.currentTarget);\n                if (!this.model.selectionContains(itemData.value, itemData.index)) {\n                    this.model.addRangeToSelection(itemData.value, itemData.index);\n                }\n            }\n        }\n    },\n    onGlobalMouseup: function (event) {\n        var self = this;\n        if (this.leftMouseButtonPressed || this.rightMouseButtonPressed) {\n            _.each(BUTTONS, function (buttonType) {\n                self[buttonType + 'MouseButtonPressed'] = false;\n            });\n            delete this.mouseDownPos;\n            this._stopAutoScroll();\n            if (this.selectionChanged) {\n                this._triggerSelectionChanged();\n                this.selectionChanged = false;\n            }\n        }\n    },\n    onGlobalMousemove: function (event) {\n        if (this._allowMouseMoveSelection()) {\n            this.mousePosY = event.clientY;\n            if (!this.scrollInterval) {\n                this.scrollInterval = setInterval(this._autoScroll, this.manualScrollInterval);\n            }\n        }\n    },\n    clearSelection: function () {\n        this.$el.find('li.' + this.selectedClass + this.markerClass).removeClass(this.selectedClass);\n        this.selectionChanged = true;\n    },\n    selectValue: function (selection) {\n        this.$el.find('li' + this.markerClass + '[data-index=\\'' + selection.index + '\\']:not(.' + this.selectedClass + ')').addClass(this.selectedClass);\n        if (this.selection.multiple) {\n            this.selectionChanged = true;\n        } else {\n            this._triggerSelectionChanged();\n        }\n    },\n    selectRange: function (options) {\n        var self = this;\n        var visibleRangeStart = Math.max(this.model.get('bufferStartIndex'), options.start);\n        var visibleRangeEnd = Math.min(this.model.get('bufferEndIndex'), options.end);\n        this.$el.find('li' + this.markerClass + ':not(.' + this.selectedClass + ')').each(function () {\n            var $item = $(this);\n            var index = parseInt($item.attr('data-index'), 10);\n            if (index >= visibleRangeStart && index <= visibleRangeEnd) {\n                var item = self.model.get('items')[index - self.model.get('bufferStartIndex')];\n                if (self.model.selectionContains(item.value, index)) {\n                    $item.addClass(self.selectedClass);\n                }\n            }\n        });\n        this.selectionChanged = true;\n    },\n    deselectValue: function (selection) {\n        this.$el.find('li[data-index=\\'' + selection.index + '\\'].' + this.selectedClass + this.markerClass).removeClass(this.selectedClass);\n        if (this.selection.multiple) {\n            this.selectionChanged = true;\n        } else {\n            this._triggerSelectionChanged();\n        }\n    },\n    _autoScroll: function () {\n        var viewPortTop = this.$el.offset().top;\n        var scrollTop = this.$el.scrollTop();\n        var scrollPos = typeof this.scrollTop !== 'undefined' ? this.scrollTop : scrollTop;\n        var newScrollPos;\n        var shouldScroll = false;\n        if (this.mousePosY < viewPortTop) {\n            newScrollPos = scrollPos - this.itemHeight * 3;\n            shouldScroll = newScrollPos < scrollTop;\n        } else if (this.mousePosY > viewPortTop + this.viewPortHeight) {\n            newScrollPos = scrollPos + this.itemHeight * 3;\n            shouldScroll = newScrollPos > scrollTop;\n        }\n        if (shouldScroll) {\n            this.$el.scrollTop(newScrollPos);\n            this.scrollTop = this.$el.scrollTop();\n            this._fetchVisibleData();\n        }\n        this._selectRangeOnAutoScroll(scrollPos, newScrollPos);\n    },\n    _selectRangeOnAutoScroll: function (oldScrollPos, newScrollPos) {\n        var index;\n        if (oldScrollPos < newScrollPos) {\n            index = this._getVisibleItems().bottom;\n        } else if (oldScrollPos > newScrollPos) {\n            index = this._getVisibleItems().top;\n        }\n        if (index) {\n            var item = this.model.get('items')[index - this.model.get('bufferStartIndex')];\n            if (item) {\n                if (!this.model.selectionContains(item.value, index)) {\n                    this.model.addRangeToSelection(item.value, index);\n                }\n            }\n        }\n    },\n    _stopAutoScroll: function () {\n        if (this.scrollInterval) {\n            clearInterval(this.scrollInterval);\n            this.scrollInterval = undefined;\n            this.scrollTop = undefined;\n        }\n    },\n    _multiSelect: function (event, value, index) {\n        if (event.shiftKey) {\n            this.model.addRangeToSelection(value, index);\n        } else if (event.ctrlKey || event.metaKey) {\n            this._singleSelect(event, value, index);\n        } else {\n            this.model.toggleSelection(value, index);\n        }\n    },\n    _singleSelect: function (event, value, index) {\n        this.model.clearSelection().addValueToSelection(value, index);\n    },\n    _triggerSelectionChanged: function () {\n        this.trigger('selection:change', this.getValue());\n    },\n    _triggerDblclicked: function () {\n        this.trigger('item:dblclick', this.getValue());\n    },\n    _getDomItemData: function (item) {\n        var $item = $(item);\n        var index = $item.attr('data-index');\n        while (index === undefined) {\n            $item = $item.parent();\n            index = $item.attr('data-index');\n        }\n        index = parseInt(index, 10);\n        var modelItem = this.model.get('items')[index - this.model.get('bufferStartIndex')];\n        return {\n            item: modelItem,\n            value: modelItem.value,\n            index: index\n        };\n    },\n    _mouseMoved: function (event, mousePos) {\n        return Math.abs(mousePos.x - event.clientX) + Math.abs(mousePos.y - event.clientY) >= MOUSE_MOVE_MIN_PIXELS;\n    },\n    _getMousePos: function (event) {\n        return {\n            x: event.clientX,\n            y: event.clientY\n        };\n    },\n    _allowMouseMoveSelection: function () {\n        return (this.selection.allowed.left && this.leftMouseButtonPressed || this.selection.allowed.right && this.rightMouseButtonPressed) && this.selection.multiple && !this.getDisabled();\n    },\n    getValue: function () {\n        return this.model.getSelection();\n    },\n    setValue: function (selection, options) {\n        options = options || {};\n        if (!options.silent && (!options.modelOptions || !options.modelOptions.silent)) {\n            this.model.once('selection:change', this._triggerSelectionChanged, this);\n        }\n        options = options.modelOptions;\n        this.model.select(selection, options);\n        return this;\n    },\n    selectAll: function (options) {\n        if (!options || !options.silent) {\n            this.model.once('selection:change', this._triggerSelectionChanged, this);\n        }\n        this.model.selectAll();\n        return this;\n    },\n    selectNone: function (options) {\n        return this.setValue({}, options);\n    },\n    invertSelection: function (options) {\n        if (!options || !options.silent) {\n            this.model.once('selection:change', this._triggerSelectionChanged, this);\n        }\n        this.model.invertSelection();\n        return this;\n    },\n    setDisabled: function (disabled) {\n        this.disabled = disabled;\n        this.disabled ? this.$el.addClass('disabled') : this.$el.removeClass('disabled');\n        return this;\n    },\n    getDisabled: function () {\n        return this.disabled;\n    },\n    remove: function () {\n        $('body').off('mouseup', this.onGlobalMouseup).off('mousemove', this.onGlobalMousemove);\n        return ScalableList.prototype.remove.call(this);\n    }\n});\nexport default ListWithSelection;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport ScalableListModel from '../../list/model/ScalableListModel';\nexport default {\n    afterFetchComplete: function (items, total) {\n        ScalableListModel.prototype.afterFetchComplete.apply(this, arguments);\n        var value, index;\n        _.each(items, function (item, i) {\n            if (item.addToSelection) {\n                item.selected = true;\n                value = item.value;\n                index = this.get('bufferStartIndex') + i;\n                this.selectionContains && !this.selectionContains(value, index) && this.addValueToSelection(value, index);\n                delete item.addToSelection;\n            }\n        }, this);\n    }\n};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport Panel from '../panel/Panel';\nimport collapsiblePanelTrait from '../panel/trait/collapsiblePanelTrait';\nimport List from '../list/view/ListWithSelection';\nimport addToSelectionModelTrait from './trait/addToSelectionModelTrait';\nimport ListWithSelectionModel from '../list/model/ListWithSelectionModel';\n\nlet ListWithSelectionModelExtended = ListWithSelectionModel.extend(addToSelectionModelTrait);\n\nimport DataProviderWithSearchCache from './dataprovider/DataProviderWithSearchCache';\nexport default Panel.extend({\n    constructor: function (options) {\n        options || (options = {});\n        _.extend(options, { traits: [collapsiblePanelTrait] });\n        Panel.prototype.constructor.call(this, options);\n    },\n    initialize: function (options) {\n        options || (options = {});\n        this._isReady = false;\n        this.item = options.item || {};\n        this.id = this.item.id;\n        this.owner = options.owner;\n        this.parent = options.parent;\n        this.itemsTemplate = options.itemsTemplate;\n        this.listItemHeight = options.listItemHeight;\n        this.levelHeight = options.levelHeight;\n        this.lazyLoad = !!options.lazyLoad;\n        this.selection = options.selection || {\n            allowed: false,\n            multiple: false\n        };\n        this.resource = this.item.value;\n        this.bufferSize = options.bufferSize;\n        this.cache = typeof options.cache != 'undefined' ? options.cache : false;\n        this.allowMouseDownEventPropagation = options.allowMouseDownEventPropagation;\n        this.items = {};\n        this.plugins = [];\n        var defaults = {\n            el: this.el,\n            model: this.model\n        };\n        for (var i = 0, l = options.plugins.length; i < l; i++) {\n            var plugin = options.plugins[i].constr;\n            this.plugins.push(new plugin(_.extend({}, defaults, options.plugins[i].options)));\n        }\n        this.dataLayer = this.owner.getDataLayer(this);\n        _.invoke(this.plugins, 'dataLayerObtained', this.dataLayer);\n        Panel.prototype.initialize.apply(this, arguments);\n    },\n    render: function () {\n        var model = new ListWithSelectionModelExtended({\n            bufferSize: this.bufferSize,\n            getData: this._getDataProvider(this.cache)\n        });\n        this.list = new List({\n            markerClass: '.' + this.cid,\n            eventListenerPattern: '.' + this.cid + ':not(.readonly) > p',\n            el: this.$contentContainer,\n            itemsTemplate: this.itemsTemplate,\n            listItemHeight: this.listItemHeight,\n            lazy: true,\n            selection: this.selection,\n            allowMouseDownEventPropagation: this.allowMouseDownEventPropagation,\n            model: model\n        });\n        this.list.on('render:data', _.bind(listRendered, this));\n        this.list.on('listRenderError', _.bind(listRenderError, this));\n        this.list.on('selection:change', _.bind(itemsSelected, this));\n        this.list.on('item:dblclick', _.bind(itemsDblClicked, this));\n        if (this.lazyLoad) {\n            this.on('open', this._onOpen, this);\n        } else {\n            this.list.renderData();\n        }\n        return this;\n    },\n    _getDataProvider: function (cache) {\n        var self = this, getData = _.bind(function (obtainDataOptions) {\n                return this.obtainData(obtainDataOptions, self);\n            }, this.dataLayer), options = {};\n        if (cache) {\n            if (typeof cache === 'object') {\n                options = _.extend(options, cache);\n            }\n            options.request = options.request || getData;\n            this.dataProvider = new DataProviderWithSearchCache(options);\n            getData = this.dataProvider.getData;\n        }\n        return function (getDataOptions) {\n            getDataOptions || (getDataOptions = {\n                offset: 0,\n                limit: 100\n            });\n            getDataOptions.id = self.id;\n            return getData(_.extend({}, self.owner.context, getDataOptions), self);\n        };\n    },\n    _onOpen: function () {\n        this.$el.removeClass(this.openClass).addClass(this.loadingClass);\n        this.list.renderData();\n    },\n    setElement: function (el) {\n        var res = Panel.prototype.setElement.apply(this, arguments);\n        if (this.list) {\n            this.list.setElement(this.$contentContainer);\n            this.list.totalItems = -1;\n        }\n        _.each(this.plugins, function (plugin) {\n            plugin.setElement(el);\n        });\n        this.lazyLoad || this.list && this.list.renderData();\n        if (!this.collapsed) {\n            this.open({\n                silent: true,\n                depth: 0\n            });\n            if (this.lazyLoad) {\n                this.list.renderData();\n            }\n        }\n        return res;\n    },\n    open: function (options) {\n        itemsIterator(this, Panel.prototype.open, options, options ? options.depth : 0);\n        Panel.prototype.open.call(this, options);\n    },\n    close: function (options) {\n        Panel.prototype.close.call(this, options);\n        itemsIterator(this, Panel.prototype.close, options, options ? options.depth : undefined);\n        clearSelection(this);\n    },\n    getLevel: function (levelId) {\n        return _(this.items).reduce(function (memo, item) {\n            return memo || (item.id === levelId ? item : item.getLevel(levelId));\n        }, false);\n    },\n    refresh: function (options) {\n        if (this.listRenderError)\n            return;\n        if (this.lazyLoad && !this.collapsed || !this.lazyLoad) {\n            this.once('ready', _.bind(itemsIterator, this, this, this.refresh, options, 1));\n            this.list.model.fetch({\n                top: 0,\n                bottom: this.list.model.bufferSize,\n                force: true\n            });\n            this.list.scrollTo(0);\n        } else {\n            this.list.model.set('bufferStartIndex', undefined, { silent: true });\n            this.list.model.set('bufferEndIndex', undefined, { silent: true });\n            this.list.model.set('total', undefined, { silent: true });\n            itemsIterator(this, this.refresh, options);\n        }\n    },\n    fetch: function (options, callback) {\n        this.list.fetch(callback, options);\n    },\n    recalcConstraints: function () {\n        this.list.resize();\n    },\n    fetchVisibleData: function () {\n        this.list._fetchVisibleData();\n    },\n    resetSelection: function (options) {\n        clearSelection(this, options);\n        options && options.silent || this.trigger('selection:change', []);\n    },\n    hasItems: function () {\n        return !!this.$('> .subcontainer > .j-view-port-chunk > ul > li').length;\n    },\n    clearCache: function () {\n        _.each(this.items, function (value) {\n            value.clearCache();\n        });\n        this.dataProvider && this.dataProvider.clear();\n    },\n    remove: function () {\n        var self = this, index = -1;\n        _.forEach(_.keys(this.items), function (key) {\n            self.items[key].remove();\n        });\n        this.dataProvider && this.dataProvider.clear();\n        this.list.remove();\n        if (this.parent) {\n            var parentLevelId = this.parent.id, dataLayer = this.owner.getDataLayer(parentLevelId);\n            if (dataLayer && dataLayer.predefinedData && dataLayer.predefinedData[parentLevelId] && _.isArray(dataLayer.predefinedData[parentLevelId])) {\n                for (var i = 0; i < dataLayer.predefinedData[parentLevelId].length; i++) {\n                    if (dataLayer.predefinedData[parentLevelId][i].id === this.id) {\n                        index = i;\n                        break;\n                    }\n                }\n                if (index > -1) {\n                    dataLayer.predefinedData[parentLevelId].splice(index, 1);\n                    delete dataLayer.predefinedData[this.id];\n                }\n            }\n            delete this.parent.items[this.id];\n        }\n        Panel.prototype.remove.apply(this, arguments);\n    },\n    isReady: function () {\n        return this._isReady;\n    }\n});\nfunction listRendered() {\n    this.$el.removeClass(this.loadingClass).addClass(this.openClass);\n    _.invoke(this.plugins, 'itemsRendered', this.list.model, this.list);\n    var count = this.list.$('> .j-view-port-chunk > ul > li').addClass(this.cid).length, height = _.isFunction(this.levelHeight) ? this.levelHeight() : this.levelHeight;\n    if (height && count * this.listItemHeight > height) {\n        this.list.$el.css({\n            'height': height + 'px',\n            'overflow-y': 'auto'\n        });\n    } else {\n        this.list.$el.css({\n            'height': 'auto',\n            'overflow': 'auto'\n        });\n    }\n    this.list._calcViewPortHeight();\n    this._isReady = true;\n    this.trigger('ready', this);\n}\nfunction listRenderError(responseStatus, error) {\n    this.listRenderError = true;\n    this.trigger('listRenderError', responseStatus, error, this);\n}\nfunction itemsSelected(items) {\n    var result = [];\n    _.chain(items).keys(items).each(function (key) {\n        result.push(items[key]);\n    });\n    this.selection.multiple || clearSelection(this);\n    this.trigger('selection:change', result, this, []);\n}\nfunction itemsDblClicked(items) {\n    var result = [];\n    _.chain(items).keys(items).each(function (key) {\n        result.push(items[key]);\n    });\n    this.selection.multiple || clearSelection(this);\n    this.trigger('item:dblclick', result);\n}\nfunction isLevelToExclude(level, levelsToExclude) {\n    for (var i = 0; i < levelsToExclude.length; i++) {\n        if (levelsToExclude[i] === level)\n            return true;\n    }\n}\nfunction itemsIterator(topLevel, handler, options, depth) {\n    if (options && options.exclude && _.isArray(options.exclude) && isLevelToExclude(topLevel, options.exclude)) {\n        return;\n    }\n    if (depth === undefined || depth > 0) {\n        _.chain(topLevel.items).keys().each(function (key) {\n            if (!(options && options.exclude && _.isArray(options.exclude) && isLevelToExclude(topLevel.items[key], options.exclude))) {\n                handler.call(topLevel.items[key], options);\n            }\n            itemsIterator(topLevel.items[key], handler, options, depth === undefined ? depth : --depth);\n        });\n    }\n}\nfunction clearSelection(topLevel, options) {\n    options = options && { exclude: options.exclude };\n    itemsIterator(topLevel, function (opts) {\n        this.list.clearSelection();\n        this.list.model.selection = [];\n    }, options);\n}","export default \"<ul class=\\\"list collapsible folders\\\" style=\\\"top: {{- top}}px; position: relative;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{ _.each(items, function(item){ }}\\n    <li class=\\\"{{- item._node ? 'node closed' : 'leaf'}} {{- item.selected ? 'selected' : ''}}\\\" data-index=\\\"{{- item.index }}\\\" tabindex=\\\"-1\\\">\\n        <p class=\\\"wrap button draggable\\\" data-tooltip=\\\"{{- item.value.label }}\\\"><b class=\\\"icon\\\"></b> {{- item.value.label }} </p>\\n        <div class=\\\"subcontainer\\\" ></div>\\n    </li>\\n    {{ }) }}\\n</ul>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport TreeLevel from './TreeLevel';\nimport TreeDataLayer from './TreeDataLayer';\nimport listTemplate from './template/treeLevelListTemplate.htm';\nimport levelTemplate from './template/treeLevelTemplate.htm';\n\nvar ITEM_ACTIONS = {\n    ADD: 'add',\n    UPDATE: 'update'\n};\nvar Tree = Backbone.View.extend({\n    template: _.template(levelTemplate),\n    _plugins: [],\n    el: function () {\n        return this.template();\n    },\n    constructor: function (options) {\n        options || (options = {});\n        this.defaultDataLayer = new TreeDataLayer(options);\n        this.customDataLayers = options.customDataLayers;\n        if (options.type) {\n            this._type = options.type;\n            options.type = undefined;\n        } else {\n            this._type = 'tree';\n        }\n        options.collapserSelector || (options.collapserSelector = 'b.icon:eq(0)');\n        if (options.predefinedData) {\n            this.defaultDataLayer.predefinedData = options.predefinedData;\n            options.predefinedData = undefined;\n        } else {\n            this.defaultDataLayer.predefinedData = {};\n        }\n        if (options.rootless) {\n            this.rootless = options.rootless;\n            options.rootless = undefined;\n        }\n        if (options.additionalCssClasses) {\n            this.additionalCssClasses = options.additionalCssClasses;\n            options.additionalCssClasses = undefined;\n        }\n        if (options.getDataLayer) {\n            this.getDataLayer = options.getDataLayer;\n            options.getDataLayer = undefined;\n        }\n        this._options = _.extend({\n            itemsTemplate: listTemplate,\n            plugins: this._plugins,\n            owner: this\n        }, options);\n        this.context = options.context || {};\n        for (var i = 0, l = this._plugins.length; i < l; i++) {\n            this._plugins[i].processors && (this.processors = this.processors.concat(this._plugins[i].processors));\n        }\n        Backbone.View.apply(this, arguments);\n    },\n    initialize: function (options) {\n        this.rootLevel = new TreeLevel(_.extend({}, this._options, { levelHeight: options.rootLevelHeight }, { el: this.$('li')[0] }, {\n            item: {\n                id: '/',\n                value: {\n                    id: '/',\n                    resourceType: 'folder'\n                }\n            }\n        }));\n        this.rootless && this.$el.find('ul:first').addClass('hideRoot');\n        this.additionalCssClasses && this.$el.find('ul:first').addClass(this.additionalCssClasses);\n        this.listenTo(this.rootLevel, 'ready', _.bind(addLevels, this));\n        this.listenTo(this.rootLevel, 'selection:change', _.bind(function (selection, level, visitedLevels) {\n            if (level && visitedLevels && _.isArray(visitedLevels)) {\n                this.rootLevel.selection.multiple || this.rootLevel.resetSelection({\n                    silent: true,\n                    exclude: [visitedLevels[0]]\n                });\n            }\n            this.trigger('selection:change', selection);\n        }, this));\n        this.listenTo(this.rootLevel, 'item:dblclick', _.bind(function (selection) {\n            this.trigger('item:dblclick', selection);\n        }, this));\n        for (var i = 0, l = this._plugins.length; i < l; i++) {\n            this._plugins[i].constr.treeInitialized.call(this, this._plugins[i].options);\n        }\n        this.rootLevel.render();\n        if (options.collapsed && options.lazyLoad && this.rootless) {\n            this.expand('/');\n        }\n    },\n    remove: function () {\n        for (var i = 0, l = this._plugins.length; i < l; i++) {\n            this._plugins[i].constr.treeRemoved.call(this);\n        }\n        this.rootLevel.remove();\n        Backbone.View.prototype.remove.apply(this, arguments);\n    },\n    expand: function (nodeId, options) {\n        var level = this.getLevel(nodeId);\n        level && level.open(options);\n        return this;\n    },\n    collapse: function (nodeId, options) {\n        var level = this.getLevel(nodeId);\n        level && level.close(options);\n        return this;\n    },\n    _getNodeByLevelId: function (levelId) {\n        var listContainingLevel, itemOfLevel;\n        var level = this.getLevel(levelId);\n        if (level) {\n            if (!level.parent) {\n                return null;\n            }\n            listContainingLevel = level.parent.list;\n            return {\n                node: level.item,\n                nodeElement: level.$el,\n                itsList: listContainingLevel\n            };\n        }\n        var parentLevel = false;\n        if (this._type === 'list') {\n            parentLevel = this.rootLevel;\n        } else if (this._type === 'tree') {\n            var parentPath = levelId.split('/');\n            parentPath = parentPath.slice(0, parentPath.length - 1).join('/');\n            if (parentPath === '') {\n                parentPath = '/';\n            }\n            parentLevel = this.getLevel(parentPath);\n            if (!parentLevel) {\n                return null;\n            }\n        }\n        if (!parentLevel) {\n            return null;\n        }\n        listContainingLevel = parentLevel.list;\n        itemOfLevel = _.find(listContainingLevel.model.get('items'), function (item) {\n            return item.id === levelId;\n        });\n        if (!itemOfLevel) {\n            return null;\n        }\n        return {\n            node: itemOfLevel,\n            nodeElement: listContainingLevel.$el.find('li.leaf.selected'),\n            itsList: listContainingLevel\n        };\n    },\n    select: function (levelId) {\n        var nodeInfo = this._getNodeByLevelId(levelId);\n        if (!nodeInfo) {\n            return;\n        }\n        nodeInfo.itsList.model.clearSelection().addValueToSelection(nodeInfo.node.value, nodeInfo.node.index);\n        this.trigger('selection:change', nodeInfo.itsList.getValue());\n    },\n    deselect: function (nodeId) {\n    },\n    addItem: function (parentId, itemData) {\n        var level = this.getLevel(parentId), action = ITEM_ACTIONS.ADD;\n        level && this._getNodeItems(parentId, level, itemData, action);\n        return this;\n    },\n    updateItem: function (itemData, parentId) {\n        var level = parentId ? this.getLevel(parentId) : this.rootLevel;\n        level && this._getNodeItems(level.id, level, itemData);\n        return this;\n    },\n    resetSelection: function (options) {\n        this.rootLevel.list.clearSelection();\n        this.rootLevel.list.model.selection = [];\n        this.rootLevel.resetSelection(options);\n        return this;\n    },\n    refresh: function (context) {\n        context && (this.context = context);\n        this.rootLevel.refresh();\n    },\n    recalcConstraints: function () {\n        this.rootLevel.recalcConstraints();\n    },\n    fetchVisibleData: function () {\n        this.rootLevel.fetchVisibleData();\n    },\n    clearCache: function () {\n        this.rootLevel.clearCache();\n    },\n    getLevel: function (levelId) {\n        return this.rootLevel.id === levelId ? this.rootLevel : this.rootLevel.getLevel(levelId);\n    },\n    getDataLayer: function (level) {\n        return this.customDataLayers && this.customDataLayers[level.id] ? this.customDataLayers[level.id] : this.defaultDataLayer;\n    },\n    _addItem: function (childItems, parentId, itemData) {\n        !_.findWhere(childItems, { id: itemData.id }) && childItems.push(itemData);\n        return childItems;\n    },\n    _updateItem: function (childItems, itemData) {\n        _.each(childItems, function (item) {\n            item.id === itemData.id && _.extend(item, itemData);\n        }, this);\n        return childItems;\n    },\n    _getNodeItems: function (parentId, level, itemData, action) {\n        var dataLayer = this.getDataLayer(level), childItems = level.list.model.get('items') ? level.list.model.get('items') : [], updatedChildItems;\n        dataLayer.predefinedData = dataLayer.predefinedData || {};\n        updatedChildItems = action === ITEM_ACTIONS.ADD ? this._addItem(childItems, parentId, itemData) : this._updateItem(childItems, itemData);\n        dataLayer.predefinedData[parentId] = _.sortBy(updatedChildItems, 'label');\n        level.fetch({\n            force: true,\n            keepPosition: true\n        });\n    },\n    _selectTreeNode: function (pathToSelect, $scrollContainer) {\n        if (!_.isString(pathToSelect) || pathToSelect === '') {\n            return;\n        }\n        var onceRootNodeIsReady = _.bind(function () {\n            var selectItemAfterFolderTreeIsOpened = _.bind(function () {\n                var folderToSelect = pathToSelect, levelIdToSelect = this.getLevelId(folderToSelect);\n                this.expand(levelIdToSelect);\n                this.select(levelIdToSelect);\n                if (this._type === 'list') {\n                    this.rootLevel.on('ready', onceRootNodeIsReady);\n                } else if (this._type === 'tree') {\n                    if ($scrollContainer && $scrollContainer.length) {\n                        var $tree = this.$el, nodeInfo = this._getNodeByLevelId(levelIdToSelect);\n                        if (!nodeInfo) {\n                            return;\n                        }\n                        var $selectedItem = nodeInfo.nodeElement;\n                        if (!$selectedItem) {\n                            return;\n                        }\n                        var scrollTo = $selectedItem.offset().top - $tree.offset().top - $scrollContainer.height() / 2 + $selectedItem.height() / 2;\n                        $scrollContainer.scrollTop(scrollTo);\n                    }\n                }\n            }, this);\n            if (pathToSelect === '/' || pathToSelect === '/public' || this._type === 'list') {\n                selectItemAfterFolderTreeIsOpened();\n            } else {\n                var tmp = pathToSelect.replace(/\\/$/, '');\n                var pathToOpen = tmp.substr(0, tmp.lastIndexOf('/'));\n                pathToOpen = pathToOpen || '/';\n                var dfd = new $.Deferred();\n                this._openPath(pathToOpen, dfd, 0);\n                dfd.done(selectItemAfterFolderTreeIsOpened);\n            }\n        }, this);\n        if (this.rootLevel.isReady()) {\n            onceRootNodeIsReady();\n        } else {\n            this.rootLevel.on('ready', onceRootNodeIsReady);\n        }\n    },\n    _openPath: function (path, dfd, index) {\n        if (!path) {\n            return dfd.resolve();\n        }\n        var self = this, pathFragmentToOpen, splitPath, level, levelIdToOpen;\n        if (path === '/') {\n            splitPath = ['/'];\n        } else {\n            splitPath = path.split('/');\n            splitPath[0] = '/';\n        }\n        if (splitPath[0] === '/' && splitPath[1] === 'public') {\n            splitPath = _.union(['/public'], _.rest(splitPath, 2));\n        }\n        index = index || 0;\n        if (index === splitPath.length) {\n            return dfd.resolve();\n        }\n        pathFragmentToOpen = _.first(splitPath, index + 1).join('/');\n        pathFragmentToOpen = pathFragmentToOpen.replace(/\\/\\//g, '/');\n        levelIdToOpen = this.getLevelId(pathFragmentToOpen);\n        level = this.getLevel(levelIdToOpen);\n        if (level) {\n            if (level.collapsed) {\n                level.once('ready', function () {\n                    self._openPath(path, dfd, index + 1);\n                });\n                level.open();\n            } else {\n                this._openPath(path, dfd, index + 1);\n            }\n        }\n    },\n    getLevelId: function (repositoryPath) {\n        var levelId = '';\n        var nodesOnTop = ['/public'];\n        if (repositoryPath === '/' || repositoryPath === '/root') {\n            levelId = '/root';\n        } else {\n            var topLevelCase = false;\n            for (var i = 0; i < nodesOnTop.length; i++) {\n                if (repositoryPath.indexOf(nodesOnTop[i]) === 0) {\n                    topLevelCase = true;\n                    break;\n                }\n            }\n            if (topLevelCase) {\n                levelId = repositoryPath;\n            } else {\n                levelId = '/root' + '/' + repositoryPath.substr(1);\n            }\n        }\n        return levelId;\n    }\n}, {\n    instance: function (options) {\n        return new this(options);\n    }\n});\nexport default {\n    use: function (plugin, options) {\n        return function (constructor) {\n            return {\n                use: function (constructorPlugin, constructorOptions) {\n                    constructor.prototype._plugins.push({\n                        constr: constructorPlugin,\n                        options: constructorOptions\n                    });\n                    return this;\n                },\n                create: function () {\n                    return constructor;\n                }\n            };\n        }(Tree.extend({\n            _plugins: [{\n                constr: plugin,\n                options: options\n            }]\n        }));\n    },\n    create: function () {\n        return Tree;\n    }\n};\nfunction addLevels(parentLevel) {\n    var items = parentLevel.list.model.get('items'), self = this;\n    items = _.where(items, { _node: true });\n    parentLevel.$('.node').each(function (index, element) {\n        var levelName = items[index].id;\n        if (parentLevel.items[levelName]) {\n            parentLevel.items[levelName].setElement(element);\n        } else {\n            parentLevel.items[levelName] = new TreeLevel(_.extend({}, self._options, {\n                el: element,\n                item: items[index],\n                parent: parentLevel\n            }));\n            self.listenTo(parentLevel.items[levelName], 'listRenderError', _.bind(function (responseStatus, error, level) {\n                this.trigger('levelRenderError', responseStatus, error, level);\n            }, self));\n            parentLevel.listenTo(parentLevel.items[levelName], 'ready', _.bind(addLevels, self));\n            parentLevel.listenTo(parentLevel.items[levelName], 'selection:change', function (selection, level, visitedLevels) {\n                level && visitedLevels.push(level);\n                parentLevel.list.model.clearSelection();\n                parentLevel.trigger('selection:change', selection, parentLevel, visitedLevels);\n            });\n            parentLevel.listenTo(parentLevel.items[levelName], 'item:dblclick', function (selection) {\n                parentLevel.list.model.clearSelection();\n                parentLevel.trigger('item:dblclick', selection);\n            });\n            parentLevel.items[levelName].render();\n        }\n    }).length && parentLevel.$('.j-view-port-chunk').css({ height: 'auto' });\n}","export default \"<div>\\n\\n    <js-templateNonce></js-templateNonce>\\n    <ul class=\\\"list collapsible folders\\\">\\n        <li class=\\\"node\\\">\\n            <p class=\\\"wrap button\\\">\\n                <b class=\\\"icon\\\" id=\\\"handler2\\\" title=\\\"\\\"></b>root\\n            </p>\\n            <div class=\\\"subcontainer\\\"></div>\\n        </li>\\n    </ul>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport ClassUtil from '../../util/classUtil';\n\nimport request from '../../transport/request';\n\nexport default ClassUtil.extend({\n    constructor: function (options) {\n        this.requestType = options.requestType ? options.requestType : 'GET';\n        options.getDataUri && (this.getDataUri = options.getDataUri);\n        this.getDataUri || (this.getDataUri = _.template(options.dataUriTemplate));\n        options.getDataArray && (this.getDataArray = options.getDataArray);\n        options.getDataSize && (this.getDataSize = options.getDataSize);\n        options.extractId && (this.extractId = options.extractId);\n        this.levelDataId = options.levelDataId ? options.levelDataId : 'id';\n        this.processors = options.processors || [];\n        this.initialize(options);\n    },\n    initialize: function (options) {\n    },\n    extractId: function (item) {\n        return item[this.levelDataId];\n    },\n    getDataSize: function (data, status, xhr) {\n        return this.getDataArray(data, status, xhr).length;\n    },\n    getDataArray: function (data, status, xhr) {\n        return data;\n    },\n    obtainData: function (options, level) {\n        var result = new $.Deferred(), self = this;\n        if (this.predefinedData && this.predefinedData[options.id]) {\n            result.resolve({\n                total: this.predefinedData[options.id].length,\n                data: this.predefinedData[options.id]\n            });\n        } else {\n            request({\n                type: this.requestType,\n                dataType: this.dataType || 'json',\n                headers: {\n                    Accept: this.accept || 'application/json',\n                    'Content-Type': this.contentType || undefined\n                },\n                cache: false,\n                data: this.data || undefined,\n                url: this.getDataUri(options)\n            }).done(function () {\n                var data = arguments[0];\n                self.dataSize = self.getDataSize.call(self, data, options, arguments[2]);\n                result.resolve({\n                    total: self.dataSize,\n                    data: process.call(self, self.getDataArray.call(self, data, options, arguments[2]), options)\n                });\n            }).fail(function (xhr) {\n                result.reject(xhr.status, xhr.responseText);\n            });\n        }\n        return result;\n    },\n    _process: process\n});\nfunction process(data, options) {\n    return invokeProcessors.call(this, changeDataStructure.call(this, data), options);\n}\nfunction changeDataStructure(data) {\n    for (var i = 0, l = data.length; i < l; i++) {\n        data[i] = {\n            id: this.extractId(data[i]),\n            value: data[i]\n        };\n    }\n    return data;\n}\nfunction invokeProcessors(data, options) {\n    var processedData, processedItem;\n    if (this.processors && this.processors.length) {\n        for (var i = 0, l = this.processors.length; i < l; i++) {\n            processedData = [];\n            for (var j = 0, le = data.length; j < le; j++) {\n                processedItem = this.processors[i].processItem(data[j], options, this);\n                processedItem && processedData.push(processedItem);\n            }\n            data = processedData;\n        }\n    }\n    return data;\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport TreePlugin from './TreePlugin';\nimport _ from 'underscore';\nimport Tooltip from '../../tooltip/Tooltip';\nexport default TreePlugin.extend({\n    initialize: function (options) {\n        this.tooltip = Tooltip.attachTo(options.attachTo, _.omit(options, 'el'));\n        this.listensToList = false;\n        TreePlugin.prototype.initialize.apply(this, arguments);\n    },\n    itemsRendered: function (model, list) {\n        var self = this;\n        if (!this.listensToList) {\n            this.listensToList = true;\n            this.listenTo(list, 'list:item:mouseover', function (item, e) {\n                self.tooltip.show(item);\n            });\n            this.listenTo(list, 'list:item:mouseout', function () {\n                self.tooltip.hide();\n            });\n        }\n    },\n    remove: function () {\n        Tooltip.detachFrom(this.$el);\n        this.tooltip.remove();\n        TreePlugin.prototype.remove.apply(this, arguments);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Backbone from 'backbone';\nexport default Backbone.View.extend({\n    dataLayerObtained: function () {\n    },\n    itemsRendered: function () {\n    }\n}, {\n    processors: null,\n    treeInitialized: function () {\n    },\n    treeRemoved: function () {\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Validation from 'backbone-validation';\nimport _ from 'underscore';\nimport NumberUtils from '../util/parse/NumberUtils';\n\nvar numberUtils = new NumberUtils();\nvar originalValidate = Validation.mixin.validate;\n\nValidation.mixin.validate = function (attrs, options) {\n    options || (options = {});\n    var self = this;\n    return originalValidate.call(this, attrs, _.extend({\n        valid: function (view, attr) {\n            self.trigger('validate:' + attr, self, attr);\n        },\n        invalid: function (view, attr, error) {\n            self.trigger('validate:' + attr, self, attr, error);\n        }\n    }, options));\n};\n_.extend(Validation.validators, {\n    doesNotContainSymbols: function (value, attr, forbiddenSymbols) {\n        if (new RegExp('[' + forbiddenSymbols + ']', 'g').test(value)) {\n            return 'Attribute \\'' + attr + '\\' contains forbidden symbols';\n        }\n    },\n    integerNumber: function (value) {\n        if (!numberUtils.isNumberInt(value)) {\n            return 'Value is not a valid integer number';\n        }\n    },\n    type: function (value, attr, types) {\n        function typeFn(type) {\n            var fn;\n            if ('string' == type) {\n                fn = _.isString;\n            } else if ('number' === type) {\n                fn = _.isNumber;\n            } else if ('object' === type) {\n                fn = _.isObject;\n            } else if ('boolean' === type) {\n                fn = _.isBoolean;\n            } else if ('null' === type) {\n                fn = _.isNull;\n            } else if ('undefined' === type) {\n                fn = _.isUndefined;\n            }\n            return fn;\n        }\n        if (!_.isArray(types)) {\n            types = [types];\n        }\n        var isValueOneOfTypes = types.some(function (type) {\n            return typeFn(type)(value);\n        });\n        if (!isValueOneOfTypes) {\n            return '\\'{attr}\\' is not {type}'.replace('{attr}', attr).replace('\\'{type}\\'', types.join(' '));\n        }\n    },\n    url: function (value) {\n        if (!/(http|https):\\/\\/.*\\..*./.test(value)) {\n            return 'Value is not a valid url';\n        }\n    },\n    hexColor: function (value) {\n        if (!/^#[0-9a-f]{3,6}$/i.test(value)) {\n            return 'Value is not a valid hex color';\n        }\n    },\n    xRegExpPattern: function (value, attr, customValue, model) {\n        if (!customValue.test(value)) {\n            return 'Value does not match pattern';\n        }\n    },\n    startsWithLetter: function (value, attr, customValue, model) {\n        if (!value.substr(0, 1).match(/[A-Za-z]/)) {\n            return 'Value should start with letter';\n        }\n    },\n    containsOnlyWordCharacters: function (value, attr, customValue, model) {\n        if (value.search(/\\W/) >= 0) {\n            return 'Value should contain only word characters (letters, digits and underscore)';\n        }\n    },\n    arrayMinLength: function (value, attr, minLength, model) {\n        if (_.isArray(value) && value.length < minLength) {\n            return 'Array length is less than ' + minLength;\n        }\n    }\n});\nexport default Validation;","export default \"<p class='alertText'>\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- message }}\\n</p>\";","export default \"<div class=\\\"{{- cssClasses }}\\\" style=\\\"position: absolute; z-index: 100000;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"content\\\">\\n        <div class=\\\"body\\\"></div>\\n    </div>\\n</div>\\n\";","\n        import settingsStore from 'settingsStore';\n        settingsStore['treeComponent'] = settingsStore['treeComponent'] || {};\n        export default settingsStore['treeComponent'];\n    "],"sourceRoot":""}