{"version":3,"sources":["webpack://jrs-ui/./runtime_dependencies/iscroll/src/iscroll.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/data.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/plugin.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/safe-active-element.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/safe-blur.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/widgets/draggable.js","webpack://jrs-ui/./runtime_dependencies/scriptaculous/src/effects.js","webpack://jrs-ui/./runtime_dependencies/scriptaculous/src/builder.js","webpack://jrs-ui/./runtime_dependencies/scriptaculous/src/dragdrop.js"],"names":["m","vendor","has3d","hasTouch","hasTransform","isAndroid","isIDevice","isPlaybook","hasTransitionEnd","nextFrame","cancelFrame","RESIZE_EV","START_EV","MOVE_EV","END_EV","CANCEL_EV","WHEEL_EV","trnOpen","trnClose","iScroll","Math","test","navigator","appVersion","userAgent","window","WebKitCSSMatrix","document","documentElement","style","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","cancelRequestAnimationFrame","webkitCancelRequestAnimationFrame","mozCancelRequestAnimationFrame","oCancelRequestAnimationFrame","msCancelRequestAnimationFrame","clearTimeout","el","options","i","that","this","doc","wrapper","getElementById","overflow","scroller","children","hScroll","vScroll","bounce","bounceLock","momentum","lockDirection","useTransform","useTransition","checkDOMChanges","hScrollbar","vScrollbar","fixedScrollbar","hideScrollbar","fadeScrollbar","scrollbarClass","zoom","zoomMin","zoomMax","doubleTapZoom","wheelAction","snap","snapThreshold","onRefresh","onBeforeScrollStart","e","preventDefault","onScrollStart","onBeforeScrollMove","onScrollMove","onBeforeScrollEnd","onScrollEnd","onTouchEnd","onDestroy","onZoomStart","onZoom","onZoomEnd","toLowerCase","cssText","refresh","_bind","checkDOMTime","setInterval","_checkDOMChanges","prototype","enabled","x","y","steps","scale","currPageX","currPageY","pagesX","pagesY","aniTime","wheelZoomCount","handleEvent","type","button","_start","_move","_end","_resize","_wheel","_mouseout","_transitionEnd","moved","zoomed","animating","scrollerW","offsetWidth","scrollerH","offsetHeight","_scrollbar","dir","bar","createElement","className","toUpperCase","appendChild","hScrollbarSize","hScrollbarWrapper","clientWidth","hScrollbarIndicatorSize","max","round","hScrollbarIndicator","width","hScrollbarMaxScroll","hScrollbarProp","maxScrollX","vScrollbarSize","vScrollbarWrapper","clientHeight","vScrollbarIndicatorSize","vScrollbarIndicator","height","vScrollbarMaxScroll","vScrollbarProp","maxScrollY","_scrollbarPos","parentNode","removeChild","_pos","left","top","hidden","size","pos","opacity","matrix","c1","c2","point","touches","scrolling","scrollTimer","Draggables","dragging","length","call","_transitionTime","distX","distY","absDistX","absDistY","dirX","dirY","abs","pageX","pageY","touchesDistStart","sqrt","originX","wrapperOffsetLeft","originY","wrapperOffsetTop","getComputedStyle","replace","split","_unbind","absStartX","absStartY","startX","startY","pointX","pointY","startTime","timeStamp","Date","getTime","deltaX","deltaY","newX","newY","timestamp","touchesDist","scaleMin","pow","scaleMax","lastScale","target","ev","newDuration","changedTouches","momentumX","dist","time","momentumY","duration","newPosX","newPosY","min","doubleTapTimer","nodeType","tagName","createEvent","initMouseEvent","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","_fake","dispatchEvent","_resetPos","scrollEvent","_momentum","wrapperW","wrapperH","scrollTo","_snap","resetX","resetY","wheelDeltaX","wheelDeltaY","detail","wheelDelta","t","relatedTarget","_startAni","step","easeOut","shift","animate","now","onAnimationEnd","maxDistUpper","maxDistLower","newTime","deceleration","speed","newDist","_offset","offsetLeft","offsetTop","offsetParent","l","page","sizeX","sizeY","bubble","addEventListener","removeEventListener","destroy","clearInterval","offset","els","querySelectorAll","relative","stop","push","scrollToElement","querySelector","undefined","scrollToPage","disable","enable","relScale","isReady","exports","define","$","extend","expr","data","createPseudo","dataName","elem","match","ui","plugin","add","module","option","set","proto","plugins","instance","name","args","allowDisconnected","element","apply","safeActiveElement","activeElement","error","body","nodeName","safeBlur","trigger","widget","mouse","version","widgetEventPrefix","addClasses","appendTo","axis","connectToSortable","containment","cursor","cursorAt","grid","handle","helper","iframeFix","refreshPositions","revert","revertDuration","scope","scroll","scrollSensitivity","scrollSpeed","snapMode","snapTolerance","stack","zIndex","drag","start","_create","_setPositionRelative","_addClass","_setHandleClassName","_mouseInit","_setOption","key","value","_super","_removeHandleClassName","_destroy","is","destroyOnClear","_mouseDestroy","_mouseCapture","event","o","disabled","closest","_getHandle","_blurActiveElement","_blockFrames","selector","iframeBlocks","find","map","iframe","css","parent","outerWidth","outerHeight","_unblockFrames","remove","_mouseStart","_createHelper","_cacheHelperProportions","ddmanager","current","_cacheMargins","cssPosition","scrollParent","hasFixedAncestor","parents","filter","positionAbs","_refreshOffsets","originalPosition","position","_generatePosition","originalPageX","originalPageY","_adjustOffsetFromHelper","_setContainment","_trigger","_clear","dropBehaviour","prepareOffsets","_mouseDrag","dragStart","margins","_getParentOffset","_getRelativeOffset","click","noPropagation","_convertPositionTo","_uiHash","_mouseUp","Event","_mouseStop","dropped","drop","isFunction","parseInt","dragStop","handleElement","cancel","_removeClass","helperIsFunction","clone","removeAttr","obj","isArray","helperProportions","right","bottom","_isRootNode","po","contains","scrollLeft","scrollTop","p","scrollIsRootNode","isUserScrollable","c","ce","relativeContainer","constructor","Array","scrollWidth","scrollHeight","d","mod","constrainPosition","co","cancelHelperRemoval","Widget","draggable","uiSortable","item","sortables","each","sortable","isOver","_storedCSS","placeholder","_helper","innermostIntersecting","_intersectsWith","containerCache","_parent","currentItem","fromOutside","_revert","_cursor","_opacity","scrollParentNotHidden","overflowOffset","scrolled","snapElements","String","items","$t","$o","inst","ts","bs","ls","rs","r","b","first","x1","x2","y1","y2","ownerDocument","snapping","release","snapItem","group","makeArray","sort","a","_zIndex","parseColor","color","slice","cols","toColorPart","charAt","arguments","Element","collectTextNodes","$A","childNodes","collect","node","nodeValue","hasChildNodes","flatten","join","collectTextNodesIgnoreClass","hasClassName","setContentZoom","percent","setStyle","fontSize","Prototype","Browser","WebKit","scrollBy","getInlineOpacity","forceRerendering","n","createTextNode","Effect","_elementDoesNotExistError","message","Transitions","linear","K","sinoidal","cos","PI","reverse","flicker","random","wobble","pulse","pulses","spring","exp","none","full","DefaultOptions","fps","sync","from","to","delay","queue","tagifyText","tagifyStyle","IE","child","toArray","character","insertBefore","update","fromCharCode","multiple","effect","elements","Object","masterDelay","index","PAIRS","toggle","visible","id","limit","transition","ScopedQueue","Class","create","Enumerable","initialize","effects","interval","_each","iterator","isString","findAll","state","startOn","finishOn","pluck","loop","bind","reject","timePos","len","Queues","instances","$H","get","queueName","Queue","Base","currentFrame","fromToDelta","totalTime","totalFrames","render","dispatch","eventName","setup","finish","frame","inspect","property","Parallel","invoke","Tween","object","method","last","emptyFunction","Opacity","currentStyle","hasLayout","getOpacity","setOpacity","Move","mode","makePositioned","originalLeft","parseFloat","getStyle","originalTop","MoveBy","toTop","toLeft","Scale","scaleX","scaleY","scaleContent","scaleFromCenter","scaleMode","scaleFrom","scaleTo","restoreAfterFinish","elementPositioning","originalStyle","k","fontSizeType","indexOf","factor","dims","originalHeight","originalWidth","currentScale","setDimensions","topd","leftd","Highlight","startcolor","oldStyle","keepBackgroundImage","backgroundImage","endcolor","restorecolor","_base","$R","_delta","backgroundColor","inject","v","ScrollTo","scrollOffsets","viewport","getScrollOffsets","elementOffsets","cumulativeOffset","Fade","oldOpacity","afterFinishInternal","hide","Appear","beforeSetup","show","Puff","beforeSetupInternal","Position","absolutize","BlindUp","makeClipping","undoClipping","BlindDown","elementDimensions","getDimensions","afterSetup","SwitchOff","undoPositioned","DropOut","Shake","distance","SlideDown","oldInnerBottom","cleanWhitespace","down","opera","afterUpdateInternal","SlideUp","Squish","Grow","initialMoveX","initialMoveY","moveX","moveY","direction","moveTransition","scaleTransition","opacityTransition","Shrink","beforeStartInternal","Pulsate","reverser","Fold","Morph","include","parseStyle","addClassName","getStyles","removeClassName","transforms","transform","pair","unit","CSS_LENGTH","components","originalValue","camelize","targetValue","isNaN","toFixed","Transform","tracks","addTracks","track","values","ids","keys","play","$$","CSS_PROPERTIES","$w","__parseStyleElement","styleRules","innerHTML","s","escapeXSS","Error","_escapeXSS","defaultView","styles","results","Methods","morph","visualEffect","dasherize","klass","substring","highlight","f","addMethods","global","Builder","NODEMAP","AREA","CAPTION","COL","COLGROUP","LEGEND","OPTGROUP","OPTION","PARAM","TBODY","TD","TFOOT","TH","THEAD","TR","elementName","parentTag","parentElement","firstChild","getElementsByTagName","_isStringOrNumber","_children","attrs","_attributes","attr","_text","text","ATTR_MAP","attributes","attribute","toString","escapeHTML","gsub","param","build","html","strip","dump","tag","concat","isUndefined","Droppables","drops","greedy","hoverclass","tree","_containers","accept","findDeepestChild","deepest","isParent","isContained","containmentNode","treeNode","detect","isAffected","classNames","within","deactivate","last_active","activate","affected","onHover","overlap","fire","pointer","prepare","supportsTouch","_lastPointer","pointerX","pointerY","onDrop","reset","DEFAULT_TOLERANCE","BrowserFeatures","SupportsTouch","drags","observers","register","eventMouseUp","endDrag","bindAsEventListener","eventMouseMove","updateDrag","eventKeypress","keyPress","observe","unregister","stopObserving","_timeout","focus","activeDraggable","pointerInRadius","radius","addObserver","observer","_cacheObserverCallbacks","removeObserver","notify","select","Draggable","defaults","reverteffect","top_offset","left_offset","dur","endeffect","_dragging","zindex","quiet","starteffect","outerHTML","_isScrollChild","childOf","eventMouseDown","initDrag","currentDelta","leftStyle","topStyle","getWidth","getHeight","isLeftClick","src","tag_name","countdown","targetEvent","startDrag","delta","originalZ","ghosting","_clone","cloneNode","_originallyAbsolute","where","_getWindowScroll","originalScrollLeft","originalScrollTop","isIE7","draw","change","stopScrolling","startScrolling","finishDrag","success","relativize","onDropped","keyCode","KEY_ESC","realOffset","constraint","visibility","scrollInterval","_lastScrollPointer","lastScrolled","w","T","L","W","H","innerWidth","innerHeight","SortableObserver","lastValue","Sortable","serialize","onStart","onEnd","unmark","SERIALIZE_RULE","_findRootElement","droppables","draggables","getSortableObserverConstructor","dropOnEmpty","treeTag","only","format","handles","onChange","onUpdate","options_for_draggable","options_for_droppable","options_for_tree","onEmptyHover","findElements","findTreeElements","identify","findChildren","dropon","oldParentNode","mark","previousSibling","nextElement","nextSibling","droponOptions","childOffset","offsetSize","ycomp","sourceSortable","_marker","offsets","_tree","encodeURIComponent","container","sortableOptions","root","_constructIndex","sequence","setSequence","new_sequence","nodeMap","ident","callee","recursive","grandchildren"],"mappings":"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","file":"_chunks/chunk.8788.js","sourcesContent":["/*!\n * iScroll v4.1.7 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org\n * Released under MIT license, http://cubiq.org/license\n */\n\n(function(){\nvar m = Math,\n\tvendor = (/webkit/i).test(navigator.appVersion) ? 'webkit' :\n\t\t(/firefox/i).test(navigator.userAgent) ? 'Moz' :\n\t\t'opera' in window ? 'O' : '',\n\n\t// Browser capabilities\n\thas3d = 'WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix(),\n\thasTouch = 'ontouchstart' in window,\n\thasTransform = vendor + 'Transform' in document.documentElement.style,\n\tisAndroid = (/android/gi).test(navigator.appVersion),\n\tisIDevice = (/iphone|ipad/gi).test(navigator.appVersion),\n\tisPlaybook = (/playbook/gi).test(navigator.appVersion),\n\thasTransitionEnd = isIDevice || isPlaybook,\n\tnextFrame = (function() {\n\t    return window.requestAnimationFrame\n\t\t\t|| window.webkitRequestAnimationFrame\n\t\t\t|| window.mozRequestAnimationFrame\n\t\t\t|| window.oRequestAnimationFrame\n\t\t\t|| window.msRequestAnimationFrame\n\t\t\t|| function(callback) { return setTimeout(callback, 1); }\n\t})(),\n\tcancelFrame = (function () {\n\t    return window.cancelRequestAnimationFrame\n\t\t\t|| window.webkitCancelRequestAnimationFrame\n\t\t\t|| window.mozCancelRequestAnimationFrame\n\t\t\t|| window.oCancelRequestAnimationFrame\n\t\t\t|| window.msCancelRequestAnimationFrame\n\t\t\t|| clearTimeout\n\t})(),\n\n\t// Events\n\tRESIZE_EV = 'onorientationchange' in window ? 'orientationchange' : 'resize',\n\tSTART_EV = hasTouch ? 'touchstart' : 'mousedown',\n\tMOVE_EV = hasTouch ? 'touchmove' : 'mousemove',\n\tEND_EV = hasTouch ? 'touchend' : 'mouseup',\n\tCANCEL_EV = hasTouch ? 'touchcancel' : 'mouseup',\n\tWHEEL_EV = vendor == 'Moz' ? 'DOMMouseScroll' : 'mousewheel',\n\n\t// Helpers\n\ttrnOpen = 'translate' + (has3d ? '3d(' : '('),\n\ttrnClose = has3d ? ',0)' : ')',\n\n\t// Constructor\n\tiScroll = function (el, options) {\n\t\tvar that = this,\n\t\t\tdoc = document,\n\t\t\ti;\n\n\t\tthat.wrapper = typeof el == 'object' ? el : doc.getElementById(el);\n\t\tthat.wrapper.style.overflow = 'hidden';\n\t\tthat.scroller = that.wrapper.children[0];\n\n\t\t// Default options\n\t\tthat.options = {\n\t\t\thScroll: true,\n\t\t\tvScroll: true,\n\t\t\tbounce: true,\n\t\t\tbounceLock: false,\n\t\t\tmomentum: true,\n\t\t\tlockDirection: true,\n\t\t\tuseTransform: true,\n\t\t\tuseTransition: false,\n\t\t\tcheckDOMChanges: false,\t\t// Experimental\n\n\t\t\t// Scrollbar\n\t\t\thScrollbar: true,\n\t\t\tvScrollbar: true,\n\t\t\tfixedScrollbar: isAndroid,\n\t\t\thideScrollbar: isIDevice,\n\t\t\tfadeScrollbar: isIDevice && has3d,\n\t\t\tscrollbarClass: '',\n\n\t\t\t// Zoom\n\t\t\tzoom: false,\n\t\t\tzoomMin: 1,\n\t\t\tzoomMax: 4,\n\t\t\tdoubleTapZoom: 2,\n\t\t\twheelAction: 'scroll',\n\n\t\t\t// Snap\n\t\t\tsnap: false,\n\t\t\tsnapThreshold: 1,\n\n\t\t\t// Events\n\t\t\tonRefresh: null,\n\t\t\tonBeforeScrollStart: function (e) { e.preventDefault(); },\n\t\t\tonScrollStart: null,\n\t\t\tonBeforeScrollMove: null,\n\t\t\tonScrollMove: null,\n\t\t\tonBeforeScrollEnd: null,\n\t\t\tonScrollEnd: null,\n\t\t\tonTouchEnd: null,\n\t\t\tonDestroy: null,\n\t\t\tonZoomStart: null,\n\t\t\tonZoom: null,\n\t\t\tonZoomEnd: null\n\t\t};\n\n\t\t// User defined options\n\t\tfor (i in options) that.options[i] = options[i];\n\n\t\t// Normalize options\n\t\tthat.options.useTransform = hasTransform ? that.options.useTransform : false;\n\t\tthat.options.hScrollbar = that.options.hScroll && that.options.hScrollbar;\n\t\tthat.options.vScrollbar = that.options.vScroll && that.options.vScrollbar;\n\t\tthat.options.zoom = that.options.useTransform && that.options.zoom;\n\t\tthat.options.useTransition = hasTransitionEnd && that.options.useTransition;\n\n\t\t// Set some default styles\n\t\tthat.scroller.style[vendor + 'TransitionProperty'] = that.options.useTransform ? '-' + vendor.toLowerCase() + '-transform' : 'top left';\n\t\tthat.scroller.style[vendor + 'TransitionDuration'] = '0';\n\t\tthat.scroller.style[vendor + 'TransformOrigin'] = '0 0';\n\t\tif (that.options.useTransition) that.scroller.style[vendor + 'TransitionTimingFunction'] = 'cubic-bezier(0.33,0.66,0.66,1)';\n\n\t\tif (that.options.useTransform) that.scroller.style[vendor + 'Transform'] = trnOpen + '0,0' + trnClose;\n\t\telse that.scroller.style.cssText += ';position:absolute;top:0;left:0';\n\n\t\tif (that.options.useTransition) that.options.fixedScrollbar = true;\n\n\t\tthat.refresh();\n\n\t\tthat._bind(RESIZE_EV, window);\n\t\tthat._bind(START_EV);\n\t\tif (!hasTouch) {\n\t\t\tthat._bind('mouseout', that.wrapper);\n\t\t\tthat._bind(WHEEL_EV);\n\t\t}\n\n\t\tif (that.options.checkDOMChanges) that.checkDOMTime = setInterval(function () {\n\t\t\tthat._checkDOMChanges();\n\t\t}, 500);\n\t};\n\n// Prototype\niScroll.prototype = {\n\tenabled: true,\n\tx: 0,\n\ty: 0,\n\tsteps: [],\n\tscale: 1,\n\tcurrPageX: 0, currPageY: 0,\n\tpagesX: [], pagesY: [],\n\taniTime: null,\n\twheelZoomCount: 0,\n\n\thandleEvent: function (e) {\n\t\tvar that = this;\n\t\tswitch(e.type) {\n\t\t\tcase START_EV:\n\t\t\t\tif (!hasTouch && e.button !== 0) return;\n\t\t\t\tthat._start(e);\n\t\t\t\tbreak;\n\t\t\tcase MOVE_EV: that._move(e); break;\n\t\t\tcase END_EV:\n\t\t\tcase CANCEL_EV: that._end(e); break;\n\t\t\tcase RESIZE_EV: that._resize(); break;\n\t\t\tcase WHEEL_EV: that._wheel(e); break;\n\t\t\tcase 'mouseout': that._mouseout(e); break;\n\t\t\tcase 'webkitTransitionEnd': that._transitionEnd(e); break;\n\t\t}\n\t},\n\n\t_checkDOMChanges: function () {\n\t\tif (this.moved || this.zoomed || this.animating ||\n\t\t\t(this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale)) return;\n\n\t\tthis.refresh();\n\t},\n\n\t_scrollbar: function (dir) {\n\t\tvar that = this,\n\t\t\tdoc = document,\n\t\t\tbar;\n\n\t\tif (!that[dir + 'Scrollbar']) {\n\t\t\tif (that[dir + 'ScrollbarWrapper']) {\n\t\t\t\tif (hasTransform) that[dir + 'ScrollbarIndicator'].style[vendor + 'Transform'] = '';\n\t\t\t\tthat[dir + 'ScrollbarWrapper'].parentNode.removeChild(that[dir + 'ScrollbarWrapper']);\n\t\t\t\tthat[dir + 'ScrollbarWrapper'] = null;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'] = null;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!that[dir + 'ScrollbarWrapper']) {\n\t\t\t// Create the scrollbar wrapper\n\t\t\tbar = doc.createElement('div');\n\n\t\t\tif (that.options.scrollbarClass) bar.className = that.options.scrollbarClass + dir.toUpperCase();\n\t\t\telse bar.style.cssText = 'position:absolute;z-index:100;' + (dir == 'h' ? 'height:7px;bottom:1px;left:2px;right:' + (that.vScrollbar ? '7' : '2') + 'px' : 'width:7px;bottom:' + (that.hScrollbar ? '7' : '2') + 'px;top:2px;right:1px');\n\n\t\t\tbar.style.cssText += ';pointer-events:none;-' + vendor + '-transition-property:opacity;-' + vendor + '-transition-duration:' + (that.options.fadeScrollbar ? '350ms' : '0') + ';overflow:hidden;opacity:' + (that.options.hideScrollbar ? '0' : '1');\n\n\t\t\tthat.wrapper.appendChild(bar);\n\t\t\tthat[dir + 'ScrollbarWrapper'] = bar;\n\n\t\t\t// Create the scrollbar indicator\n\t\t\tbar = doc.createElement('div');\n\t\t\tif (!that.options.scrollbarClass) {\n\t\t\t\tbar.style.cssText = 'position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-' + vendor + '-background-clip:padding-box;-' + vendor + '-box-sizing:border-box;' + (dir == 'h' ? 'height:100%' : 'width:100%') + ';-' + vendor + '-border-radius:3px;border-radius:3px';\n\t\t\t}\n\t\t\tbar.style.cssText += ';pointer-events:none;-' + vendor + '-transition-property:-' + vendor + '-transform;-' + vendor + '-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-' + vendor + '-transition-duration:0;-' + vendor + '-transform:' + trnOpen + '0,0' + trnClose;\n\t\t\tif (that.options.useTransition) bar.style.cssText += ';-' + vendor + '-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';\n\n\t\t\tthat[dir + 'ScrollbarWrapper'].appendChild(bar);\n\t\t\tthat[dir + 'ScrollbarIndicator'] = bar;\n\t\t}\n\n\t\tif (dir == 'h') {\n\t\t\tthat.hScrollbarSize = that.hScrollbarWrapper.clientWidth;\n\t\t\tthat.hScrollbarIndicatorSize = m.max(m.round(that.hScrollbarSize * that.hScrollbarSize / that.scrollerW), 8);\n\t\t\tthat.hScrollbarIndicator.style.width = that.hScrollbarIndicatorSize + 'px';\n\t\t\tthat.hScrollbarMaxScroll = that.hScrollbarSize - that.hScrollbarIndicatorSize;\n\t\t\tthat.hScrollbarProp = that.hScrollbarMaxScroll / that.maxScrollX;\n\t\t} else {\n\t\t\tthat.vScrollbarSize = that.vScrollbarWrapper.clientHeight;\n\t\t\tthat.vScrollbarIndicatorSize = m.max(m.round(that.vScrollbarSize * that.vScrollbarSize / that.scrollerH), 8);\n\t\t\tthat.vScrollbarIndicator.style.height = that.vScrollbarIndicatorSize + 'px';\n\t\t\tthat.vScrollbarMaxScroll = that.vScrollbarSize - that.vScrollbarIndicatorSize;\n\t\t\tthat.vScrollbarProp = that.vScrollbarMaxScroll / that.maxScrollY;\n\t\t}\n\n\t\t// Reset position\n\t\tthat._scrollbarPos(dir, true);\n\t},\n\n\t_resize: function () {\n\t\tvar that = this;\n\t\tsetTimeout(function () { that.refresh(); }, isAndroid ? 200 : 0);\n\t},\n\n\t_pos: function (x, y) {\n\t\tx = this.hScroll ? x : 0;\n\t\ty = this.vScroll ? y : 0;\n\n\t\tif (this.options.useTransform) {\n\t\t\tthis.scroller.style[vendor + 'Transform'] = trnOpen + x + 'px,' + y + 'px' + trnClose + ' scale(' + this.scale + ')';\n\t\t} else {\n\t\t\tx = m.round(x);\n\t\t\ty = m.round(y);\n\t\t\tthis.scroller.style.left = x + 'px';\n\t\t\tthis.scroller.style.top = y + 'px';\n\t\t}\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tthis._scrollbarPos('h');\n\t\tthis._scrollbarPos('v');\n\t},\n\n\t_scrollbarPos: function (dir, hidden) {\n\t\tvar that = this,\n\t\t\tpos = dir == 'h' ? that.x : that.y,\n\t\t\tsize;\n\n\t\tif (!that[dir + 'Scrollbar']) return;\n\n\t\tpos = that[dir + 'ScrollbarProp'] * pos;\n\n\t\tif (pos < 0) {\n\t\t\tif (!that.options.fixedScrollbar) {\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] + m.round(pos * 3);\n\t\t\t\tif (size < 8) size = 8;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\n\t\t\t}\n\t\t\tpos = 0;\n\t\t} else if (pos > that[dir + 'ScrollbarMaxScroll']) {\n\t\t\tif (!that.options.fixedScrollbar) {\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] - m.round((pos - that[dir + 'ScrollbarMaxScroll']) * 3);\n\t\t\t\tif (size < 8) size = 8;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'] + (that[dir + 'ScrollbarIndicatorSize'] - size);\n\t\t\t} else {\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'];\n\t\t\t}\n\t\t}\n\n\t\tthat[dir + 'ScrollbarWrapper'].style[vendor + 'TransitionDelay'] = '0';\n\t\tthat[dir + 'ScrollbarWrapper'].style.opacity = hidden && that.options.hideScrollbar ? '0' : '1';\n\t\tthat[dir + 'ScrollbarIndicator'].style[vendor + 'Transform'] = trnOpen + (dir == 'h' ? pos + 'px,0' : '0,' + pos + 'px') + trnClose;\n\t},\n\n\t_start: function (e) {\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\n\t\t\tmatrix, x, y,\n\t\t\tc1, c2;\n\n            iScroll.scrolling = false;\n            clearTimeout(iScroll.scrollTimer);\n\n\t\tif (!that.enabled || Draggables.dragging || e.touches.length < 2) return;\n\n\t\tif (that.options.onBeforeScrollStart) that.options.onBeforeScrollStart.call(that, e);\n\n\t\tif (that.options.useTransition || that.options.zoom) that._transitionTime(0);\n\n\t\tthat.moved = false;\n\t\tthat.animating = false;\n\t\tthat.zoomed = false;\n\t\tthat.distX = 0;\n\t\tthat.distY = 0;\n\t\tthat.absDistX = 0;\n\t\tthat.absDistY = 0;\n\t\tthat.dirX = 0;\n\t\tthat.dirY = 0;\n\n\t\t// Gesture start\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\n\t\t\tc1 = m.abs(e.touches[0].pageX-e.touches[1].pageX);\n\t\t\tc2 = m.abs(e.touches[0].pageY-e.touches[1].pageY);\n\t\t\tthat.touchesDistStart = m.sqrt(c1 * c1 + c2 * c2);\n\n\t\t\tthat.originX = m.abs(e.touches[0].pageX + e.touches[1].pageX - that.wrapperOffsetLeft * 2) / 2 - that.x;\n\t\t\tthat.originY = m.abs(e.touches[0].pageY + e.touches[1].pageY - that.wrapperOffsetTop * 2) / 2 - that.y;\n\n\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t}\n\n\t\tif (that.options.momentum) {\n\t\t\tif (that.options.useTransform) {\n\t\t\t\t// Very lame general purpose alternative to CSSMatrix\n\t\t\t\tmatrix = getComputedStyle(that.scroller, null)[vendor + 'Transform'].replace(/[^0-9-.,]/g, '').split(',');\n\t\t\t\tx = matrix[4] * 1;\n\t\t\t\ty = matrix[5] * 1;\n\t\t\t} else {\n\t\t\t\tx = getComputedStyle(that.scroller, null).left.replace(/[^0-9-]/g, '') * 1;\n\t\t\t\ty = getComputedStyle(that.scroller, null).top.replace(/[^0-9-]/g, '') * 1;\n\t\t\t}\n\n\t\t\tif (x != that.x || y != that.y) {\n\t\t\t\tif (that.options.useTransition) that._unbind('webkitTransitionEnd');\n\t\t\t\telse cancelFrame(that.aniTime);\n\t\t\t\tthat.steps = [];\n\t\t\t\tthat._pos(x, y);\n\t\t\t}\n\t\t}\n\n\t\tthat.absStartX = that.x;\t// Needed by snap threshold\n\t\tthat.absStartY = that.y;\n\n\t\tthat.startX = that.x;\n\t\tthat.startY = that.y;\n\t\tthat.pointX = point.pageX;\n\t\tthat.pointY = point.pageY;\n\n\t\tthat.startTime = e.timeStamp || (new Date()).getTime();\n\n\t\tif (that.options.onScrollStart) that.options.onScrollStart.call(that, e);\n\n\t\tthat._bind(MOVE_EV);\n\t\tthat._bind(END_EV);\n\t\tthat._bind(CANCEL_EV);\n\n\t\tiScroll.scrolling = true;\n\t},\n\n\t_move: function (e) {\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\n\t\t\tdeltaX = point.pageX - that.pointX,\n\t\t\tdeltaY = point.pageY - that.pointY,\n\t\t\tnewX = that.x + deltaX,\n\t\t\tnewY = that.y + deltaY,\n\t\t\tc1, c2, scale,\n\t\t\ttimestamp = e.timeStamp || (new Date()).getTime();\n\n\t\tif (that.options.onBeforeScrollMove) that.options.onBeforeScrollMove.call(that, e);\n\n\t\t// Zoom\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\n\t\t\tc1 = m.abs(e.touches[0].pageX - e.touches[1].pageX);\n\t\t\tc2 = m.abs(e.touches[0].pageY - e.touches[1].pageY);\n\t\t\tthat.touchesDist = m.sqrt(c1*c1+c2*c2);\n\n\t\t\tthat.zoomed = true;\n\n\t\t\tscale = 1 / that.touchesDistStart * that.touchesDist * this.scale;\n\n\t\t\tif (scale < that.options.scaleMin) scale = 0.5 * that.options.scaleMin * Math.pow(2.0, scale / that.options.scaleMin);\n\t\t\telse if (scale > that.options.scaleMax) scale = 2.0 * that.options.scaleMax * Math.pow(0.5, that.options.scaleMax / scale);\n\n\t\t\tthat.lastScale = scale / this.scale;\n\n\t\t\tnewX = this.originX - this.originX * that.lastScale + this.x,\n\t\t\tnewY = this.originY - this.originY * that.lastScale + this.y;\n\n\t\t\tthis.scroller.style[vendor + 'Transform'] = trnOpen + newX + 'px,' + newY + 'px' + trnClose + ' scale(' + scale + ')';\n\n\t\t\tif (that.options.onZoom) that.options.onZoom.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tthat.pointX = point.pageX;\n\t\tthat.pointY = point.pageY;\n\n\t\t// Slow down if outside of the boundaries\n\t\tif (newX > 0 || newX < that.maxScrollX) {\n\t\t\tnewX = that.options.bounce ? that.x + (deltaX / 2) : newX >= 0 || that.maxScrollX >= 0 ? 0 : that.maxScrollX;\n\t\t}\n\t\tif (newY > 0 || newY < that.maxScrollY) {\n\t\t\tnewY = that.options.bounce ? that.y + (deltaY / 2) : newY >= 0 || that.maxScrollY >= 0 ? 0 : that.maxScrollY;\n\t\t}\n\n\t\tif (that.absDistX < 6 && that.absDistY < 6) {\n\t\t\tthat.distX += deltaX;\n\t\t\tthat.distY += deltaY;\n\t\t\tthat.absDistX = m.abs(that.distX);\n\t\t\tthat.absDistY = m.abs(that.distY);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Lock direction\n\t\tif (that.options.lockDirection) {\n\t\t\tif (that.absDistX > that.absDistY + 5) {\n\t\t\t\tnewY = that.y;\n\t\t\t\tdeltaY = 0;\n\t\t\t} else if (that.absDistY > that.absDistX + 5) {\n\t\t\t\tnewX = that.x;\n\t\t\t\tdeltaX = 0;\n\t\t\t}\n\t\t}\n\n\t\tthat.moved = true;\n\t\tthat._pos(newX, newY);\n\t\tthat.dirX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n\t\tthat.dirY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n\t\tif (timestamp - that.startTime > 300) {\n\t\t\tthat.startTime = timestamp;\n\t\t\tthat.startX = that.x;\n\t\t\tthat.startY = that.y;\n\t\t}\n\n\t\tif (that.options.onScrollMove) that.options.onScrollMove.call(that, e);\n\t},\n\n\t_end: function (e) {\n\t\tif (hasTouch && e.touches.length != 0) return;\n\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.changedTouches[0] : e,\n\t\t\ttarget, ev,\n\t\t\tmomentumX = { dist:0, time:0 },\n\t\t\tmomentumY = { dist:0, time:0 },\n\t\t\tduration = (e.timeStamp || (new Date()).getTime()) - that.startTime,\n\t\t\tnewPosX = that.x,\n\t\t\tnewPosY = that.y,\n\t\t\tdistX, distY,\n\t\t\tnewDuration,\n\t\t\tscale;\n\n\t\tthat._unbind(MOVE_EV);\n\t\tthat._unbind(END_EV);\n\t\tthat._unbind(CANCEL_EV);\n\n\t\tiScroll.scrollTimer = setTimeout(function() {\n\t\t\t\tiScroll.scrolling = false;\n\t\t}, 1000);\n\n\n\t\tif (that.options.onBeforeScrollEnd) that.options.onBeforeScrollEnd.call(that, e);\n\n\t\tif (that.zoomed) {\n\t\t\tscale = that.scale * that.lastScale;\n\t\t\tscale = Math.max(that.options.zoomMin, scale);\n\t\t\tscale = Math.min(that.options.zoomMax, scale);\n\t\t\tthat.lastScale = scale / that.scale;\n\t\t\tthat.scale = scale;\n\n\t\t\tthat.x = that.originX - that.originX * that.lastScale + that.x;\n\t\t\tthat.y = that.originY - that.originY * that.lastScale + that.y;\n\n\t\t\tthat.scroller.style[vendor + 'TransitionDuration'] = '200ms';\n\t\t\tthat.scroller.style[vendor + 'Transform'] = trnOpen + that.x + 'px,' + that.y + 'px' + trnClose + ' scale(' + that.scale + ')';\n\n\t\t\tthat.zoomed = false;\n\t\t\tthat.refresh();\n\n\t\t\tif (that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!that.moved) {\n\t\t\tif (hasTouch) {\n\t\t\t\tif (that.doubleTapTimer && that.options.zoom) {\n\t\t\t\t\t// Double tapped\n\t\t\t\t\tclearTimeout(that.doubleTapTimer);\n\t\t\t\t\tthat.doubleTapTimer = null;\n\t\t\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t\t\t\tthat.zoom(that.pointX, that.pointY, that.scale == 1 ? that.options.doubleTapZoom : 1);\n\t\t\t\t} else {\n\t\t\t\t\tthat.doubleTapTimer = setTimeout(function () {\n\t\t\t\t\t\tthat.doubleTapTimer = null;\n\n\t\t\t\t\t\t// Find the last touched element\n\t\t\t\t\t\ttarget = point.target;\n\t\t\t\t\t\twhile (target.nodeType != 1) target = target.parentNode;\n\n\t\t\t\t\t\tif (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {\n\t\t\t\t\t\t\tev = document.createEvent('MouseEvents');\n\t\t\t\t\t\t\tev.initMouseEvent('click', true, true, e.view, 1,\n\t\t\t\t\t\t\t\tpoint.screenX, point.screenY, point.clientX, point.clientY,\n\t\t\t\t\t\t\t\te.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\n\t\t\t\t\t\t\t\t0, null);\n\t\t\t\t\t\t\tev._fake = true;\n\t\t\t\t\t\t\ttarget.dispatchEvent(ev);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, that.options.zoom ? 250 : 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthat._resetPos(200);\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n                return;\n\t\t\t} else {\n                e.scrollEvent = true;\n            }\n\n\t\tif (duration < 300 && that.options.momentum) {\n\t\t\tmomentumX = newPosX ? that._momentum(newPosX - that.startX, duration, -that.x, that.scrollerW - that.wrapperW + that.x, that.options.bounce ? that.wrapperW : 0) : momentumX;\n\t\t\tmomentumY = newPosY ? that._momentum(newPosY - that.startY, duration, -that.y, (that.maxScrollY < 0 ? that.scrollerH - that.wrapperH + that.y : 0), that.options.bounce ? that.wrapperH : 0) : momentumY;\n\n\t\t\tnewPosX = that.x + momentumX.dist;\n\t\t\tnewPosY = that.y + momentumY.dist;\n\n \t\t\tif ((that.x > 0 && newPosX > 0) || (that.x < that.maxScrollX && newPosX < that.maxScrollX)) momentumX = { dist:0, time:0 };\n \t\t\tif ((that.y > 0 && newPosY > 0) || (that.y < that.maxScrollY && newPosY < that.maxScrollY)) momentumY = { dist:0, time:0 };\n\t\t}\n\n\t\tif (momentumX.dist || momentumY.dist) {\n\t\t\tnewDuration = m.max(m.max(momentumX.time, momentumY.time), 10);\n\n\t\t\t// Do we need to snap?\n\t\t\tif (that.options.snap) {\n\t\t\t\tdistX = newPosX - that.absStartX;\n\t\t\t\tdistY = newPosY - that.absStartY;\n\t\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) { that.scrollTo(that.absStartX, that.absStartY, 200); }\n\t\t\t\telse {\n\t\t\t\t\tsnap = that._snap(newPosX, newPosY);\n\t\t\t\t\tnewPosX = snap.x;\n\t\t\t\t\tnewPosY = snap.y;\n\t\t\t\t\tnewDuration = m.max(snap.time, newDuration);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthat.scrollTo(newPosX, newPosY, newDuration);\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\t// Do we need to snap?\n\t\tif (that.options.snap) {\n\t\t\tdistX = newPosX - that.absStartX;\n\t\t\tdistY = newPosY - that.absStartY;\n\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) that.scrollTo(that.absStartX, that.absStartY, 200);\n\t\t\telse {\n\t\t\t\tsnap = that._snap(that.x, that.y);\n\t\t\t\tif (snap.x != that.x || snap.y != that.y) that.scrollTo(snap.x, snap.y, snap.time);\n\t\t\t}\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tthat._resetPos(200);\n\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t},\n\n\t_resetPos: function (time) {\n\t\tvar that = this,\n\t\t\tresetX = that.x >= 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x,\n\t\t\tresetY = that.y >= 0 || that.maxScrollY > 0 ? 0 : that.y < that.maxScrollY ? that.maxScrollY : that.y;\n\n\t\tif (resetX == that.x && resetY == that.y) {\n\t\t\tif (that.moved) {\n\t\t\t\tthat.moved = false;\n\t\t\t\tif (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\t\t// Execute custom code on scroll end\n\t\t\t}\n\n\t\t\tif (that.hScrollbar && that.options.hideScrollbar) {\n\t\t\t\tif (vendor == 'webkit') that.hScrollbarWrapper.style[vendor + 'TransitionDelay'] = '300ms';\n\t\t\t\tthat.hScrollbarWrapper.style.opacity = '0';\n\t\t\t}\n\t\t\tif (that.vScrollbar && that.options.hideScrollbar) {\n\t\t\t\tif (vendor == 'webkit') that.vScrollbarWrapper.style[vendor + 'TransitionDelay'] = '300ms';\n\t\t\t\tthat.vScrollbarWrapper.style.opacity = '0';\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthat.scrollTo(resetX, resetY, time || 0);\n\t},\n\n\t_wheel: function (e) {\n\t\tvar that = this,\n\t\t\tduration,\n\t\t\twheelDeltaX, wheelDeltaY,\n\t\t\tdeltaX, deltaY,\n\t\t\tdeltaScale;\n\n\t\tif ('wheelDeltaX' in e) {\n\t\t\twheelDeltaX = e.wheelDeltaX / 12;\n\t\t\twheelDeltaY = e.wheelDeltaY / 12;\n\t\t} else if ('detail' in e) {\n\t\t\twheelDeltaX = wheelDeltaY = -e.detail * 3;\n\t\t} else {\n\t\t\twheelDeltaX = wheelDeltaY = -e.wheelDelta;\n\t\t}\n\n\t\tif (that.options.wheelAction == 'zoom') {\n\t\t\tdeltaScale = that.scale * Math.pow(2, 1/3 * (wheelDeltaY ? wheelDeltaY / Math.abs(wheelDeltaY) : 0));\n\t\t\tif (wheelDeltaY < that.options.zoomMin) wheelDeltaY = that.options.zoomMin;\n\t\t\tif (wheelDeltaY > that.options.zoomMax) wheelDeltaY = that.options.zoomMax;\n\n\t\t\tif (wheelDeltaY != that.scale) {\n\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t\t\tthat.wheelZoomCount++;\n\n\t\t\t\tthat.zoom(e.pageX, e.pageY, wheelDeltaY, 400);\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tthat.wheelZoomCount--;\n\t\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\n\t\t\t\t}, 400);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tdeltaX = that.x + wheelDeltaX;\n\t\tdeltaY = that.y + wheelDeltaY;\n\n\t\tif (deltaX > 0) deltaX = 0;\n\t\telse if (deltaX < that.maxScrollX) deltaX = that.maxScrollX;\n\n\t\tif (deltaY > 0) deltaY = 0;\n\t\telse if (deltaY < that.maxScrollY) deltaY = that.maxScrollY;\n\n\t\tthat.scrollTo(deltaX, deltaY, 0);\n\t},\n\n\t_mouseout: function (e) {\n\t\tvar t = e.relatedTarget;\n\n\t\tif (!t) {\n\t\t\tthis._end(e);\n\t\t\treturn;\n\t\t}\n\n\t\twhile (t = t.parentNode) if (t == this.wrapper) return;\n\n\t\tthis._end(e);\n\t},\n\n\t_transitionEnd: function (e) {\n\t\tvar that = this;\n\n\t\tif (e.target != that.scroller) return;\n\n\t\tthat._unbind('webkitTransitionEnd');\n\n\t\tthat._startAni();\n\t},\n\n\n\t/**\n\t *\n\t * Utilities\n\t *\n\t */\n\t_startAni: function () {\n\t\tvar that = this,\n\t\t\tstartX = that.x, startY = that.y,\n\t\t\tstartTime = (new Date).getTime(),\n\t\t\tstep, easeOut;\n\n\t\tif (that.animating) return;\n\n\t\tif (!that.steps.length) {\n\t\t\tthat._resetPos(400);\n\t\t\treturn;\n\t\t}\n\n\t\tstep = that.steps.shift();\n\n\t\tif (step.x == startX && step.y == startY) step.time = 0;\n\n\t\tthat.animating = true;\n\t\tthat.moved = true;\n\n\t\tif (that.options.useTransition) {\n\t\t\tthat._transitionTime(step.time);\n\t\t\tthat._pos(step.x, step.y);\n\t\t\tthat.animating = false;\n\t\t\tif (step.time) that._bind('webkitTransitionEnd');\n\t\t\telse that._resetPos(0);\n\t\t\treturn;\n\t\t}\n\n\t\t(function animate () {\n\t\t\tvar now = (new Date).getTime(),\n\t\t\t\tnewX, newY;\n\n\t\t\tif (now >= startTime + step.time) {\n\t\t\t\tthat._pos(step.x, step.y);\n\t\t\t\tthat.animating = false;\n\t\t\t\tif (that.options.onAnimationEnd) that.options.onAnimationEnd.call(that);\t\t\t// Execute custom code on animation end\n\t\t\t\tthat._startAni();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnow = (now - startTime) / step.time - 1;\n\t\t\teaseOut = m.sqrt(1 - now * now);\n\t\t\tnewX = (step.x - startX) * easeOut + startX;\n\t\t\tnewY = (step.y - startY) * easeOut + startY;\n\t\t\tthat._pos(newX, newY);\n\t\t\tif (that.animating) that.aniTime = nextFrame(animate);\n\t\t})();\n\t},\n\n\t_transitionTime: function (time) {\n\t\ttime += 'ms';\n\t\tthis.scroller.style[vendor + 'TransitionDuration'] = time;\n\t\tif (this.hScrollbar) this.hScrollbarIndicator.style[vendor + 'TransitionDuration'] = time;\n\t\tif (this.vScrollbar) this.vScrollbarIndicator.style[vendor + 'TransitionDuration'] = time;\n\t},\n\n\t_momentum: function (dist, time, maxDistUpper, maxDistLower, size) {\n\t\tvar deceleration = 0.0006,\n\t\t\tspeed = m.abs(dist) / time,\n\t\t\tnewDist = (speed * speed) / (2 * deceleration),\n\t\t\tnewTime = 0, outsideDist = 0;\n\n\t\t// Proportinally reduce speed if we are outside of the boundaries\n\t\tif (dist > 0 && newDist > maxDistUpper) {\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\n\t\t\tmaxDistUpper = maxDistUpper + outsideDist;\n\t\t\tspeed = speed * maxDistUpper / newDist;\n\t\t\tnewDist = maxDistUpper;\n\t\t} else if (dist < 0 && newDist > maxDistLower) {\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\n\t\t\tmaxDistLower = maxDistLower + outsideDist;\n\t\t\tspeed = speed * maxDistLower / newDist;\n\t\t\tnewDist = maxDistLower;\n\t\t}\n\n\t\tnewDist = newDist * (dist < 0 ? -1 : 1);\n\t\tnewTime = speed / deceleration;\n\n\t\treturn { dist: newDist, time: m.round(newTime) };\n\t},\n\n\t_offset: function (el) {\n\t\tvar left = -el.offsetLeft,\n\t\t\ttop = -el.offsetTop;\n\n\t\twhile (el = el.offsetParent) {\n\t\t\tleft -= el.offsetLeft;\n\t\t\ttop -= el.offsetTop;\n\t\t}\n\n\t\tif (el != this.wrapper) {\n\t\t\tleft *= this.scale;\n\t\t\ttop *= this.scale;\n\t\t}\n\n\t\treturn { left: left, top: top };\n\t},\n\n\t_snap: function (x, y) {\n\t\tvar that = this,\n\t\t\ti, l,\n\t\t\tpage, time,\n\t\t\tsizeX, sizeY;\n\n\t\t// Check page X\n\t\tpage = that.pagesX.length - 1;\n\t\tfor (i=0, l=that.pagesX.length; i<l; i++) {\n\t\t\tif (x >= that.pagesX[i]) {\n\t\t\t\tpage = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (page == that.currPageX && page > 0 && that.dirX < 0) page--;\n\t\tx = that.pagesX[page];\n\t\tsizeX = m.abs(x - that.pagesX[that.currPageX]);\n\t\tsizeX = sizeX ? m.abs(that.x - x) / sizeX * 500 : 0;\n\t\tthat.currPageX = page;\n\n\t\t// Check page Y\n\t\tpage = that.pagesY.length-1;\n\t\tfor (i=0; i<page; i++) {\n\t\t\tif (y >= that.pagesY[i]) {\n\t\t\t\tpage = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (page == that.currPageY && page > 0 && that.dirY < 0) page--;\n\t\ty = that.pagesY[page];\n\t\tsizeY = m.abs(y - that.pagesY[that.currPageY]);\n\t\tsizeY = sizeY ? m.abs(that.y - y) / sizeY * 500 : 0;\n\t\tthat.currPageY = page;\n\n\t\t// Snap with constant speed (proportional duration)\n\t\ttime = m.round(m.max(sizeX, sizeY)) || 200;\n\n\t\treturn { x: x, y: y, time: time };\n\t},\n\n\t_bind: function (type, el, bubble) {\n\t\t(el || this.scroller).addEventListener(type, this, !!bubble);\n\t},\n\n\t_unbind: function (type, el, bubble) {\n\t\t(el || this.scroller).removeEventListener(type, this, !!bubble);\n\t},\n\n\n\t/**\n\t *\n\t * Public methods\n\t *\n\t */\n\tdestroy: function () {\n\t\tvar that = this;\n\n\t\tthat.scroller.style[vendor + 'Transform'] = '';\n\n\t\t// Remove the scrollbars\n\t\tthat.hScrollbar = false;\n\t\tthat.vScrollbar = false;\n\t\tthat._scrollbar('h');\n\t\tthat._scrollbar('v');\n\n\t\t// Remove the event listeners\n\t\tthat._unbind(RESIZE_EV, window);\n\t\tthat._unbind(START_EV);\n\t\tthat._unbind(MOVE_EV);\n\t\tthat._unbind(END_EV);\n\t\tthat._unbind(CANCEL_EV);\n\n\t\tif (that.options.hasTouch) {\n\t\t\tthat._unbind('mouseout', that.wrapper);\n\t\t\tthat._unbind(WHEEL_EV);\n\t\t}\n\n\t\tif (that.options.useTransition) that._unbind('webkitTransitionEnd');\n\n\t\tif (that.options.checkDOMChanges) clearInterval(that.checkDOMTime);\n\n\t\tif (that.options.onDestroy) that.options.onDestroy.call(that);\n\t},\n\n\trefresh: function () {\n\t\tvar that = this,\n\t\t\toffset,\n\t\t\tpos = 0,\n\t\t\tpage = 0;\n\n\t\tiScroll.scrolling = false;\n\n\t\tif (that.scale < that.options.zoomMin) that.scale = that.options.zoomMin;\n\t\tthat.wrapperW = that.wrapper.clientWidth || 1;\n\t\tthat.wrapperH = that.wrapper.clientHeight || 1;\n\n\t\tthat.scrollerW = m.round(that.scroller.offsetWidth * that.scale);\n\t\tthat.scrollerH = m.round(that.scroller.offsetHeight * that.scale);\n\t\tthat.maxScrollX = that.wrapperW - that.scrollerW;\n\t\tthat.maxScrollY = that.wrapperH - that.scrollerH;\n\t\tthat.dirX = 0;\n\t\tthat.dirY = 0;\n\n\t\tthat.hScroll = that.options.hScroll && that.maxScrollX < 0;\n\t\tthat.vScroll = that.options.vScroll && (!that.options.bounceLock && !that.hScroll || that.scrollerH > that.wrapperH);\n\n\t\tthat.hScrollbar = that.hScroll && that.options.hScrollbar;\n\t\tthat.vScrollbar = that.vScroll && that.options.vScrollbar && that.scrollerH > that.wrapperH;\n\n\t\toffset = that._offset(that.wrapper);\n\t\tthat.wrapperOffsetLeft = -offset.left;\n\t\tthat.wrapperOffsetTop = -offset.top;\n\n\t\t// Prepare snap\n\t\tif (typeof that.options.snap == 'string') {\n\t\t\tthat.pagesX = [];\n\t\t\tthat.pagesY = [];\n\t\t\tels = that.scroller.querySelectorAll(that.options.snap);\n\t\t\tfor (i=0, l=els.length; i<l; i++) {\n\t\t\t\tpos = that._offset(els[i]);\n\t\t\t\tpos.left += that.wrapperOffsetLeft;\n\t\t\t\tpos.top += that.wrapperOffsetTop;\n\t\t\t\tthat.pagesX[i] = pos.left < that.maxScrollX ? that.maxScrollX : pos.left * that.scale;\n\t\t\t\tthat.pagesY[i] = pos.top < that.maxScrollY ? that.maxScrollY : pos.top * that.scale;\n\t\t\t}\n\t\t} else if (that.options.snap) {\n\t\t\tthat.pagesX = [];\n\t\t\twhile (pos >= that.maxScrollX) {\n\t\t\t\tthat.pagesX[page] = pos;\n\t\t\t\tpos = pos - that.wrapperW;\n\t\t\t\tpage++;\n\t\t\t}\n\t\t\tif (that.maxScrollX%that.wrapperW) that.pagesX[that.pagesX.length] = that.maxScrollX - that.pagesX[that.pagesX.length-1] + that.pagesX[that.pagesX.length-1];\n\n\t\t\tpos = 0;\n\t\t\tpage = 0;\n\t\t\tthat.pagesY = [];\n\t\t\twhile (pos >= that.maxScrollY) {\n\t\t\t\tthat.pagesY[page] = pos;\n\t\t\t\tpos = pos - that.wrapperH;\n\t\t\t\tpage++;\n\t\t\t}\n\t\t\tif (that.maxScrollY%that.wrapperH) that.pagesY[that.pagesY.length] = that.maxScrollY - that.pagesY[that.pagesY.length-1] + that.pagesY[that.pagesY.length-1];\n\t\t}\n\n\t\t// Prepare the scrollbars\n\t\tthat._scrollbar('h');\n\t\tthat._scrollbar('v');\n\n\t\tif (!that.zoomed) {\n\t\t\tthat.scroller.style[vendor + 'TransitionDuration'] = '0';\n\t\t\tthat._resetPos(200);\n\t\t}\n\t},\n\n\tscrollTo: function (x, y, time, relative) {\n\t\tvar that = this,\n\t\t\tstep = x,\n\t\t\ti, l;\n\n\t\tthat.stop();\n\n\t\tif (!step.length) step = [{ x: x, y: y, time: time, relative: relative }];\n\n\t\tfor (i=0, l=step.length; i<l; i++) {\n\t\t\tif (step[i].relative) { step[i].x = that.x - step[i].x; step[i].y = that.y - step[i].y; }\n\t\t\tthat.steps.push({ x: step[i].x, y: step[i].y, time: step[i].time || 0 });\n\t\t}\n\n\t\tthat._startAni();\n\t},\n\n\tscrollToElement: function (el, time) {\n\t\tvar that = this, pos;\n\t\tel = el.nodeType ? el : that.scroller.querySelector(el);\n\t\tif (!el) return;\n\n\t\tpos = that._offset(el);\n\t\tpos.left += that.wrapperOffsetLeft;\n\t\tpos.top += that.wrapperOffsetTop;\n\n\t\tpos.left = pos.left > 0 ? 0 : pos.left < that.maxScrollX ? that.maxScrollX : pos.left;\n\t\tpos.top = pos.top > 0 ? 0 : pos.top < that.maxScrollY ? that.maxScrollY : pos.top;\n\t\ttime = time === undefined ? m.max(m.abs(pos.left)*2, m.abs(pos.top)*2) : time;\n\n\t\tthat.scrollTo(pos.left, pos.top, time);\n\t},\n\n\tscrollToPage: function (pageX, pageY, time) {\n\t\tvar that = this, x, y;\n\n\t\tif (that.options.snap) {\n\t\t\tpageX = pageX == 'next' ? that.currPageX+1 : pageX == 'prev' ? that.currPageX-1 : pageX;\n\t\t\tpageY = pageY == 'next' ? that.currPageY+1 : pageY == 'prev' ? that.currPageY-1 : pageY;\n\n\t\t\tpageX = pageX < 0 ? 0 : pageX > that.pagesX.length-1 ? that.pagesX.length-1 : pageX;\n\t\t\tpageY = pageY < 0 ? 0 : pageY > that.pagesY.length-1 ? that.pagesY.length-1 : pageY;\n\n\t\t\tthat.currPageX = pageX;\n\t\t\tthat.currPageY = pageY;\n\t\t\tx = that.pagesX[pageX];\n\t\t\ty = that.pagesY[pageY];\n\t\t} else {\n\t\t\tx = -that.wrapperW * pageX;\n\t\t\ty = -that.wrapperH * pageY;\n\t\t\tif (x < that.maxScrollX) x = that.maxScrollX;\n\t\t\tif (y < that.maxScrollY) y = that.maxScrollY;\n\t\t}\n\n\t\tthat.scrollTo(x, y, time || 400);\n\t},\n\n\tdisable: function () {\n\t\tthis.stop();\n\t\tthis._resetPos(0);\n\t\tthis.enabled = false;\n\n\t\t// If disabled after touchstart we make sure that there are no left over events\n\t\tthis._unbind(MOVE_EV);\n\t\tthis._unbind(END_EV);\n\t\tthis._unbind(CANCEL_EV);\n\t},\n\n\tenable: function () {\n\t\tthis.enabled = true;\n\t},\n\n\tstop: function () {\n\t\tif (this.options.useTransition) this._unbind('webkitTransitionEnd');\n\t\telse cancelFrame(this.aniTime);\n\t\tthis.steps = [];\n\t\tthis.moved = false;\n\t\tthis.animating = false;\n\t},\n\n\tzoom: function (x, y, scale, time) {\n\t\tvar that = this,\n\t\t\trelScale = scale / that.scale;\n\n\t\tif (!that.options.useTransform) return;\n\n\t\tthat.zoomed = true;\n\t\ttime = time === undefined ? 200 : time;\n\t\tx = x - that.wrapperOffsetLeft - that.x;\n\t\ty = y - that.wrapperOffsetTop - that.y;\n\t\tthat.x = x - x * relScale + that.x;\n\t\tthat.y = y - y * relScale + that.y;\n\n\t\tthat.scale = scale;\n\t\tthat.refresh();\n\n\t\tthat.x = that.x > 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x;\n\t\tthat.y = that.y > 0 ? 0 : that.y < that.maxScrollY ? that.maxScrollY : that.y;\n\n\t\tthat.scroller.style[vendor + 'TransitionDuration'] = time + 'ms';\n\t\tthat.scroller.style[vendor + 'Transform'] = trnOpen + that.x + 'px,' + that.y + 'px' + trnClose + ' scale(' + scale + ')';\n\t\tthat.zoomed = false;\n\t},\n\n\tisReady: function () {\n\t\treturn !this.moved && !this.zoomed && !this.animating;\n\t}\n};\n\nif (typeof exports !== 'undefined') exports.iScroll = iScroll;\nelse window.iScroll = iScroll;\n\n})();\n","/*!\n * jQuery UI :data 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: :data Selector\n//>>group: Core\n//>>description: Selects elements which have data stored under the specified key.\n//>>docs: http://api.jqueryui.com/data-selector/\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\nreturn $.extend( $.expr[ \":\" ], {\n\tdata: $.expr.createPseudo ?\n\t\t$.expr.createPseudo( function( dataName ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn !!$.data( elem, dataName );\n\t\t\t};\n\t\t} ) :\n\n\t\t// Support: jQuery <1.8\n\t\tfunction( elem, i, match ) {\n\t\t\treturn !!$.data( elem, match[ 3 ] );\n\t\t}\n} );\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\nreturn $.ui.plugin = {\n\tadd: function( module, option, set ) {\n\t\tvar i,\n\t\t\tproto = $.ui[ module ].prototype;\n\t\tfor ( i in set ) {\n\t\t\tproto.plugins[ i ] = proto.plugins[ i ] || [];\n\t\t\tproto.plugins[ i ].push( [ option, set[ i ] ] );\n\t\t}\n\t},\n\tcall: function( instance, name, args, allowDisconnected ) {\n\t\tvar i,\n\t\t\tset = instance.plugins[ name ];\n\n\t\tif ( !set ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !allowDisconnected && ( !instance.element[ 0 ].parentNode ||\n\t\t\t\tinstance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\tif ( instance.options[ set[ i ][ 0 ] ] ) {\n\t\t\t\tset[ i ][ 1 ].apply( instance.element, args );\n\t\t\t}\n\t\t}\n\t}\n};\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\nreturn $.ui.safeActiveElement = function( document ) {\n\tvar activeElement;\n\n\t// Support: IE 9 only\n\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\ttry {\n\t\tactiveElement = document.activeElement;\n\t} catch ( error ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE may return null instead of an element\n\t// Interestingly, this only seems to occur when NOT in an iframe\n\tif ( !activeElement ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 11 only\n\t// IE11 returns a seemingly empty object in some cases when accessing\n\t// document.activeElement from an <iframe>\n\tif ( !activeElement.nodeName ) {\n\t\tactiveElement = document.body;\n\t}\n\n\treturn activeElement;\n};\n\n} ) );\n","( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} ( function( $ ) {\nreturn $.ui.safeBlur = function( element ) {\n\n\t// Support: IE9 - 10 only\n\t// If the <body> is blurred, IE will switch windows, see #9420\n\tif ( element && element.nodeName.toLowerCase() !== \"body\" ) {\n\t\t$( element ).trigger( \"blur\" );\n\t}\n};\n\n} ) );\n","/*!\n * jQuery UI Draggable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Draggable\n//>>group: Interactions\n//>>description: Enables dragging functionality for any element.\n//>>docs: http://api.jqueryui.com/draggable/\n//>>demos: http://jqueryui.com/draggable/\n//>>css.structure: ../../themes/base/draggable.css\n\n( function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./mouse\",\n\t\t\t\"../data\",\n\t\t\t\"../plugin\",\n\t\t\t\"../safe-active-element\",\n\t\t\t\"../safe-blur\",\n\t\t\t\"../scroll-parent\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}( function( $ ) {\n\n$.widget( \"ui.draggable\", $.ui.mouse, {\n\tversion: \"1.12.1\",\n\twidgetEventPrefix: \"drag\",\n\toptions: {\n\t\taddClasses: true,\n\t\tappendTo: \"parent\",\n\t\taxis: false,\n\t\tconnectToSortable: false,\n\t\tcontainment: false,\n\t\tcursor: \"auto\",\n\t\tcursorAt: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: \"original\",\n\t\tiframeFix: false,\n\t\topacity: false,\n\t\trefreshPositions: false,\n\t\trevert: false,\n\t\trevertDuration: 500,\n\t\tscope: \"default\",\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tsnap: false,\n\t\tsnapMode: \"both\",\n\t\tsnapTolerance: 20,\n\t\tstack: false,\n\t\tzIndex: false,\n\n\t\t// Callbacks\n\t\tdrag: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\t_create: function() {\n\n\t\tif ( this.options.helper === \"original\" ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\t\tif ( this.options.addClasses ) {\n\t\t\tthis._addClass( \"ui-draggable\" );\n\t\t}\n\t\tthis._setHandleClassName();\n\n\t\tthis._mouseInit();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"handle\" ) {\n\t\t\tthis._removeHandleClassName();\n\t\t\tthis._setHandleClassName();\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tif ( ( this.helper || this.element ).is( \".ui-draggable-dragging\" ) ) {\n\t\t\tthis.destroyOnClear = true;\n\t\t\treturn;\n\t\t}\n\t\tthis._removeHandleClassName();\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseCapture: function( event ) {\n\t\tvar o = this.options;\n\n\t\t// Among others, prevent a drag on a resizable-handle\n\t\tif ( this.helper || o.disabled ||\n\t\t\t\t$( event.target ).closest( \".ui-resizable-handle\" ).length > 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t//Quit if we're not on a valid handle\n\t\tthis.handle = this._getHandle( event );\n\t\tif ( !this.handle ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._blurActiveElement( event );\n\n\t\tthis._blockFrames( o.iframeFix === true ? \"iframe\" : o.iframeFix );\n\n\t\treturn true;\n\n\t},\n\n\t_blockFrames: function( selector ) {\n\t\tthis.iframeBlocks = this.document.find( selector ).map( function() {\n\t\t\tvar iframe = $( this );\n\n\t\t\treturn $( \"<div>\" )\n\t\t\t\t.css( \"position\", \"absolute\" )\n\t\t\t\t.appendTo( iframe.parent() )\n\t\t\t\t.outerWidth( iframe.outerWidth() )\n\t\t\t\t.outerHeight( iframe.outerHeight() )\n\t\t\t\t.offset( iframe.offset() )[ 0 ];\n\t\t} );\n\t},\n\n\t_unblockFrames: function() {\n\t\tif ( this.iframeBlocks ) {\n\t\t\tthis.iframeBlocks.remove();\n\t\t\tdelete this.iframeBlocks;\n\t\t}\n\t},\n\n\t_blurActiveElement: function( event ) {\n\t\tvar activeElement = $.ui.safeActiveElement( this.document[ 0 ] ),\n\t\t\ttarget = $( event.target );\n\n\t\t// Don't blur if the event occurred on an element that is within\n\t\t// the currently focused element\n\t\t// See #10527, #12472\n\t\tif ( target.closest( activeElement ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Blur any element that currently has focus, see #4261\n\t\t$.ui.safeBlur( activeElement );\n\t},\n\n\t_mouseStart: function( event ) {\n\n\t\tvar o = this.options;\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper( event );\n\n\t\tthis._addClass( this.helper, \"ui-draggable-dragging\" );\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//If ddmanager is used for droppables, set the global draggable\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.current = this;\n\t\t}\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it's the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Store the helper's css position\n\t\tthis.cssPosition = this.helper.css( \"position\" );\n\t\tthis.scrollParent = this.helper.scrollParent( true );\n\t\tthis.offsetParent = this.helper.offsetParent();\n\t\tthis.hasFixedAncestor = this.helper.parents().filter( function() {\n\t\t\t\treturn $( this ).css( \"position\" ) === \"fixed\";\n\t\t\t} ).length > 0;\n\n\t\t//The element's absolute position on the page minus margins\n\t\tthis.positionAbs = this.element.offset();\n\t\tthis._refreshOffsets( event );\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this.position = this._generatePosition( event, false );\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\t( o.cursorAt && this._adjustOffsetFromHelper( o.cursorAt ) );\n\n\t\t//Set a containment if given in the options\n\t\tthis._setContainment();\n\n\t\t//Trigger event + callbacks\n\t\tif ( this._trigger( \"start\", event ) === false ) {\n\t\t\tthis._clear();\n\t\t\treturn false;\n\t\t}\n\n\t\t//Recache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//Prepare the droppable offsets\n\t\tif ( $.ui.ddmanager && !o.dropBehaviour ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( this, event );\n\t\t}\n\n\t\t// Execute the drag once - this causes the helper not to be visible before getting its\n\t\t// correct position\n\t\tthis._mouseDrag( event, true );\n\n\t\t// If the ddmanager is used for droppables, inform the manager that dragging has started\n\t\t// (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStart( this, event );\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t_refreshOffsets: function( event ) {\n\t\tthis.offset = {\n\t\t\ttop: this.positionAbs.top - this.margins.top,\n\t\t\tleft: this.positionAbs.left - this.margins.left,\n\t\t\tscroll: false,\n\t\t\tparent: this._getParentOffset(),\n\t\t\trelative: this._getRelativeOffset()\n\t\t};\n\n\t\tthis.offset.click = {\n\t\t\tleft: event.pageX - this.offset.left,\n\t\t\ttop: event.pageY - this.offset.top\n\t\t};\n\t},\n\n\t_mouseDrag: function( event, noPropagation ) {\n\n\t\t// reset any necessary cached properties (see #5009)\n\t\tif ( this.hasFixedAncestor ) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition( event, true );\n\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\n\t\t//Call plugins and callbacks and use the resulting position if something is returned\n\t\tif ( !noPropagation ) {\n\t\t\tvar ui = this._uiHash();\n\t\t\tif ( this._trigger( \"drag\", event, ui ) === false ) {\n\t\t\t\tthis._mouseUp( new $.Event( \"mouseup\", event ) );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.position = ui.position;\n\t\t}\n\n\t\tthis.helper[ 0 ].style.left = this.position.left + \"px\";\n\t\tthis.helper[ 0 ].style.top = this.position.top + \"px\";\n\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.drag( this, event );\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tvar that = this,\n\t\t\tdropped = false;\n\t\tif ( $.ui.ddmanager && !this.options.dropBehaviour ) {\n\t\t\tdropped = $.ui.ddmanager.drop( this, event );\n\t\t}\n\n\t\t//if a drop comes from outside (a sortable)\n\t\tif ( this.dropped ) {\n\t\t\tdropped = this.dropped;\n\t\t\tthis.dropped = false;\n\t\t}\n\n\t\tif ( ( this.options.revert === \"invalid\" && !dropped ) ||\n\t\t\t\t( this.options.revert === \"valid\" && dropped ) ||\n\t\t\t\tthis.options.revert === true || ( $.isFunction( this.options.revert ) &&\n\t\t\t\tthis.options.revert.call( this.element, dropped ) )\n\t\t) {\n\t\t\t$( this.helper ).animate(\n\t\t\t\tthis.originalPosition,\n\t\t\t\tparseInt( this.options.revertDuration, 10 ),\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( that._trigger( \"stop\", event ) !== false ) {\n\t\t\t\t\t\tthat._clear();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tif ( this._trigger( \"stop\", event ) !== false ) {\n\t\t\t\tthis._clear();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseUp: function( event ) {\n\t\tthis._unblockFrames();\n\n\t\t// If the ddmanager is used for droppables, inform the manager that dragging has stopped\n\t\t// (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStop( this, event );\n\t\t}\n\n\t\t// Only need to focus if the event occurred on the draggable itself, see #10527\n\t\tif ( this.handleElement.is( event.target ) ) {\n\n\t\t\t// The interaction is over; whether or not the click resulted in a drag,\n\t\t\t// focus the element\n\t\t\tthis.element.trigger( \"focus\" );\n\t\t}\n\n\t\treturn $.ui.mouse.prototype._mouseUp.call( this, event );\n\t},\n\n\tcancel: function() {\n\n\t\tif ( this.helper.is( \".ui-draggable-dragging\" ) ) {\n\t\t\tthis._mouseUp( new $.Event( \"mouseup\", { target: this.element[ 0 ] } ) );\n\t\t} else {\n\t\t\tthis._clear();\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t_getHandle: function( event ) {\n\t\treturn this.options.handle ?\n\t\t\t!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :\n\t\t\ttrue;\n\t},\n\n\t_setHandleClassName: function() {\n\t\tthis.handleElement = this.options.handle ?\n\t\t\tthis.element.find( this.options.handle ) : this.element;\n\t\tthis._addClass( this.handleElement, \"ui-draggable-handle\" );\n\t},\n\n\t_removeHandleClassName: function() {\n\t\tthis._removeClass( this.handleElement, \"ui-draggable-handle\" );\n\t},\n\n\t_createHelper: function( event ) {\n\n\t\tvar o = this.options,\n\t\t\thelperIsFunction = $.isFunction( o.helper ),\n\t\t\thelper = helperIsFunction ?\n\t\t\t\t$( o.helper.apply( this.element[ 0 ], [ event ] ) ) :\n\t\t\t\t( o.helper === \"clone\" ?\n\t\t\t\t\tthis.element.clone().removeAttr( \"id\" ) :\n\t\t\t\t\tthis.element );\n\n\t\tif ( !helper.parents( \"body\" ).length ) {\n\t\t\thelper.appendTo( ( o.appendTo === \"parent\" ?\n\t\t\t\tthis.element[ 0 ].parentNode :\n\t\t\t\to.appendTo ) );\n\t\t}\n\n\t\t// Http://bugs.jqueryui.com/ticket/9446\n\t\t// a helper function can return the original element\n\t\t// which wouldn't have been set to relative in _create\n\t\tif ( helperIsFunction && helper[ 0 ] === this.element[ 0 ] ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\n\t\tif ( helper[ 0 ] !== this.element[ 0 ] &&\n\t\t\t\t!( /(fixed|absolute)/ ).test( helper.css( \"position\" ) ) ) {\n\t\t\thelper.css( \"position\", \"absolute\" );\n\t\t}\n\n\t\treturn helper;\n\n\t},\n\n\t_setPositionRelative: function() {\n\t\tif ( !( /^(?:r|a|f)/ ).test( this.element.css( \"position\" ) ) ) {\n\t\t\tthis.element[ 0 ].style.position = \"relative\";\n\t\t}\n\t},\n\n\t_adjustOffsetFromHelper: function( obj ) {\n\t\tif ( typeof obj === \"string\" ) {\n\t\t\tobj = obj.split( \" \" );\n\t\t}\n\t\tif ( $.isArray( obj ) ) {\n\t\t\tobj = { left: +obj[ 0 ], top: +obj[ 1 ] || 0 };\n\t\t}\n\t\tif ( \"left\" in obj ) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif ( \"right\" in obj ) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif ( \"top\" in obj ) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif ( \"bottom\" in obj ) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_isRootNode: function( element ) {\n\t\treturn ( /(html|body)/i ).test( element.tagName ) || element === this.document[ 0 ];\n\t},\n\n\t_getParentOffset: function() {\n\n\t\t//Get the offsetParent and cache its position\n\t\tvar po = this.offsetParent.offset(),\n\t\t\tdocument = this.document[ 0 ];\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the\n\t\t// following happened:\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the\n\t\t// next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't\n\t\t// the document, which means that the scroll is included in the initial calculation of the\n\t\t// offset of the parent, and never recalculated upon drag\n\t\tif ( this.cssPosition === \"absolute\" && this.scrollParent[ 0 ] !== document &&\n\t\t\t\t$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\tif ( this._isRootNode( this.offsetParent[ 0 ] ) ) {\n\t\t\tpo = { top: 0, left: 0 };\n\t\t}\n\n\t\treturn {\n\t\t\ttop: po.top + ( parseInt( this.offsetParent.css( \"borderTopWidth\" ), 10 ) || 0 ),\n\t\t\tleft: po.left + ( parseInt( this.offsetParent.css( \"borderLeftWidth\" ), 10 ) || 0 )\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\t\tif ( this.cssPosition !== \"relative\" ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\tvar p = this.element.position(),\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: p.top - ( parseInt( this.helper.css( \"top\" ), 10 ) || 0 ) +\n\t\t\t\t( !scrollIsRootNode ? this.scrollParent.scrollTop() : 0 ),\n\t\t\tleft: p.left - ( parseInt( this.helper.css( \"left\" ), 10 ) || 0 ) +\n\t\t\t\t( !scrollIsRootNode ? this.scrollParent.scrollLeft() : 0 )\n\t\t};\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: ( parseInt( this.element.css( \"marginLeft\" ), 10 ) || 0 ),\n\t\t\ttop: ( parseInt( this.element.css( \"marginTop\" ), 10 ) || 0 ),\n\t\t\tright: ( parseInt( this.element.css( \"marginRight\" ), 10 ) || 0 ),\n\t\t\tbottom: ( parseInt( this.element.css( \"marginBottom\" ), 10 ) || 0 )\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar isUserScrollable, c, ce,\n\t\t\to = this.options,\n\t\t\tdocument = this.document[ 0 ];\n\n\t\tthis.relativeContainer = null;\n\n\t\tif ( !o.containment ) {\n\t\t\tthis.containment = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"window\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\t$( window ).scrollLeft() + $( window ).width() -\n\t\t\t\t\tthis.helperProportions.width - this.margins.left,\n\t\t\t\t$( window ).scrollTop() +\n\t\t\t\t\t( $( window ).height() || document.body.parentNode.scrollHeight ) -\n\t\t\t\t\tthis.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"document\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t$( document ).width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t( $( document ).height() || document.body.parentNode.scrollHeight ) -\n\t\t\t\t\tthis.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment.constructor === Array ) {\n\t\t\tthis.containment = o.containment;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"parent\" ) {\n\t\t\to.containment = this.helper[ 0 ].parentNode;\n\t\t}\n\n\t\tc = $( o.containment );\n\t\tce = c[ 0 ];\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tisUserScrollable = /(scroll|auto)/.test( c.css( \"overflow\" ) );\n\n\t\tthis.containment = [\n\t\t\t( parseInt( c.css( \"borderLeftWidth\" ), 10 ) || 0 ) +\n\t\t\t\t( parseInt( c.css( \"paddingLeft\" ), 10 ) || 0 ),\n\t\t\t( parseInt( c.css( \"borderTopWidth\" ), 10 ) || 0 ) +\n\t\t\t\t( parseInt( c.css( \"paddingTop\" ), 10 ) || 0 ),\n\t\t\t( isUserScrollable ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -\n\t\t\t\t( parseInt( c.css( \"borderRightWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingRight\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.width -\n\t\t\t\tthis.margins.left -\n\t\t\t\tthis.margins.right,\n\t\t\t( isUserScrollable ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -\n\t\t\t\t( parseInt( c.css( \"borderBottomWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingBottom\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.height -\n\t\t\t\tthis.margins.top -\n\t\t\t\tthis.margins.bottom\n\t\t];\n\t\tthis.relativeContainer = c;\n\t},\n\n\t_convertPositionTo: function( d, pos ) {\n\n\t\tif ( !pos ) {\n\t\t\tpos = this.position;\n\t\t}\n\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpos.top\t+\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.top * mod +\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.top * mod -\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.top :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.top ) ) * mod )\n\t\t\t),\n\t\t\tleft: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpos.left +\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.left * mod +\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.left * mod\t-\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.left :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.left ) ) * mod )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function( event, constrainPosition ) {\n\n\t\tvar containment, co, top, left,\n\t\t\to = this.options,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] ),\n\t\t\tpageX = event.pageX,\n\t\t\tpageY = event.pageY;\n\n\t\t// Cache the scroll\n\t\tif ( !scrollIsRootNode || !this.offset.scroll ) {\n\t\t\tthis.offset.scroll = {\n\t\t\t\ttop: this.scrollParent.scrollTop(),\n\t\t\t\tleft: this.scrollParent.scrollLeft()\n\t\t\t};\n\t\t}\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\t// If we are not dragging yet, we won't check for options\n\t\tif ( constrainPosition ) {\n\t\t\tif ( this.containment ) {\n\t\t\t\tif ( this.relativeContainer ) {\n\t\t\t\t\tco = this.relativeContainer.offset();\n\t\t\t\t\tcontainment = [\n\t\t\t\t\t\tthis.containment[ 0 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 1 ] + co.top,\n\t\t\t\t\t\tthis.containment[ 2 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 3 ] + co.top\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tcontainment = this.containment;\n\t\t\t\t}\n\n\t\t\t\tif ( event.pageX - this.offset.click.left < containment[ 0 ] ) {\n\t\t\t\t\tpageX = containment[ 0 ] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif ( event.pageY - this.offset.click.top < containment[ 1 ] ) {\n\t\t\t\t\tpageY = containment[ 1 ] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t\tif ( event.pageX - this.offset.click.left > containment[ 2 ] ) {\n\t\t\t\t\tpageX = containment[ 2 ] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif ( event.pageY - this.offset.click.top > containment[ 3 ] ) {\n\t\t\t\t\tpageY = containment[ 3 ] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( o.grid ) {\n\n\t\t\t\t//Check for grid elements set to 0 to prevent divide by 0 error causing invalid\n\t\t\t\t// argument errors in IE (see ticket #6950)\n\t\t\t\ttop = o.grid[ 1 ] ? this.originalPageY + Math.round( ( pageY -\n\t\t\t\t\tthis.originalPageY ) / o.grid[ 1 ] ) * o.grid[ 1 ] : this.originalPageY;\n\t\t\t\tpageY = containment ? ( ( top - this.offset.click.top >= containment[ 1 ] ||\n\t\t\t\t\ttop - this.offset.click.top > containment[ 3 ] ) ?\n\t\t\t\t\t\ttop :\n\t\t\t\t\t\t( ( top - this.offset.click.top >= containment[ 1 ] ) ?\n\t\t\t\t\t\t\ttop - o.grid[ 1 ] : top + o.grid[ 1 ] ) ) : top;\n\n\t\t\t\tleft = o.grid[ 0 ] ? this.originalPageX +\n\t\t\t\t\tMath.round( ( pageX - this.originalPageX ) / o.grid[ 0 ] ) * o.grid[ 0 ] :\n\t\t\t\t\tthis.originalPageX;\n\t\t\t\tpageX = containment ? ( ( left - this.offset.click.left >= containment[ 0 ] ||\n\t\t\t\t\tleft - this.offset.click.left > containment[ 2 ] ) ?\n\t\t\t\t\t\tleft :\n\t\t\t\t\t\t( ( left - this.offset.click.left >= containment[ 0 ] ) ?\n\t\t\t\t\t\t\tleft - o.grid[ 0 ] : left + o.grid[ 0 ] ) ) : left;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"y\" ) {\n\t\t\t\tpageX = this.originalPageX;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"x\" ) {\n\t\t\t\tpageY = this.originalPageY;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpageY -\n\n\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.click.top -\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.top -\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.top +\n\t\t\t\t( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.top :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.top ) )\n\t\t\t),\n\t\t\tleft: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpageX -\n\n\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.click.left -\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.left -\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.left +\n\t\t\t\t( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.left :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.left ) )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_clear: function() {\n\t\tthis._removeClass( this.helper, \"ui-draggable-dragging\" );\n\t\tif ( this.helper[ 0 ] !== this.element[ 0 ] && !this.cancelHelperRemoval ) {\n\t\t\tthis.helper.remove();\n\t\t}\n\t\tthis.helper = null;\n\t\tthis.cancelHelperRemoval = false;\n\t\tif ( this.destroyOnClear ) {\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\n\t// From now on bulk stuff - mainly helpers\n\n\t_trigger: function( type, event, ui ) {\n\t\tui = ui || this._uiHash();\n\t\t$.ui.plugin.call( this, type, [ event, ui, this ], true );\n\n\t\t// Absolute position and offset (see #6884 ) have to be recalculated after plugins\n\t\tif ( /^(drag|start|stop)/.test( type ) ) {\n\t\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\t\t\tui.offset = this.positionAbs;\n\t\t}\n\t\treturn $.Widget.prototype._trigger.call( this, type, event, ui );\n\t},\n\n\tplugins: {},\n\n\t_uiHash: function() {\n\t\treturn {\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\toriginalPosition: this.originalPosition,\n\t\t\toffset: this.positionAbs\n\t\t};\n\t}\n\n} );\n\n$.ui.plugin.add( \"draggable\", \"connectToSortable\", {\n\tstart: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t} );\n\n\t\tdraggable.sortables = [];\n\t\t$( draggable.options.connectToSortable ).each( function() {\n\t\t\tvar sortable = $( this ).sortable( \"instance\" );\n\n\t\t\tif ( sortable && !sortable.options.disabled ) {\n\t\t\t\tdraggable.sortables.push( sortable );\n\n\t\t\t\t// RefreshPositions is called at drag start to refresh the containerCache\n\t\t\t\t// which is used in drag. This ensures it's initialized and synchronized\n\t\t\t\t// with any changes that might have happened on the page since initialization.\n\t\t\t\tsortable.refreshPositions();\n\t\t\t\tsortable._trigger( \"activate\", event, uiSortable );\n\t\t\t}\n\t\t} );\n\t},\n\tstop: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t} );\n\n\t\tdraggable.cancelHelperRemoval = false;\n\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar sortable = this;\n\n\t\t\tif ( sortable.isOver ) {\n\t\t\t\tsortable.isOver = 0;\n\n\t\t\t\t// Allow this sortable to handle removing the helper\n\t\t\t\tdraggable.cancelHelperRemoval = true;\n\t\t\t\tsortable.cancelHelperRemoval = false;\n\n\t\t\t\t// Use _storedCSS To restore properties in the sortable,\n\t\t\t\t// as this also handles revert (#9675) since the draggable\n\t\t\t\t// may have modified them in unexpected ways (#8809)\n\t\t\t\tsortable._storedCSS = {\n\t\t\t\t\tposition: sortable.placeholder.css( \"position\" ),\n\t\t\t\t\ttop: sortable.placeholder.css( \"top\" ),\n\t\t\t\t\tleft: sortable.placeholder.css( \"left\" )\n\t\t\t\t};\n\n\t\t\t\tsortable._mouseStop( event );\n\n\t\t\t\t// Once drag has ended, the sortable should return to using\n\t\t\t\t// its original helper, not the shared helper from draggable\n\t\t\t\tsortable.options.helper = sortable.options._helper;\n\t\t\t} else {\n\n\t\t\t\t// Prevent this Sortable from removing the helper.\n\t\t\t\t// However, don't set the draggable to remove the helper\n\t\t\t\t// either as another connected Sortable may yet handle the removal.\n\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\tsortable._trigger( \"deactivate\", event, uiSortable );\n\t\t\t}\n\t\t} );\n\t},\n\tdrag: function( event, ui, draggable ) {\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar innermostIntersecting = false,\n\t\t\t\tsortable = this;\n\n\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\tsortable.positionAbs = draggable.positionAbs;\n\t\t\tsortable.helperProportions = draggable.helperProportions;\n\t\t\tsortable.offset.click = draggable.offset.click;\n\n\t\t\tif ( sortable._intersectsWith( sortable.containerCache ) ) {\n\t\t\t\tinnermostIntersecting = true;\n\n\t\t\t\t$.each( draggable.sortables, function() {\n\n\t\t\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\t\t\tthis.positionAbs = draggable.positionAbs;\n\t\t\t\t\tthis.helperProportions = draggable.helperProportions;\n\t\t\t\t\tthis.offset.click = draggable.offset.click;\n\n\t\t\t\t\tif ( this !== sortable &&\n\t\t\t\t\t\t\tthis._intersectsWith( this.containerCache ) &&\n\t\t\t\t\t\t\t$.contains( sortable.element[ 0 ], this.element[ 0 ] ) ) {\n\t\t\t\t\t\tinnermostIntersecting = false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn innermostIntersecting;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( innermostIntersecting ) {\n\n\t\t\t\t// If it intersects, we use a little isOver variable and set it once,\n\t\t\t\t// so that the move-in stuff gets fired only once.\n\t\t\t\tif ( !sortable.isOver ) {\n\t\t\t\t\tsortable.isOver = 1;\n\n\t\t\t\t\t// Store draggable's parent in case we need to reappend to it later.\n\t\t\t\t\tdraggable._parent = ui.helper.parent();\n\n\t\t\t\t\tsortable.currentItem = ui.helper\n\t\t\t\t\t\t.appendTo( sortable.element )\n\t\t\t\t\t\t.data( \"ui-sortable-item\", true );\n\n\t\t\t\t\t// Store helper option to later restore it\n\t\t\t\t\tsortable.options._helper = sortable.options.helper;\n\n\t\t\t\t\tsortable.options.helper = function() {\n\t\t\t\t\t\treturn ui.helper[ 0 ];\n\t\t\t\t\t};\n\n\t\t\t\t\t// Fire the start events of the sortable with our passed browser event,\n\t\t\t\t\t// and our own helper (so it doesn't create a new one)\n\t\t\t\t\tevent.target = sortable.currentItem[ 0 ];\n\t\t\t\t\tsortable._mouseCapture( event, true );\n\t\t\t\t\tsortable._mouseStart( event, true, true );\n\n\t\t\t\t\t// Because the browser event is way off the new appended portlet,\n\t\t\t\t\t// modify necessary variables to reflect the changes\n\t\t\t\t\tsortable.offset.click.top = draggable.offset.click.top;\n\t\t\t\t\tsortable.offset.click.left = draggable.offset.click.left;\n\t\t\t\t\tsortable.offset.parent.left -= draggable.offset.parent.left -\n\t\t\t\t\t\tsortable.offset.parent.left;\n\t\t\t\t\tsortable.offset.parent.top -= draggable.offset.parent.top -\n\t\t\t\t\t\tsortable.offset.parent.top;\n\n\t\t\t\t\tdraggable._trigger( \"toSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is in a valid drop zone,\n\t\t\t\t\t// used solely in the revert option to handle \"valid/invalid\".\n\t\t\t\t\tdraggable.dropped = sortable.element;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables in the case that\n\t\t\t\t\t// adding to one sortable changes the location of the other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Hack so receive/update callbacks work (mostly)\n\t\t\t\t\tdraggable.currentItem = draggable.element;\n\t\t\t\t\tsortable.fromOutside = draggable;\n\t\t\t\t}\n\n\t\t\t\tif ( sortable.currentItem ) {\n\t\t\t\t\tsortable._mouseDrag( event );\n\n\t\t\t\t\t// Copy the sortable's position because the draggable's can potentially reflect\n\t\t\t\t\t// a relative position, while sortable is always absolute, which the dragged\n\t\t\t\t\t// element has now become. (#8809)\n\t\t\t\t\tui.position = sortable.position;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// If it doesn't intersect with the sortable, and it intersected before,\n\t\t\t\t// we fake the drag stop of the sortable, but make sure it doesn't remove\n\t\t\t\t// the helper by using cancelHelperRemoval.\n\t\t\t\tif ( sortable.isOver ) {\n\n\t\t\t\t\tsortable.isOver = 0;\n\t\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\t\t// Calling sortable's mouseStop would trigger a revert,\n\t\t\t\t\t// so revert must be temporarily false until after mouseStop is called.\n\t\t\t\t\tsortable.options._revert = sortable.options.revert;\n\t\t\t\t\tsortable.options.revert = false;\n\n\t\t\t\t\tsortable._trigger( \"out\", event, sortable._uiHash( sortable ) );\n\t\t\t\t\tsortable._mouseStop( event, true );\n\n\t\t\t\t\t// Restore sortable behaviors that were modfied\n\t\t\t\t\t// when the draggable entered the sortable area (#9481)\n\t\t\t\t\tsortable.options.revert = sortable.options._revert;\n\t\t\t\t\tsortable.options.helper = sortable.options._helper;\n\n\t\t\t\t\tif ( sortable.placeholder ) {\n\t\t\t\t\t\tsortable.placeholder.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Restore and recalculate the draggable's offset considering the sortable\n\t\t\t\t\t// may have modified them in unexpected ways. (#8809, #10669)\n\t\t\t\t\tui.helper.appendTo( draggable._parent );\n\t\t\t\t\tdraggable._refreshOffsets( event );\n\t\t\t\t\tui.position = draggable._generatePosition( event, true );\n\n\t\t\t\t\tdraggable._trigger( \"fromSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is no longer in a valid drop zone\n\t\t\t\t\tdraggable.dropped = false;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables just in case removing\n\t\t\t\t\t// from one sortable changes the location of other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"cursor\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( \"body\" ),\n\t\t\to = instance.options;\n\n\t\tif ( t.css( \"cursor\" ) ) {\n\t\t\to._cursor = t.css( \"cursor\" );\n\t\t}\n\t\tt.css( \"cursor\", o.cursor );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif ( o._cursor ) {\n\t\t\t$( \"body\" ).css( \"cursor\", o._cursor );\n\t\t}\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"opacity\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\t\tif ( t.css( \"opacity\" ) ) {\n\t\t\to._opacity = t.css( \"opacity\" );\n\t\t}\n\t\tt.css( \"opacity\", o.opacity );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif ( o._opacity ) {\n\t\t\t$( ui.helper ).css( \"opacity\", o._opacity );\n\t\t}\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"scroll\", {\n\tstart: function( event, ui, i ) {\n\t\tif ( !i.scrollParentNotHidden ) {\n\t\t\ti.scrollParentNotHidden = i.helper.scrollParent( false );\n\t\t}\n\n\t\tif ( i.scrollParentNotHidden[ 0 ] !== i.document[ 0 ] &&\n\t\t\t\ti.scrollParentNotHidden[ 0 ].tagName !== \"HTML\" ) {\n\t\t\ti.overflowOffset = i.scrollParentNotHidden.offset();\n\t\t}\n\t},\n\tdrag: function( event, ui, i  ) {\n\n\t\tvar o = i.options,\n\t\t\tscrolled = false,\n\t\t\tscrollParent = i.scrollParentNotHidden[ 0 ],\n\t\t\tdocument = i.document[ 0 ];\n\n\t\tif ( scrollParent !== document && scrollParent.tagName !== \"HTML\" ) {\n\t\t\tif ( !o.axis || o.axis !== \"x\" ) {\n\t\t\t\tif ( ( i.overflowOffset.top + scrollParent.offsetHeight ) - event.pageY <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageY - i.overflowOffset.top < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !o.axis || o.axis !== \"y\" ) {\n\t\t\t\tif ( ( i.overflowOffset.left + scrollParent.offsetWidth ) - event.pageX <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageX - i.overflowOffset.left < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( !o.axis || o.axis !== \"x\" ) {\n\t\t\t\tif ( event.pageY - $( document ).scrollTop() < o.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollTop( $( document ).scrollTop() - o.scrollSpeed );\n\t\t\t\t} else if ( $( window ).height() - ( event.pageY - $( document ).scrollTop() ) <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollTop( $( document ).scrollTop() + o.scrollSpeed );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !o.axis || o.axis !== \"y\" ) {\n\t\t\t\tif ( event.pageX - $( document ).scrollLeft() < o.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollLeft(\n\t\t\t\t\t\t$( document ).scrollLeft() - o.scrollSpeed\n\t\t\t\t\t);\n\t\t\t\t} else if ( $( window ).width() - ( event.pageX - $( document ).scrollLeft() ) <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollLeft(\n\t\t\t\t\t\t$( document ).scrollLeft() + o.scrollSpeed\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif ( scrolled !== false && $.ui.ddmanager && !o.dropBehaviour ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( i, event );\n\t\t}\n\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"snap\", {\n\tstart: function( event, ui, i ) {\n\n\t\tvar o = i.options;\n\n\t\ti.snapElements = [];\n\n\t\t$( o.snap.constructor !== String ? ( o.snap.items || \":data(ui-draggable)\" ) : o.snap )\n\t\t\t.each( function() {\n\t\t\t\tvar $t = $( this ),\n\t\t\t\t\t$o = $t.offset();\n\t\t\t\tif ( this !== i.element[ 0 ] ) {\n\t\t\t\t\ti.snapElements.push( {\n\t\t\t\t\t\titem: this,\n\t\t\t\t\t\twidth: $t.outerWidth(), height: $t.outerHeight(),\n\t\t\t\t\t\ttop: $o.top, left: $o.left\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t},\n\tdrag: function( event, ui, inst ) {\n\n\t\tvar ts, bs, ls, rs, l, r, t, b, i, first,\n\t\t\to = inst.options,\n\t\t\td = o.snapTolerance,\n\t\t\tx1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,\n\t\t\ty1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;\n\n\t\tfor ( i = inst.snapElements.length - 1; i >= 0; i-- ) {\n\n\t\t\tl = inst.snapElements[ i ].left - inst.margins.left;\n\t\t\tr = l + inst.snapElements[ i ].width;\n\t\t\tt = inst.snapElements[ i ].top - inst.margins.top;\n\t\t\tb = t + inst.snapElements[ i ].height;\n\n\t\t\tif ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d ||\n\t\t\t\t\t!$.contains( inst.snapElements[ i ].item.ownerDocument,\n\t\t\t\t\tinst.snapElements[ i ].item ) ) {\n\t\t\t\tif ( inst.snapElements[ i ].snapping ) {\n\t\t\t\t\t( inst.options.snap.release &&\n\t\t\t\t\t\tinst.options.snap.release.call(\n\t\t\t\t\t\t\tinst.element,\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t$.extend( inst._uiHash(), { snapItem: inst.snapElements[ i ].item } )\n\t\t\t\t\t\t) );\n\t\t\t\t}\n\t\t\t\tinst.snapElements[ i ].snapping = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( o.snapMode !== \"inner\" ) {\n\t\t\t\tts = Math.abs( t - y2 ) <= d;\n\t\t\t\tbs = Math.abs( b - y1 ) <= d;\n\t\t\t\tls = Math.abs( l - x2 ) <= d;\n\t\t\t\trs = Math.abs( r - x1 ) <= d;\n\t\t\t\tif ( ts ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: t - inst.helperProportions.height,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( bs ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: b,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( ls ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: l - inst.helperProportions.width\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t\tif ( rs ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: r\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirst = ( ts || bs || ls || rs );\n\n\t\t\tif ( o.snapMode !== \"outer\" ) {\n\t\t\t\tts = Math.abs( t - y1 ) <= d;\n\t\t\t\tbs = Math.abs( b - y2 ) <= d;\n\t\t\t\tls = Math.abs( l - x1 ) <= d;\n\t\t\t\trs = Math.abs( r - x2 ) <= d;\n\t\t\t\tif ( ts ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: t,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( bs ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: b - inst.helperProportions.height,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( ls ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: l\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t\tif ( rs ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: r - inst.helperProportions.width\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !inst.snapElements[ i ].snapping && ( ts || bs || ls || rs || first ) ) {\n\t\t\t\t( inst.options.snap.snap &&\n\t\t\t\t\tinst.options.snap.snap.call(\n\t\t\t\t\t\tinst.element,\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\t$.extend( inst._uiHash(), {\n\t\t\t\t\t\t\tsnapItem: inst.snapElements[ i ].item\n\t\t\t\t\t\t} ) ) );\n\t\t\t}\n\t\t\tinst.snapElements[ i ].snapping = ( ts || bs || ls || rs || first );\n\n\t\t}\n\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"stack\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar min,\n\t\t\to = instance.options,\n\t\t\tgroup = $.makeArray( $( o.stack ) ).sort( function( a, b ) {\n\t\t\t\treturn ( parseInt( $( a ).css( \"zIndex\" ), 10 ) || 0 ) -\n\t\t\t\t\t( parseInt( $( b ).css( \"zIndex\" ), 10 ) || 0 );\n\t\t\t} );\n\n\t\tif ( !group.length ) { return; }\n\n\t\tmin = parseInt( $( group[ 0 ] ).css( \"zIndex\" ), 10 ) || 0;\n\t\t$( group ).each( function( i ) {\n\t\t\t$( this ).css( \"zIndex\", min + i );\n\t\t} );\n\t\tthis.css( \"zIndex\", ( min + group.length ) );\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"zIndex\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\n\t\tif ( t.css( \"zIndex\" ) ) {\n\t\t\to._zIndex = t.css( \"zIndex\" );\n\t\t}\n\t\tt.css( \"zIndex\", o.zIndex );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\n\t\tif ( o._zIndex ) {\n\t\t\t$( ui.helper ).css( \"zIndex\", o._zIndex );\n\t\t}\n\t}\n} );\n\nreturn $.ui.draggable;\n\n} ) );\n","// Copyright (c) 2005-2010 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)\n// Contributors:\n//  Justin Palmer (http://encytemedia.com/)\n//  Mark Pilgrim (http://diveintomark.org/)\n//  Martin Bialasinki\n//\n// script.aculo.us is freely distributable under the terms of an MIT-style license.\n// For details, see the script.aculo.us web site: http://script.aculo.us/\n\n\n///////////////////////////////////////////////////////////////////////\n//Jaspersoft/Tibco Updates (look for comment: JASPERSOFT #x)\n///////////////////////////////////////////////////////////////////////\n// #7 Jasper: escape XSS before outputting on the page\n///////////////////////////////////////////////////////////////////////\n\n// converts rgb() and #xxx to #xxxxxx format,\n// returns self (or first argument) if not convertable\nString.prototype.parseColor = function() {\n  var color = '#';\n  if (this.slice(0,4) == 'rgb(') {\n    var cols = this.slice(4,this.length-1).split(',');\n    var i=0; do { color += parseInt(cols[i]).toColorPart() } while (++i<3);\n  } else {\n    if (this.slice(0,1) == '#') {\n      if (this.length==4) for(var i=1;i<4;i++) color += (this.charAt(i) + this.charAt(i)).toLowerCase();\n      if (this.length==7) color = this.toLowerCase();\n    }\n  }\n  return (color.length==7 ? color : (arguments[0] || this));\n};\n\n/*--------------------------------------------------------------------------*/\n\nElement.collectTextNodes = function(element) {\n  return $A($(element).childNodes).collect( function(node) {\n    return (node.nodeType==3 ? node.nodeValue :\n      (node.hasChildNodes() ? Element.collectTextNodes(node) : ''));\n  }).flatten().join('');\n};\n\nElement.collectTextNodesIgnoreClass = function(element, className) {\n  return $A($(element).childNodes).collect( function(node) {\n    return (node.nodeType==3 ? node.nodeValue :\n      ((node.hasChildNodes() && !Element.hasClassName(node,className)) ?\n        Element.collectTextNodesIgnoreClass(node, className) : ''));\n  }).flatten().join('');\n};\n\nElement.setContentZoom = function(element, percent) {\n  element = $(element);\n  element.setStyle({fontSize: (percent/100) + 'em'});\n  if (Prototype.Browser.WebKit) window.scrollBy(0,0);\n  return element;\n};\n\nElement.getInlineOpacity = function(element){\n  return $(element).style.opacity || '';\n};\n\nElement.forceRerendering = function(element) {\n  try {\n    element = $(element);\n    var n = document.createTextNode(' ');\n    element.appendChild(n);\n    element.removeChild(n);\n  } catch(e) { }\n};\n\n/*--------------------------------------------------------------------------*/\n\nvar Effect = {\n  _elementDoesNotExistError: {\n    name: 'ElementDoesNotExistError',\n    message: 'The specified DOM element does not exist, but is required for this effect to operate'\n  },\n  Transitions: {\n    linear: Prototype.K,\n    sinoidal: function(pos) {\n      return (-Math.cos(pos*Math.PI)/2) + .5;\n    },\n    reverse: function(pos) {\n      return 1-pos;\n    },\n    flicker: function(pos) {\n      var pos = ((-Math.cos(pos*Math.PI)/4) + .75) + Math.random()/4;\n      return pos > 1 ? 1 : pos;\n    },\n    wobble: function(pos) {\n      return (-Math.cos(pos*Math.PI*(9*pos))/2) + .5;\n    },\n    pulse: function(pos, pulses) {\n      return (-Math.cos((pos*((pulses||5)-.5)*2)*Math.PI)/2) + .5;\n    },\n    spring: function(pos) {\n      return 1 - (Math.cos(pos * 4.5 * Math.PI) * Math.exp(-pos * 6));\n    },\n    none: function(pos) {\n      return 0;\n    },\n    full: function(pos) {\n      return 1;\n    }\n  },\n  DefaultOptions: {\n    duration:   1.0,   // seconds\n    fps:        100,   // 100= assume 66fps max.\n    sync:       false, // true for combining\n    from:       0.0,\n    to:         1.0,\n    delay:      0.0,\n    queue:      'parallel'\n  },\n  tagifyText: function(element) {\n    var tagifyStyle = 'position:relative';\n    if (Prototype.Browser.IE) tagifyStyle += ';zoom:1';\n\n    element = $(element);\n    $A(element.childNodes).each( function(child) {\n      if (child.nodeType==3) {\n        child.nodeValue.toArray().each( function(character) {\n          element.insertBefore(\n            new Element('span', {style: tagifyStyle}).update(\n              character == ' ' ? String.fromCharCode(160) : character),\n              child);\n        });\n        Element.remove(child);\n      }\n    });\n  },\n  multiple: function(element, effect) {\n    var elements;\n    if (((typeof element == 'object') ||\n        Object.isFunction(element)) &&\n       (element.length))\n      elements = element;\n    else\n      elements = $(element).childNodes;\n\n    var options = Object.extend({\n      speed: 0.1,\n      delay: 0.0\n    }, arguments[2] || { });\n    var masterDelay = options.delay;\n\n    $A(elements).each( function(element, index) {\n      new effect(element, Object.extend(options, { delay: index * options.speed + masterDelay }));\n    });\n  },\n  PAIRS: {\n    'slide':  ['SlideDown','SlideUp'],\n    'blind':  ['BlindDown','BlindUp'],\n    'appear': ['Appear','Fade']\n  },\n  toggle: function(element, effect, options) {\n    element = $(element);\n    effect  = (effect || 'appear').toLowerCase();\n    \n    return Effect[ Effect.PAIRS[ effect ][ element.visible() ? 1 : 0 ] ](element, Object.extend({\n      queue: { position:'end', scope:(element.id || 'global'), limit: 1 }\n    }, options || {}));\n  }\n};\n\nEffect.DefaultOptions.transition = Effect.Transitions.sinoidal;\n\n/* ------------- core effects ------------- */\n\nEffect.ScopedQueue = Class.create(Enumerable, {\n  initialize: function() {\n    this.effects  = [];\n    this.interval = null;\n  },\n  _each: function(iterator) {\n    this.effects._each(iterator);\n  },\n  add: function(effect) {\n    var timestamp = new Date().getTime();\n\n    var position = Object.isString(effect.options.queue) ?\n      effect.options.queue : effect.options.queue.position;\n\n    switch(position) {\n      case 'front':\n        // move unstarted effects after this effect\n        this.effects.findAll(function(e){ return e.state=='idle' }).each( function(e) {\n            e.startOn  += effect.finishOn;\n            e.finishOn += effect.finishOn;\n          });\n        break;\n      case 'with-last':\n        timestamp = this.effects.pluck('startOn').max() || timestamp;\n        break;\n      case 'end':\n        // start effect after last queued effect has finished\n        timestamp = this.effects.pluck('finishOn').max() || timestamp;\n        break;\n    }\n\n    effect.startOn  += timestamp;\n    effect.finishOn += timestamp;\n\n    if (!effect.options.queue.limit || (this.effects.length < effect.options.queue.limit))\n      this.effects.push(effect);\n\n    if (!this.interval)\n      this.interval = setInterval(this.loop.bind(this), 15);\n  },\n  remove: function(effect) {\n    this.effects = this.effects.reject(function(e) { return e==effect });\n    if (this.effects.length == 0) {\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n  },\n  loop: function() {\n    var timePos = new Date().getTime();\n    for(var i=0, len=this.effects.length;i<len;i++)\n      this.effects[i] && this.effects[i].loop(timePos);\n  }\n});\n\nEffect.Queues = {\n  instances: $H(),\n  get: function(queueName) {\n    if (!Object.isString(queueName)) return queueName;\n\n    return this.instances.get(queueName) ||\n      this.instances.set(queueName, new Effect.ScopedQueue());\n  }\n};\nEffect.Queue = Effect.Queues.get('global');\n\nEffect.Base = Class.create({\n  position: null,\n  start: function(options) {\n    if (options && options.transition === false) options.transition = Effect.Transitions.linear;\n    this.options      = Object.extend(Object.extend({ },Effect.DefaultOptions), options || { });\n    this.currentFrame = 0;\n    this.state        = 'idle';\n    this.startOn      = this.options.delay*1000;\n    this.finishOn     = this.startOn+(this.options.duration*1000);\n    this.fromToDelta  = this.options.to-this.options.from;\n    this.totalTime    = this.finishOn-this.startOn;\n    this.totalFrames  = this.options.fps*this.options.duration;\n\n    this.render = (function() {\n      function dispatch(effect, eventName) {\n        if (effect.options[eventName + 'Internal'])\n          effect.options[eventName + 'Internal'](effect);\n        if (effect.options[eventName])\n          effect.options[eventName](effect);\n      }\n\n      return function(pos) {\n        if (this.state === \"idle\") {\n          this.state = \"running\";\n          dispatch(this, 'beforeSetup');\n          if (this.setup) this.setup();\n          dispatch(this, 'afterSetup');\n        }\n        if (this.state === \"running\") {\n          pos = (this.options.transition(pos) * this.fromToDelta) + this.options.from;\n          this.position = pos;\n          dispatch(this, 'beforeUpdate');\n          if (this.update) this.update(pos);\n          dispatch(this, 'afterUpdate');\n        }\n      };\n    })();\n\n    this.event('beforeStart');\n    if (!this.options.sync)\n      Effect.Queues.get(Object.isString(this.options.queue) ?\n        'global' : this.options.queue.scope).add(this);\n  },\n  loop: function(timePos) {\n    if (timePos >= this.startOn) {\n      if (timePos >= this.finishOn) {\n        this.render(1.0);\n        this.cancel();\n        this.event('beforeFinish');\n        if (this.finish) this.finish();\n        this.event('afterFinish');\n        return;\n      }\n      var pos   = (timePos - this.startOn) / this.totalTime,\n          frame = (pos * this.totalFrames).round();\n      if (frame > this.currentFrame) {\n        this.render(pos);\n        this.currentFrame = frame;\n      }\n    }\n  },\n  cancel: function() {\n    if (!this.options.sync)\n      Effect.Queues.get(Object.isString(this.options.queue) ?\n        'global' : this.options.queue.scope).remove(this);\n    this.state = 'finished';\n  },\n  event: function(eventName) {\n    if (this.options[eventName + 'Internal']) this.options[eventName + 'Internal'](this);\n    if (this.options[eventName]) this.options[eventName](this);\n  },\n  inspect: function() {\n    var data = $H();\n    for(property in this)\n      if (!Object.isFunction(this[property])) data.set(property, this[property]);\n    return '#<Effect:' + data.inspect() + ',options:' + $H(this.options).inspect() + '>';\n  }\n});\n\nEffect.Parallel = Class.create(Effect.Base, {\n  initialize: function(effects) {\n    this.effects = effects || [];\n    this.start(arguments[1]);\n  },\n  update: function(position) {\n    this.effects.invoke('render', position);\n  },\n  finish: function(position) {\n    this.effects.each( function(effect) {\n      effect.render(1.0);\n      effect.cancel();\n      effect.event('beforeFinish');\n      if (effect.finish) effect.finish(position);\n      effect.event('afterFinish');\n    });\n  }\n});\n\nEffect.Tween = Class.create(Effect.Base, {\n  initialize: function(object, from, to) {\n    object = Object.isString(object) ? $(object) : object;\n    var args = $A(arguments), method = args.last(),\n      options = args.length == 5 ? args[3] : null;\n    this.method = Object.isFunction(method) ? method.bind(object) :\n      Object.isFunction(object[method]) ? object[method].bind(object) :\n      function(value) { object[method] = value };\n    this.start(Object.extend({ from: from, to: to }, options || { }));\n  },\n  update: function(position) {\n    this.method(position);\n  }\n});\n\nEffect.Event = Class.create(Effect.Base, {\n  initialize: function() {\n    this.start(Object.extend({ duration: 0 }, arguments[0] || { }));\n  },\n  update: Prototype.emptyFunction\n});\n\nEffect.Opacity = Class.create(Effect.Base, {\n  initialize: function(element) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    // make this work on IE on elements without 'layout'\n    if (Prototype.Browser.IE && (!this.element.currentStyle.hasLayout))\n      this.element.setStyle({zoom: 1});\n    var options = Object.extend({\n      from: this.element.getOpacity() || 0.0,\n      to:   1.0\n    }, arguments[1] || { });\n    this.start(options);\n  },\n  update: function(position) {\n    this.element.setOpacity(position);\n  }\n});\n\nEffect.Move = Class.create(Effect.Base, {\n  initialize: function(element) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    var options = Object.extend({\n      x:    0,\n      y:    0,\n      mode: 'relative'\n    }, arguments[1] || { });\n    this.start(options);\n  },\n  setup: function() {\n    this.element.makePositioned();\n    this.originalLeft = parseFloat(this.element.getStyle('left') || '0');\n    this.originalTop  = parseFloat(this.element.getStyle('top')  || '0');\n    if (this.options.mode == 'absolute') {\n      this.options.x = this.options.x - this.originalLeft;\n      this.options.y = this.options.y - this.originalTop;\n    }\n  },\n  update: function(position) {\n    this.element.setStyle({\n      left: (this.options.x  * position + this.originalLeft).round() + 'px',\n      top:  (this.options.y  * position + this.originalTop).round()  + 'px'\n    });\n  }\n});\n\n// for backwards compatibility\nEffect.MoveBy = function(element, toTop, toLeft) {\n  return new Effect.Move(element,\n    Object.extend({ x: toLeft, y: toTop }, arguments[3] || { }));\n};\n\nEffect.Scale = Class.create(Effect.Base, {\n  initialize: function(element, percent) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    var options = Object.extend({\n      scaleX: true,\n      scaleY: true,\n      scaleContent: true,\n      scaleFromCenter: false,\n      scaleMode: 'box',        // 'box' or 'contents' or { } with provided values\n      scaleFrom: 100.0,\n      scaleTo:   percent\n    }, arguments[2] || { });\n    this.start(options);\n  },\n  setup: function() {\n    this.restoreAfterFinish = this.options.restoreAfterFinish || false;\n    this.elementPositioning = this.element.getStyle('position');\n\n    this.originalStyle = { };\n    ['top','left','width','height','fontSize'].each( function(k) {\n      this.originalStyle[k] = this.element.style[k];\n    }.bind(this));\n\n    this.originalTop  = this.element.offsetTop;\n    this.originalLeft = this.element.offsetLeft;\n\n    var fontSize = this.element.getStyle('font-size') || '100%';\n    ['em','px','%','pt'].each( function(fontSizeType) {\n      if (fontSize.indexOf(fontSizeType)>0) {\n        this.fontSize     = parseFloat(fontSize);\n        this.fontSizeType = fontSizeType;\n      }\n    }.bind(this));\n\n    this.factor = (this.options.scaleTo - this.options.scaleFrom)/100;\n\n    this.dims = null;\n    if (this.options.scaleMode=='box')\n      this.dims = [this.element.offsetHeight, this.element.offsetWidth];\n    if (/^content/.test(this.options.scaleMode))\n      this.dims = [this.element.scrollHeight, this.element.scrollWidth];\n    if (!this.dims)\n      this.dims = [this.options.scaleMode.originalHeight,\n                   this.options.scaleMode.originalWidth];\n  },\n  update: function(position) {\n    var currentScale = (this.options.scaleFrom/100.0) + (this.factor * position);\n    if (this.options.scaleContent && this.fontSize)\n      this.element.setStyle({fontSize: this.fontSize * currentScale + this.fontSizeType });\n    this.setDimensions(this.dims[0] * currentScale, this.dims[1] * currentScale);\n  },\n  finish: function(position) {\n    if (this.restoreAfterFinish) this.element.setStyle(this.originalStyle);\n  },\n  setDimensions: function(height, width) {\n    var d = { };\n    if (this.options.scaleX) d.width = width.round() + 'px';\n    if (this.options.scaleY) d.height = height.round() + 'px';\n    if (this.options.scaleFromCenter) {\n      var topd  = (height - this.dims[0])/2;\n      var leftd = (width  - this.dims[1])/2;\n      if (this.elementPositioning == 'absolute') {\n        if (this.options.scaleY) d.top = this.originalTop-topd + 'px';\n        if (this.options.scaleX) d.left = this.originalLeft-leftd + 'px';\n      } else {\n        if (this.options.scaleY) d.top = -topd + 'px';\n        if (this.options.scaleX) d.left = -leftd + 'px';\n      }\n    }\n    this.element.setStyle(d);\n  }\n});\n\nEffect.Highlight = Class.create(Effect.Base, {\n  initialize: function(element) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    var options = Object.extend({ startcolor: '#ffff99' }, arguments[1] || { });\n    this.start(options);\n  },\n  setup: function() {\n    // Prevent executing on elements not in the layout flow\n    if (this.element.getStyle('display')=='none') { this.cancel(); return; }\n    // Disable background image during the effect\n    this.oldStyle = { };\n    if (!this.options.keepBackgroundImage) {\n      this.oldStyle.backgroundImage = this.element.getStyle('background-image');\n      this.element.setStyle({backgroundImage: 'none'});\n    }\n    if (!this.options.endcolor)\n      this.options.endcolor = this.element.getStyle('background-color').parseColor('#ffffff');\n    if (!this.options.restorecolor)\n      this.options.restorecolor = this.element.getStyle('background-color');\n    // init color calculations\n    this._base  = $R(0,2).map(function(i){ return parseInt(this.options.startcolor.slice(i*2+1,i*2+3),16) }.bind(this));\n    this._delta = $R(0,2).map(function(i){ return parseInt(this.options.endcolor.slice(i*2+1,i*2+3),16)-this._base[i] }.bind(this));\n  },\n  update: function(position) {\n    this.element.setStyle({backgroundColor: $R(0,2).inject('#',function(m,v,i){\n      return m+((this._base[i]+(this._delta[i]*position)).round().toColorPart()); }.bind(this)) });\n  },\n  finish: function() {\n    this.element.setStyle(Object.extend(this.oldStyle, {\n      backgroundColor: this.options.restorecolor\n    }));\n  }\n});\n\nEffect.ScrollTo = function(element) {\n  var options = arguments[1] || { },\n  scrollOffsets = document.viewport.getScrollOffsets(),\n  elementOffsets = $(element).cumulativeOffset();\n\n  if (options.offset) elementOffsets[1] += options.offset;\n\n  return new Effect.Tween(null,\n    scrollOffsets.top,\n    elementOffsets[1],\n    options,\n    function(p){ scrollTo(scrollOffsets.left, p.round()); }\n  );\n};\n\n/* ------------- combination effects ------------- */\n\nEffect.Fade = function(element) {\n  element = $(element);\n  var oldOpacity = element.getInlineOpacity();\n  var options = Object.extend({\n    from: element.getOpacity() || 1.0,\n    to:   0.0,\n    afterFinishInternal: function(effect) {\n      if (effect.options.to!=0) return;\n      effect.element.hide().setStyle({opacity: oldOpacity});\n    }\n  }, arguments[1] || { });\n  return new Effect.Opacity(element,options);\n};\n\nEffect.Appear = function(element) {\n  element = $(element);\n  var options = Object.extend({\n  from: (element.getStyle('display') == 'none' ? 0.0 : element.getOpacity() || 0.0),\n  to:   1.0,\n  // force Safari to render floated elements properly\n  afterFinishInternal: function(effect) {\n    effect.element.forceRerendering();\n  },\n  beforeSetup: function(effect) {\n    effect.element.setOpacity(effect.options.from).show();\n  }}, arguments[1] || { });\n  return new Effect.Opacity(element,options);\n};\n\nEffect.Puff = function(element) {\n  element = $(element);\n  var oldStyle = {\n    opacity: element.getInlineOpacity(),\n    position: element.getStyle('position'),\n    top:  element.style.top,\n    left: element.style.left,\n    width: element.style.width,\n    height: element.style.height\n  };\n  return new Effect.Parallel(\n   [ new Effect.Scale(element, 200,\n      { sync: true, scaleFromCenter: true, scaleContent: true, restoreAfterFinish: true }),\n     new Effect.Opacity(element, { sync: true, to: 0.0 } ) ],\n     Object.extend({ duration: 1.0,\n      beforeSetupInternal: function(effect) {\n        Position.absolutize(effect.effects[0].element);\n      },\n      afterFinishInternal: function(effect) {\n         effect.effects[0].element.hide().setStyle(oldStyle); }\n     }, arguments[1] || { })\n   );\n};\n\nEffect.BlindUp = function(element) {\n  element = $(element);\n  element.makeClipping();\n  return new Effect.Scale(element, 0,\n    Object.extend({ scaleContent: false,\n      scaleX: false,\n      restoreAfterFinish: true,\n      afterFinishInternal: function(effect) {\n        effect.element.hide().undoClipping();\n      }\n    }, arguments[1] || { })\n  );\n};\n\nEffect.BlindDown = function(element) {\n  element = $(element);\n  var elementDimensions = element.getDimensions();\n  return new Effect.Scale(element, 100, Object.extend({\n    scaleContent: false,\n    scaleX: false,\n    scaleFrom: 0,\n    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},\n    restoreAfterFinish: true,\n    afterSetup: function(effect) {\n      effect.element.makeClipping().setStyle({height: '0px'}).show();\n    },\n    afterFinishInternal: function(effect) {\n      effect.element.undoClipping();\n    }\n  }, arguments[1] || { }));\n};\n\nEffect.SwitchOff = function(element) {\n  element = $(element);\n  var oldOpacity = element.getInlineOpacity();\n  return new Effect.Appear(element, Object.extend({\n    duration: 0.4,\n    from: 0,\n    transition: Effect.Transitions.flicker,\n    afterFinishInternal: function(effect) {\n      new Effect.Scale(effect.element, 1, {\n        duration: 0.3, scaleFromCenter: true,\n        scaleX: false, scaleContent: false, restoreAfterFinish: true,\n        beforeSetup: function(effect) {\n          effect.element.makePositioned().makeClipping();\n        },\n        afterFinishInternal: function(effect) {\n          effect.element.hide().undoClipping().undoPositioned().setStyle({opacity: oldOpacity});\n        }\n      });\n    }\n  }, arguments[1] || { }));\n};\n\nEffect.DropOut = function(element) {\n  element = $(element);\n  var oldStyle = {\n    top: element.getStyle('top'),\n    left: element.getStyle('left'),\n    opacity: element.getInlineOpacity() };\n  return new Effect.Parallel(\n    [ new Effect.Move(element, {x: 0, y: 100, sync: true }),\n      new Effect.Opacity(element, { sync: true, to: 0.0 }) ],\n    Object.extend(\n      { duration: 0.5,\n        beforeSetup: function(effect) {\n          effect.effects[0].element.makePositioned();\n        },\n        afterFinishInternal: function(effect) {\n          effect.effects[0].element.hide().undoPositioned().setStyle(oldStyle);\n        }\n      }, arguments[1] || { }));\n};\n\nEffect.Shake = function(element) {\n  element = $(element);\n  var options = Object.extend({\n    distance: 20,\n    duration: 0.5\n  }, arguments[1] || {});\n  var distance = parseFloat(options.distance);\n  var split = parseFloat(options.duration) / 10.0;\n  var oldStyle = {\n    top: element.getStyle('top'),\n    left: element.getStyle('left') };\n    return new Effect.Move(element,\n      { x:  distance, y: 0, duration: split, afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x: -distance*2, y: 0, duration: split*2,  afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x:  distance*2, y: 0, duration: split*2,  afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x: -distance*2, y: 0, duration: split*2,  afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x:  distance*2, y: 0, duration: split*2,  afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x: -distance, y: 0, duration: split, afterFinishInternal: function(effect) {\n        effect.element.undoPositioned().setStyle(oldStyle);\n  }}); }}); }}); }}); }}); }});\n};\n\nEffect.SlideDown = function(element) {\n  element = $(element).cleanWhitespace();\n  // SlideDown need to have the content of the element wrapped in a container element with fixed height!\n  var oldInnerBottom = element.down().getStyle('bottom');\n  var elementDimensions = element.getDimensions();\n  return new Effect.Scale(element, 100, Object.extend({\n    scaleContent: false,\n    scaleX: false,\n    scaleFrom: window.opera ? 0 : 1,\n    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},\n    restoreAfterFinish: true,\n    afterSetup: function(effect) {\n      effect.element.makePositioned();\n      effect.element.down().makePositioned();\n      if (window.opera) effect.element.setStyle({top: ''});\n      effect.element.makeClipping().setStyle({height: '0px'}).show();\n    },\n    afterUpdateInternal: function(effect) {\n      effect.element.down().setStyle({bottom:\n        (effect.dims[0] - effect.element.clientHeight) + 'px' });\n    },\n    afterFinishInternal: function(effect) {\n      effect.element.undoClipping().undoPositioned();\n      effect.element.down().undoPositioned().setStyle({bottom: oldInnerBottom}); }\n    }, arguments[1] || { })\n  );\n};\n\nEffect.SlideUp = function(element) {\n  element = $(element).cleanWhitespace();\n  var oldInnerBottom = element.down().getStyle('bottom');\n  var elementDimensions = element.getDimensions();\n  return new Effect.Scale(element, window.opera ? 0 : 1,\n   Object.extend({ scaleContent: false,\n    scaleX: false,\n    scaleMode: 'box',\n    scaleFrom: 100,\n    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},\n    restoreAfterFinish: true,\n    afterSetup: function(effect) {\n      effect.element.makePositioned();\n      effect.element.down().makePositioned();\n      if (window.opera) effect.element.setStyle({top: ''});\n      effect.element.makeClipping().show();\n    },\n    afterUpdateInternal: function(effect) {\n      effect.element.down().setStyle({bottom:\n        (effect.dims[0] - effect.element.clientHeight) + 'px' });\n    },\n    afterFinishInternal: function(effect) {\n      effect.element.hide().undoClipping().undoPositioned();\n      effect.element.down().undoPositioned().setStyle({bottom: oldInnerBottom});\n    }\n   }, arguments[1] || { })\n  );\n};\n\n// Bug in opera makes the TD containing this element expand for a instance after finish\nEffect.Squish = function(element) {\n  return new Effect.Scale(element, window.opera ? 1 : 0, {\n    restoreAfterFinish: true,\n    beforeSetup: function(effect) {\n      effect.element.makeClipping();\n    },\n    afterFinishInternal: function(effect) {\n      effect.element.hide().undoClipping();\n    }\n  });\n};\n\nEffect.Grow = function(element) {\n  element = $(element);\n  var options = Object.extend({\n    direction: 'center',\n    moveTransition: Effect.Transitions.sinoidal,\n    scaleTransition: Effect.Transitions.sinoidal,\n    opacityTransition: Effect.Transitions.full\n  }, arguments[1] || { });\n  var oldStyle = {\n    top: element.style.top,\n    left: element.style.left,\n    height: element.style.height,\n    width: element.style.width,\n    opacity: element.getInlineOpacity() };\n\n  var dims = element.getDimensions();\n  var initialMoveX, initialMoveY;\n  var moveX, moveY;\n\n  switch (options.direction) {\n    case 'top-left':\n      initialMoveX = initialMoveY = moveX = moveY = 0;\n      break;\n    case 'top-right':\n      initialMoveX = dims.width;\n      initialMoveY = moveY = 0;\n      moveX = -dims.width;\n      break;\n    case 'bottom-left':\n      initialMoveX = moveX = 0;\n      initialMoveY = dims.height;\n      moveY = -dims.height;\n      break;\n    case 'bottom-right':\n      initialMoveX = dims.width;\n      initialMoveY = dims.height;\n      moveX = -dims.width;\n      moveY = -dims.height;\n      break;\n    case 'center':\n      initialMoveX = dims.width / 2;\n      initialMoveY = dims.height / 2;\n      moveX = -dims.width / 2;\n      moveY = -dims.height / 2;\n      break;\n  }\n\n  return new Effect.Move(element, {\n    x: initialMoveX,\n    y: initialMoveY,\n    duration: 0.01,\n    beforeSetup: function(effect) {\n      effect.element.hide().makeClipping().makePositioned();\n    },\n    afterFinishInternal: function(effect) {\n      new Effect.Parallel(\n        [ new Effect.Opacity(effect.element, { sync: true, to: 1.0, from: 0.0, transition: options.opacityTransition }),\n          new Effect.Move(effect.element, { x: moveX, y: moveY, sync: true, transition: options.moveTransition }),\n          new Effect.Scale(effect.element, 100, {\n            scaleMode: { originalHeight: dims.height, originalWidth: dims.width },\n            sync: true, scaleFrom: window.opera ? 1 : 0, transition: options.scaleTransition, restoreAfterFinish: true})\n        ], Object.extend({\n             beforeSetup: function(effect) {\n               effect.effects[0].element.setStyle({height: '0px'}).show();\n             },\n             afterFinishInternal: function(effect) {\n               effect.effects[0].element.undoClipping().undoPositioned().setStyle(oldStyle);\n             }\n           }, options)\n      );\n    }\n  });\n};\n\nEffect.Shrink = function(element) {\n  element = $(element);\n  var options = Object.extend({\n    direction: 'center',\n    moveTransition: Effect.Transitions.sinoidal,\n    scaleTransition: Effect.Transitions.sinoidal,\n    opacityTransition: Effect.Transitions.none\n  }, arguments[1] || { });\n  var oldStyle = {\n    top: element.style.top,\n    left: element.style.left,\n    height: element.style.height,\n    width: element.style.width,\n    opacity: element.getInlineOpacity() };\n\n  var dims = element.getDimensions();\n  var moveX, moveY;\n\n  switch (options.direction) {\n    case 'top-left':\n      moveX = moveY = 0;\n      break;\n    case 'top-right':\n      moveX = dims.width;\n      moveY = 0;\n      break;\n    case 'bottom-left':\n      moveX = 0;\n      moveY = dims.height;\n      break;\n    case 'bottom-right':\n      moveX = dims.width;\n      moveY = dims.height;\n      break;\n    case 'center':\n      moveX = dims.width / 2;\n      moveY = dims.height / 2;\n      break;\n  }\n\n  return new Effect.Parallel(\n    [ new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0, transition: options.opacityTransition }),\n      new Effect.Scale(element, window.opera ? 1 : 0, { sync: true, transition: options.scaleTransition, restoreAfterFinish: true}),\n      new Effect.Move(element, { x: moveX, y: moveY, sync: true, transition: options.moveTransition })\n    ], Object.extend({\n         beforeStartInternal: function(effect) {\n           effect.effects[0].element.makePositioned().makeClipping();\n         },\n         afterFinishInternal: function(effect) {\n           effect.effects[0].element.hide().undoClipping().undoPositioned().setStyle(oldStyle); }\n       }, options)\n  );\n};\n\nEffect.Pulsate = function(element) {\n  element = $(element);\n  var options    = arguments[1] || { },\n    oldOpacity = element.getInlineOpacity(),\n    transition = options.transition || Effect.Transitions.linear,\n    reverser   = function(pos){\n      return 1 - transition((-Math.cos((pos*(options.pulses||5)*2)*Math.PI)/2) + .5);\n    };\n\n  return new Effect.Opacity(element,\n    Object.extend(Object.extend({  duration: 2.0, from: 0,\n      afterFinishInternal: function(effect) { effect.element.setStyle({opacity: oldOpacity}); }\n    }, options), {transition: reverser}));\n};\n\nEffect.Fold = function(element) {\n  element = $(element);\n  var oldStyle = {\n    top: element.style.top,\n    left: element.style.left,\n    width: element.style.width,\n    height: element.style.height };\n  element.makeClipping();\n  return new Effect.Scale(element, 5, Object.extend({\n    scaleContent: false,\n    scaleX: false,\n    afterFinishInternal: function(effect) {\n    new Effect.Scale(element, 1, {\n      scaleContent: false,\n      scaleY: false,\n      afterFinishInternal: function(effect) {\n        effect.element.hide().undoClipping().setStyle(oldStyle);\n      } });\n  }}, arguments[1] || { }));\n};\n\nEffect.Morph = Class.create(Effect.Base, {\n  initialize: function(element) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    var options = Object.extend({\n      style: { }\n    }, arguments[1] || { });\n\n    if (!Object.isString(options.style)) this.style = $H(options.style);\n    else {\n      if (options.style.include(':'))\n        this.style = options.style.parseStyle();\n      else {\n        this.element.addClassName(options.style);\n        this.style = $H(this.element.getStyles());\n        this.element.removeClassName(options.style);\n        var css = this.element.getStyles();\n        this.style = this.style.reject(function(style) {\n          return style.value == css[style.key];\n        });\n        options.afterFinishInternal = function(effect) {\n          effect.element.addClassName(effect.options.style);\n          effect.transforms.each(function(transform) {\n            effect.element.style[transform.style] = '';\n          });\n        };\n      }\n    }\n    this.start(options);\n  },\n\n  setup: function(){\n    function parseColor(color){\n      if (!color || ['rgba(0, 0, 0, 0)','transparent'].include(color)) color = '#ffffff';\n      color = color.parseColor();\n      return $R(0,2).map(function(i){\n        return parseInt( color.slice(i*2+1,i*2+3), 16 );\n      });\n    }\n    this.transforms = this.style.map(function(pair){\n      var property = pair[0], value = pair[1], unit = null;\n\n      if (value.parseColor('#zzzzzz') != '#zzzzzz') {\n        value = value.parseColor();\n        unit  = 'color';\n      } else if (property == 'opacity') {\n        value = parseFloat(value);\n        if (Prototype.Browser.IE && (!this.element.currentStyle.hasLayout))\n          this.element.setStyle({zoom: 1});\n      } else if (Element.CSS_LENGTH.test(value)) {\n          var components = value.match(/^([\\+\\-]?[0-9\\.]+)(.*)$/);\n          value = parseFloat(components[1]);\n          unit = (components.length == 3) ? components[2] : null;\n      }\n\n      var originalValue = this.element.getStyle(property);\n      return {\n        style: property.camelize(),\n        originalValue: unit=='color' ? parseColor(originalValue) : parseFloat(originalValue || 0),\n        targetValue: unit=='color' ? parseColor(value) : value,\n        unit: unit\n      };\n    }.bind(this)).reject(function(transform){\n      return (\n        (transform.originalValue == transform.targetValue) ||\n        (\n          transform.unit != 'color' &&\n          (isNaN(transform.originalValue) || isNaN(transform.targetValue))\n        )\n      );\n    });\n  },\n  update: function(position) {\n    var style = { }, transform, i = this.transforms.length;\n    while(i--)\n      style[(transform = this.transforms[i]).style] =\n        transform.unit=='color' ? '#'+\n          (Math.round(transform.originalValue[0]+\n            (transform.targetValue[0]-transform.originalValue[0])*position)).toColorPart() +\n          (Math.round(transform.originalValue[1]+\n            (transform.targetValue[1]-transform.originalValue[1])*position)).toColorPart() +\n          (Math.round(transform.originalValue[2]+\n            (transform.targetValue[2]-transform.originalValue[2])*position)).toColorPart() :\n        (transform.originalValue +\n          (transform.targetValue - transform.originalValue) * position).toFixed(3) +\n            (transform.unit === null ? '' : transform.unit);\n    this.element.setStyle(style, true);\n  }\n});\n\nEffect.Transform = Class.create({\n  initialize: function(tracks){\n    this.tracks  = [];\n    this.options = arguments[1] || { };\n    this.addTracks(tracks);\n  },\n  addTracks: function(tracks){\n    tracks.each(function(track){\n      track = $H(track);\n      var data = track.values().first();\n      this.tracks.push($H({\n        ids:     track.keys().first(),\n        effect:  Effect.Morph,\n        options: { style: data }\n      }));\n    }.bind(this));\n    return this;\n  },\n  play: function(){\n    return new Effect.Parallel(\n      this.tracks.map(function(track){\n        var ids = track.get('ids'), effect = track.get('effect'), options = track.get('options');\n        var elements = [$(ids) || $$(ids)].flatten();\n        return elements.map(function(e){ return new effect(e, Object.extend({ sync:true }, options)) });\n      }).flatten(),\n      this.options\n    );\n  }\n});\n\nElement.CSS_PROPERTIES = $w(\n  'backgroundColor backgroundPosition borderBottomColor borderBottomStyle ' +\n  'borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth ' +\n  'borderRightColor borderRightStyle borderRightWidth borderSpacing ' +\n  'borderTopColor borderTopStyle borderTopWidth bottom clip color ' +\n  'fontSize fontWeight height left letterSpacing lineHeight ' +\n  'marginBottom marginLeft marginRight marginTop markerOffset maxHeight '+\n  'maxWidth minHeight minWidth opacity outlineColor outlineOffset ' +\n  'outlineWidth paddingBottom paddingLeft paddingRight paddingTop ' +\n  'right textIndent top width wordSpacing zIndex');\n\nElement.CSS_LENGTH = /^(([\\+\\-]?[0-9\\.]+)(em|ex|px|in|cm|mm|pt|pc|\\%))|0$/;\n\nString.__parseStyleElement = document.createElement('div');\nString.prototype.parseStyle = function(){\n  // #7 Jasper: escape XSS\n  var _escapeXSS = function (s) {\n      if (typeof $.escapeXSS === 'undefined')\n          throw new Error('$.escapeXSS must be defined in order to use this version of Scriptaculous.Builder.');\n      return $.escapeXSS(s);\n  };\n  // End #7 Jasper: escape XSS\n\n  var style, styleRules = $H();\n  if (Prototype.Browser.WebKit)\n    style = new Element('div',{style:this}).style;\n  else {\n      // #7 Jasper: escape XSS\n    String.__parseStyleElement.innerHTML = _escapeXSS('<div style=\"' + this + '\"></div>');\n      // End #7 Jasper: escape XSS\n    style = String.__parseStyleElement.childNodes[0].style;\n  }\n\n  Element.CSS_PROPERTIES.each(function(property){\n    if (style[property]) styleRules.set(property, style[property]);\n  });\n\n  if (Prototype.Browser.IE && this.include('opacity'))\n    styleRules.set('opacity', this.match(/opacity:\\s*((?:0|1)?(?:\\.\\d*)?)/)[1]);\n\n  return styleRules;\n};\n\nif (document.defaultView && document.defaultView.getComputedStyle) {\n  Element.getStyles = function(element) {\n    var css = document.defaultView.getComputedStyle($(element), null);\n    return Element.CSS_PROPERTIES.inject({ }, function(styles, property) {\n      styles[property] = css[property];\n      return styles;\n    });\n  };\n} else {\n  Element.getStyles = function(element) {\n    element = $(element);\n    var css = element.currentStyle, styles;\n    styles = Element.CSS_PROPERTIES.inject({ }, function(results, property) {\n      results[property] = css[property];\n      return results;\n    });\n    if (!styles.opacity) styles.opacity = element.getOpacity();\n    return styles;\n  };\n}\n\nEffect.Methods = {\n  morph: function(element, style) {\n    element = $(element);\n    new Effect.Morph(element, Object.extend({ style: style }, arguments[2] || { }));\n    return element;\n  },\n  visualEffect: function(element, effect, options) {\n    element = $(element);\n    var s = effect.dasherize().camelize(), klass = s.charAt(0).toUpperCase() + s.substring(1);\n    new Effect[klass](element, options);\n    return element;\n  },\n  highlight: function(element, options) {\n    element = $(element);\n    new Effect.Highlight(element, options);\n    return element;\n  }\n};\n\n$w('fade appear grow shrink fold blindUp blindDown slideUp slideDown '+\n  'pulsate shake puff squish switchOff dropOut').each(\n  function(effect) {\n    Effect.Methods[effect] = function(element, options){\n      element = $(element);\n      Effect[effect.charAt(0).toUpperCase() + effect.substring(1)](element, options);\n      return element;\n    };\n  }\n);\n\n$w('getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles').each(\n  function(f) { Effect.Methods[f] = Element[f]; }\n);\n\nElement.addMethods(Effect.Methods);","// Copyright (c) 2005-2010 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)\n//\n// script.aculo.us is freely distributable under the terms of an MIT-style license.\n// For details, see the script.aculo.us web site: http://script.aculo.us/\n\n\n///////////////////////////////////////////////////////////////////////\n//Jaspersoft/Tibco Updates (look for comment: JASPERSOFT #x)\n///////////////////////////////////////////////////////////////////////\n// #7 Jasper: escape XSS before outputting on the page\n///////////////////////////////////////////////////////////////////////\n\n(function (global, $) {\n    // #7 Jasper: escape XSS\n    function _escapeXSS(s) {\n        if (typeof $.escapeXSS === 'undefined')\n            throw new Error('$.escapeXSS must be defined in order to use this version of Scriptaculous.Builder.');\n        return $.escapeXSS(s);\n    }\n    // END #7 Jasper: escape XSS\n\n    var Builder = {\n        NODEMAP: {\n            AREA: 'map',\n            CAPTION: 'table',\n            COL: 'table',\n            COLGROUP: 'table',\n            LEGEND: 'fieldset',\n            OPTGROUP: 'select',\n            OPTION: 'select',\n            PARAM: 'object',\n            TBODY: 'table',\n            TD: 'table',\n            TFOOT: 'table',\n            TH: 'table',\n            THEAD: 'table',\n            TR: 'table'\n        },\n\n        // note: For Firefox < 1.5, OPTION and OPTGROUP tags are currently broken,\n        //       due to a Firefox bug\n        node: function(elementName) {\n            elementName = elementName.toUpperCase();\n\n            // try innerHTML approach\n            var parentTag = this.NODEMAP[elementName] || 'div';\n            var parentElement = document.createElement(parentTag);\n            try { // prevent IE \"feature\": http://dev.rubyonrails.org/ticket/2707\n                // #7 Jasper: escape XSS\n                parentElement.innerHTML = _escapeXSS(\"<\" + elementName + \"></\" + elementName + \">\");\n                // END #7 Jasper: escape XSS\n            } catch(e) {}\n            var element = parentElement.firstChild || null;\n\n            // see if browser added wrapping tags\n            if(element && (element.tagName.toUpperCase() != elementName))\n                element = element.getElementsByTagName(elementName)[0];\n\n            // fallback to createElement approach\n            if(!element) element = document.createElement(elementName);\n\n            // abort if nothing could be created\n            if(!element) return;\n\n            // attributes (or text)\n            if(arguments[1])\n                if(this._isStringOrNumber(arguments[1]) ||\n                    (arguments[1] instanceof Array) ||\n                    arguments[1].tagName) {\n                    this._children(element, arguments[1]);\n                } else {\n                    var attrs = this._attributes(arguments[1]);\n                    if(attrs.length) {\n                        try { // prevent IE \"feature\": http://dev.rubyonrails.org/ticket/2707\n                            // #7 Jasper: escape XSS\n                            parentElement.innerHTML = _escapeXSS(\"<\" +elementName + \" \" +\n                                attrs + \"></\" + elementName + \">\");\n                            // END #7 Jasper: escape XSS\n                        } catch(e) {}\n                        element = parentElement.firstChild || null;\n                        // workaround firefox 1.0.X bug\n                        if(!element) {\n                            element = document.createElement(elementName);\n                            for(attr in arguments[1])\n                                element[attr == 'class' ? 'className' : attr] = arguments[1][attr];\n                        }\n                        if(element.tagName.toUpperCase() != elementName)\n                            element = parentElement.getElementsByTagName(elementName)[0];\n                    }\n                }\n\n            // text, or array of children\n            if(arguments[2])\n                this._children(element, arguments[2]);\n\n            return $(element);\n        },\n        _text: function(text) {\n            return document.createTextNode(text);\n        },\n\n        ATTR_MAP: {\n            'className': 'class',\n            'htmlFor': 'for'\n        },\n\n        _attributes: function(attributes) {\n            var attrs = [];\n            for(attribute in attributes)\n                attrs.push((attribute in this.ATTR_MAP ? this.ATTR_MAP[attribute] : attribute) +\n                    '=\"' + attributes[attribute].toString().escapeHTML().gsub(/\"/,'&quot;') + '\"');\n            return attrs.join(\" \");\n        },\n        _children: function(element, children) {\n            if(children.tagName) {\n                element.appendChild(children);\n                return;\n            }\n            if(typeof children=='object') { // array can hold nodes and text\n                children.flatten().each( function(e) {\n                    if(typeof e=='object')\n                        element.appendChild(e);\n                    else\n                    if(Builder._isStringOrNumber(e))\n                        element.appendChild(Builder._text(e));\n                });\n            } else\n            if(Builder._isStringOrNumber(children))\n                element.appendChild(Builder._text(children));\n        },\n        _isStringOrNumber: function(param) {\n            return(typeof param=='string' || typeof param=='number');\n        },\n        build: function(html) {\n            var element = this.node('div');\n            $(element).update(html.strip());\n            return element.down();\n        },\n        dump: function(scope) {\n            if(typeof scope != 'object' && typeof scope != 'function') scope = window; //global scope\n\n            var tags = (\"A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO BIG BLOCKQUOTE BODY \" +\n                \"BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV DL DT EM FIELDSET \" +\n                \"FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG INPUT INS ISINDEX \"+\n                \"KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL OPTGROUP OPTION P \"+\n                \"PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB SUP TABLE TBODY TD \"+\n                \"TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR\").split(/\\s+/);\n\n            tags.each( function(tag){\n                scope[tag] = function() {\n                    return Builder.node.apply(Builder, [tag].concat($A(arguments)));\n                };\n            });\n        }\n    };\n\n    global.Builder = Builder;\n})(this, $);","// script.aculo.us dragdrop.js v1.9.0, Thu Dec 23 16:54:48 -0500 2010\n\n// Copyright (c) 2005-2010 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)\n//\n// script.aculo.us is freely distributable under the terms of an MIT-style license.\n// For details, see the script.aculo.us web site: http://script.aculo.us/\n\n\n///////////////////////////////////////////////////////////////////////\n//Jaspersoft Updates (look for comment: JASPERSOFT #x)\n///////////////////////////////////////////////////////////////////////\n// #1 3/27/10 Fire \"drag:mousedown\" after Event.stop() in initDrag\n// #2 9/22/10 Fixed bug with drag for % positioned elements\n// #3 9/23/10 By default do not fade on drag\n// #4 10/31/10 Allow drag tolerance\n// #5 05/05/11 Allow custom hovering and onDrop event handling for Sortables\n// #6 04/03/12 Allow drag observer remove by ID when DOM element was obsolete\n// #7 11/26/20 JS-60321: Added ability to override SortableObserver\n///////////////////////////////////////////////////////////////////////\n\nif(Object.isUndefined(Effect))\n    throw(\"dragdrop.js requires including script.aculo.us' effects.js library\");\n\nvar Droppables = {\n    drops: [],\n\n    remove: function(element) {\n        this.drops = this.drops.reject(function(d) { return d.element==$(element) });\n    },\n\n    add: function(element) {\n        element = $(element);\n        var options = Object.extend({\n            greedy:     true,\n            hoverclass: null,\n            tree:       false\n        }, arguments[1] || { });\n\n        // cache containers\n        if(options.containment) {\n            options._containers = [];\n            var containment = options.containment;\n            if(Object.isArray(containment)) {\n                containment.each( function(c) { options._containers.push($(c)) });\n            } else {\n                options._containers.push($(containment));\n            }\n        }\n\n        if(options.accept) options.accept = [options.accept].flatten();\n\n        Element.makePositioned(element); // fix IE\n        options.element = element;\n\n        this.drops.push(options);\n    },\n\n    findDeepestChild: function(drops) {\n        deepest = drops[0];\n\n        for (i = 1; i < drops.length; ++i)\n            if (Element.isParent(drops[i].element, deepest.element))\n                deepest = drops[i];\n\n        return deepest;\n    },\n\n    isContained: function(element, drop) {\n        var containmentNode;\n        if(drop.tree) {\n            containmentNode = element.treeNode;\n        } else {\n            containmentNode = element.parentNode;\n        }\n        return drop._containers.detect(function(c) { return containmentNode == c });\n    },\n\n    isAffected: function(point, element, drop) {\n        return (\n            (drop.element!=element) &&\n                ((!drop._containers) ||\n                    this.isContained(element, drop)) &&\n                ((!drop.accept) ||\n                    (Element.classNames(element).detect(\n                        function(v) { return drop.accept.include(v) } ) )) &&\n                Position.within(drop.element, point[0], point[1]) );\n    },\n\n    deactivate: function(drop) {\n        if(drop.hoverclass)\n            Element.removeClassName(drop.element, drop.hoverclass);\n        this.last_active = null;\n    },\n\n    activate: function(drop) {\n        if(drop.hoverclass)\n            Element.addClassName(drop.element, drop.hoverclass);\n        this.last_active = drop;\n    },\n\n    show: function(point, element) {\n        if(!this.drops.length) return;\n        var drop, affected = [];\n\n        this.drops.each( function(drop) {\n            if(Droppables.isAffected(point, element, drop))\n                affected.push(drop);\n        });\n\n        if(affected.length>0)\n            drop = Droppables.findDeepestChild(affected);\n\n        if(this.last_active && this.last_active != drop) this.deactivate(this.last_active);\n        if (drop) {\n            Position.within(drop.element, point[0], point[1]);\n            if(drop.onHover)\n                drop.onHover(element, drop.element, Position.overlap(drop.overlap, drop.element));\n\n            if (drop != this.last_active) Droppables.activate(drop);\n        }\n    },\n\n    fire: function(event, element) {\n        if(!this.last_active) return;\n        var pointer;\n        Position.prepare();\n\n        if(Draggables.supportsTouch) {\n            pointer = Draggables._lastPointer;\n        } else {\n            pointer = [Event.pointerX(event), Event.pointerY(event)];\n        }\n        if (this.isAffected(pointer, element, this.last_active))\n            if (this.last_active.onDrop) {\n                this.last_active.onDrop(element, this.last_active.element, event);\n                return true;\n            }\n    },\n\n    reset: function() {\n        this.last_active && this.deactivate(this.last_active);\n    }\n};\n\nvar Draggables = {\n    //JASPERSOFT #4 - see comment block top of page for more info\n    DEFAULT_TOLERANCE: Prototype.BrowserFeatures.SupportsTouch ? 2 : 1,\n    //END JASPERSOFT #4\n    drags: [],\n    observers: [],\n    supportsTouch: Prototype.BrowserFeatures.SupportsTouch,\n\n    register: function(draggable) {\n        if(this.drags.length == 0) {\n\n            this.eventMouseUp   = this.endDrag.bindAsEventListener(this);\n            this.eventMouseMove = this.updateDrag.bindAsEventListener(this);\n            this.eventKeypress  = this.keyPress.bindAsEventListener(this);\n\n            if (Draggables.supportsTouch) {\n                Event.observe(document, \"touchend\", this.eventMouseUp);\n                Event.observe(document, \"touchmove\", this.eventMouseMove);\n            } else {\n                Event.observe(document, \"mouseup\", this.eventMouseUp);\n                //Event.observe(document, \"mousemove\", this.eventMouseMove);\n            }\n            Event.observe(document, \"keypress\", this.eventKeypress);\n        }\n        this.drags.push(draggable);\n    },\n\n    unregister: function(draggable) {\n        this.drags = this.drags.reject(function(d) { return d==draggable });\n        if(this.drags.length == 0) {\n            if(Draggables.supportsTouch) {\n                Event.stopObserving(document, \"touchend\", this.eventMouseUp);\n                Event.stopObserving(document, \"touchmove\", this.eventMouseMove);\n            } else {\n                Event.stopObserving(document, \"mouseup\", this.eventMouseUp);\n                //Event.stopObserving(document, \"mousemove\", this.eventMouseMove);\n            }\n            Event.stopObserving(document, \"keypress\", this.eventKeypress);\n        }\n    },\n\n    activate: function(draggable) {\n        if(!Draggables.supportsTouch) {\n            Event.observe(document, \"mousemove\", this.eventMouseMove);\n        }\n        if(draggable.options.delay) {\n            this._timeout = setTimeout(function() {\n                Draggables._timeout = null;\n                window.focus();\n                Draggables.activeDraggable = draggable;\n            }.bind(this), draggable.options.delay);\n        } else {\n            window.focus(); // allows keypress events if window isn't currently focused, fails for Safari\n            this.activeDraggable = draggable;\n        }\n    },\n\n    deactivate: function() {\n        if(!Draggables.supportsTouch) {\n            Event.stopObserving(document, \"mousemove\", this.eventMouseMove);\n        }\n        this.activeDraggable = null;\n    },\n\n    updateDrag: function(event) {\n        if(!this.activeDraggable) return;\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        // Mozilla-based browsers fire successive mousemove events with\n        // the same coordinates, prevent needless redrawing (moz bug?)\n        if (this.pointerInRadius(pointer)) return;\n        this._lastPointer = pointer;\n        this.activeDraggable.updateDrag(event, pointer);\n    },\n\n    pointerInRadius: function(pointer, radius) {\n        radius = radius || 2;\n        return this._lastPointer && Math.abs(this._lastPointer[0] - pointer[0]) <= radius && Math.abs(this._lastPointer[1] - pointer[1]) <= radius;\n    },\n\n    endDrag: function(event) {\n        if(this._timeout) {\n            clearTimeout(this._timeout);\n            this._timeout = null;\n        }\n        if(!this.activeDraggable) return;\n        if(!Draggables.supportsTouch) {\n            this._lastPointer = null;\n        }\n        this.activeDraggable.endDrag(event);\n        this.activeDraggable = null;\n    },\n\n    keyPress: function(event) {\n        if(this.activeDraggable)\n            this.activeDraggable.keyPress(event);\n    },\n\n    addObserver: function(observer) {\n        this.observers.push(observer);\n        this._cacheObserverCallbacks();\n    },\n\n    removeObserver: function(element) {  // element instead of observer fixes mem leaks\n        this.observers = this.observers.reject( function(o) {\n            return o.element==element ||\n                //JASPERSOFT #6 - see comment block top of page for more info\n                (o.element && element && o.element.id == element.id);\n            //END JASPERSOFT #6\n        });\n        this._cacheObserverCallbacks();\n    },\n\n    notify: function(eventName, draggable, event) {  // 'onStart', 'onEnd', 'onDrag'\n        if(this[eventName+'Count'] > 0)\n            this.observers.each( function(o) {\n                if(o[eventName]) o[eventName](eventName, draggable, event);\n            });\n        if(draggable.options[eventName]) draggable.options[eventName](draggable, event);\n    },\n\n    _cacheObserverCallbacks: function() {\n        ['onStart','onEnd','onDrag'].each( function(eventName) {\n            Draggables[eventName+'Count'] = Draggables.observers.select(\n                function(o) { return o[eventName]; }\n            ).length;\n        });\n    }\n};\n\n/*--------------------------------------------------------------------------*/\n\nvar Draggable = Class.create({\n    initialize: function(element) {\n        var defaults = {\n            handle: false,\n            reverteffect: function(element, top_offset, left_offset) {\n                var dur = Math.sqrt(Math.abs(top_offset^2)+Math.abs(left_offset^2))*0.02;\n                new Effect.Move(element, { x: -left_offset, y: -top_offset, duration: dur,\n                    queue: {scope:'_draggable', position:'end'}\n                });\n            },\n            endeffect: function(element) {\n                //JASPERSOFT #3 - see comment block top of page for more info\n//        var toOpacity = Object.isNumber(element._opacity) ? element._opacity : 1.0;\n//        new Effect.Opacity(element, {duration:0.2, from:0.7, to:toOpacity,\n//          queue: {scope:'_draggable', position:'end'},\n//          afterFinish: function(){\n//            Draggable._dragging[element] = false\n//          }\n//        });\n                //END JASPERSOFT #3\n                Draggable._dragging[element] = false;\n            },\n            zindex: 1000,\n            revert: false,\n            quiet: false,\n            scroll: false,\n            scrollSensitivity: 20,\n            scrollSpeed: 15,\n            snap: false,  // false, or xy or [x,y] or function(x,y){ return [x,y] }\n            delay: 0\n        };\n\n        if(!arguments[1] || Object.isUndefined(arguments[1].endeffect))\n            Object.extend(defaults, {\n                starteffect: function(element) {\n                    element._opacity = Element.getOpacity(element);\n                    Draggable._dragging[element] = true;\n                    //JASPERSOFT #3 - see comment block top of page for more info\n                    //new Effect.Opacity(element, {duration:0.2, from:element._opacity, to:0.7});\n                    //END JASPERSOFT #3\n                }\n            });\n\n        var options = Object.extend(defaults, arguments[1] || { });\n\n        this.element = $(element);\n\n        if(options.handle && Object.isString(options.handle))\n            this.handle = this.element.down('.'+options.handle, 0);\n\n        if(!this.handle) this.handle = $(options.handle);\n        if(!this.handle) this.handle = this.element;\n\n        if(options.scroll && !options.scroll.scrollTo && !options.scroll.outerHTML) {\n            options.scroll = $(options.scroll);\n            this._isScrollChild = Element.childOf(this.element, options.scroll);\n        }\n\n        Element.makePositioned(this.element); // fix IE\n\n        this.options  = options;\n        this.dragging = false;\n\n        this.eventMouseDown = this.initDrag.bindAsEventListener(this);\n        if(Draggables.supportsTouch) {\n            Event.observe(this.handle, \"touchstart\", this.eventMouseDown);\n        } else {\n            Event.observe(this.handle, \"mousedown\", this.eventMouseDown);\n        }\n\n        Draggables.register(this);\n    },\n\n    destroy: function() {\n        if(Draggables.supportsTouch) {\n            Event.stopObserving(this.handle, \"touchstart\", this.eventMouseDown);\n        } else {\n            Event.stopObserving(this.handle, \"mousedown\", this.eventMouseDown);\n        }\n        Draggables.unregister(this);\n    },\n\n    currentDelta: function() {\n\n        //JASPERSOFT #2 - see comment block top of page for more info\n        var leftStyle = Element.getStyle(this.element,'left') || \"\";\n        var topStyle = Element.getStyle(this.element,'top') || \"\";\n        if (leftStyle.include('%')) {\n            leftStyle = (this.element.parentNode.getWidth() * parseInt(leftStyle))/100;\n        }\n        if (topStyle.include('%')) {\n            topStyle = (this.element.parentNode.getHeight() * parseInt(topStyle))/100;\n        }\n        return([\n            parseInt(leftStyle) || '0',\n            parseInt(topStyle) || '0']);\n        //END JASPERSOFT #2\n\n//    return([\n//      parseInt(Element.getStyle(this.element,'left') || '0'),\n//      parseInt(Element.getStyle(this.element,'top') || '0')]);\n    },\n\n    initDrag: function(event) {\n        if(!Object.isUndefined(Draggable._dragging[this.element]) &&\n            Draggable._dragging[this.element]) return;\n        if(Event.isLeftClick(event) || (Draggables.supportsTouch && event.touches && event.touches.length == 1)) {\n            // abort on form elements, fixes a Firefox issue\n            var src = Event.element(event);\n            if((tag_name = src.tagName.toUpperCase()) && (\n                tag_name=='INPUT' ||\n                    tag_name=='SELECT' ||\n                    tag_name=='OPTION' ||\n                    tag_name=='BUTTON' ||\n                    tag_name=='TEXTAREA')) return;\n\n            var pointer = [Event.pointerX(event), Event.pointerY(event)];\n            var pos     = this.element.cumulativeOffset();\n            this.offset = [0,1].map( function(i) { return (pointer[i] - pos[i]) });\n\n            Draggables.activate(this);\n            //JASPERSOFT #4 - see comment block top of page for more info\n            this.countdown = Draggables.DEFAULT_TOLERANCE; //in future can also read custom value from draggable\n            //END JASPERSOFT #4\n            Event.stop(event);\n            //JASPERSOFT #1 - see comment block top of page for more info\n            !Draggables.supportsTouch\n                ? this.handle.fire('drag:mousedown', {targetEvent: event})\n                : this.handle.fire('drag:' + event.type, {targetEvent: event});\n            //END JASPERSOFT #1\n        }\n    },\n\n    startDrag: function(event) {\n        this.dragging = true;\n        if(!this.delta)\n            this.delta = this.currentDelta();\n\n        if(this.options.zindex) {\n            this.originalZ = parseInt(Element.getStyle(this.element,'z-index') || 0);\n            this.element.style.zIndex = this.options.zindex;\n        }\n        if(this.options.ghosting) {\n            this._clone = this.element.cloneNode(true);\n            this._originallyAbsolute = (this.element.getStyle('position') == 'absolute');\n            if (!this._originallyAbsolute) {\n                Position.absolutize(this.element);\n            }\n            this.element.parentNode.insertBefore(this._clone, this.element);\n            if (this.element.parentNode.tagName===\"TR\") {\n                document.body.appendChild(this.element);\n            }\n        }\n\n        if(this.options.scroll) {\n            if (this.options.scroll == window) {\n                var where = this._getWindowScroll(this.options.scroll);\n                this.originalScrollLeft = where.left;\n                this.originalScrollTop = where.top;\n            } else {\n                this.originalScrollLeft = this.options.scroll.scrollLeft;\n                this.originalScrollTop = this.options.scroll.scrollTop;\n            }\n        }\n\n        Draggables.notify('onStart', this, event);\n\n        if(this.options.starteffect) this.options.starteffect(this.element);\n    },\n\n    updateDrag: function(event, pointer) {\n        if (!this.dragging) {\n            //JASPERSOFT #4 - see comment block top of page for more info\n            if (Draggables.supportsTouch) {\n                if (!isIE7() && this.countdown && this.countdown--) {\n                    return;\n                } else {\n                    this.startDrag(event);\n                }\n            } else {\n                if (this.countdown && this.countdown--) {\n                    return;\n                } else {\n                    this.startDrag(event);\n                }\n            }\n            //if(!this.dragging) this.startDrag(event);\n            //END JASPERSOFT #4\n        }\n\n        if(Draggables.supportsTouch && event.touches.length > 1) {\n            this.endDrag(event);\n        }\n\n        if(!this.options.quiet){\n            Position.prepare();\n            Droppables.show(pointer, this.element);\n        }\n\n        Draggables.notify('onDrag', this, event);\n\n        this.draw(pointer);\n        if(this.options.change) this.options.change(this);\n\n        if(this.options.scroll) {\n            this.stopScrolling();\n\n            var p;\n            if (this.options.scroll == window) {\n                with(this._getWindowScroll(this.options.scroll)) { p = [ left, top, left+width, top+height ]; }\n            } else {\n                p = Position.page(this.options.scroll).toArray();\n                p[0] += this.options.scroll.scrollLeft + Position.deltaX;\n                p[1] += this.options.scroll.scrollTop + Position.deltaY;\n                p.push(p[0]+this.options.scroll.offsetWidth);\n                p.push(p[1]+this.options.scroll.offsetHeight);\n            }\n            var speed = [0,0];\n            if(pointer[0] < (p[0]+this.options.scrollSensitivity)) speed[0] = pointer[0]-(p[0]+this.options.scrollSensitivity);\n            if(pointer[1] < (p[1]+this.options.scrollSensitivity)) speed[1] = pointer[1]-(p[1]+this.options.scrollSensitivity);\n            if(pointer[0] > (p[2]-this.options.scrollSensitivity)) speed[0] = pointer[0]-(p[2]-this.options.scrollSensitivity);\n            if(pointer[1] > (p[3]-this.options.scrollSensitivity)) speed[1] = pointer[1]-(p[3]-this.options.scrollSensitivity);\n            this.startScrolling(speed);\n        }\n\n        // fix AppleWebKit rendering\n        if(Prototype.Browser.WebKit) window.scrollBy(0,0);\n\n        Event.stop(event);\n    },\n\n    finishDrag: function(event, success) {\n        this.dragging = false;\n\n        if(this.options.quiet){\n            Position.prepare();\n            var pointer = [Event.pointerX(event), Event.pointerY(event)];\n            Droppables.show(pointer, this.element);\n        }\n\n        if(this.options.ghosting) {\n            if (!this._originallyAbsolute) {\n                Position.relativize(this.element);\n                if (this._clone.parentNode.tagName === \"TR\") {\n                    this._clone.parentNode.insertBefore(this.element, this._clone);\n                }\n            }\n            delete this._originallyAbsolute;\n            Element.remove(this._clone);\n            this._clone = null;\n        }\n\n        var dropped = false;\n        if(success) {\n            dropped = Droppables.fire(event, this.element);\n            if (!dropped) {\n                dropped = false;\n            } else if (Draggables.supportsTouch) {\n                Draggables._lastPointer = null;\n            }\n        }\n        if(dropped && this.options.onDropped) this.options.onDropped(this.element);\n        Draggables.notify('onEnd', this, event);\n\n        var revert = this.options.revert;\n        if(revert && Object.isFunction(revert)) revert = revert(this.element);\n\n        var d = this.currentDelta();\n        if(revert && this.options.reverteffect) {\n            if (dropped == 0 || revert != 'failure')\n                this.options.reverteffect(this.element,\n                    d[1]-this.delta[1], d[0]-this.delta[0]);\n        } else {\n            this.delta = d;\n        }\n\n        if(this.options.zindex)\n            this.element.style.zIndex = this.originalZ;\n\n        if(this.options.endeffect)\n            this.options.endeffect(this.element);\n\n        Draggables.deactivate(this);\n        Droppables.reset();\n    },\n\n    keyPress: function(event) {\n        if(event.keyCode!=Event.KEY_ESC) return;\n        this.finishDrag(event, false);\n        Event.stop(event);\n    },\n\n    endDrag: function(event) {\n        if(!this.dragging) return;\n        this.stopScrolling();\n        this.finishDrag(event, true);\n        Event.stop(event);\n    },\n\n    draw: function(point) {\n        var pos = this.element.cumulativeOffset();\n        if(this.options.ghosting) {\n            var r   = Position.realOffset(this.element);\n            pos[0] += r[0] - Position.deltaX; pos[1] += r[1] - Position.deltaY;\n        }\n\n        var d = this.currentDelta();\n        pos[0] -= d[0]; pos[1] -= d[1];\n\n        if(this.options.scroll && (this.options.scroll != window && this._isScrollChild)) {\n            pos[0] -= this.options.scroll.scrollLeft-this.originalScrollLeft;\n            pos[1] -= this.options.scroll.scrollTop-this.originalScrollTop;\n        }\n\n        var p = [0,1].map(function(i){\n            return (point[i]-pos[i]-this.offset[i])\n        }.bind(this));\n\n        if(this.options.snap) {\n            if(Object.isFunction(this.options.snap)) {\n                p = this.options.snap(p[0],p[1],this);\n            } else {\n                if(Object.isArray(this.options.snap)) {\n                    p = p.map( function(v, i) {\n                        return (v/this.options.snap[i]).round()*this.options.snap[i] }.bind(this));\n                } else {\n                    p = p.map( function(v) {\n                        return (v/this.options.snap).round()*this.options.snap }.bind(this));\n                }\n            }}\n\n        var style = this.element.style;\n        if((!this.options.constraint) || (this.options.constraint=='horizontal'))\n            style.left = p[0] + \"px\";\n        if((!this.options.constraint) || (this.options.constraint=='vertical'))\n            style.top  = p[1] + \"px\";\n\n        if(style.visibility==\"hidden\") style.visibility = \"\"; // fix gecko rendering\n    },\n\n    stopScrolling: function() {\n        if(this.scrollInterval) {\n            clearInterval(this.scrollInterval);\n            this.scrollInterval = null;\n            Draggables._lastScrollPointer = null;\n        }\n    },\n\n    startScrolling: function(speed) {\n        if(!(speed[0] || speed[1])) return;\n        this.scrollSpeed = [speed[0]*this.options.scrollSpeed,speed[1]*this.options.scrollSpeed];\n        this.lastScrolled = new Date();\n        this.scrollInterval = setInterval(this.scroll.bind(this), 10);\n    },\n\n    scroll: function() {\n        var current = new Date();\n        var delta = current - this.lastScrolled;\n        this.lastScrolled = current;\n        if(this.options.scroll == window) {\n            with (this._getWindowScroll(this.options.scroll)) {\n                if (this.scrollSpeed[0] || this.scrollSpeed[1]) {\n                    var d = delta / 1000;\n                    this.options.scroll.scrollTo( left + d*this.scrollSpeed[0], top + d*this.scrollSpeed[1] );\n                }\n            }\n        } else {\n            this.options.scroll.scrollLeft += this.scrollSpeed[0] * delta / 1000;\n            this.options.scroll.scrollTop  += this.scrollSpeed[1] * delta / 1000;\n        }\n\n        Position.prepare();\n        Droppables.show(Draggables._lastPointer, this.element);\n        Draggables.notify('onDrag', this);\n        if (this._isScrollChild) {\n            Draggables._lastScrollPointer = Draggables._lastScrollPointer || $A(Draggables._lastPointer);\n            Draggables._lastScrollPointer[0] += this.scrollSpeed[0] * delta / 1000;\n            Draggables._lastScrollPointer[1] += this.scrollSpeed[1] * delta / 1000;\n            if (Draggables._lastScrollPointer[0] < 0)\n                Draggables._lastScrollPointer[0] = 0;\n            if (Draggables._lastScrollPointer[1] < 0)\n                Draggables._lastScrollPointer[1] = 0;\n            this.draw(Draggables._lastScrollPointer);\n        }\n\n        if(this.options.change) this.options.change(this);\n    },\n\n    _getWindowScroll: function(w) {\n        var T, L, W, H;\n        with (w.document) {\n            if (w.document.documentElement && documentElement.scrollTop) {\n                T = documentElement.scrollTop;\n                L = documentElement.scrollLeft;\n            } else if (w.document.body) {\n                T = body.scrollTop;\n                L = body.scrollLeft;\n            }\n            if (w.innerWidth) {\n                W = w.innerWidth;\n                H = w.innerHeight;\n            } else if (w.document.documentElement && documentElement.clientWidth) {\n                W = documentElement.clientWidth;\n                H = documentElement.clientHeight;\n            } else {\n                W = body.offsetWidth;\n                H = body.offsetHeight;\n            }\n        }\n        return { top: T, left: L, width: W, height: H };\n    }\n});\n\nDraggable._dragging = { };\n\n/*--------------------------------------------------------------------------*/\n\nvar SortableObserver = Class.create({\n    initialize: function(element, observer) {\n        this.element   = $(element);\n        this.observer  = observer;\n        this.lastValue = Sortable.serialize(this.element);\n    },\n\n    onStart: function() {\n        this.lastValue = Sortable.serialize(this.element);\n    },\n\n    onEnd: function() {\n        Sortable.unmark();\n        if(this.lastValue != Sortable.serialize(this.element))\n            this.observer(this.element)\n    }\n});\n\nvar Sortable = {\n    SERIALIZE_RULE: /^[^_\\-](?:[A-Za-z0-9\\-\\_]*)[_](.*)$/,\n\n    sortables: { },\n\n    _findRootElement: function(element) {\n        while (element.tagName.toUpperCase() != \"BODY\") {\n            if(element.id && Sortable.sortables[element.id]) return element;\n            element = element.parentNode;\n        }\n    },\n\n    options: function(element) {\n        element = Sortable._findRootElement($(element));\n        if(!element) return;\n        return Sortable.sortables[element.id];\n    },\n\n    destroy: function(element){\n        element = $(element);\n        var s = Sortable.sortables[element.id];\n\n        if(s) {\n            Draggables.removeObserver(s.element);\n            s.droppables.each(function(d){ Droppables.remove(d) });\n            s.draggables.invoke('destroy');\n\n            delete Sortable.sortables[s.element.id];\n        }\n    },\n\n    //JASPERSOFT #7 - see comment block top of page for more info\n    getSortableObserverConstructor: function () {\n        return SortableObserver;\n    },\n    //END JASPERSOFT #7\n\n    create: function(element) {\n        element = $(element);\n        var options = Object.extend({\n            element:     element,\n            tag:         'li',       // assumes li children, override with tag: 'tagname'\n            dropOnEmpty: false,\n            accept:      [],\n            tree:        false,\n            treeTag:     'ul',\n            overlap:     'vertical', // one of 'vertical', 'horizontal'\n            constraint:  'vertical', // one of 'vertical', 'horizontal', false\n            containment: element,    // also takes array of elements (or id's); or false\n            handle:      false,      // or a CSS class\n            only:        false,\n            delay:       0,\n            hoverclass:  null,\n            ghosting:    false,\n            quiet:       false,\n            scroll:      false,\n            scrollSensitivity: 20,\n            scrollSpeed: 15,\n            format:      this.SERIALIZE_RULE,\n\n            // these take arrays of elements or ids and can be\n            // used for better initialization performance\n            elements:    false,\n            handles:     false,\n\n            //JASPERSOFT #5 - see comment block top of page for more info\n            onDrop:      Prototype.emptyFunction,\n            onHover:     Sortable.onHover,\n            //END JASPERSOFT #5\n            onChange:    Prototype.emptyFunction,\n            onUpdate:    Prototype.emptyFunction\n        }, arguments[1] || { });\n\n        // clear any old sortable with same element\n        this.destroy(element);\n\n        // build options for the draggables\n        var options_for_draggable = {\n            revert:      true,\n            quiet:       options.quiet,\n            scroll:      options.scroll,\n            scrollSpeed: options.scrollSpeed,\n            scrollSensitivity: options.scrollSensitivity,\n            delay:       options.delay,\n            ghosting:    options.ghosting,\n            constraint:  options.constraint,\n            onStart:     options.onStart,\n            handle:      options.handle };\n\n        if(options.starteffect)\n            options_for_draggable.starteffect = options.starteffect;\n\n        if(options.reverteffect)\n            options_for_draggable.reverteffect = options.reverteffect;\n        else\n        if(options.ghosting) options_for_draggable.reverteffect = function(element) {\n            element.style.top  = 0;\n            element.style.left = 0;\n        };\n\n        if(options.endeffect)\n            options_for_draggable.endeffect = options.endeffect;\n\n        if(options.zindex)\n            options_for_draggable.zindex = options.zindex;\n\n        // build options for the droppables\n        var options_for_droppable = {\n            overlap:     options.overlap,\n            containment: options.containment,\n            tree:        options.tree,\n            hoverclass:  options.hoverclass,\n            //JASPERSOFT #5 - see comment block top of page for more info\n            onHover:     options.onHover,\n            onDrop:      options.onDrop\n            //END JASPERSOFT #5\n        };\n\n        var options_for_tree = {\n            onHover:      options.onEmptyHover || Sortable.onEmptyHover,\n            overlap:      options.overlap,\n            containment:  options.containment,\n            hoverclass:   options.hoverclass,\n            accept:       options.accept,\n            //JASPERSOFT #5 - see comment block top of page for more info\n            onDrop: options.onDrop\n            //END JASPERSOFT #5\n        };\n\n        // fix for gecko engine\n        Element.cleanWhitespace(element);\n\n        options.draggables = [];\n        options.droppables = [];\n\n        // drop on empty handling\n        if(options.dropOnEmpty || options.tree) {\n            Droppables.add(element, options_for_tree);\n            options.droppables.push(element);\n        }\n\n        (options.elements || this.findElements(element, options) || []).each( function(e,i) {\n            var handle = options.handles ? $(options.handles[i]) :\n                (options.handle ? $(e).select('.' + options.handle)[0] : e);\n            options.draggables.push(\n                new Draggable(e, Object.extend(options_for_draggable, { handle: handle })));\n            Droppables.add(e, options_for_droppable);\n            if(options.tree) e.treeNode = element;\n            options.droppables.push(e);\n        });\n\n        if(options.tree) {\n            (Sortable.findTreeElements(element, options) || []).each( function(e) {\n                Droppables.add(e, options_for_tree);\n                e.treeNode = element;\n                options.droppables.push(e);\n            });\n        }\n\n        // keep reference\n        this.sortables[element.identify()] = options;\n\n        // for onupdate\n        //JASPERSOFT #7 - see comment block top of page for more info\n        var SortableObserver = Sortable.getSortableObserverConstructor();\n        //END JASPERSOFT #7\n        Draggables.addObserver(new SortableObserver(element, options.onUpdate));\n\n    },\n\n    // return all suitable-for-sortable elements in a guaranteed order\n    findElements: function(element, options) {\n        return Element.findChildren(\n            element, options.only, options.tree ? true : false, options.tag);\n    },\n\n    findTreeElements: function(element, options) {\n        return Element.findChildren(\n            element, options.only, options.tree ? true : false, options.treeTag);\n    },\n\n    onHover: function(element, dropon, overlap) {\n        var oldParentNode = null, sortable = null;\n        if(Element.isParent(dropon, element)) return;\n\n        if(overlap > .33 && overlap < .66 && Sortable.options(dropon).tree) {\n            return;\n        } else if(overlap>0.5) {\n            Sortable.mark(dropon, 'before');\n            if(dropon.previousSibling != element) {\n                oldParentNode = element.parentNode;\n                element.style.visibility = \"hidden\"; // fix gecko rendering\n                dropon.parentNode.insertBefore(element, dropon);\n                if(dropon.parentNode!=oldParentNode) {\n                    sortable = Sortable.options(oldParentNode);\n                    sortable && sortable.onChange(element);\n                }\n                Sortable.options(dropon.parentNode).onChange(element);\n            }\n        } else {\n            Sortable.mark(dropon, 'after');\n            var nextElement = dropon.nextSibling || null;\n            if(nextElement != element) {\n                oldParentNode = element.parentNode;\n                element.style.visibility = \"hidden\"; // fix gecko rendering\n                dropon.parentNode.insertBefore(element, nextElement);\n                if(dropon.parentNode!=oldParentNode) {\n                    sortable = Sortable.options(oldParentNode);\n                    sortable && sortable.onChange(element);\n                }\n                Sortable.options(dropon.parentNode).onChange(element);\n            }\n        }\n    },\n\n    onEmptyHover: function(element, dropon, overlap) {\n        var oldParentNode = element.parentNode;\n        var droponOptions = Sortable.options(dropon);\n\n        if (!Element.isParent(dropon, element)) {\n            var index;\n\n            var children = Sortable.findElements(dropon, {tag:droponOptions.tag, only:droponOptions.only});\n            var child = null;\n\n            if (children) {\n                var offsetSize = null, childOffset;\n                var offset = Element.offsetSize(dropon, droponOptions.overlap) * (1.0 - overlap);\n\n                for (index = 0; index < children.length; index += 1) {\n                    offsetSize = Element.offsetSize(children[index], droponOptions.overlap);\n                    childOffset = children[index].cumulativeOffset().top; // TODO: optimize not to use cumulativeOffset() method\n                    // Skipping all items that not in our row\n                    if (!(Position.ycomp >= childOffset &&\n                        Position.ycomp < childOffset + children[index].offsetHeight)) {\n                        continue;\n                    }\n                    if (offset - offsetSize >= 0) {\n                        offset -= offsetSize;\n                    } else if (offset - (offsetSize / 2) >= 0) {\n                        child = index + 1 < children.length ? children[index + 1] : null;\n                        break;\n                    } else {\n                        child = children[index];\n                        break;\n                    }\n                }\n            }\n\n            dropon.insertBefore(element, child);\n\n            //JASPERSOFT #5 - see comment block top of page for more info\n            var sourceSortable = Sortable.options(oldParentNode);\n            sourceSortable && sourceSortable.onChange(element);\n            //END JASPERSOFT #5\n\n            droponOptions.onChange(element);\n        }\n    },\n\n    unmark: function() {\n        if(Sortable._marker) Sortable._marker.hide();\n    },\n\n    mark: function(dropon, position) {\n        // mark on ghosting only\n        var sortable = Sortable.options(dropon.parentNode);\n        if(sortable && !sortable.ghosting) return;\n\n        if(!Sortable._marker) {\n            Sortable._marker =\n                ($('dropmarker') || Element.extend(document.createElement('DIV'))).\n                    hide().addClassName('dropmarker').setStyle({position:'absolute'});\n            document.getElementsByTagName(\"body\").item(0).appendChild(Sortable._marker);\n        }\n        var offsets = dropon.cumulativeOffset();\n        Sortable._marker.setStyle({left: offsets[0]+'px', top: offsets[1] + 'px'});\n\n        if(position=='after')\n            if(sortable.overlap == 'horizontal')\n                Sortable._marker.setStyle({left: (offsets[0]+dropon.clientWidth) + 'px'});\n            else\n                Sortable._marker.setStyle({top: (offsets[1]+dropon.clientHeight) + 'px'});\n\n        Sortable._marker.show();\n    },\n\n    _tree: function(element, options, parent) {\n        var children = Sortable.findElements(element, options) || [];\n\n        for (var i = 0; i < children.length; ++i) {\n            var match = children[i].id.match(options.format);\n\n            if (!match) continue;\n\n            var child = {\n                id: encodeURIComponent(match ? match[1] : null),\n                element: element,\n                parent: parent,\n                children: [],\n                position: parent.children.length,\n                container: $(children[i]).down(options.treeTag)\n            };\n\n            /* Get the element containing the children and recurse over it */\n            if (child.container)\n                this._tree(child.container, options, child);\n\n            parent.children.push (child);\n        }\n\n        return parent;\n    },\n\n    tree: function(element) {\n        element = $(element);\n        var sortableOptions = this.options(element);\n        var options = Object.extend({\n            tag: sortableOptions.tag,\n            treeTag: sortableOptions.treeTag,\n            only: sortableOptions.only,\n            name: element.id,\n            format: sortableOptions.format\n        }, arguments[1] || { });\n\n        var root = {\n            id: null,\n            parent: null,\n            children: [],\n            container: element,\n            position: 0\n        };\n\n        return Sortable._tree(element, options, root);\n    },\n\n    /* Construct a [i] index for a particular node */\n    _constructIndex: function(node) {\n        var index = '';\n        do {\n            if (node.id) index = '[' + node.position + ']' + index;\n        } while ((node = node.parent) != null);\n        return index;\n    },\n\n    sequence: function(element) {\n        element = $(element);\n        var options = Object.extend(this.options(element), arguments[1] || { });\n\n        return $(this.findElements(element, options) || []).map( function(item) {\n            return item.id.match(options.format) ? item.id.match(options.format)[1] : '';\n        });\n    },\n\n    setSequence: function(element, new_sequence) {\n        element = $(element);\n        var options = Object.extend(this.options(element), arguments[2] || { });\n\n        var nodeMap = { };\n        this.findElements(element, options).each( function(n) {\n            if (n.id.match(options.format))\n                nodeMap[n.id.match(options.format)[1]] = [n, n.parentNode];\n            n.parentNode.removeChild(n);\n        });\n\n        new_sequence.each(function(ident) {\n            var n = nodeMap[ident];\n            if (n) {\n                n[1].appendChild(n[0]);\n                delete nodeMap[ident];\n            }\n        });\n    },\n\n    serialize: function(element) {\n        element = $(element);\n        var options = Object.extend(Sortable.options(element), arguments[1] || { });\n        var name = encodeURIComponent(\n            (arguments[1] && arguments[1].name) ? arguments[1].name : element.id);\n\n        if (options.tree) {\n            return Sortable.tree(element, arguments[1]).children.map( function (item) {\n                return [name + Sortable._constructIndex(item) + \"[id]=\" +\n                    encodeURIComponent(item.id)].concat(item.children.map(arguments.callee));\n            }).flatten().join('&');\n        } else {\n            return Sortable.sequence(element, arguments[1]).map( function(item) {\n                return name + \"[]=\" + encodeURIComponent(item);\n            }).join('&');\n        }\n    }\n};\n\n// Returns true if child is contained within element\nElement.isParent = function(child, element) {\n    if (!child.parentNode || child == element) return false;\n    if (child.parentNode == element) return true;\n    return Element.isParent(child.parentNode, element);\n};\n\nElement.findChildren = function(element, only, recursive, tagName) {\n    if(!element.hasChildNodes()) return null;\n    tagName = tagName.toUpperCase();\n    if(only) only = [only].flatten();\n    var elements = [];\n    $A(element.childNodes).each( function(e) {\n        if(e.tagName && e.tagName.toUpperCase()==tagName &&\n            (!only || (Element.classNames(e).detect(function(v) { return only.include(v) }))))\n            elements.push(e);\n        if(recursive) {\n            var grandchildren = Element.findChildren(e, only, recursive, tagName);\n            if(grandchildren) elements.push(grandchildren);\n        }\n    });\n\n    return (elements.length>0 ? elements.flatten() : []);\n};\n\nElement.offsetSize = function (element, type) {\n    return element['offset' + ((type=='vertical' || type=='height') ? 'Height' : 'Width')];\n};\n"],"sourceRoot":""}