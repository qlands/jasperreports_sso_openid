(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[3975],{40574:(e,t,o)=>{"use strict";o.d(t,{Z:()=>_});var i=o(72157),n=o.n(i),r=o(64155),s=o(43852),a=o(7923);a.Z.initialize=function(e){a.Z.actionMap=e,n()(".toolbar").on("mouseup mouseover mouseout","button",(function(e){n()(this).prop("disabled")||a.Z["mouse"+e.type.substring(5,6).toUpperCase()+e.type.substring(6)+"Handler"](e,this)})),(0,r.vU$)()&&n()(".toolbar li").each((function(e,t){n()(t).css("padding","0 2px")}))},a.Z.mouseUpHandler=function(e,t){var o=t.className.indexOf("capsule")>=0?a.Z.actionMap[t.id]:null;o&&((0,r.qO$)(o)(e),e.stopPropagation())},a.Z.mouseOverHandler=function(e,t){t.className.indexOf("capsule")>=0&&t.className.indexOf("mutton")>=0&&!s.Z.isDisabled(t)&&a.Z.showButtonMenu(e.originalEvent,t)},a.Z.mouseOutHandler=function(e,t){};const _=a.Z},7923:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var i=o(72157),n=o.n(i),r=o(72086),s=o(43852);const a={UP:"up",DOWN:"down",OVER:"over",DISABLED:"disabled",PRESSED:"pressed",CONTENT_PREFIX:"toolbar_",MenuClass:"menu vertical dropDown",TOOLBAR_MENU_CLASS:"menu vertical dropDown fitable",ACTION_MODEL_TAG:"adhocActionModel",CAPSULE_PATTERN:"capsule",showButtonMenu:function(e,t){t=n()(t);var o=this.CONTENT_PREFIX+t.attr("id"),i="adhocActionModel"==this.ACTION_MODEL_TAG?this.actionModel:this.ACTION_MODEL_TAG;r.Z.showDropDownMenu(e,t,o,this.TOOLBAR_MENU_CLASS,i)},setActionModel:function(e){this.actionModel=e},isToolBarButton:function(e){return!!e&&n()(e).hasClass("capsule")},enable:function(e,t){s.Z.enable(e)},disable:function(e){s.Z.disable(e)},setButtonState:function(e,t){t?this.enable(e):this.disable(e)}}},82681:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var dragdropextra__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(72861),prototype__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52499),_components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9231),_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40574),_util_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(64155),_core_core_layout__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(51516),_components_list_base__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(56461),_util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(45186),_components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84581),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(43852),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(72335),_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(236),_core_core_ajax_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(11129),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(70692),js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(84612),jquery__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(72157),jquery__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_15__);function RegExpRepresenter(e){this.charMap={"\\s":" "},this.expressionTokens=this.__parse(e)}Object.assign(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z,{TREE_ID:"orgTree",COOKIE_NAME:"selectedTenant",messages:[],ActionMap:{SEARCH:"search",BROWSE:"browse",NEXT:"next",SELECT_AND_GET_DETAILS:"selectAndGetDetails",SEARCH_AVAILABLE:"searchAvailable",SEARCH_ASSIGNED:"searchAssigned",NEXT_AVAILABLE:"nextAvailable",NEXT_ASSIGNED:"nextAssigned",CREATE:"create",UPDATE:"update",DELETE:"delete",DELETE_ALL:"deleteAll",EXIST:"exist"},Event:{ORG_BROWSE:"org:browse",ENTITY_SEARCH:"entity:search",ENTITY_NEXT:"entity:next",ENTITY_SELECT_AND_GET_DETAILS:"entity:selectAndGetDetails",RESULT_CHANGED:"result:changed",RESULT_NEXT:"result:next",ENTITY_DETAILS_LOADED:"entity:detailsLoaded",SEARCH_AVAILABLE_LOADED:"searchAvailable:loaded",SEARCH_ASSIGNED_LOADED:"searchAssigned:loaded",NEXT_AVAILABLE_LOADED:"nextAvailable:loaded",NEXT_ASSIGNED_LOADED:"nextAssigned:loaded",SERVER_ERROR:"server:error",SERVER_UNAVAILABLE:"server:unavailable",ENTITY_CREATED:"entity:created",ENTITY_UPDATED:"entity:updated",ENTITY_DELETED:"entity:deleted",ENTITIES_DELETED:"entities:deleted"},observe:function(e,t){this._getContainer().observe(e,t)},stopObserving:function(e,t){this._getContainer().stopObserving(e,t)},fire:function(e,t){this._getContainer().fire(e,t)},getMessage:function(e,t){var o=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.messages[e];return o?new prototype__WEBPACK_IMPORTED_MODULE_1__.Template(o).evaluate(t||{}):""},_comparator:function(e,t){return e>t?1:e<t?-1:0},_getContainer:function(){return this._container||(this._container=document.body),this._container},Configuration:{nameSeparator:"|",userDefaultRole:"ROLE_USER",userNameNotSupportedSymbols:"[|]",roleNameNotSupportedSymbols:"[|]",emailRegExpPattern:"^[\\p{L}\\p{M}\\p{N}._%'-\\@\\,\\;\\s]+$",superuserRole:"ROLE_SUPERUSER",adminRole:"ROLE_ADMINISTRATOR",anonymousRole:"ROLE_ANONYMOUS"}}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.systemRoles=[_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userDefaultRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.superuserRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.adminRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.anonymousRole],_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization=function(e){if(!e)throw new Error("Can't create Organization from undefined json or node");e.param?(this.id=e.param.id,this.name=e.name,this.uri=e.param.uri,this.treeNode=e):(this.id=e.tenantId||e.id,this.name=e.tenantName,this.alias=e.tenantAlias||e.alias||"",this.desc=e.tenantDesc,this.uri=e.tenantUri,this.parentId=e.parentId,this.subTenantCount=e.subTenantCount)},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("isRoot",(function(e){return"organizations"==this.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("getNameWithTenant",(function(){return this.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("getDisplayName",(function(){return this.name})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("equals",(function(e){return e&&this.id==e.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("toJSON",(function(e){return{tenantId:this.id,tenantName:this.name,tenantAlias:this.alias,tenantDesc:this.desc,parentId:this.parentId,tenantUri:this.uri}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.organization),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({tenantId:this.id}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission=function(e){this.isInherited=!!e.isInherited,e.permission&&(this.permission=e.permission),e.inheritedPermission&&(this.inheritedPermission=e.inheritedPermission),this.isDisabled=!!e.isDisabled},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("getResolvedPermission",(function(){return this.isInherited?this.inheritedPermission:this.permission})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("toJSON",(function(){return{permission:this.permission,isInherited:this.isInherited,inheritedPermission:this.inheritedPermission,newPermission:this.newPermission}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("toData",(function(){return{permission:this.permission,isInherited:this.isInherited,inheritedPermission:this.inheritedPermission,newPermission:this.newPermission}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User=function(e){e&&(this.userName=e.userName,this.fullName=e.fullName,this.password=e.password||"",this.confirmPassword=e.confirmPassword||"",this.tenantId=e.tenantId,this.email=e.email,this.enabled=e.enabled,this.external=e.external,this.roles=[],e.roles&&e.roles.each(function(e){this.roles.push(new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role(e))}.bind(this)),e.permissionToDisplay&&(this.permission=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission(e.permissionToDisplay)))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addVar("FLOW_ID","userListFlow"),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getDisplayName",(function(){return this.userName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getNameWithTenant",(function(){return this.tenantId&&!this.tenantId.blank()?this.userName+_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userNameSeparator+this.tenantId:this.userName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getManagerURL",(function(){return"flow.html?"+Object.toQueryString({_flowId:this.FLOW_ID,text:void 0!==this.userName?encodeURIComponent(this.userName):this.userName,tenantId:void 0!==this.tenantId?encodeURIComponent(this.tenantId):this.tenantId})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.user),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({text:this.userName,tenantId:this.tenantId}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("equals",(function(e){return e&&this.userName==e.userName&&this.tenantId==e.tenantId})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("toPermissionData",(function(e){return{userName:this.userName,tenantId:this.tenantId,permissionToDisplay:this.permission.toData()}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role=function(e){e&&(this.roleName=e.roleName,this.external=e.external,this.tenantId=e.tenantId),e.permissionToDisplay&&(this.permission=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission(e.permissionToDisplay))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addVar("FLOW_ID","roleListFlow"),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getDisplayName",(function(){return this.roleName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getNameWithTenant",(function(){return this.tenantId&&!this.tenantId.blank()?this.roleName+_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userNameSeparator+this.tenantId:this.roleName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getManagerURL",(function(){return"flow.html?"+Object.toQueryString({_flowId:this.FLOW_ID,text:void 0!==this.roleName?encodeURIComponent(this.roleName):this.roleName,tenantId:void 0!==this.tenantId?encodeURIComponent(this.tenantId):this.tenantId})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.role),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({text:this.roleName,tenantId:this.tenantId}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("equals",(function(e){return e&&this.roleName==e.roleName&&this.tenantId==e.tenantId})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("toPermissionData",(function(e){return{roleName:this.roleName,tenantId:this.tenantId,permissionToDisplay:this.permission.toData()}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.initTenantsTreeEvents=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.on("selection:change",(function(e){if(!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.lastSelectedOrg||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.lastSelectedOrg.id!==e.id){var t=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization(e),o=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.setTenant(t),window.localStorage&&localStorage.setItem(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.COOKIE_NAME,JSON.stringify(e)),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ORG_BROWSE,{organization:t,entityEvent:!1}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager&&(o.changeDisable(!1,["#"+o._EDIT_BUTTON_ID]),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:t.id,entityEvent:!1})),(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.roleManager)&&(o.hide(),o.unlock())}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.on("import:finished",(function(e){var t=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ORG_BROWSE,{force:!0,entityEvent:!1}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager&&(t.changeDisable(!1,["#"+t._EDIT_BUTTON_ID]),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{refreshAttributes:!0,entityId:e,entityEvent:!1}))}))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.entityList={ID_PATTERN:".ID > a",_listId:"entitiesList",_containerId:"listContainer",_searchBoxId:"secondarySearchBox",initialize:function(e){this.list=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._listId,{listTemplateDomId:e.listTemplateId,itemTemplateDomId:e.itemTemplateId,multiSelect:!0,selectionDefaultsToCursor:!0,comparator:function(e,t){return _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z._comparator(e.getLabel(),t.getLabel())}}),this._initEvents(),this._infiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:this._containerId,contentId:this._listId}),this._searchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:this._searchBoxId}),e.text&&this._searchBox.setText(e.text),this._infiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_NEXT,{})},this._searchBox.onSearch=function(e){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SEARCH,{text:e})},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar.initialize(e.toolbarModel),this.toolbar=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar,this.list.show()},_initEvents:function(){this.list.observe("item:selected",function(e){var t=e.memo.item,o=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;this.lastSelectedName=t.getValue().getNameWithTenant(),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:t.getValue().id,entityEvent:!0}),o.changeDisable(!1,["#"+o._EDIT_BUTTON_ID])}.bindAsEventListener(this)),this.list.observe("item:unselected",function(e){var t=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree,o=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;o.changeDisable(!1,["#"+o._EDIT_BUTTON_ID]),!o.locked&&t?_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:t.getTenant().id,entityEvent:!0,isCtrlHeld:e.memo.isCtrlHeld}):(o.hide(),this.toolbar.refresh())}.bindAsEventListener(this)),this.list.observe("item:beforeSelectOrUnselect",function(e){var t=e.memo.item;e.stopSelectOrUnselect=!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeClientAction("cancelIfEdit",{entity:t.getValue(),showConfirm:e.memo.showConfirm})}.bindAsEventListener(this))},_createEntityItem:function(e){var t=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem({label:e.getDisplayName(),value:e}),o=this;return t.processTemplate=function(e){return e.select(o.ID_PATTERN)[0].update(js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(this.getValue().getDisplayName())),e},t},getSearchText:function(){return this._searchBox.getText()},setSearchText:function(e){return this._searchBox.setText(e)},getSelectedEntities:function(){return this.list?this.list.getSelectedItems().collect((function(e){return e.getValue()})):[]},setEntities:function(e){var t=e.collect(this._createEntityItem.bind(this));this._infiniteScroll.reset(),this.list.setItems(t),this.list.show(),this.toolbar.refresh()},findEntity:function(e){var t=this.list.getItems();return(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties.options||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager.options)._.find(t,(function(t){return t.getValue().fullName===e}))},addEntities:function(e){var t=e.collect(this._createEntityItem.bind(this));this.list.addItems(t),this.list.refresh(),this.toolbar.refresh()},selectEntity:function(e){var t=this.list.getItems().detect((function(t){return t.getValue().getNameWithTenant()==e}));t&&(t.isSelected()&&t.deselect(),t.select(),this.lastSelectedName=t.getValue().getNameWithTenant())},restoreSelectedEntity:function(e){this.selectEntity(this.lastSelectedName?this.lastSelectedName:e)},deselectAll:function(){this.list.resetSelected()},update:function(e,t){this.list.getItems().findAll((function(t){return t.getValue().getNameWithTenant()==e})).each((function(e){e.setValue(t),e.refresh()}))},remove:function(e){var t,o=this.list.getItems();t=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.kJL)(e)?o.findAll((function(t){return e.include(t.getValue().getNameWithTenant())})):o.findAll((function(t){return t.getValue().getNameWithTenant()==e})),this.list.resetSelected(),this.list.removeItems(t)}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties={_EDIT_MODE_CLASS:"editMode",_moveButtonsId:"moveButtons",_id:"properties",_value:null,isEditMode:!1,_NOTHING_TO_DISPLAY_ID:"nothingToDisplay",_ASSIGNED_VIEW_ID:"assignedView",_ASSIGNED_VIEW_LIST_ID:"assignedViewList",_ASSIGNED_ID:"assigned",_AVAILABLE_ID:"available",_ASSIGNED_LIST_ID:"assignedList",_AVAILABLE_LIST_ID:"availableList",_ATTRIBUTES_LIST_ID:"attributesTab",_EDIT_BUTTON_ID:"edit",_SAVE_BUTTON_ID:"save",_CANCEL_BUTTON_ID:"cancel",_DELETE_BUTTON_ID:"delete",_REMOVE_FROM_ASSIGNED_BUTTON_ID:"removeFromAssigned",_ADD_TO_ASSIGNED_BUTTON_ID:"addToAssigned",_BUTTONS_CONTAINER_ID:"propertiesButtons",_MOVE_BUTTONS_CONTAINER_ID:"moveButtons",_DND_CLASS:".draggable",_DROP_CLASS:"wrap",buttonsFunctions:{},initialize:function(e){var t=e.attributesTypesEnum;if(this.options=e,this.locked=!1,this.hide(),this.processTemplate(e),this._toggleButton(),e.attributes){var o=!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager&&_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager?t.TENANT:t.USER,i=e.attributesViewOptionsFactory,n=e.scrollEventTrait,r=e.AttributesViewFacade;this.options._.extend(this,n),this.attributesFacade=new r(i({context:e.attributes.context,container:jquery__WEBPACK_IMPORTED_MODULE_15___default()("#attributesTab"),type:o}))}this.options.showAssigned&&this.initDnD(),this.initEvents(),this.initButtonsFunctions(),this.options.ConfirmationDialog&&this._initConfirmationDialog()},_initConfirmationDialog:function(){var e=this,t=this.options.i18n;this.confirmationDialog=new this.options.ConfirmationDialog({title:t["attributes.confirm.dialog.title"],text:t["attributes.confirm.cancel.dialog.text"]}),this.confirmationDialog.on("button:yes",(function(){e.cancelOnEdit()}))},_toggleButton:function(){var e=this.isChanged();this.attributesFacade&&this.attributesFacade.containsUnsavedItems()||e?this.saveButton.removeAttribute("disabled"):this.saveButton.removeClassName("over").setAttribute("disabled","disabled")},show:function(e,t){if(!this.locked){if(this.attributesFacade){var o=this,i=e&&e.isRoot&&e.isRoot(),n=i?this.options._.extend({},e,{id:null}):e;this.attributesFacade.getCurrentView().setContext(n,t).done((function(){o.attributesFacade.render(i)}))}(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._NOTHING_TO_DISPLAY_ID).addClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.HIDDEN_CLASS),document.body.removeClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.NOTHING_TO_DISPLAY_CLASS),this._value=e,this.changeMode(!1)}},hide:function(){if(!this.locked){var e=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._NOTHING_TO_DISPLAY_ID);e.removeClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.HIDDEN_CLASS),(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.wyW)(e,{horz:!0,vert:!0}),document.body.addClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.NOTHING_TO_DISPLAY_CLASS),this._value=null,this.changeMode(!1)}},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setDetailsLoadedEntity:function(e){this.detailsLoadedEntity=e},getDetailsLoadedEntity:function(){return this.detailsLoadedEntity},processTemplate:function(e){if(this.editButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._EDIT_BUTTON_ID),this.saveButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._SAVE_BUTTON_ID),this.cancelButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._CANCEL_BUTTON_ID),this.deleteButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._DELETE_BUTTON_ID),this.options.showAssigned){this.removeFromAssigned=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._REMOVE_FROM_ASSIGNED_BUTTON_ID),this.addToAssigned=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ADD_TO_ASSIGNED_BUTTON_ID),this.assignedViewList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._ASSIGNED_VIEW_LIST_ID,{listTemplateDomId:e.viewAssignedListTemplateDomId,itemTemplateDomId:e.viewAssignedItemTemplateDomId,comparator:this.assignedComparator,allowSelections:!1,selectionDefaultsToCursor:!1});var t={listTemplateDomId:"list_responsive_collapsible_fields",itemTemplateDomId:"list_responsive_collapsible_fields:fields",comparator:this.assignedComparator,dragPattern:this._DND_CLASS,allowSelections:!0,selectionDefaultsToCursor:!0,multiSelect:!0,selectOnMousedown:!0,setCursorOnMouseDown:!0};this.assignedList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._ASSIGNED_LIST_ID,Object.extend({},t,{allowSelections:!1,selectionDefaultsToCursor:!1})),this.availableList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._AVAILABLE_LIST_ID,t),e.searchAssigned&&(this.assignedViewSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_VIEW_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.assignedViewSearchBox.onSearch=function(e){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:e})}),this.availableSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.availableSearchBox.onSearch=function(e){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_AVAILABLE,{text:e})},this.assignedSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.assignedSearchBox.onSearch=function(e){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:e})},e.searchAssigned&&(this.assignedViewInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_VIEW_LIST_ID).parentNode).identify(),contentId:this._ASSIGNED_VIEW_LIST_ID}),this.assignedViewInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_ASSIGNED,{})}),this.availableInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_LIST_ID).parentNode).identify(),contentId:this._AVAILABLE_LIST_ID}),this.availableInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_AVAILABLE,{})},this.assignedInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_LIST_ID).parentNode).identify(),contentId:this._ASSIGNED_LIST_ID}),this.assignedInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_ASSIGNED,{})}}},initDnD:function(){dragdropextra__WEBPACK_IMPORTED_MODULE_0__.m9.add((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_LIST_ID).up(),{accept:[this._DROP_CLASS],hoverclass:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.DROP_TARGET_CLASS,onDrop:function(e,t,o){e.items&&this._addToAssigned()}.bind(this)}),dragdropextra__WEBPACK_IMPORTED_MODULE_0__.m9.add((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_LIST_ID).up(),{accept:[this._DROP_CLASS],hoverclass:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.DROP_TARGET_CLASS,onDrop:function(e,t,o){e.items&&this._removeFromAssigned()}.bind(this)})},initEvents:function(){function e(){(this.assignedList.getSelectedItems().length>0?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable:_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable)(this.removeFromAssigned)}function t(){(this.availableList.getSelectedItems().length>0?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable:_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable)(this.addToAssigned)}(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._BUTTONS_CONTAINER_ID).observe("click",function(e){var t=e.element(),o=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.BwZ)(t,[_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.BUTTON_PATTERN],!0);o&&this.buttonsFunctions[o.identify()]&&this.buttonsFunctions[o.identify()].call(this),e.preventDefault(),e.stopPropagation()}.bindAsEventListener(this)),this.options.showAssigned&&((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._MOVE_BUTTONS_CONTAINER_ID).observe("click",function(e){var t=e.element(),o=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.BwZ)(t,[_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.BUTTON_PATTERN],!0);o&&(o==this.removeFromAssigned?this._removeFromAssigned():o==this.addToAssigned&&this._addToAssigned()),e.preventDefault(),e.stopPropagation()}.bindAsEventListener(this)),this.assignedList.observe("item:selected",e.bindAsEventListener(this)),this.assignedList.observe("item:unselected",e.bindAsEventListener(this)),this.assignedList.observe("item:dblclick",function(e){this._removeFromAssigned()}.bindAsEventListener(this)),this.availableList.observe("item:selected",t.bindAsEventListener(this)),this.availableList.observe("item:unselected",t.bindAsEventListener(this)),this.availableList.observe("item:dblclick",function(e){this._addToAssigned()}.bindAsEventListener(this))),this.attributesFacade&&this.attributesFacade.on("change",this.options._.bind(this._toggleButton,this))},initButtonsFunctions:function(){this.buttonsFunctions[this._EDIT_BUTTON_ID]=function(){this.changeMode(!0)},this.buttonsFunctions[this._SAVE_BUTTON_ID]=function(){var e=this,t=new(jquery__WEBPACK_IMPORTED_MODULE_15___default().Deferred);this.asyncValidate?this.asyncValidate().done((function(){e.attributesFacade?e.attributesFacade.getCurrentView().saveChildren().done((function(){t.resolve()})).fail((function(){t.reject(),jquery__WEBPACK_IMPORTED_MODULE_15___default()(".tab[tabid='#attributesTab']").trigger("mouseup")})):t.resolve(),t.done((function(){e.save(e._value)}))})):this.validate()&&(this.attributesFacade?this.attributesFacade.getCurrentView().saveChildren().done((function(){t.resolve()})).fail((function(){t.reject(),jquery__WEBPACK_IMPORTED_MODULE_15___default()(".tab[tabid='#attributesTab']").trigger("mouseup")})):t.resolve(),t.done((function(){e.save(e._value)})))},this.buttonsFunctions[this._CANCEL_BUTTON_ID]=function(){this.attributesFacade?this.isChanged()?this.confirmationDialog.open():this.cancelOnEdit():_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeClientAction("cancelIfEdit",{entity:this.getValue()})},this.buttonsFunctions[this._DELETE_BUTTON_ID]=function(){this._deleteEntity()},this.buttonsFunctions[this._REMOVE_FROM_ASSIGNED_BUTTON_ID]=function(){this._removeFromAssigned()},this.buttonsFunctions[this._ADD_TO_ASSIGNED_BUTTON_ID]=function(){this._addFromAssigned()}},cancelOnEdit:function(){var e=this;this.isEditMode&&this.cancel().done((function(){e.unlock(),e.changeMode(!1),e._toggleButton()}))},changeMode:function(e){var t,o,i,n;if(this.isEditMode=e,this.attributesFacade){o=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)("attributesTab");var r=!!this._value&&"organizations"===this._value.id;this.detachScrollEvent(this.attributesFacade.getCurrentView().$container.parent()),this.attributesFacade.toggleMode(e,r),e&&this.initScrollEvent(this.attributesFacade.getCurrentView()),t=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$$)(".tertiary")[0],i=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)("propertiesTab"),n=jquery__WEBPACK_IMPORTED_MODULE_15___default()(".control.tabSet.anchor")}e?((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).addClassName(this._EDIT_MODE_CLASS),t&&(t.down(".selected").removeClassName("selected"),t.down("li",0).addClassName("selected"),t.addClassName("tabbed"),o.addClassName("hidden"),i.removeClassName("hidden"),n.removeClass("attributesAnchor")),this._assigned=[],this._unassigned=[],this.options.showAssigned&&((0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.wyW)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._moveButtonsId),{horz:!0}),(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._moveButtonsId).style.zIndex=1e3,this.assignedList.setItems([]),this.assignedList.show(),this.availableList.setItems([]),this.availableList.show(),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable(this.removeFromAssigned),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable(this.addToAssigned),this.assignedSearchBox.setText(""),this.availableSearchBox.setText(""),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:this.assignedSearchBox.getText()}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_AVAILABLE,{text:this.availableSearchBox.getText()})),this._editEntity(),this._toggleButton()):((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).removeClassName(this._EDIT_MODE_CLASS),t&&(o.removeClassName("hidden"),i.removeClassName("hidden"),t.removeClassName("tabbed")),this.options.searchAssigned&&this.assignedViewSearchBox&&this.assignedViewSearchBox.setText(""),this.changeDisable(this.canEdit(),["#"+this._EDIT_BUTTON_ID]),this.changeDisable(this.canDelete(),["#"+this._DELETE_BUTTON_ID]),this._showEntity(),this._assigned=[],this._unassigned=[])},canEdit:function(){return!0},canDelete:function(){var e=this.getValue();return(!e||e.getNameWithTenant()!==this.options.currentUser)&&(!!e&&"/"!==e.uri)},setValuesProperty:function(e,t){this._value[e]=t},getValue:function(){return this._value},setProperties:function(e){},isChanged:function(e){},save:function(e){},validate:function(){return!0},assignedComparator:function(e,t){var o=e.getLabel(),i=t.getLabel();return o>i?1:o<i?-1:0},_moveEntities:function(e){var t,o,i,n;e?(t=this._unassigned,i=this.availableList,o=this._assigned,n=this.assignedList):(t=this._assigned,i=this.assignedList,o=this._unassigned,n=this.availableList);var r=i.getSelectedItems(),s=r.collect((function(e){return e.getValue()}));o=o.concat(s.collect((function(t){return t.available==e?t:null}))).compact(),t=t.reject((function(e){return s.detect((function(t){return e.equals(t)}))})),i.removeItems(r),n.addItems(r,!0),n.refresh(),e?(this._unassigned=t,this._assigned=o):(this._assigned=t,this._unassigned=o)},_addToAssigned:function(){this._moveEntities(!0)},_removeFromAssigned:function(){this._moveEntities(!1)},_entitiesToItems:function(e,t){return(e=e||[]).collect(function(e){var o="",i=[],n="orgTooltip";e instanceof _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User?(o=e.userName,e.fullName&&e.fullName.length>0&&(i=[e.fullName]),n=e.tenantId?"fullNameAndOrgTooltip":"fullNameTooltip"):e instanceof _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role&&(o=e.roleName,n=e.tenantId?"orgTooltip":void 0),e.tenantId&&e.tenantId.length>0&&i.push(e.tenantId),e.available=!!t;var r=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem({label:o,value:e});return this.isEditMode?r.processTemplate=function(e){return i.length>0&&new _components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__.p(e,{text:js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(i),templateId:n}),_components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem.prototype.processTemplate.call(this,e)}:r.processTemplate=function(e){var t=e.select("a")[0];return t.insert(js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(this.getLabel())),t.writeAttribute("href",this.getValue().getManagerURL()),i.length>0&&new _components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__.p(e,{text:js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(i),templateId:n}),e},r}.bind(this))},getAssignedEntities:function(){return this._assigned},getUnassignedEntities:function(){return this._unassigned},setAssignedEntities:function(e){this.assignedViewInfiniteScroll&&this.assignedViewInfiniteScroll.reset(),this.assignedInfiniteScroll&&this.assignedInfiniteScroll.reset();var t=this.isEditMode?this.assignedList:this.assignedViewList,o=this._filterEntities(e,this._unassigned,this._assigned,this.assignedSearchBox.getText());t.setItems(this._entitiesToItems(o)),t.refresh()},addAssignedEntities:function(e){var t=this.isEditMode?this.assignedList:this.assignedViewList,o=this._filterEntities(e,this._unassigned,this._assigned,this.assignedSearchBox.getText());t.addItems(this._entitiesToItems(o)),t.refresh()},setAvailableEntities:function(e){this.availableInfiniteScroll.reset();var t=this._filterEntities(e,this._assigned,this._unassigned,this.availableSearchBox.getText());this.availableList.setItems(this._entitiesToItems(t,!0)),this.availableList.refresh()},addAvailableEntities:function(e){var t=this._filterEntities(e,this._assigned,this._unassigned,this.availableSearchBox.getText());this.availableList.addItems(this._entitiesToItems(t,!0)),this.availableList.refresh()},_filterEntities:function(e,t,o,i){var n=e.reject((function(e){return t.detect((function(t){return t.equals(e)}))}));return i=i.toLowerCase(),n=n.concat(o.findAll((function(e){return e.getDisplayName().toLowerCase().include(i)})))},changeReadonly:function(e,t){t.each(function(t){(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(t)[0].writeAttribute(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.READONLY_ATTR_NAME,e?null:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.READONLY_ATTR_NAME)}.bind(this))},resetValidation:function(e){var t=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id);e.each(function(e){_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.n4K.hideError(t.select(e)[0])}.bind(this))},changeDisable:function(e,t){t.each(function(t){e?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(t)[0]):_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(t)[0])}.bind(this))},_deleteEntity:function(){},_editEntity:function(){},_showEntity:function(){}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.addDialog={show:function(e){},hide:function(e){}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action=function(e,t){Object.isFunction(e)&&(t=t&&Object.isFunction(t)?t:this.beforeInvoke,this.invokeAction=function(){if(t())return e.apply(this,arguments)})},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action.addMethod("invokeAction",_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action.addMethod("beforeInvoke",(function(){return!0})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction=function(e,t){this.actionURL="flow.html?_flowExecutionKey="+window.localContext.flowExecutionKey+"&_eventId="+e,this.data=Object.toQueryString(t),this.onSuccess=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY)(),this.onError=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY)()},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction.addMethod("invokeAction",(function(){this.beforeInvoke()&&(0,_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__.mc)(this.actionURL,{postData:this.data,callback:function(e){e.error?this.onError(e.error):this.onSuccess(e.data)}.bind(this),errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.SERVER_UNAVAILABLE,{}),!0):(0,_core_core_ajax_utils__WEBPACK_IMPORTED_MODULE_12__.m0)(e)},mode:_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__.w8.prototype.EVAL_JSON})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction.addMethod("beforeInvoke",(function(){return!0})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar={_actionModel:{},initialize:function(e){this._actionModel=e,_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__.Z.initialize(this._toActionMap(this._actionModel)),this.refresh()},refresh:function(){for(var e in this._actionModel){var t=this._actionModel[e].buttonId,o=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.J$4)(this._actionModel[e].test);_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__.Z.setButtonState((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(t),o())}},_toActionMap:function(e){var t={};for(var o in e){var i=e[o];t[i.buttonId]=function(e,t){return function(){var o=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.qO$)(e),i=t,n=window.localContext&&window.localContext[e];i&&(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.kJL)(i)?o.apply(n?window.localContext:null,i):o.call(n?window.localContext:null,i)}}(i.action,i.actionArgs)}return t}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createInputRegExValidator=function(e){return{validator:function(t){var o=!e.regExp.test(t),i=o?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage("unsupportedSymbols",{symbols:e.unsupportedSymbols});return e.isValid=o,{isValid:o,errorMessage:i}},element:e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createBlankValidator=function(e,t,o,i){return{validator:function(e){var o=!e.blank();return{isValid:o,errorMessage:o?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(t)}},element:e,onValid:o,onInvalid:i}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createMaxLengthValidator=function(e,t,o){return{validator:function(i){var n=e.hasAttribute("maxlength")?e.readAttribute("maxlength"):e.maxlength,r=i.length<parseInt(n),s=r?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(t);return o&&(s=s.replace(o,n)),{isValid:r,errorMessage:s}},element:e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createSameValidator=function(e,t,o){return{validator:function(e){var i=e===t.getValue();return{isValid:i,errorMessage:i?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(o)}},element:e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createRegExpValidator=function(e,t,o){return{validator:function(e){var i=o.exec(e),n=!i&&0===e.length||i&&e==i[0];return{isValid:n,errorMessage:n?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(t)}},element:e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.truncateOrgName=function(e){return e&&e.length>0?e.truncate(15):""},RegExpRepresenter.addMethod("__parse",(function(e){for(var t=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$A)(),o=1;o<e.length-1;o++){var i=e.charAt(o);"\\"==i&&(i+=e.charAt(++o)),"\\u"==i&&(i+=e.substring(++o,o+4),o+=3),t.push(i)}return t})),RegExpRepresenter.addMethod("getCharacters",(function(){var result=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$A)();return this.expressionTokens.each(function(token){if(token.startsWith("\\u"))result.push(eval('"'+token+'"'));else if(token.startsWith("\\")){var ch=this.charMap[token];result.push(ch||token.substring(1,token.length))}else result.push(token)}.bind(this)),result})),RegExpRepresenter.addMethod("getRepresentedString",(function(){for(var e="",t=this.getCharacters(),o=t.length,i=0;i<o;i++){var n=t[i];e+=" "==n||"."==n||","==n?"["+n+"]":n,i<o-1&&(e+=", ")}return e}));const __WEBPACK_DEFAULT_EXPORT__=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z},70692:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});const i={}},30123:(e,t,o)=>{"use strict";o.r(t);var i=o(52687),n=o(97836),r=o.n(n),s=o(52499),a=o(72157),_=o.n(a),c=o(64155),l=o(51516),d=o(98223),u=o(82681),h=o(43852),E=o(72086),m=o(71914),p=o(95002),f=o(84612);var g=o(18580);const R=p.Z.extend({contentTemplate:r().template("<p class='alertText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{- message }}\n</p>"),constructor:function(e){e||(e={}),p.Z.prototype.constructor.call(this,{modal:!1!==e.modal,message:e.message,additionalCssClasses:"alertDialog "+(e.additionalCssClasses||""),title:e.title||g.Z["dialog.exception.title"],buttons:[{label:g.Z["button.close"],action:"close",primary:!0}]},e)},initialize:function(e){p.Z.prototype.initialize.apply(this,arguments),this.on("button:close",this.close),this.setMessage(e.message)},setMessage:function(e){e=f.Z.softHtmlEscape(e,{whiteList:["br"]}),this.content=this.contentTemplate({message:e});var t=this.renderContent();this.$contentContainer.html(t)}});var A=o(88317);const T=p.Z.extend({constructor:function(e){e||(e={}),this.confirmDialogTemplate=e.confirmDialogTemplate||r().template("<p class='confirmationText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{ print(_.xssSoftEscape(text)) }}\n</p>"),p.Z.prototype.constructor.call(this,{modal:!0,additionalCssClasses:e.additionalCssClasses||"confirmationDialog",title:e.title||g.Z["dialog.confirm.title"],content:this.confirmDialogTemplate({text:e.text}),buttons:[{label:e.yesLabel||g.Z["button.yes"],action:"yes",primary:!0},{label:e.noLabel||g.Z["button.no"],action:"no",primary:!1}]})},initialize:function(){p.Z.prototype.initialize.apply(this,arguments),this.on("button:yes",this.close),this.on("button:no",this.close)},setContent:function(e){p.Z.prototype.setContent.call(this,this.confirmDialogTemplate({text:e}))}});const I=function(){window.onpageshow=function(){event.persisted&&window.location.reload()}};function D(e,t){var o=t||q.model.getContextFolder();q.folderActionFactory[e](o).invokeAction()}function v(e,t,o){var i=t||q.model.getSelectedResources()[0];q.resourceActionFactory[e](i,o).invokeAction()}function O(e){var t=q.model.getSelectedResources();q.bulkActionFactory[e](t).invokeAction()}var M=r().debounce((function(e,t){q.RedirectAction["create"+e].call().invokeAction(t)}),500);function C(){return q.CopyMoveController.isCopyFolder()||q.CopyMoveController.isMoveFolder()}function P(){return q.CopyMoveController.isCopyResource()||q.CopyMoveController.isMoveResource()}function S(e){return(e=e||q.model.getContextFolder())&&e.isEditable()}function L(e){return(e=e||q.model.getContextFolder())&&!e.isOrganization()&&!e.isRoot()&&!e.isOrganizationsRoot()&&e.isReadable()}function b(e){var t=e||q.model.getContextFolder();if(!(C()&&!t.isOrganizationsRoot()&&S(t)))return!1;var o=q.CopyMoveController.object;return t.URI!==o.URI}function w(e){return(e=e||q.model.getContextFolder())&&!e.isOrganization()&&!e.isRoot()&&!e.isPublic()&&!e.isTemp()&&!e.isOrganizationsRoot()&&e.isRemovable()&&!e.isActiveThemeFolder()&&!e.isThemeRootFolder()}function U(){var e=q.model.getContextFolder();return e&&e.isEditable()&&!e.isOrganization()&&!e.isOrganizationsRoot()&&!e.isRoot()}function y(e){return(e=e||q.model.getSelectedResources()[0])&&e.isReadable()}function N(e){return(e=e||q.model.getSelectedResources()[0])&&e.isRemovable()}function B(e){return(e=q.model.getSelectedResources()[0])&&e.isRemovable()}function F(){var e=q.model.getSelectedResources()[0];return e&&e.isReadable()&&!e.isEditable()}function W(e){return(e=e||q.model.getSelectedResources()[0])&&e.isEditable()}function x(){var e=q.model.getSelectedResources(),t=e.detect((function(e){return!window.canBeRun(e)}));return e.length>0&&void 0===t}function Z(){var e=q.model.getSelectedResources(),t=e.detect((function(e){return!window.canResourceBeEdited(e)}));return e.length>0&&void 0===t&&!(0,c.zcy)()}function K(){var e=q.model.getSelectedResources(),t=e.detect((function(e){return!window.canBeOpenedInDesigner(e)&&!window.canBeOpened(e)}));return e.length>0&&void 0===t}function V(){var e=q.model.getSelectedResources(),t=e.detect((function(e){return!y(e)}));return e.length>0&&void 0===t}function k(){var e=q.model.getSelectedResources(),t=e.detect((function(e){return!N(e)}));return e.length>0&&void 0===t}function H(e){if(e=e||q.model.getContextFolder(),!(P()&&!e.isOrganizationsRoot()&&S(e)))return!1;var t=q.CopyMoveController.isBulkAction()?q.CopyMoveController.object:[q.CopyMoveController.object],o=!0;(e.isThemeRootFolder()||e.isThemeFolder())&&(o=null==t.detect((function(e){return!e.resourceType.endsWith(".FileResource")})));return o}function j(){return H(q.model.getSelectedFolder())}function G(){var e=q.model.getSelectedResources(),t=e.detect((function(e){return!B(e)}));return e.length>0&&void 0===t}function z(){var e=q.model.getContextFolder();return e&&e.isThemeFolder()}function Y(){return q.dialogsPool.getAllPermissionsDialogs().detect((function(e){return e.isChanged()}))}function $(){return q.dialogsPool.getAllPropertiesDialogs().detect((function(e){return e.isChanged()}))}var q={_container:null,mode:null,isFlowRedirectRunning:!1,flowExecutionKey:"",messages:[],Mode:{SEARCH:"search",BROWSE:"browse",LIBRARY:"library"},ResourceType:{REPORT_UNIT:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.ReportUnit",ADHOC_REPORT_UNIT:"com.jaspersoft.ji.adhoc.AdhocReportUnit",OLAP_UNIT:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapUnit",DASHBOARD_RESOURCE:"com.jaspersoft.ji.adhoc.DashboardResource",DASHBOARD:"com.jaspersoft.ji.dashboard.DashboardModelResource",REPORT_OPTIONS:"com.jaspersoft.ji.report.options.metadata.ReportOptions",REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.ReportDataSource",JDBC_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.JdbcReportDataSource",JNDI_JDBC_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.JndiJdbcReportDataSource",VIRTUAL_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.VirtualReportDataSource",CUSTOM_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.CustomReportDataSource",BEAN_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.BeanReportDataSource",OLAP_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapDataSource",OLAP_CLIENT_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapClientConnection",QUERY:"com.jaspersoft.jasperserver.api.metadata.common.domain.Query",INPUT_CONTROL:"com.jaspersoft.jasperserver.api.metadata.common.domain.InputControl",LIST_OF_VALUES:"com.jaspersoft.jasperserver.api.metadata.common.domain.ListOfValues",LIST_OF_VALUES_ITEM:"com.jaspersoft.jasperserver.api.metadata.common.domain.ListOfValuesItem",DATA_TYPE:"com.jaspersoft.jasperserver.api.metadata.common.domain.DataType",MONDRIAN_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.MondrianConnection",SECURE_MONDRIAN_CONNECTION:"com.jaspersoft.ji.ja.security.domain.SecureMondrianConnection",XMLA_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.XMLAConnection",MONDRIAN_XMLA_DEFINITION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.MondrianXMLADefinition",CONTENT_RESOURCE:"com.jaspersoft.jasperserver.api.metadata.common.domain.ContentResource",FILE_RESOURCE:"com.jaspersoft.jasperserver.api.metadata.common.domain.FileResource",SEMANTIC_LAYER_DATA_SOURCE:"com.jaspersoft.commons.semantic.datasource.SemanticLayerDataSource",DATA_DEFINER_UNIT:"com.jaspersoft.commons.semantic.DataDefinerUnit"},SearchAction:{NEXT:"next",GET_RESOURCE_CHILDREN:"getResourceChildren"},Event:{SEARCH_RUN:"search:run",SEARCH_BROWSE:"search:browse",SEARCH_FILTER:"search:filter",SEARCH_SORT:"search:sort",SEARCH_NEXT:"search:next",SEARCH_ROLLBACK:"search:rollback",SEARCH_SEARCH:"search:search",SEARCH_CHILDREN:"search:children",STATE_CHANGED:"state:changed",FILTER_PATH_CHANGED:"filterPath:changed",RESULT_CHANGED:"result:changed",CHILDREN_LOADED:"resourceChildren:loaded",RESULT_NEXT:"result:next",RESULT_ERROR:"result:error",REDIRECT_ERROR:"redirect:error",FLOW_REDIRECT_RUNNING:"flowRedirect:running"},InfoAction:{GET_DISPLAY_PATH:"getDisplayPath"},PermissionAction:{BROWSE:"permissionBrowse",SEARCH:"permissionSearch",NEXT:"permissionNext",UPDATE:"permissionsUpdate"},PermissionEvent:{BROWSE:"permission:browse",SEARCH:"permission:search",NEXT:"permission:next",UPDATE:"permission:update",LOADED:"permission:loaded",UPDATED:"permission:updated",ERROR:"permission:error"},FolderAction:{CREATE:"createFolder",COPY:"copyFolder",MOVE:"moveFolder",UPDATE:"updateFolder",DELETE:"deleteFolder"},FolderEvent:{DELETED:"folder:deleted",DELETE_ERROR:"folder:deleteError",CREATED:"folder:created",CREATE_ERROR:"folder:createError",COPIED:"folder:copied",COPY_ERROR:"folder:copyError",MOVED:"folder:moved",MOVE_ERROR:"folder:moveError",UPDATED:"folder:updated",UPDATE_ERROR:"folder:updateError"},ResourceAction:{DELETE:"deleteResources",COPY:"copyResources",MOVE:"moveResources",UPDATE:"updateResource",GENERATE:"generate",CONVERT:"convert"},ResourceEvent:{DELETED:"resource:deleted",DELETE_ERROR:"resource:deleteError",COPIED:"resource:copied",COPY_ERROR:"resource:copyError",MOVED:"resource:moved",MOVE_ERROR:"resource:moveError",UPDATED:"resource:updated",UPDATE_ERROR:"resource:updateError",GENERATED:"resource:generated",GENERATE_ERROR:"resource:generateError",CONVERTED:"resource:converted",CONVERT_ERROR:"resource:convertError"},RedirectType:{FLOW_REDIRECT:0,LOCATION_REDIRECT:1,WINDOW_REDIRECT:2},ThemeAction:{SETTHEME:"setActiveTheme",DOWNLOAD_THEME:"downloadTheme",REUPLOAD:"reuploadTheme"},ThemeEvent:{UPDATED:"theme:updated",REUPLOADED:"theme:reuploaded",THEME_ERROR:"theme:error"},ResourcesFavoriteAction:{FILTER_ID:"favoriteFilter",ALL_RESOURCES:"favoriteFilter-all",FAVORITE_RESOURCES:"favoriteFilter-favorites"},initialize:function(e){var t=e.rsInitOptions;function o(e,t){if(e){var o="USER"==t?u.Z.User:u.Z.Role;return e.collect((function(e){return new o(e)}))}return[]}q.mode=t.mode,q.flowExecutionKey=t.flowExecutionKey,l.Z.resizeOnClient("repoSearch"==document.body.id?"searchFilters":"folders","results"),d.Z.setCurrentContext(q.mode===q.Mode.SEARCH?"search":"repo"),t.enableDnD=q.mode==q.Mode.BROWSE&&!(0,c.zcy)(),q.model.setPublicFolderUri(t.publicFolderUri),q.model.setTempFolderUri(t.tempFolderUri),q.model.setRootFolderUri(t.rootFolderUri),q.model.setOrganizationsFolderUri(t.organizationsFolderUri),q.model.setFolderSeparator(t.folderSeparator),q.model.setAdministrator(t.isAdministrator),q.model.setConfiguration(t.configuration),q.model.setServerState(t.state),q.CursorManager.initialize(),q.actionModel.initialize(),q.mode==q.Mode.BROWSE?(q.toolbar.initialize(q.actionModel.bulkActions),q.foldersPanel.initialize(t)):(q.filtersPanel.initialize(q.model.getFiltersConfiguration(),q.model.getFiltersState()),q.secondarySearchBox.initialize(q.model.getTextState()),q.filterPath.initialize()),q.resultsPanel.initialize(t),q.mode===q.Mode.LIBRARY&&q.favoriteSwitchControl.initialize(t),q.sortersPanel.initialize(q.model.getSortersConfiguration(),q.model.getSortState()),q.initFolderEvents(),q.initResourceEvents(),q.initThemeEvents(),q.observe("search:filter",(function(e){new q.ServerAction.createSearchAction("filter",{filterId:e.memo.filterId,filterOption:e.memo.optionId}).invokeAction()})),q.observe("search:sort",(function(e){new q.ServerAction.createSearchAction("sort",{sortBy:e.memo.sorterId}).invokeAction()})),q.observe("search:browse",(function(e){new q.ServerAction.createSearchAction("browse",{folderUri:e.memo.uri}).invokeAction(),q.actionModel.refreshToolbar()})),q.observe("search:search",(function(e){new q.ServerAction.createSearchAction("search",{text:e.memo.text}).invokeAction()})),q.observe("search:next",function(e){new this.ServerAction.createSearchAction(this.SearchAction.NEXT,{}).invokeAction()}.bindAsEventListener(q)),q.observe("search:rollback",(function(e){new q.ServerAction.createSearchAction("rollback",{position:e.memo.position}).invokeAction()})),q.observe("search:children",function(e){var t=e.memo.resource,o=e.memo.item;new this.ServerAction.createSearchAction(this.SearchAction.GET_RESOURCE_CHILDREN,{resourceUri:t.URIString,resourceType:t.resourceType,item:o}).invokeAction()}.bindAsEventListener(q)),q.observe("permission:browse",function(e){new q.ServerAction.createPermissionAction(this.PermissionAction.BROWSE,e.memo).invokeAction()}.bindAsEventListener(q)),q.observe("permission:search",function(e){new q.ServerAction.createPermissionAction(this.PermissionAction.SEARCH,e.memo).invokeAction()}.bindAsEventListener(q)),q.observe("permission:next",function(e){new q.ServerAction.createPermissionAction(this.PermissionAction.NEXT,e.memo).invokeAction()}.bindAsEventListener(q)),q.observe("permission:update",function(e){var t=e.memo.uri,o=e.memo.entities,i=e.memo.finishEdit;if(o.length>0){var n=o.collect((function(e){return e.toPermissionData()}));new q.ServerAction.createPermissionAction(this.PermissionAction.UPDATE,{uri:t,entitiesWithPermission:Object.toJSON(n),finishEdit:i}).invokeAction()}else{var r=q.dialogsPool.getPermissionsDialog(t);i&&r.hide()}}.bindAsEventListener(q)),q.observe("permission:loaded",function(e){var t=e.memo.responseData,i=q.dialogsPool.getPermissionsDialog(e.memo.inputData.uri);i.stopWaiting(),t&&(e.memo.doSet?i.setEntities(o(t.entities,t.type)):i.addEntities(o(t.entities,t.type)),"USER"===t.type?(h.Z.select(i._byUsersButton.parentNode),h.Z.unSelect(i._byRolesButton.parentNode)):(h.Z.unSelect(i._byUsersButton.parentNode),h.Z.select(i._byRolesButton.parentNode)))}.bindAsEventListener(q)),q.observe("permission:updated",function(e){var t=e.memo.inputData.uri,i=e.memo.inputData.finishEdit,n=q.dialogsPool.getPermissionsDialog(t);if(n.enable(),i)n.hide();else{var r=e.memo.responseData;r&&n.updateEntities(o(r.entities,r.type))}}.bindAsEventListener(q)),q.observe("permission:error",function(e){alert(Object.toJSON(e.memo))}.bindAsEventListener(q)),q.observe("resourceChildren:loaded",function(e){var t=e.memo.inputData.item,o=t.getValue(),i=e.memo.responseData;if(Object.isArray(i)){var n=[];i.each((function(e){var t=new X(e);o.addChild(t),n.push(t)})),q.resultsPanel.setResources(n,t),o.isLoaded()&&t.isLoading&&t.setLoading(!1)}}.bindAsEventListener(q)),q.observe("state:changed",(function(e){q.sortersPanel.enableItems(),q.updateUI(e.memo.state)})),q.observe("filterPath:changed",(function(e){q.filterPath.setPathItems(e.memo.filterPath)})),q.observe("result:changed",(function(e){var t=e.memo.resources.collect((function(e){return new X(e)}));q.resultsPanel.setResources(t);var o=q.resultsPanel.getList(),i=o.getItems();o.setCursor(i[0])})),q.observe("result:next",(function(e){var t=e.memo.resources.collect((function(e){return new X(e)}));q.resultsPanel.addResources(t)})),q.observe("result:error",this.defaultErrorHandler),q.observe("redirect:error",this.defaultErrorHandler),q.observe("flowRedirect:running",(function(){q.isflowRedirectRunning=!0,q.toolbar.refresh()})),q.Mode.BROWSE!=t.mode&&q.fire(q.Event.SEARCH_SEARCH,{text:q.model.getTextState()}),e.rsInitOptions.systemConfirm.blank()||i.Z.systemConfirm.show(e.rsInitOptions.systemConfirm),e.rsInitOptions.errorPopupMessage.blank()||i.Z.errorPopup.show(e.rsInitOptions.errorPopupMessage),this._disableBfCacheIfSafari()},showContextMenu:function(e){var t=e.memo.targetEvent;(q.mode==q.Mode.BROWSE&&q.foldersPanel.isFolderContextMenu(t)&&q.actionModel.showFolderMenu(t),q.resultsPanel.isResourceContextMenu(t))&&(q.model.getSelectedResources().length>1?q.actionModel.showResourceBulkMenu(t):q.actionModel.showResourceMenu(t))},_disableBfCacheIfSafari:function(){(0,c.Cu4)()&&I()},updateUI:function(e){for(var t in e.sortBy!=q.model.getSortState()&&_()(q.sortersPanel).find(e.sortBy,!0)[0],e.text!=q.model.getTextState()&&q.mode!=q.Mode.BROWSE&&q.secondarySearchBox.setText(e.text),e.customFilters)e.customFilters[t]!=q.model.getFiltersState()[t]&&_()(q.filtersPanel).find(t,e.customFilters[t],!0)[0];q.model.setServerState(e)},initFolderEvents:function(){this.observe("folder:deleted",(function(e){var t=e.memo.inputData.folder.getParentFolder(),o=q.foldersPanel;o.refreshFolder(t),"/"===t.URI&&o.tree._selectOrEditNode(void 0,t.node,!1)})),this.observe("folder:deleteError",this.defaultErrorHandler),this.observe("folder:created",(function(e){var t=e.memo.inputData.toFolder;q.foldersPanel.refreshFolder(t)})),this.observe("folder:createError",this.defaultErrorHandler),this.observe("folder:copied",(function(e){var t=e.memo.inputData.folder,o=e.memo.inputData.toFolder;q.CopyMoveController.cancel(),q.foldersPanel.moveOrCopyFolder(t,o,!0)})),this.observe("folder:copyError",this.defaultErrorHandler),this.observe("folder:moved",(function(e){var t=e.memo.inputData.folder,o=e.memo.inputData.toFolder;q.CopyMoveController.cancel(),q.foldersPanel.moveOrCopyFolder(t,o)})),this.observe("folder:moveError",this.defaultErrorHandler),this.observe("folder:updated",(function(e){var t=e.memo.inputData.folder,o=e.memo.responseData.label,i=e.memo.responseData.desc;q.foldersPanel.updateFolder(t,o,i)})),this.observe("folder:updateError",this.defaultErrorHandler)},initResourceEvents:function(){this.observe("resource:deleted",(function(e){var t=e.memo.inputData.resources,o=e.memo.responseData;o.dependentResources?i.Z.dependentResources.show(o.dependentResources,null,{okOnly:!0,canSave:!1,topMessage:q.messages["dialog.dependencies.resources.message"],bottomMessage:q.messages["dialog.dependencies.resources.deleteMessage"]}):q.resultsPanel.removeResources(t)})),this.observe("resource:deleteError",this.defaultErrorHandler),this.observe("resource:copied",(function(e){var t=e.memo.inputData.folder;q.foldersPanel.reselectFolder(t)})),this.observe("resource:copyError",this.defaultErrorHandler),this.observe("resource:moved",(function(e){var t=e.memo.inputData.folder,o=q.model.getSelectedFolder();q.foldersPanel.reselectFolder(t),q.foldersPanel.reselectFolder(o)})),this.observe("resource:moveError",this.defaultErrorHandler),this.observe("resource:updated",(function(e){q.resultsPanel.updateResource(new X(e.memo.responseData))})),this.observe("resource:updateError",this.defaultErrorHandler),this.observe("resource:generated",(function(e){var t=e.memo.inputData,o=e.memo.responseData,n=new X(o);t.run?q.RedirectAction.createRunResourceAction(n,!1).invokeAction():q.mode==q.Mode.BROWSE?t.location==q.foldersPanel.getSelectedUri()&&q.foldersPanel.doBrowse():q.fire(q.Event.SEARCH_SEARCH,{text:q.model.getTextState()});i.Z.systemConfirm.show(q.messages.RM_REPORT_CREATED,5e3)})),this.observe("resource:generateError",(function(e){var t=e.memo.responseData,o=t.msg,i=t.data;if(o&&o.indexOf("SYSTEM_CONFIRM_REQUIRED")>-1){if(i){var n=new T({text:ee.restOfString(o,"SYSTEM_CONFIRM_REQUIRED:")});n.on("button:yes",(function(){i.overwrite=!0;var e=q.ResourceAction.GENERATE;new q.ServerAction.createGenerateAction(e,i).invokeAction(),n.remove()})),n.on("button:no",(function(){n.remove()})),n.open()}}else q.defaultErrorHandler(e)})),this.observe("resource:converted",(function(e){i.Z.systemConfirm.show(e.memo.responseData||e.memo,5e3),q.mode==q.Mode.BROWSE?q.foldersPanel.doBrowse():q.fire(q.Event.SEARCH_SEARCH,{text:q.model.getTextState()})})),this.observe("resource:convertError",this.defaultErrorHandler)},defaultErrorHandler:function(e){var t=new R({title:A.Z["dialog.dependencies.title"]});t.setMessage(e.memo.responseData||e.memo),t.open(),q.sortersPanel.enableItems()},initThemeEvents:function(){this.observe("theme:updated",(function(e){var t=e.memo.responseData;if(t&&t.refresh)document.body.style.cursor="wait",window.location.reload(!0);else{var o=q&&q.model&&q.model.getContextFolder()&&q.model.getContextFolder().getParentFolder();o&&q.foldersPanel&&q.foldersPanel.refreshFolder&&q.foldersPanel.refreshFolder(o)}})),this.observe("theme:reuploaded",(function(e){if(e.memo.responseData.isActiveTheme){var t=e.memo.responseData.themeUri;new q.ServerAction.createFolderAction(q.ThemeAction.SETTHEME,{folderUri:t}).invokeAction()}})),this.observe("theme:error",(function(e){var t=e.memo.responseData;t&&alert(t)}))},getMessage:function(e,t){var o=q.messages[e];return o?new s.Template(o).evaluate(t||{}):""},_createAction:function(e,t){var o;if(t.endsWith("FolderAction")){var i=q.model.getContextFolder();o=e["create"+t].call(null,i)}else if(t.endsWith("ResourceAction")||t.endsWith("RunAction")){var n=q.model.getContextResource();o=e["create"+t].call(null,n)}else o=e["create"+t].call();return o},observe:function(e,t){this._getContainer().observe(e,t)},stopObserving:function(e,t){this._getContainer().stopObserving(e,t)},fire:function(e,t){this._getContainer().fire(e,t)},_getContainer:function(){return this._container||(this._container=document.body),this._container},model:{_organizationsFolderUri:null,_rootFolderUri:null,_tempFolderUri:null,_publicFolderUri:null,_folderSeparator:null,_configuration:{},_serverState:{},_uiState:{selectedFolder:null,contextFolder:null,contextResource:null,selectedResources:[]},_isAdministrator:!1,setOrganizationsFolderUri:function(e){this._organizationsFolderUri=e},getOrganizationsFolderUri:function(){return this._organizationsFolderUri},setRootFolderUri:function(e){this._rootFolderUri=e},getRootFolderUri:function(){return this._rootFolderUri},setTempFolderUri:function(e){this._tempFolderUri=e},getTempFolderUri:function(){return this._tempFolderUri},setPublicFolderUri:function(e){this._publicFolderUri=e},getPublicFolderUri:function(){return this._publicFolderUri},setFolderSeparator:function(e){this._folderSeparator=e},getFolderSeparator:function(){return this._folderSeparator},setConfiguration:function(e){this._configuration=e},getConfiguration:function(){return this._configuration},getFiltersConfiguration:function(){return this.getConfiguration().filters},getSortersConfiguration:function(){return this.getConfiguration().sorters},setServerState:function(e){this._serverState=e},getServerState:function(){return this._serverState},getUIState:function(){return this._uiState},setAdministrator:function(e){this._isAdministrator=e},isAdministrator:function(){return this._isAdministrator},getFiltersState:function(){return this.getServerState().customFilters},getSortState:function(){return this.getServerState().sortBy},getTextState:function(){return this.getServerState().text},getFolderUriState:function(){return this.getServerState().folderUri},setSelectedFolder:function(e){return this.getUIState().selectedFolder=e,e},getSelectedFolder:function(){return this.getUIState().selectedFolder},setContextFolder:function(e){return this.getUIState().contextFolder=e,e},getContextFolder:function(){return this.getUIState().contextFolder},setSelectedResources:function(e){return this.getUIState().selectedResources=e,e},getSelectedResources:function(){return this.getUIState().selectedResources}}};q.actionModel={bulkActions:{RUN:{buttonId:"run",action:O,actionArgs:"Run",test:x},EDIT:{buttonId:"edit",action:O,actionArgs:"Edit",test:Z},OPEN:{buttonId:"open",action:O,actionArgs:"Open",test:K},COPY:{buttonId:"copy",action:O,actionArgs:"Copy",test:V},CUT:{buttonId:"cut",action:O,actionArgs:"Move",test:k},PASTE:{buttonId:"paste",action:D,actionArgs:"PasteResources",test:j},REMOVE:{buttonId:"remove",action:O,actionArgs:"Delete",test:G}},_holderId:"searchActionModel",_folderMenu:"folder_mutton",_resourceMenu:"resource_menu",_resourceBulkMenu:"resource_bulk_menu",initialize:function(){var e=_()("#"+l.Z.PAGE_BODY_ID)[0];e&&e.observe((0,c.MEy)()?"touchstart":"click",(function(e){(0,c.zcy)()?!(0,c.dOg)(e)&&1==e.touches.length&&E.Z.hideMenu():!(0,c.dOg)(e)&&E.Z.hideMenu()}))},showFolderMenu:function(e,t){E.Z.showDynamicMenu(this._folderMenu,e,null,t,this._holderId)},showResourceBulkMenu:function(e,t){E.Z.showDynamicMenu(this._resourceBulkMenu,e,null,t,this._holderId)},showResourceMenu:function(e,t){E.Z.showDynamicMenu(this._resourceMenu,e,null,t,this._holderId)},refreshToolbar:function(e){q.toolbar.refresh()}},q.CopyMoveController={object:null,_move:!1,_copy:!1,_dndMode:!1,onMove:function(){q.CursorManager.move(),q.actionModel.refreshToolbar()},onCopy:function(){q.CursorManager.copy(),q.actionModel.refreshToolbar()},onCancel:function(){q.CursorManager.none(),q.actionModel.refreshToolbar()},isObjectInstanceOf:function(e){var t=this.object;return!!t&&(this.isBulkAction()?t.length==t.findAll((function(t){return t instanceof e})).length:t instanceof e)},isMoveResource:function(){return this._move&&this.isObjectInstanceOf(X)},isMoveFolder:function(){return this._move&&this.isObjectInstanceOf(J)},isCopyResource:function(){return this._copy&&this.isObjectInstanceOf(X)},isCopyFolder:function(){return this._copy&&this.isObjectInstanceOf(J)},isBulkAction:function(){return Object.isArray(this.object)},move:function(e,t){this.cancel(),this.object=e,this._move=!0,this._copy=!1,this._dndMode=t,this.onMove()},copy:function(e,t){this.cancel(),this.object=e,this._move=!1,this._copy=!0,this._dndMode=t,this.onCopy()},cancel:function(){this.object=null,this._move=!1,this._copy=!1,this.onCancel()},isMove:function(){return this._move},isCopy:function(){return this._copy},isDnd:function(){return this._dndMode}},q.CursorManager={container:null,className:["copy_cursor","move_cursor"],initialize:function(){this.container=_()("#display")[0]},copy:function(){this.none(),_()(this.container).addClass(this.className[0])},move:function(){this.none(),_()(this.container).addClass(this.className[1])},none:function(){this.className.each(function(e,t){_()(this.container).removeClass(this.className[t])}.bind(this))}};var X=function(e){this._json=e,this.name=e.name,this.label=e.label,this.description=e.description,this.date=e.date,this.dateTimestamp=e.dateTimestamp,this.dateTime=e.dateTime,this.updateDate=e.updateDate,this.updateDateTimestamp=e.updateDateTimestamp,this.updateDateTime=e.updateDateTime,this.URI=e.URI,this.URIString=e.URIString,this.parentUri=e.parentUri,this.parentFolder=e.parentFolder,this.resourceType=e.resourceType,this.type=e.type,e.fileType&&(this.fileType=e.fileType),this.isScheduled=e.scheduled,this.isFavorite=e.favorite,this._permissions=e.permissions,this.hasChildren=e.hasChildren,this.isChild=!1,this.parentResource=null,this.isOpen=!1,this._children=[]};X.addMethod("clone",(function(){return new X(this._json)})),X.addMethod("isReadable",(function(){return this._permissions.include("r")})),X.addMethod("isEditable",(function(){return this._permissions.include("e")})),X.addMethod("isRemovable",(function(){return this._permissions.include("d")})),X.addMethod("isAdministrable",(function(){return this._permissions.include("a")})),X.addMethod("typeEquals",(function(e){return this.resourceType===e})),X.addMethod("typeSuffix",(function(){return this.resourceType.split(".").last()})),X.addMethod("isLoaded",(function(){return this._children.size()>0})),X.addMethod("isFolder",(function(){return!1})),X.addMethod("getChildren",(function(e){return this._children})),X.addMethod("addChild",(function(e){e.isChild=!0,e.parentResource=this,this._children.push(e)})),X.addMethod("updateChild",(function(e){e.isChild=!0,e.parentResource=this;var t=-1;this._children.each((function(o,i){o.URIString==e.URIString&&(t=i)})),t>-1?this._children[t]=e:this._children.push(e)})),X.addMethod("permissionsToString",(function(){var e="";return this.isEditable()?e+=q.messages["permission.modify"]:e+=q.messages["permission.readOnly"],this.isRemovable()&&(e+=", "+q.messages["permission.delete"]),this.isAdministrable()&&(e+=", "+q.messages["permission.administer"]),e}));var J=function(e){this.node=e,this.name=e.param.id,this.label=f.Z.unescape(e.name),this.desc=e.param.extra.desc?f.Z.unescape(e.param.extra.desc):"",this.description=f.Z.unescape(this.desc),this.date=e.param.extra.date?f.Z.unescape(e.param.extra.date):"",this.URI=e.param.uri,this.URIString=e.param.uri};J.prototype=(0,c.I8Q)(X.prototype),J.addMethod("clone",(function(){return new J(this.node)})),J.addMethod("getParentFolder",(function(){return this.isRoot()?null:new J(this.node.parent)})),J.addMethod("getReadableUri",(function(){return this.isRoot()?"":this.getParentFolder().getReadableUri()+q.model.getFolderSeparator()+this.label})),J.addMethod("isRoot",(function(){return this.URI==q.model.getRootFolderUri()||null==this.node.parent})),J.addMethod("isPublic",(function(){return this.URI==q.model.getPublicFolderUri()})),J.addMethod("isTemp",(function(){return this.URI==q.model.getTempFolderUri()})),J.addMethod("isOrganization",(function(){return this.URI.match(q.model.getOrganizationsFolderUri()+"/[^/]+$")})),J.addMethod("isOrganizationsRoot",(function(){return this.URI.match(q.model.getOrganizationsFolderUri()+"$")})),J.addMethod("isReadable",(function(){return!0})),J.addMethod("isEditable",(function(){return this.node.param.extra.isWritable})),J.addMethod("isRemovable",(function(){return this.node.param.extra.isRemovable})),J.addMethod("isAdministrable",(function(){return this.node.param.extra.isAdministrable})),J.addMethod("isSelected",(function(){return this.node.isSelected()})),J.addMethod("equals",(function(e){return e&&this.URI==e.URI})),J.addMethod("isThemeFolder",(function(){return this.node.param.extra&&this.node.param.extra.isThemeFolder})),J.addMethod("isThemeRootFolder",(function(){return this.node.param.extra&&this.node.param.extra.isThemeRootFolder})),J.addMethod("isActiveThemeFolder",(function(){return this.node.param.extra&&this.node.param.extra.isActiveThemeFolder})),J.addMethod("isFolder",(function(){return!0}));var Q={getResourceUris:function(e){var t=[];return e.each((function(e){t.push(e.URIString?e.URIString:e.URI)})),t},getResourceUriAndTypeList:function(e){var t=[];return e.each((function(e){var o=e.URIString?e.URIString:e.URI;t.push({URIString:o,type:e.type})})),t},getSelectedResourceUris:function(e){return e.map((function(e){return{uri:e.URIString?e.URIString:e.URI}}))},checkNameLength:function(e){return!e.blank()&&e.length<=q.model.getConfiguration().resourceNameMaxLength},checkDescriptionLength:function(e){return e.length<=q.model.getConfiguration().resourceDescriptionMaxLength},labelValidator:function(e){var t=!0,o="";return(e.blank()||e.length>q.model.getConfiguration().resourceLabelMaxLength)&&(o=q.messages.RE_INVALID_NAME_SIZE.replace("{0}",q.model.getConfiguration().resourceLabelMaxLength),t=!1),{isValid:t,errorMessage:o}},descriptionValidator:function(e){var t=!0,o="";return e.length>q.model.getConfiguration().resourceDescriptionMaxLength&&(o=q.messages.RE_INVALID_DESC_SIZE.replace("{0}",q.model.getConfiguration().resourceDescriptionMaxLength),t=!1),{isValid:t,errorMessage:o}},_fileTypeValidatorTemplate:function(e,t){var o=!0,i="";return!e||e.blank()?(i=q.messages.RE_ENTER_FILE_NAME,o=!1):e.toLowerCase().endsWith(t)||(i=q.messages.RE_INVALID_FILE_TYPE.replace("{0}",t),o=!1),{isValid:o,errorMessage:i}},zipFileTypeValidator:function(e){return Q._fileTypeValidatorTemplate(e,".zip")},isCustomDataSource:function(e){return r().contains(ee.getInitConfiguration().customDataSources,e.resourceType)}},ee={restOfString:function(e,t){var o=e.lastIndexOf(t)+t.length;return e.substring(o,e.length).trim()},getInitOptions:function(){return window.localContext.rsInitOptions||m.Z.repositorySearch.localContext.rsInitOptions},getInitConfiguration:function(){return ee.getInitOptions().configuration}};document.observe("element:contextmenu",q.showContextMenu.bindAsEventListener(q)),document.observe("key:escape",(function(e){E.Z.hideMenu(),Event.stop(e)})),document.observe("key:delete",(function(e){e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||G()&&O("Delete")})),window.canResourceBeCreated=function(e){var t=q.model.getContextFolder();return t&&!t.isOrganization()&&!t.isRoot()&&!t.isOrganizationsRoot()&&t.isEditable()},window.invokeResourceAction=v,window.invokeAction=function(e){q.Action["create"+e].call().invokeAction()},window.invokeFolderAction=D,window.invokeCreate=function(e,t){q.RedirectAction.createCreateResourceAction(e,t).invokeAction()},window.invokeBulkAction=O,window.invokeRedirectAction=M,window.isPropertiesChanged=$,window.isPermissionsChanged=Y,window.isCopyOrMove=function(){return q.CopyMoveController.isCopy()||q.CopyMoveController.isMove()},window.isFolderCopyOrMove=C,window.isResourceCopyOrMove=P,window.isThemeFolder=z,window.isNonActiveThemeFolder=function(){var e=q.model.getContextFolder();return z()&&!e.isActiveThemeFolder()},window.isThemeRootFolder=function(){var e=q.model.getContextFolder();return e&&e.isThemeRootFolder()},window.canThemeBeReuploaded=function(){var e=q.model.getContextFolder();return e&&e.isThemeFolder()&&S(e)},window.canFolderBeCopied=L,window.canFolderBeDeleted=function(){var e=q.model.getContextFolder();return e&&!e.isOrganization()&&!e.isRoot()&&!e.isPublic()&&!e.isTemp()&&!e.isOrganizationsRoot()&&e.isRemovable()&&!e.isActiveThemeFolder()&&!e.isThemeRootFolder()},window.canFolderBeEdited=S,window.canFolderBeMoved=w,window.canFolderBeCopiedOrMovedToFolder=b,window.canAllBeCopiedOrMovedToFolder=H,window.canFolderBeExported=function(e){var t=(e=e||q.model.getContextFolder()).URI.split("/");return!(("/"===e.URI||"organizations"===t[t.length-1]||"organizations"===t[t.length-2])&&"org_template"!==t[t.length-1])},window.canFolderPermissionsBeAssigned=function(){var e=q.model.getContextFolder();return e&&e.isAdministrable()},window.canFolderPropertiesBeShowed=function(){var e=q.model.getContextFolder();return e&&e.isReadable()&&!U()},window.canFolderPropertiesBeEdited=U,window.canBeRun=function(e){return(e=e||q.model.getSelectedResources()[0])&&e.isReadable()&&q.runActionFactory[e.typeSuffix()]&&!q.isflowRedirectRunning},window.canBeGenerated=function(e){return!1},window.canBeConverted=function(e){return!1},window.canBeOpened=function(e){return(e=e||q.model.getSelectedResources()[0])&&e.isReadable()&&q.openActionFactory[e.typeSuffix()]&&"ContentResource"===e.typeSuffix()},window.canBeRunInBackground=function(e){return window.canBeScheduled(e)},window.canResourceBeEdited=function(e){e=e||q.model.getSelectedResources()[0];var t=q.editActionFactory[e.typeSuffix()]||Q.isCustomDataSource(e),o=e&&e.isEditable()&&t;return!["DashboardResource"].include(e.typeSuffix())&&o},window.canBeOpenedInDesigner=function(e){return(e=e||q.model.getSelectedResources()[0])&&e.isEditable()&&q.openActionFactory[e.typeSuffix()]&&"ContentResource"!==e.typeSuffix()},window.canCreateFolder=function(){var e=q.model.getContextFolder();return e&&!e.isOrganizationsRoot()&&e.isEditable()},window.canBeScheduled=function(e){return(e=e||q.model.getSelectedResources()[0])&&e.isReadable()&&[q.ResourceType.REPORT_UNIT,q.ResourceType.ADHOC_REPORT_UNIT,q.ResourceType.REPORT_OPTIONS].include(e.resourceType)},window.canResourceBeCopied=y,window.canResourceBeMoved=N,window.canResourceBeDeleted=B,window.canResourcePropertiesBeShowed=F,window.canResourcePropertiesBeEdited=W,window.canResourcePermissionsBeAssigned=function(){var e=q.model.getSelectedResources()[0];return e&&e.isAdministrable()},window.canAllBeRun=x,window.canAllBeEdited=Z,window.canAllBeOpened=K,window.canAllBeCopied=V,window.canAllBeMoved=k,window.canAllBePasted=j,window.canAllPropertiesBeShowed=function(){var e=q.model.getSelectedResources(),t=e.detect((function(){return!F()}));return e.length>0&&void 0===t},window.canAllPropertiesBeEdited=function(){var e=q.model.getSelectedResources(),t=e.detect((function(e){return!W(e)}));return e.length>0&&void 0===t},window.canAllBeDeleted=G,window.canBeAddedToFavorites=function(){return q.model.getSelectedResources().every((function(e){return!e.isFavorite}))},window.canBeRemovedFromFavorites=function(){return q.model.getSelectedResources().every((function(e){return e.isFavorite}))};var te=o(94277),oe=o(236),ie=o(11129),ne=o(12473);q.Action=function(e){Object.isFunction(e)&&(this.invokeAction=e)},q.Action.DEFAULT="default-action",q.Action.addMethod("invokeAction",c.cnY),q.folderActionFactory={CreateFolder:function(e){return new q.Action((function(){q.showCreateFolderConfirm(e)}))},CopyFolder:function(e){return new q.Action((function(){q.CopyMoveController.copy(e)}))},MoveFolder:function(e){return new q.Action((function(){q.CopyMoveController.move(e)}))},PasteFolder:function(e){return new q.Action((function(){var t,o=e||q.model.getContextFolder();if(q.CopyMoveController.isCopyFolder())t=q.FolderAction.COPY;else{if(!q.CopyMoveController.isMoveFolder())return;t=q.FolderAction.MOVE}new q.ServerAction.createFolderAction(t,{toFolder:o,folder:q.CopyMoveController.object}).invokeAction()}))},PasteResources:function(e){return new q.Action((function(){var t,o=e||q.model.getContextFolder();o||(o=q.model.getSelectedFolder());var i=q.CopyMoveController.object,n=q.CopyMoveController.isBulkAction()?[].concat(i):[i];if(q.CopyMoveController.isCopyResource())t=q.ResourceAction.COPY;else{if(!q.CopyMoveController.isMoveResource())return;t=q.ResourceAction.MOVE}for(var r=0;r<n.length;r++)if(n[r].parentResource){for(var s=n[r].parentResource.URI,a=!1,_=0;_<n.length&&!a;_++)a|=n[_].URI==s;a||n.push(n[r].parentResource)}new q.ServerAction.createResourceAction(t,{resources:n,folder:o}).invokeAction()}))},DeleteFolder:function(e){return new q.Action((function(){E.Z.hideMenu(),q.showDeleteFolderConfirm(e)}))},ShowFolderProperties:function(e){return new q.Action((function(){q.showFolderProperties(e)}))},EditFolderProperties:function(e){return new q.Action((function(){q.editFolderProperties(e)}))},AssignPermissions:function(e){return new q.Action((function(){q.editFolderPermissions(e)}))},SetActiveThemeFolder:function(e){return new q.Action((function(){new q.ServerAction.createFolderAction(q.ThemeAction.SETTHEME,{folder:e}).invokeAction()}))},DownloadTheme:function(e){return new q.Action((function(){new q.ServerAction.createFolderAction(q.ThemeAction.DOWNLOAD_THEME,{folder:e}).initDownload()}))},UploadTheme:function(e){return new q.Action((function(){q.showUploadThemeConfirm(e,!1)}))},ReuploadTheme:function(e){return new q.Action((function(){q.showUploadThemeConfirm(e,!0)}))},Export:function(e){return new q.Action((function(){q.exportDialog.openRepoDialog(e)}))}},q.resourceActionFactory={ResourceFavoriteAction:function(){return new q.Action((function(){var e=q.model._uiState.selectedResources;q.addToFavorite(e)}))},Copy:function(e){return new q.Action((function(){q.CopyMoveController.copy(e)}))},Move:function(e){return new q.Action((function(){q.CopyMoveController.move(e)}))},Delete:function(e){return new q.Action((function(){E.Z.hideMenu(),q.showDeleteResourceConfirm(e)}))},Export:function(e,t){return new q.Action((function(){q.exportDialog.openRepoDialog(e)}))},ShowProperties:function(e,t){return new q.Action((function(){q.showResourceProperties(e,t)}))},EditProperties:function(e,t){return new q.Action((function(){q.editResourceProperties(e,t)}))},AssignPermissionsToResourceAction:function(e){return new q.Action((function(){q.editResourcePermissions(e)}))},GenerateResourceAction:function(e,t){return new q.Action((function(){te.hl.CreateReport.selectGenerator(e.URIString)}))},ConvertResourceAction:function(e,t){return new q.Action((function(){new q.ServerAction.createConvertAction(q.ResourceAction.CONVERT,{reportUri:e.URIString}).invokeAction()}))}},q.bulkActionFactory={Run:function(e){return new q.Action((function(){e.each((function(e,t){q.RedirectAction.createRunResourceAction(e,0!==t).invokeAction()}))}))},Edit:function(e){return new q.Action((function(){e.each((function(e,t){q.RedirectAction.createEditResourceAction(e,0!==t).invokeAction()}))}))},Open:function(e){return new q.Action((function(){e.each((function(t,o){q.RedirectAction.createOpenResourceAction(t,e.length>1).invokeAction()}))}))},Copy:function(e){return new q.Action((function(){q.CopyMoveController.copy(e)}))},Move:function(e){return new q.Action((function(){q.CopyMoveController.move(e)}))},Delete:function(e){return new q.Action((function(){E.Z.hideMenu(),1==e.length?q.showDeleteResourceConfirm(e[0]):q.showBulkDeleteResourcesConfirm(e)}))},ShowProperties:function(e){return new q.Action((function(){e.each((function(t,o){v("ShowProperties",t,{cascade:!0,position:o,number:e.length})}))}))},EditProperties:function(e){return new q.Action((function(){e.each((function(t,o){v("EditProperties",t,{cascade:!0,position:o,number:e.length})}))}))},Export:function(e){return new q.Action((function(){q.exportDialog.openRepoDialog(e)}))}},q.ServerAction=function(e,t){this.actionURL="flow.html?_flowExecutionKey="+q.flowExecutionKey+"&_eventId="+e,this.data=Object.toQueryString(t.data)},q.ServerAction.addMethod("invokeAction",(function(){(0,oe.mc)(this.actionURL,{postData:this.data,callback:function(e){"OK"==e.status?this.onSuccess(e.data):this.onError(e.data)}.bind(this),errorHandler:this._serverErrorHandler,mode:oe.w8.prototype.EVAL_JSON})})),q.onFavoriteItem=function(e,t){return(0,ne.Z)({url:e,type:"POST",headers:{Accept:"application/json","content-type":"application/json"},data:Object.toJSON({favorites:t})})},q.ServerAction.addMethod("initDownload",(function(){var e=this.actionURL+"&"+this.data;(0,c.CL_)(e,{onload:function(){var e=_()(_()("#ajax-download-iframe")[0].contentDocument.body).html();try{var t=e.evalJSON();alert(t.data)}catch(e){}}})})),q.ServerAction.addMethod("_serverErrorHandler",(function(e){return(0,ie.m0)(e)})),q.ServerAction.addMethod("onSuccess",c.cnY),q.ServerAction.addMethod("onError",c.cnY),q.ServerAction.createSearchAction=function(e,t){t.mode=q.mode;var o=new q.ServerAction(e,{data:t});return o.onSuccess=function(o){e==q.SearchAction.NEXT?q.fire(q.Event.RESULT_NEXT,o):e==q.SearchAction.GET_RESOURCE_CHILDREN?q.fire(q.Event.CHILDREN_LOADED,{inputData:t,responseData:o}):(q.fire(q.Event.RESULT_CHANGED,o),q.fire(q.Event.STATE_CHANGED,o),q.mode==q.Mode.SEARCH&&q.fire(q.Event.FILTER_PATH_CHANGED,o))},o.onError=function(e){q.fire(q.Event.RESULT_ERROR,e)},o},q.ServerAction.createFolderAction=function(e,t){var o,i,n;q.FolderAction.DELETE==e?(o={sourceFolderUri:t.folder.URI},i=q.FolderEvent.DELETED,n=q.FolderEvent.DELETE_ERROR):q.FolderAction.CREATE==e?(o={destFolderUri:t.toFolder.URI,folder:Object.toJSON({URI:"",label:t.label,desc:t.desc})},i=q.FolderEvent.CREATED,n=q.FolderEvent.CREATE_ERROR):q.FolderAction.COPY==e?(o={destFolderUri:t.toFolder.URI,sourceFolderUri:t.folder.URI},i=q.FolderEvent.COPIED,n=q.FolderEvent.COPY_ERROR):q.FolderAction.MOVE==e?(o={destFolderUri:t.toFolder.URI,sourceFolderUri:t.folder.URI},i=q.FolderEvent.MOVED,n=q.FolderEvent.MOVE_ERROR):q.FolderAction.UPDATE==e?(o={folder:Object.toJSON({URI:t.folder.URI,label:t.folder.label,desc:t.folder.description})},i=q.FolderEvent.UPDATED,n=q.FolderEvent.UPDATE_ERROR):q.ThemeAction.SETTHEME==e?(t.folder?o={folderUri:t.folder.URI}:t.folderUri&&(o={folderUri:t.folderUri}),i=q.ThemeEvent.UPDATED):q.ThemeAction.DOWNLOAD_THEME==e?(o={folderUri:t.folder.URI},n=q.ThemeEvent.THEME_ERROR):q.ThemeAction.REUPLOAD==e&&(o={themeName:t.themeName,folderUri:t.folderUri},i=q.ThemeEvent.REUPLOADED,n=q.ThemeEvent.THEME_ERROR),o&&i&&n||new Error("Unsupported folder action.");var r=new q.ServerAction(e,{data:o});return r.onSuccess=function(e){q.fire(i,{responseData:e,inputData:t})},r.onError=function(e){q.fire(n,{responseData:e,inputData:t})},r},q.ServerAction.createResourceAction=function(e,t){var o,n,s;if(q.ResourceAction.DELETE==e){var a=Q.getResourceUriAndTypeList(t.resources);o={selectedResources:Object.toJSON(a)},n=q.ResourceEvent.DELETED,s=q.ResourceEvent.DELETE_ERROR}else if(q.ResourceAction.COPY==e){var _=Q.getResourceUris(t.resources);o={selectedResources:Object.toJSON(_),destFolderUri:t.folder.URI},n=q.ResourceEvent.COPIED,s=q.ResourceEvent.COPY_ERROR}else if(q.ResourceAction.MOVE==e){var c=Q.getResourceUris(t.resources);o={selectedResources:Object.toJSON(c),destFolderUri:t.folder.URI},n=q.ResourceEvent.MOVED,s=q.ResourceEvent.MOVE_ERROR}else q.ResourceAction.UPDATE==e&&(o={selectedResource:Object.toJSON(t.resource)},n=q.ResourceEvent.UPDATED,s=q.ResourceEvent.UPDATE_ERROR);o&&n&&s||new Error("Unsupported resource action.");var l=new q.ServerAction(e,{data:o});function d(o){var n;if(q.ResourceAction.COPY!=e&&q.ResourceAction.MOVE!=e)return o;try{n=JSON.parse(o)}catch(e){return o}if(!n||!n.existingLabels)return o;var s=r().filter(t.resources,(function(e){return-1==n.existingLabels.indexOf(e.label)}));return 0===s.length?(1==n.existingLabels.length?q.getMessage("dialog.resources.one.exists"):q.getMessage("dialog.resources.all.exist"))+" "+t.folder.URIString:(function(o,n){i.Z.dependentResources.show(o,{dependenciesBtnOk:function(){new q.ServerAction.createResourceAction(e,{resources:n,folder:t.folder}).invokeAction()}},{buttons:["ok","cancel"],dialogTitle:q.getMessage("dialog.resources.exist.title"),topMessage:q.getMessage("dialog.resources.exist"),bottomMessage:q.getMessage("dialog.resources.exist.confirm.skip")})}(n.existingLabels,s),null)}return l.onSuccess=function(o){q.ResourceAction.MOVE==e&&q.CopyMoveController.cancel(),q.fire(n,{responseData:o,inputData:t})},l.onError=function(e){var o=d(e);o&&q.fire(s,{responseData:o,inputData:t})},l},q.ServerAction.createPermissionAction=function(e,t){var o=new q.ServerAction(e,{data:t}),i=e==q.PermissionAction.UPDATE?q.PermissionEvent.UPDATED:q.PermissionEvent.LOADED;return o.onSuccess=function(o){q.fire(i,{responseData:o,inputData:t,doSet:e!=q.PermissionAction.NEXT})},o.onError=function(e){q.fire(q.PermissionEvent.ERROR,e)},o},q.ServerAction.createGenerateAction=function(e,t){var o=new q.ServerAction(e,{data:{data:Object.toJSON(t)}});return o.actionURL="reportGenerator.html?action="+e,o.onSuccess=function(e){q.fire(q.ResourceEvent.GENERATED,{responseData:e,inputData:t})},o.onError=function(e){q.fire(q.ResourceEvent.GENERATE_ERROR,{responseData:e,inputData:t})},o},q.ServerAction.createConvertAction=function(e,t){var o=new q.ServerAction(e,{data:t});return o.actionURL="dataViewConverter.html?action="+e,o.onSuccess=function(e){q.fire(q.ResourceEvent.CONVERTED,{responseData:e,inputData:t})},o.onError=function(e){q.fire(q.ResourceEvent.CONVERT_ERROR,{responseData:e,inputData:t})},o},q.RedirectAction=function(e,t){this.DIMMER_TIMEOUT=400,this.type=e,this.flowId=t.flowId,this.url=t.url?t.url:this.flowId?this.FLOW_URL:void 0,this.paramsMap=t.paramsMap||{},this.hash=t.hash?"#"+t.hash:"",this.encode=t.encode,this.type!==q.RedirectType.FLOW_REDIRECT&&this.url===this.FLOW_URL&&(this.paramsMap._flowId=this.flowId)},q.RedirectAction.addMethod("FLOW_URL","flow.html"),q.RedirectAction.addMethod("_serializeParams",(function(e,t){if(e){var o="";for(var i in e)Object.isUndefined(i)||(o+="&"+i+"="+(t?encodeURIComponent(e[i]):e[i]));return o&&o.length>0?o.substring(1):""}return""})),q.RedirectAction.addMethod("invokeAction",(function(e){e=e||{};var t=_()("#"+oe.hj.LOADING_ID);if(t.length>0&&(t.addClass(l.Z.CANCELLABLE_CLASS),t.find("#cancel").click((function(){_()(this).addClass("disabled"),t.addClass("cancelCalled"),window.location.reload()}))),this.type===q.RedirectType.FLOW_REDIRECT){var o=_()("#redirectForm")[0];_()("#flowParams")[0].setValue(this.flowId+"?"+this._serializeParams(this.paramsMap,this.encode));var n=new q.ServerAction("isServerAvailable",{data:{}}),r=setTimeout((function(){i.Z.popup.show(oe.hj.LOADING_ID,!0)}),this.DIMMER_TIMEOUT);n.onSuccess=function(e){"Yes"==e.strip()?(++oe.hj.ajaxRequestCount,t.hasClass("cancelCalled")?t.removeClass("cancelCalled"):o.submit(),q.fire(q.Event.FLOW_REDIRECT_RUNNING,e)):(s(),q.fire(q.Event.REDIRECT_ERROR,e))},n.onError=function(e){s(),q.fire(q.Event.REDIRECT_ERROR,e)};var s=function(){clearTimeout(r),i.Z.popup.hide(oe.hj.LOADING_ID)};n.invokeAction()}else if(this.type===q.RedirectType.LOCATION_REDIRECT){var a=this.url+(_().isEmptyObject(this.paramsMap)?"":"?"+this._serializeParams(this.paramsMap,this.encode))+this.hash;e.isContentResource?(0,c.$Aw)(a):(0,c.nLk)(a)}else if(this.type===q.RedirectType.WINDOW_REDIRECT){var d=window.open(),u=this._serializeParams(this.paramsMap,this.encode);d.opener=null,d.document.location=this.url+(u?"?"+u:"")+this.hash}})),q.runActionFactory={ReportUnit:function(e,t){var o=t?q.RedirectType.WINDOW_REDIRECT:q.RedirectType.FLOW_REDIRECT;return new q.RedirectAction(o,{url:"flow.html",flowId:"viewReportFlow",paramsMap:{_flowId:"viewReportFlow",reportUnit:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:t?encodeURIComponent(e.parentFolder):e.parentFolder}})},AdhocReportUnit:function(e,t){var o=t?q.RedirectType.WINDOW_REDIRECT:q.RedirectType.FLOW_REDIRECT;return new q.RedirectAction(o,{url:"flow.html",flowId:"viewAdhocReportFlow",paramsMap:{reportUnit:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:t?encodeURIComponent(e.parentFolder):e.parentFolder}})},OlapUnit:function(e,t){var o=t?q.RedirectType.WINDOW_REDIRECT:q.RedirectType.LOCATION_REDIRECT;return new q.RedirectAction(o,{url:"olap/viewOlap.html",paramsMap:{name:t?encodeURIComponent(e.URIString):e.URIString,new:!0,parentFlow:"searchFlow",ParentFolderUri:t?encodeURIComponent(e.parentFolder):e.parentFolder}})},DashboardResource:function(e,t){var o=t?q.RedirectType.WINDOW_REDIRECT:q.RedirectType.FLOW_REDIRECT;return new q.RedirectAction(o,{url:"flow.html",flowId:"dashboardRuntimeFlow",paramsMap:{dashboardResource:t?encodeURIComponent(e.URIString):e.URIString}})},DashboardModelResource:function(e,t){var o=t?q.RedirectType.WINDOW_REDIRECT:q.RedirectType.LOCATION_REDIRECT;return new q.RedirectAction(o,{url:"dashboard/viewer.html#"+encodeURIComponent(e.URIString)})},ReportOptions:function(e,t){var o,i={reportOptionsURI:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:t?encodeURIComponent(e.parentFolder):e.parentFolder},n=e.parentResource;n&&n.typeEquals(q.ResourceType.ADHOC_REPORT_UNIT)?(o="viewAdhocReportFlow",i.reportUnit=t?encodeURIComponent(n.URIString):n.URIString):o="viewReportFlow";var r=t?q.RedirectType.WINDOW_REDIRECT:q.RedirectType.FLOW_REDIRECT;return new q.RedirectAction(r,{url:"flow.html",flowId:o,paramsMap:i})}},q.RedirectAction.createRunResourceAction=function(e,t){e||(e=e||q.model.getSelectedResources()[0]);var o=q.runActionFactory[e.typeSuffix()];return o?o(e,t):new q.Action((function(){alert("Run action for resource type '"+e.resourceType+"' is not implemented!")}))},q.RedirectAction.createRunResourceInNewTabAction=function(e,t){return q.RedirectAction.createRunResourceAction(e,!0)},q.editActionFactory={"default-action":function(e,t){return Q.isCustomDataSource(e)?q.editActionFactory.JdbcReportDataSource(e,t):new q.Action((function(){alert("Edit action for resource type '"+e.resourceType+"' is not implemented!")}))},ReportUnit:function(e,t){return new q.RedirectAction(t,{flowId:"reportUnitFlow",paramsMap:{selectedResource:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocReportUnit:function(e,t){return q.editActionFactory.ReportUnit(e,t)},DataDefinerUnit:function(e,t){return new q.RedirectAction(t,{flowId:"queryBuilderFlow",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})},OlapUnit:function(e,t){return new q.RedirectAction(t,{flowId:"olapUnitFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},DashboardResource:function(e,t){return new q.RedirectAction(t,{flowId:"dashboardRuntimeFlow",paramsMap:{dashboardResource:e.URIString}})},ReportOptions:function(e,t){return new q.RedirectAction(t,{flowId:"reportOptionsEditFlow",paramsMap:{reportOptionsURI:e.URIString,ParentFolderUri:e.parentFolder}})},JdbcReportDataSource:function(e,t){return new q.RedirectAction(t,{flowId:"addDataSourceFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},JndiJdbcReportDataSource:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},CustomReportDataSource:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},BeanReportDataSource:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},VirtualReportDataSource:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},HiveDataSourceService:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},CassandraDataSourceService:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},DiagnosticCustomDataSourceService:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},MongoDbDataSourceService:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},AwsReportDataSource:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},AzureSqlReportDataSource:function(e,t){return q.editActionFactory.JdbcReportDataSource(e,t)},Query:function(e,t){return new q.RedirectAction(t,{flowId:"queryFlow",paramsMap:{currentQuery:e.URIString,isEdit:!0,ParentFolderUri:e.parentFolder}})},InputControl:function(e,t){return new q.RedirectAction(t,{flowId:"addInputControlFlow",paramsMap:{isEdit:!0,resource:e.URIString,ParentFolderUri:e.parentFolder}})},ListOfValues:function(e,t){return new q.RedirectAction(t,{flowId:"addListOfValuesFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},DataType:function(e,t){return new q.RedirectAction(t,{flowId:"dataTypeFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},MondrianConnection:function(e,t){return new q.RedirectAction(t,{flowId:"olapClientConnectionFlow",paramsMap:{selectedResource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},SecureMondrianConnection:function(e,t){return q.editActionFactory.MondrianConnection(e,t)},XMLAConnection:function(e,t){return q.editActionFactory.MondrianConnection(e,t)},MondrianXMLADefinition:function(e,t){return new q.RedirectAction(t,{flowId:"mondrianXmlaSourceFlow",paramsMap:{selectedResource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},FileResource:function(e,t){return new q.RedirectAction(t,{flowId:"addFileResourceFlow",paramsMap:{selectedResource:e.URIString,ParentFolderUri:e.parentFolder}})},SemanticLayerDataSource:function(e,t){return new q.RedirectAction(t,{url:"domaindesigner.html",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})}},q.resourceTypeToDefaultRedirectTypeMap={},q.resourceTypeToDefaultRedirectTypeMap[q.ResourceType.SEMANTIC_LAYER_DATA_SOURCE]=q.RedirectType.LOCATION_REDIRECT,q.getDefaultRedirectTypeByResourceType=function(e){var t=q.resourceTypeToDefaultRedirectTypeMap[e];return t||(t=q.RedirectType.FLOW_REDIRECT),t},q.RedirectAction.createEditResourceAction=function(e,t){var o;e||(e=q.model.getSelectedResources()[0]),o=t?q.RedirectType.WINDOW_REDIRECT:q.getDefaultRedirectTypeByResourceType(e.resourceType);var i=q.editActionFactory[e.typeSuffix()];return i?i(e,o):q.editActionFactory[q.Action.DEFAULT](e,o)},q.openActionFactory={ContentResource:function(e,t){return t===q.RedirectType.FLOW_REDIRECT&&(t=q.RedirectType.LOCATION_REDIRECT),new q.RedirectAction(t,{url:"fileview/fileview"+e.URIString,paramsMap:{}})},DashboardResource:function(e,t){return new q.RedirectAction(t,{flowId:"dashboardDesignerFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},DashboardModelResource:function(e,t){var o=t?q.RedirectType.WINDOW_REDIRECT:q.RedirectType.LOCATION_REDIRECT;return new q.RedirectAction(o,{url:"dashboard/designer.html#"+encodeURIComponent(e.URIString)})},DataDefinerUnit:function(e,t){return new q.RedirectAction(t,{flowId:"queryBuilderFlow",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocReportUnit:function(e,t){return new q.RedirectAction(t,{flowId:"adhocFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocDataView:function(e,t){return new q.RedirectAction(t,{flowId:"adhocFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})}},q.RedirectAction.createOpenResourceAction=function(e,t){e||(e=q.model.getSelectedResources()[0]);var o=t?q.RedirectType.WINDOW_REDIRECT:q.RedirectType.FLOW_REDIRECT,i=q.openActionFactory[e.typeSuffix()];return i?i(e,o):new q.Action((function(){alert("Open action for resource type '"+e.resourceType+"' is not implemented!")}))},q.RedirectAction.createRunInBackgroundResourceAction=function(){var e=q.model.getSelectedResources()[0],t="";if(e.resourceType.endsWith(".ReportUnit")||e.resourceType.endsWith(".AdhocReportUnit")||e.resourceType.endsWith(".DashboardModelResource")||e.resourceType.endsWith(".ReportOptions"))return e.parentResource&&(t="@@parentReportURI="+e.parentResource.URIString+"@@"),new q.RedirectAction(q.RedirectType.LOCATION_REDIRECT,{url:te.hl.vars.contextPath+"/scheduler/main.html",paramsMap:{reportUnitURI:e.URIString,parentReportUnitURI:e.parentResource?e.parentResource.URIString:"",resourceType:e.resourceType.substring(e.resourceType.lastIndexOf(".")+1)},hash:"runInBackground@"+e.URIString+t,encode:!0})},q.RedirectAction.createScheduleAction=function(){var e=q.model.getSelectedResources()[0],t="";if(e.resourceType.endsWith(".ReportUnit")||e.resourceType.endsWith(".AdhocReportUnit")||e.resourceType.endsWith(".DashboardModelResource")||e.resourceType.endsWith(".ReportOptions"))return e.parentResource&&(t="@@parentReportURI="+e.parentResource.URIString+"@@"),new q.RedirectAction(q.RedirectType.LOCATION_REDIRECT,{url:te.hl.vars.contextPath+"/scheduler/main.html",paramsMap:{reportUnitURI:e.URIString,resourceType:e.resourceType.substring(1+e.resourceType.lastIndexOf(".")),parentReportUnitURI:e.parentResource?e.parentResource.URIString:""},hash:e.URIString+t,encode:!0})},q.createActionFactory={OlapClientConnection:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"olapClientConnectionFlow",paramsMap:{ParentFolderUri:e.URI}})},OlapUnit:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"olapUnitFlow",paramsMap:{ParentFolderUri:e.URI}})},ReportDataSource:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"addDataSourceFlow",paramsMap:{ParentFolderUri:e.URI}})},SemanticLayerDataSource:function(e){return new q.RedirectAction(q.RedirectType.LOCATION_REDIRECT,{url:"domaindesigner.html",paramsMap:{ParentFolderUri:e.URI}})},FileResource:function(e,t){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"addFileResourceFlow",paramsMap:{expectedFileType:t,parentFolder:e.URI}})},ReportUnit:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"reportUnitFlow",paramsMap:{ParentFolderUri:e.URI}})},Query:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"queryFlow",paramsMap:{ParentFolderUri:e.URI}})},InputControl:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"addInputControlFlow",paramsMap:{ParentFolderUri:e.URI}})},DataType:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"dataTypeFlow",paramsMap:{ParentFolderUri:e.URI}})},ListOfValues:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"addListOfValuesFlow",paramsMap:{ParentFolderUri:e.URI}})},XMLAConnection:function(e){return new q.RedirectAction(q.RedirectType.FLOW_REDIRECT,{flowId:"mondrianXmlaSourceFlow",paramsMap:{ParentFolderUri:e.URI}})}},q.RedirectAction.createCreateResourceAction=function(e,t){var o=q.model.getContextFolder(),i=q.createActionFactory[e];return i?i(o,t):new q.Action((function(){alert("Create action for resource type suffix '"+e+"' is not implemented!")}))},q.confirmAndLeave=function(){return new q.Action((function(){return!$()&&!Y()||confirm(q.getMessage("RM_CANCEL_EDIT_MESSAGE"))})).invokeAction()};const re=q;var se=o(72861),ae=o(32169),_e=o(56461),ce=o(9231),le=o(40574),de=o(46539),ue=o(11364),he=o(45186),Ee=o(84581),me=o(63739),pe=o(76144),fe=o(31371);function ge(e){return r().isArray(e)||(e=[e]),!!r().reduce(e,(function(e,t){return e||!t.resourceType||t.resourceType.indexOf("ReportUnit")+1||t.resourceType.indexOf("ReportOptions")+1}),!1)}const Re=p.Z.extend({constructor:function(e){e||(e={}),this.options=e,p.Z.prototype.constructor.call(this,{model:this.model,resizable:!0,modal:!0,content:"",buttons:[{label:g.Z["button.export"],action:"export",primary:!0},{label:g.Z["button.cancel"],action:"cancel",primary:!1}]}),this.on("button:export",r().bind(this._onExportButtonClick,this)),this.on("button:cancel",r().bind(this._closeExportDialog,this))},initialize:function(e){this.exportView=new me.Z,this.listenTo(this.exportView.model,"validated",(function(e){e?this.buttons.enable("export"):this.buttons.disable("export")}),this),p.Z.prototype.initialize.apply(this,arguments)},openRepoDialog:function(e){var t,o=(t=e,r().isArray(t)?r().pluck(t,"URIString"):[t.URIString]),i=m.Z.organizationsFolderUri||"/organizations",n=m.Z.orgTemplateFolderUri||"/org_template",s=new RegExp("^("+i+"/([^/]+))+"),a=new RegExp("^"+i+n+"(/.*)?"),_=!!s.exec(o[0])&&!a.exec(o[0]),c={type:fe.Z.REPOSITORY,isSubOrgLevel:_},l=" "+pe.Z["export.dialog.repository.title"];this.addCssClasses("repository-export-dialog"),this._openExportDialog(c,l),this.exportView.model.set({uris:o,includeScheduledReportJobs:ge(e)})},openTenantDialog:function(e){var t=" "+e.name,o={type:e.isRoot()?fe.Z.ROOT_TENANT:fe.Z.TENANT,tenantId:e.id};this.addCssClasses("tenant-export-dialog"),this._openExportDialog(o,t)},fieldIsValid:function(){},fieldIsInvalid:function(e){},_onExportButtonClick:function(){this.exportView.doExport(),this._closeExportDialog()},_closeExportDialog:function(){this.$el.css({width:this.width}),this.close(),this.$el.find(".export-view").html("")},_openExportDialog:function(e,t){var o=pe.Z["export.dialog.title"]+(t||"");this.setContent(this.exportView.render(e).$el),this.setTitle(o),this.exportView.applyEpoxyBindings(),this.exportView.delegateEvents(),p.Z.prototype.open.apply(this,arguments),this.$el.css({minHeight:this.$el.outerHeight()}),this.width=this.$el.outerWidth()}});o(79312);var Ae=function(){var e;return(e=window).canBeRun.apply(e,arguments)},Te=function(){var e;return(e=window).canBeOpened.apply(e,arguments)};q.exportDialog=new Re,q.exportDialog.render({type:fe.Z.REPOSITORY}),q.secondarySearchBox={_searchBox:null,initialize:function(e){this._searchBox=new ce.Z({id:"secondarySearchBox"}),this._searchBox.onSearch=function(e){q.fire(q.Event.SEARCH_SEARCH,{text:e})},this.setText(e)},setText:function(e){this._searchBox.setText(e)}},q.favoriteSwitchControl={_containerId:"favorites-only",initialize:function(e){var t,o;this._container=_()("#"+this._containerId)[0],(null===(t=e.state)||void 0===t||null===(o=t.customFilters)||void 0===o?void 0:o.favoriteFilter)===q.ResourcesFavoriteAction.FAVORITE_RESOURCES&&(this._container.checked=!0),this._container.onclick=function(){q.fire(q.Event.SEARCH_FILTER,{filterId:q.ResourcesFavoriteAction.FILTER_ID,optionId:this.checked?q.ResourcesFavoriteAction.FAVORITE_RESOURCES:q.ResourcesFavoriteAction.ALL_RESOURCES})}}},q.toolbar={_bulkActions:{},initialize:function(e){this._bulkActions=e,le.Z.initialize(this._toActionMap(this._bulkActions)),this.refresh()},refresh:function(){for(var e in this._bulkActions){var t=this._bulkActions[e].buttonId,o=(0,c.J$4)(this._bulkActions[e].test);le.Z.setButtonState(_()("#"+t)[0],o())}},_toActionMap:function(e){var t={};for(var o in e){var i=e[o];t[i.buttonId]=function(e,t){return function(){var o=(0,c.qO$)(e),i=t,n=window.localContext&&window.localContext[e];i&&(0,c.kJL)(i)?o.apply(n?window.localContext:null,i):o.call(n?window.localContext:null,i)}}(i.action,i.actionArgs)}return t}},q.foldersPanel={_treeId:"foldersTree",_uri:"/",_cookieName:"lastFolderUri",_canDoBrowse:!0,_touchController:null,initialize:function(e){if(e.isFolderSet)this._uri=e.state.folderUri;else{var t=window.localStorage?localStorage.getItem(this._cookieName):void 0;this._uri=t&&t.length>0?t:"/"}return this._container=_()("#"+this.getTreeId()).parents().eq(1),this.tree=new de.Z.createRepositoryTree(this.getTreeId(),{providerId:"repositoryExplorerTreeFoldersProvider",rootUri:q.model.getRootFolderUri(),organizationId:e.organizationId,publicFolderUri:e.publicFolderUri,urlGetNode:"flow.html?_flowId=searchFlow&method=getNode",urlGetChildren:"flow.html?_flowId=searchFlow&method=getChildren",dragPattern:".draggable",selectOnMousedown:!1,escapeHyperlinks:!0}),(0,c.c4K)(_()("#"+this.getTreeId()).parents().eq(1)),this.tree.observe("key:contextMenu",(function(e){var t=e.memo.node,o=(0,c.Qyk)(t,!0);q.actionModel.showFolderMenu(e,{menuLeft:o[0]+100,menuTop:o[1]+20}),Event.stop(e)})),this.tree.observe("key:escape",(function(e){E.Z.hideMenu(),Event.stop(e)})),this.tree.observe("tree:mouseover",function(e){this.tree._overNode=e.memo.node}.bindAsEventListener(this)),this.tree.observe("tree:mouseout",function(e){this.tree.refreshDropTarget(!1),this.tree._overNode==e.memo.node&&(this.tree._overNode=null)}.bindAsEventListener(this)),this.tree.setDragStartState=function(e,t,o){de.Z.Tree.prototype.setDragStartState.call(this,e,t,o);var i=new J(e);(0,c.yHG)(o,!0)?(L(i)&&D("CopyFolder",i),_()(document.body).addClass(l.Z.COPY_CLASS)):w(i)&&D("MoveFolder",i)},this.tree.setDragEndState=function(e,t,o){q.CopyMoveController.cancel(),this.refreshDropTarget(!1),_()(document.body).removeClass(l.Z.COPY_CLASS),de.Z.Tree.prototype.setDragEndState.call(this,e,t,o)},this.tree.refreshDropTarget=function(e){this._overNode&&(this._overNode.isDropTarget=e,this._overNode.refreshStyle())},se.m9.remove(this.getTreeId()),se.m9.add(this.getTreeId(),{accept:["dragging","wrap"],onHover:function(e,t,o){if(this.tree._overNode){var i=new J(this.tree._overNode),n=e.node&&b(i)||e.items&&H(i);this.tree.refreshDropTarget(n)}}.bind(this),onDrop:function(e,t,o){var i;if(se.Mw.supportsTouch){var n=o.changedTouches[0];i=this.tree.getTreeNodeByElement(_()("#"+document.elementFromPoint(n.pageX,n.pageY))[0])}else i=this.tree.getTreeNodeByEvent(o);if(i&&(this.tree._overNode=i),this.tree._overNode){var r=new J(this.tree._overNode);e.node&&b(r)&&D("PasteFolder",r),e.items&&H(r)&&D("PasteResources",r)}}.bind(this)}),this.tree.observe("server:error",(function(){window.console&&alert("Tree load error.")})),this.tree.observe("childredPrefetched:loaded",function(e){this.tree.openAndSelectNode(this._uri)}.bindAsEventListener(this)),this.tree.observe("tree:loaded",function(e){this._canDoBrowse=!1,"/"==this._uri?_()(this.tree.rootNode).select():this.tree.openAndSelectNode(this._uri),this._canDoBrowse=!0;var t=this.tree.getSelectedNode();t&&t.scroll(_()("#"+this._treeId)[0].parentNode),this.doBrowse()}.bindAsEventListener(this)),this.tree.observe("node:selected",function(e){this._uri=e.memo.node.param.uri,window.localStorage&&localStorage.setItem(this._cookieName,this._uri),q.model.setSelectedFolder(new J(e.memo.node)),this.doBrowse()}.bindAsEventListener(this)),this.tree.observe("node:mouseup",(function(e){q.model.setContextFolder(new J(e.memo.node))})),this.tree.showTreePrefetchNodes(this._uri),this},doBrowse:function(){this._canDoBrowse&&q.fire(q.Event.SEARCH_BROWSE,{uri:this._uri})},getSelectedUri:function(){return this._uri},getTreeId:function(){return this._treeId},selectFolder:function(e){this.tree.openAndSelectNode(e.URI)},reselectFolder:function(e){e.node.isSelected()&&(e.node.deselect(),e.node.select())},refreshFolder:function(e){this.selectFolder(e),this.updateSubFolders(e)},updateFolder:function(e,t,o){e.label=t,e.description=o,e.node.changeName(e.label),e.node.param.extra.desc=e.description,this.tree.resortSubtree(e.node.parent),e.node.parent.refreshNode()},updateSubFolders:function(e){e.node.hasChilds()||e.node.setHasChilds(!0),e.node.isOpen()&&e.node.handleNode(),e.node.isloaded=!1,e.node.handleNode()},isFolderContextMenu:function(e){return this.tree.getTreeNodeByEvent(e)&&!this.tree.isIconEvent(e)},moveOrCopyFolder:function(e,t,o){var i=e.getParentFolder().node;return o||i.removeChild(e.node),this.tree.getTreeNodeChildren(t.node,function(t){if(t){var o=t.detect((function(t){return t.param.id==e.name}));o&&this.tree.openAndSelectNode(o.param.uri)}}.bind(this))}},q.resultsPanel={_list:null,_infiniteScroll:null,_resultListHeaderId:"resultsListHeader",_resultListId:"resultsList",_resultsContainerId:"resultsContainer",_touchScroller:null,_folderDisplayPathCache:{},NOTHING_TO_DISPLAY_ID:"nothingToDisplay",RESOURCE_NAME_TOOLTIP_ID:"resourceNameTooltip",NAME_PATTERN:".resourceName",LINK_NAME_PATTERN:".resourceName > a",DISCLOSURE_PATTERN:".disclosure",SCHEDULED_PATTERN:".scheduled",FAVORITE_PATTERN:".favorite",LOADING_CLASS_NAME:"loading",initialize:function(e){var t=this;this._container=_()("#"+this._resultListId).parents(),this._header=_()("#"+this._resultListHeaderId)[0],this._list=new _e.W.List(this._resultListId,{listTemplateDomId:"tabular_fourColumn_resources",itemTemplateDomId:"tabular_fourColumn_resources:leaf",dragPattern:e.enableDnD?".draggable":"",multiSelect:!0,selectOnMousedown:!(0,c.zcy)()}),this._intiListEvents(),this._initDnD(),this.getList().show(),(0,c.MEy)()&&(this._touchController=new ue.Z(document.getElementById(this._resultListId),document.getElementById(this._resultsContainerId),{scrollbars:!0}),_()("#"+this._resultListId).on("layout_update orientationchange",(function(){_()("#"+t._resultListId).css("min-width",_()("#"+t._resultsContainerId).width()+"px"),_()("#"+t._resultListId).width(_()("#"+t._resultsContainerId).width())}))),(0,c.zcy)()?this._infiniteScroll=new he.Z({id:this._container[0].identify(),contentId:this._resultListId,scroll:this._touchController}):this._infiniteScroll=new he.Z({id:this._container[0].identify(),contentId:this._resultListId}),this._infiniteScroll.onLoad=function(){q.fire(q.Event.SEARCH_NEXT)},(0,c.c4K)(this._container);var o=this._toggleInfiniteScrollBasedOnViewportHeight.bind(this);return Event.observe(_()(window)[0],"resize",r().debounce(o,250)),this._fixHeaderWidth(),this},_fixHeaderWidth:function(){(0,c.zcy)()||this._header.setStyle({marginRight:this._container[0].getWidth()-_()("#"+this._resultListId)[0].getWidth()+"px"})},_createResourceItem:function(e){var t;e.hasChildren?(t=new _e.W.CompositeItem({cssClassName:l.Z.NODE_CLASS,label:e.label,value:e,openHandlerPattern:".disclosure.icon",closeHandlerPattern:".disclosure.icon",favoriteIconPattern:".favorite.icon",scheduleIconPattern:".scheduled.icon",excludeFromSelectionTriggers:[".disclosure.icon",".favorite.icon"],listOptions:{listTemplateDomId:"tabular_fourColumn_resources_sublist",itemTemplateDomId:"tabular_fourColumn_resources_sublist:leaf",multiSelect:!0}})).setLoading=function(e){this.isLoading=e,this.refreshStyle(),q.resultsPanel.refresh()}:t=new _e.W.ListItem({cssClassName:l.Z.LEAF_CLASS,label:e.label,value:e,favoriteIconPattern:".favorite.icon",scheduleIconPattern:".scheduled.icon",excludeFromSelectionTriggers:[".favorite.icon"]}),t.processTemplate=function(e){var t=Ae(this.getValue())||Te(this.getValue())?q.resultsPanel.LINK_NAME_PATTERN:q.resultsPanel.NAME_PATTERN,o=_()(e).find(t)[0],i=e.select(q.resultsPanel.NAME_PATTERN)[0],n=_()(e).find(".resourceDescription")[0];o.update(f.Z.hardEscape(this.getValue().label));var r=this;new Ee.p(i,{text:[f.Z.hardEscape(this.getValue().label),f.Z.hardEscape(q.messages.loading)],templateId:q.resultsPanel.RESOURCE_NAME_TOOLTIP_ID,loadTextCallback:function(e){var t,o=r.getValue().parentFolder,i=q.resultsPanel._folderDisplayPathCache[o];function n(o,i,n){i=f.Z.hardEscape(i),t=f.Z.hardEscape(function(e,t){var o=q.model.getFolderSeparator();return e===o?e+t:e+o+t}(o,n)),e.updateText([i,t])}if(i)n(i,r.getValue().label,r.getValue().name);else{var s=new q.ServerAction(q.InfoAction.GET_DISPLAY_PATH,{data:{resourceUri:o,isFolder:!0}});s.onSuccess=function(e){q.resultsPanel._folderDisplayPathCache[o]=e,n(e,r.getValue().label,r.getValue().name)},s.onError=q.defaultErrorHandler,s.invokeAction()}}});var s=this.getValue().description;n.update(f.Z.hardEscape(s)),s?new Ee.p(n,{text:s}):n.jsTooltip&&n.jsTooltip.disable();var a=e.select(".resourceType")[0],c=_()(e).find(".modifiedDate")[0],l=_()(e).find(".createdDate")[0],d=_()(e).find(".scheduled")[0],u=_()(e).find(".favorite")[0];return a.update(this.getValue().type),c.update(this.getValue().updateDate),new Ee.p(c,{text:this.getValue().updateDateTime}),l.update(this.getValue().date),new Ee.p(l,{text:this.getValue().dateTime}),new Ee.p(d,{text:A.Z["schedule.tooltip"]}),new Ee.p(u,{text:A.Z["favorite.tooltip"]}),e};var o=t.refreshStyle;return t.refreshStyle=function(){o.call(this);var e=this._getElement();this.getValue().isScheduled&&_()(e).addClass(l.Z.SCHEDULED_CLASS),this.getValue().isFavorite&&_()(e).addClass(l.Z.FAVORITE_CLASS),this.isLoading&&_()(e).addClass(l.Z.LOADING_CLASS)},t},_initDnD:function(){var e=this.getList();e.setDragStartState=function(e,t,o){_e.W.List.prototype.setDragStartState.call(this,e,t,o),(0,c.yHG)(o,!0)&&_()(document.body).addClass(l.Z.COPY_CLASS).setStyle({cursor:null}),O((0,c.yHG)(o,!0)?"Copy":"Move")},e.setDragEndState=function(e,t,o){q.CopyMoveController.cancel(),q.foldersPanel.tree.refreshDropTarget(!1),_()(document.body).removeClass(l.Z.COPY_CLASS),_e.W.List.prototype.setDragEndState.call(this,e,t,o)}},_intiListEvents:function(){this.getList().observe("item:click",function(e){var t=e.memo.item,o=e.memo.targetEvent,i=t.getValue();if(this._isLinkEvent(o)&&(Ae(i)?M("RunResourceAction"):m.Z.isProVersion?Te(i)&&M("OpenResourceAction",{isContentResource:window.isContentResource(i)}):Te(i)&&M("OpenResourceAction")),this._isScheduleIconEvent(o)&&function(){var e;return(e=window).canBeScheduled.apply(e,arguments)}(i)&&M("ScheduleAction"),this._isFavoriteIconClicked(o)){var n=_()(t._element);q.addToFavorite([i],n)}}.bindAsEventListener(this)),this.getList().observe("item:selected",function(e){this._selectOrUnselectResources(e)}.bindAsEventListener(this)),this.getList().observe("item:unselected",function(e){this._selectOrUnselectResources(e)}.bindAsEventListener(this)),this.getList().observe("item:mouseup",(function(e){})),this.getList().observe("item:open",function(e){var t=e.memo.item,o=t.getValue();o.isLoaded()||(t.setLoading(!0),q.fire(q.Event.SEARCH_CHILDREN,{resource:o,item:t})),this.refresh()}.bindAsEventListener(this)),this.getList().observe("item:closed",function(e){this.refresh()}.bindAsEventListener(this)),this.getList().observe("key:contextMenu",function(e){var t=e.memo.node,o=(0,c.Qyk)(t,!0),i={menuLeft:o[0]+100,menuTop:o[1]+20};this.getList().getSelectedItems().length>1?q.actionModel.showResourceBulkMenu(e,i):q.actionModel.showResourceMenu(e,i),Event.stop(e)}.bindAsEventListener(this)),this.getList().observe("key:escape",(function(e){E.Z.hideMenu(),Event.stop(e)}))},_selectOrUnselectResources:function(e){var t=e.memo.item,o=t.getValue(),i=_()(t._element),n=this.getList().getSelectedItems().collect((function(e){return e.getValue()}));o.isFavorite&&i.addClass(l.Z.FAVORITE_CLASS),q.model.setSelectedResources(n),q.actionModel.refreshToolbar()},_isLinkEvent:function(e){var t=Event.element(e);return null!=(0,c.BwZ)(t,[this.LINK_NAME_PATTERN])},_isScheduleIconEvent:function(e){var t=Event.element(e);return _()(t).is(this.SCHEDULED_PATTERN)},_isFavoriteIconClicked:function(e){var t=Event.element(e);return _()(t).is(this.FAVORITE_PATTERN)},_isDisclosureEvent:function(e){var t=Event.element(e);return null!=(0,c.BwZ)(t,[this.DISCLOSURE_PATTERN])},_refreshEmptyListMessage:function(){var e=_()("#"+this.NOTHING_TO_DISPLAY_ID)[0];0===this._list.getItems().length?(_()(e).removeClass(l.Z.HIDDEN_CLASS),(0,c.wyW)(e,{horz:!0,vert:!0})):_()(e).addClass(l.Z.HIDDEN_CLASS)},_toggleInfiniteScrollBasedOnViewportHeight:function(){this._isListHeightLessThanViewport()?this._infiniteScroll.onLoad():(this.refresh(),this._infiniteScroll.stopWaiting())},_isListHeightLessThanViewport:function(){return this.getList()._element.clientHeight<document.body.clientHeight},getList:function(){return this._list},removeResources:function(e){var t=e.findAll((function(e){return e.isChild})),o=e.findAll((function(e){return!e.isChild})),i=this.getList().getItems(),n=[],r=[];i.each((function(e){e.isComposite&&r.push(e),o.include(e.getValue())&&n.push(e)})),r.each((function(e){e.getItems()&&e.removeItems(e.getItems().findAll((function(e){return t.include(e.getValue())})))})),this.getList().removeItems(n),this._refreshEmptyListMessage(),this.refresh()},setResources:function(e,t){var o=e.collect(this._createResourceItem),i=this.getList();t?(t.setItems(o),t.refresh()):(this._infiniteScroll&&this._infiniteScroll.reset(),i.setItems(o),i.show(),this._refreshEmptyListMessage()),this._isListHeightLessThanViewport()&&Ee.k.disableTooltips(),o.length>0&&this._toggleInfiniteScrollBasedOnViewportHeight();var n=new CustomEvent("".concat(i._id,":loaded"));i._element.dispatchEvent(n)},addResources:function(e){var t=e.collect(this._createResourceItem);Ee.k.disableTooltips(),this.getList().addItems(t),this.getList().refresh(),t.length>0&&(this._toggleInfiniteScrollBasedOnViewportHeight(),Ee.k.enableTooltips())},isResourceContextMenu:function(e){return this.getList().getItemByEvent(e)},updateResource:function(e){this.getList().getItems().each(function(t){t.getValue().URIString==e.URIString&&(t.setValue(e),t.refresh(),this.getList().isItemSelected(t)&&this.getList().selectItem(t))}.bind(this))},findResource:function(e){var t=this.getList().getItems().detect((function(t){return t.getValue().URIString===e}));return t?t.getValue():null},refresh:function(){this._fixHeaderWidth(),Ee.k.cleanUp()}},q.filtersPanel={_id:"filtersPanel",_container:void 0,_filtersLists:{},_cookieName:"filtersPopularity",_ignoreFilterEvent:!1,initialize:function(e,t){for(var o in e.each(function(e,t){var o=_()(this._getContainer().childElements()[t]);o.find(".subcontainer.ui-resizable")[0].insert(new Element("ul",{id:e.id,"data-tab-index":5+t,"data-component-type":"list"}));var i=this._createFiltersList(e.id,e);i.show(),this._filtersLists[e.id]=i,o.find(".buttonIconToggle").on("click",this._buttonToggleListener.bindAsEventListener(this._container.children[t]))[0]}.bind(this)),t)this.select(o,t[o]);return(0,c.MEy)()&&(this._touchController=new ue.Z(document.getElementById(this._id),_()("#"+this._id).parents())),this},_buttonToggleListener:function(e){_()(this).hasClass("open")?(_()(this).addClass("closed").removeClass("open"),_()(this).find(".subcontainer.ui-resizable")[0].hide()):(_()(this).addClass("open").removeClass("closed"),_()(this).find(".subcontainer.ui-resizable")[0].show())},_refreshScroll:function(){var e=l.Z.scrolls.get(this._id);e&&e.refresh()},_createItemsList:function(e){var t=e.options,o=0,i=t.collect((function(e){return new _e.W.ListItem({value:e,cssClassName:l.Z.LEAF_CLASS,label:q.getMessage(e.labelId)})})).partition((function(){return o++,-1===e.showCount||e.showCount>o}));return i[1].length>0&&i[0].push(new _e.W.CompositeItem({value:{isMore:!0},templateDomId:"list_responsive_filters:node",openUp:!0,openHandlerPattern:".more.launcher",closeHandlerPattern:".fewer.launcher",respondOnItemEvents:!1,items:i[1]})),i[0]},_createFiltersList:function(e,t){var o=new _e.W.List(e,{listTemplateDomId:"list_responsive_filters",itemTemplateDomId:"list_responsive_filters:leaf",items:this._createItemsList(t)});return o.observe("item:selected",function(e){var t=e.memo.item;t.getValue().isSeparator||t.getValue().isMore||this._ignoreFilterEvent||q.fire(q.Event.SEARCH_FILTER,{filterId:o.getId(),optionId:t.getValue().id})}.bindAsEventListener(this)),o},select:function(e,t,o){var i=this._filtersLists[e],n=function(e){if(e.getValue().id==t)throw e.isSelected()||(this._ignoreFilterEvent=o,e.select(),this._ignoreFilterEvent=!1),s.$break;if(e.isComposite){var i=e._getElement();_e.R.isItemOpen(i)||_e.R.openItem(i),e.getItems()&&e.getItems().each(n)}}.bind(this);i.getItems().each(n)},_getContainer:function(){return this._container||(this._container=_()("#"+this._id)[0],_()(this._container).hasClass(l.Z.SWIPE_SCROLL_PATTERN)&&(this._container=this._container.children())),this._container}},q.filterPath={_containerId:"filterPath",_contentBodySelector:".primary.column>.content>.body",initialize:function(){return this._filterPathList=new _e.W.List(this._containerId,{listTemplateDomId:"list_control_path",itemTemplateDomId:"list_control_path:step"}),this._filterPathList.observe("item:selected",(function(e){var t=e.memo.item;t.getValue().isLast||q.fire(q.Event.SEARCH_ROLLBACK,{position:t.getValue().position})})),this},setPathItems:function(e){if(e.length>1){var t=e.length-1,o=e.collect((function(e,o){return e.isLast=o==t,new _e.W.ListItem({label:e.label,value:e})}));this._filterPathList.setItems(o),this._filterPathList.show(),_()("#"+this._containerId).parent().removeClass("hidden"),_()(document.body).find(this._contentBodySelector).addClass("showingSubHeader")}else this._filterPathList.setItems([]),this._filterPathList.show(),_()("#"+this._containerId).parent().addClass("hidden"),_()(document.body).find(this._contentBodySelector).removeClass("showingSubHeader")}},q.sortersPanel={_LABEL_TEMPLATE_DOM_ID:"sortPanelLabelTemplate",_containerId:"sortMode",_ignoreSortEvent:!1,sortersList:null,initialize:function(e,t){this.labelItem=new _e.W.ListItem({label:q.getMessage("SEARCH_SORT_BY")+":",value:{isLabel:!0},templateDomId:"tabSet_control_horizontal_responsive:label",respondOnItemEvents:!1});var o=e.collect((function(e,t){return new _e.W.ListItem({label:q.getMessage(e.labelId),value:e})}));this.sortersList=new _e.W.List(this._containerId,{listTemplateDomId:"tabSet_control_horizontal_responsive",itemTemplateDomId:"tabSet_control_horizontal_responsive:tab",items:[this.labelItem].concat(o)});var i=this;return this.sortersList.observe(this.sortersList.Event.ITEM_SELECTED,(function(e){var t=e.memo.item;t.getValue().isLabel||i._ignoreSortEvent||(q.sortersPanel.disableItems(),q.fire(q.Event.SEARCH_SORT,{sorterId:t.getValue().id}))})),this.sortersList.show(),this.labelItem.disable(),this.select(t),this},select:function(e,t){this.sortersList.getItems().each(function(o){if(o.getValue().id===e&&!o.isSelected())return this._ignoreSortEvent=t,this.sortersList.selectItem(o),void(this._ignoreSortEvent=!1)}.bind(this))},disableItems:function(){var e=this;this.sortersList.getItems().each((function(t){t===e.labelItem||t.isSelected()||(t.disable(),t.refresh())}))},enableItems:function(){var e=this;this.sortersList.getItems().each((function(t){t===e.labelItem||t.isSelected()||(t.enable(),t.refresh())}))},_getContainer:function(){return this._container||(this._container=_()("#"+this._containerId)[0]),this._container},_getLabelTemplate:function(){var e=_()("#"+this._LABEL_TEMPLATE_DOM_ID).clone(!0);return e.removeAttribute("id"),e}};var Ie=function(e){this._resource=e,this._isVisible=!1,this._listId=this.ENTITY_LIST_ID,this._listContainerId=this.LIST_CONTAINER_ID,this._searchBoxId=this.SEARCH_BOX_ID,this.viewBy="USER",this._processTemplate()};Ie.addVar("TEMPLATE_DOM_ID","permissions"),Ie.addVar("TOOLTIP_TEMPLATE_DOM_ID","orgTooltip"),Ie.addVar("LIST_TEMPLATE_ID","tabular_twoColumn_setLeft"),Ie.addVar("ITEM_TEMPLATE_ID","tabular_twoColumn_setLeft:leaf"),Ie.addVar("WAIT_ITEM_TEMPLATE_ID","tabular_twoColumn_setLeft:loading"),Ie.addVar("ENTITY_LIST_ID","permissionsList"),Ie.addVar("LIST_CONTAINER_ID","permissionsListContainer"),Ie.addVar("SEARCH_BOX_ID","searchPermissionsBox"),Ie.addVar("NAME_TOOLTIP_PATTERN",".one"),Ie.addVar("NAME_PATTERN",".one>a.launcher"),Ie.addVar("PERMISSIONS_PATTERN",".two>select"),Ie.addVar("VIEW_BY_TAB_SET_PATTERN","#permissionsViewBy"),Ie.addVar("TAB_PATTERN",".tab>p"),Ie.addVar("PATH_PATTERN",".path"),Ie.addVar("SUBMIT_BUTTON","#permissionsOk"),Ie.addVar("APPLAY_BUTTON","#permissionsApply"),Ie.addVar("CANCEL_BUTTON","#permissionsCancel"),Ie.addVar("BODY_PATTERN","div.body"),Ie.addMethod("_processTemplate",(function(){this._dom=_()("#"+this.TEMPLATE_DOM_ID).clone(!0)[0],_()(this._dom).attr("id",null),_()(this._dom).children(".body").attr("id","");var e=_()(this._dom).find(this.PATH_PATTERN)[0];e.update(f.Z.hardEscape(this._resource.URIString.truncate(50))),_()(e).attr("title",this._resource.URIString),this._viewByTabSet=_()(this._dom).find(this.VIEW_BY_TAB_SET_PATTERN)[0],this._byUsersButton=_()(this._dom).find(this.TAB_PATTERN)[0],this._byRolesButton=_()(this._dom).find(this.TAB_PATTERN)[1],this._submitButton=_()(this._dom).find(this.SUBMIT_BUTTON)[0],this._applyButton=_()(this._dom).find(this.APPLAY_BUTTON)[0],this._cancelButton=_()(this._dom).find(this.CANCEL_BUTTON)[0],this._byUsersButton.viewType="USER",this._byRolesButton.viewType="ROLE",_()(this._submitButton).attr("id",null),_()(this._applyButton).attr("id",null),_()(this._cancelButton).attr("id",null);var t=_()(this._dom).find("#"+this.ENTITY_LIST_ID)[0],o=_()(this._dom).find("#"+this.LIST_CONTAINER_ID)[0],i=_()(this._dom).find("#"+this.SEARCH_BOX_ID)[0];this._listId=_()(t).attr("id",null)[0].identify(),this._listContainerId=_()(o).attr("id",null)[0].identify(),this._searchBoxId=_()(i).attr("id",null)[0].identify()})),Ie.addMethod("_updateValueAndLabel",(function(e,t,o,i){var n=_()(e).find(t)[0];return n.writeAttribute("id",null),n.setValue(o),_()(e).find(i).attr("for",n.identify()),n})),Ie.addMethod("_updateContentAndLabel",(function(e,t,o,i){var n=_()(e).find(t)[0];return n.writeAttribute("id",null),n.update(o),_()(e).find(i).attr("for",n.identify()),n})),Ie.addMethod("_buttonClickHandler",(function(e){var t=e.target;if(!this._waiting){var o=(0,c.BwZ)(t,[l.Z.BUTTON_PATTERN],!0),i=this._resource.URIString;[this._submitButton,this._applyButton].include(o)&&(_()(this._byUsersButton).addClass(l.Z.BUTTON_CLASS),_()(this._byRolesButton).addClass(l.Z.BUTTON_CLASS),q.fire(q.PermissionEvent.UPDATE,{uri:i,entities:this.getChangedEntities(),finishEdit:o==this._submitButton})),[this._byUsersButton,this._byRolesButton].include(o)&&(this.isChanged()?(this._showWarning(),e.stopPropagation()):(this._hideWarning(),this.viewBy=o.viewType,q.fire(q.PermissionEvent.BROWSE,{uri:i,type:this.viewBy}))),[this._cancelButton].include(o)&&this.hide()}})),Ie.addMethod("_showWarning",(function(){_()(this._dom).find(this.BODY_PATTERN).addClass(l.Z.ERROR_CLASS)})),Ie.addMethod("_hideWarning",(function(){_()(this._dom).find(this.BODY_PATTERN).removeClass(l.Z.ERROR_CLASS)})),Ie.addMethod("_launcherClickHandler",(function(e){var t=e.element();if(!this._waiting&&(0,c.BwZ)(t,[this.NAME_PATTERN],!0)){var o=_()(t).parent("li");if(o&&o.listItem)o.listItem.getValue().navigateToManager()}e.preventDefault(),e.stopPropagation()})),Ie.addMethod("_selectChangeHandler",(function(e){var t=e.target;if(e.stopPropagation(),!this._waiting){if("select"==t.tagName.toLowerCase()){var o=t.options[t.selectedIndex].value,i=_()(t).parents("li")[0];if(i&&i.listItem){var n=i.listItem.getValue();i.listItem.getValue().permission.newPermission=o!=n.permission.getResolvedPermission()?o:void 0,i.listItem.refresh()}}this.isChanged()?(_()(this._byUsersButton).removeClass(l.Z.BUTTON_CLASS),_()(this._byRolesButton).removeClass(l.Z.BUTTON_CLASS)):(_()(this._byUsersButton).addClas(l.Z.BUTTON_CLASS),_()(this._byRolesButton).addClass(l.Z.BUTTON_CLASS))}})),Ie.addMethod("_selectMouseOverHandler",(function(e){(0,c.BwZ)(e.target,[this.PERMISSIONS_PATTERN],!0)&&e.stopPropagation()})),Ie.addMethod("_initControls",(function(){this.list=new _e.W.List(this._listId,{listTemplateDomId:this.LIST_TEMPLATE_ID,itemTemplateDomId:this.ITEM_TEMPLATE_ID});var e=_()("#"+this._listId).parents();(0,c.MEy)()&&(this._touchController||(this._touchController=new ue.Z(_()("#"+this._listId)[0],_()("#"+this._listId).parents(),{forceLayout:!0}))),this._infiniteScroll=new he.Z({id:e[0].identify(),contentId:this._listId,scroll:this._touchController||void 0}),this._searchBox=new ce.Z({id:this._searchBoxId});var t=this._resource.URIString;this._infiniteScroll.onLoad=function(){this._waiting||q.fire(q.PermissionEvent.NEXT,{text:this._searchBox.getText(),uri:t,type:this.viewBy})}.bind(this),this._searchBox.onSearch=function(e){this._waiting||(this.isChanged()?this._showWarning():(this._hideWarning(),q.fire(q.PermissionEvent.SEARCH,{text:e,uri:t,type:this.viewBy})))}.bind(this)})),Ie.addMethod("show",(function(){this._isVisible||(document.body.insert(this._dom),this._initControls(),this.list.setItems([]),this.list.show(),u.Z.entityList._createEntityItem=this._createEntityItem,this.viewBy="ROLE",q.fire(q.PermissionEvent.BROWSE,{initialize:!0,uri:this._resource.URIString,type:this.viewBy,isFolder:this._resource.isFolder()}),this._isVisible=!0,document.getElementById(this._listId).parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.style.height="360px",i.Z.popup.show(this._dom),this._dom.observe("click",this._buttonClickHandler.bindAsEventListener(this)),(0,c.MEy)()&&this._viewByTabSet.observe("touchstart",this._buttonClickHandler.bindAsEventListener(this)),this._dom.observe("click",this._launcherClickHandler.bindAsEventListener(this)),this._dom.observe("mouseover",this._selectMouseOverHandler.bindAsEventListener(this)))})),Ie.addMethod("showAndWait",(function(){this._isVisible||(this._waiting=!0,this.show(),this._waitingItem=new _e.W.ListItem({templateDomId:this.WAIT_ITEM_TEMPLATE_ID}),this.list.addItems([this._waitingItem]),this.list.refresh(),this.disable())})),Ie.addMethod("stopWaiting",(function(){this._waiting&&(this._waiting=!1,this.list.removeItems([this._waitingItem]),this.enable())})),Ie.addMethod("hide",(function(){i.Z.popup.hide(this._dom),this._dom.remove(),this._dom.stopObserving("click"),this._dom.stopObserving("change"),this._dom.stopObserving("mouseover"),(0,c.MEy)()&&this._viewByTabSet.stopObserving("touchstart"),q.dialogsPool.removePermissionsDialog(this._resource)})),Ie.addMethod("enable",(function(){this._searchBox.enable(),h.Z.enable(this._byUsersButton),h.Z.enable(this._byRolesButton)})),Ie.addMethod("disable",(function(){this._searchBox.disable(),h.Z.disable(this._byUsersButton),h.Z.disable(this._byRolesButton)})),Ie.addMethod("_createItem",(function(e){var t=new _e.W.ListItem({label:e.getDisplayName(),value:e}),o=this.NAME_TOOLTIP_PATTERN,i=this.NAME_PATTERN,n=this.PERMISSIONS_PATTERN,s=this.TOOLTIP_TEMPLATE_DOM_ID,a=this;return t.processTemplate=function(e){var t=_()(e).find(o)[0],c=_()(e).find(i)[0],d=_()(e).find(n)[0],u=this.getValue().permission,h=this.getValue().tenantId;if(u.newPermission?_()(c).addClass(l.Z.EMPHASIS_CLASS):_()(c).removeClass(l.Z.EMPHASIS_CLASS),c.update(f.Z.hardEscape(this.getValue().getDisplayName())),h&&h.length>0){new Ee.p(t,{text:f.Z.hardEscape(h),templateId:s});var E=e.remove;e.remove=function(){Ee.k.hideJSTooltip(t),Ee.k.cleanUp(),E.apply(this)}}d.update("");var m=0,p=q.model.getConfiguration().permissions;p=r().uniq(p,!1,(function(e){return e.labelId}));for(var g=0;g<p.length;g++){"REAL_READ_WRITE_DELETE"===p[g].name&&(p[g].name="READ_WRITE_DELETE");var R=q.getMessage(p[g].labelId),A=new Element("option",{value:p[g].name});d.insert(A.update(u.inheritedPermission==p[g].name?f.Z.hardEscape(R+" *"):f.Z.hardEscape(R))),u.newPermission?u.newPermission==p[g].name&&(m=g):u.getResolvedPermission()==p[g].name&&(m=g)}return d.observe("change",a._selectChangeHandler.bindAsEventListener(a)),d.selectedIndex=m,this.getValue().permission.isDisabled&&_()(d).attr("disabled","disabled"),e},t})),Ie.addMethod("addEntities",(function(e){var t=e.collect(this._createItem.bind(this));this.list.addItems(t),this.list.refresh(),this._infiniteScroll.stopWaiting()})),Ie.addMethod("resetList",(function(e){var t=_()("#"+e);_()(t).find("[js-nonmodal-tabindex]").removeAttr("js-nonmodal-tabindex"),_()(t).find("[js-navtype]").attr("js-navtype",!1),_()(t).find("[tabindex]").removeAttr("tabindex")})),Ie.addMethod("scrollReset",(function(){var e=this._listId,t=this.resetList;_()("#"+this._listContainerId).find(".content").find(".body").on("scroll",r().debounce((function(){t(e)}),100))})),Ie.addMethod("setEntities",(function(e){this.list.setItems([]),this._touchController&&this._touchController.reset(),this.addEntities(e),this.resetList(this._listId),this.scrollReset()})),Ie.addMethod("getChangedEntities",(function(){var e=this.list.getItems(),t=[];return e.each((function(e){var o=e.getValue();o.permission&&o.permission.newPermission&&t.push(o)})),t})),Ie.addMethod("updateEntities",(function(e){this.list.getItems().each((function(t){var o=t.getValue(),i=e.detect((function(e){return e.equals(o)}));i&&(t.setValue(i),t.refresh())}))})),Ie.addMethod("isChanged",(function(){return this.getChangedEntities().length>0})),q.dialogsPool={POOL_NOT_FOUND_EXCEPTION:"PoolNotFoundException",DIALOD_EXIST_EXCEPTION:"DialodExistException",NULL_RESOURCE_EXCEPTION:"NullResourceException",_permissionsDialogPool:{},_propertiesDialogPool:{},_getPool:function(e){var t;if(e==Ie&&(t=this._permissionsDialogPool),e==De&&(t=this._propertiesDialogPool),t)return t;throw{name:this.POOL_NOT_FOUND_EXCEPTION,message:"Can't find pool for "+e.toString()}},_createDialog:function(e,t,o){var i=t.URIString,n=this._getPool(e);if(null==t)throw{name:this.NULL_RESOURCE_EXCEPTION,message:"Resource is null."};if(n[i])throw{name:this.DIALOD_EXIST_EXCEPTION,message:e.toString()+" dilaog for resource '"+i+"' arleady exist."};return n[i]=new e(t,o),n[i]},_createOrGetDialog:function(e,t,o){try{return this._createDialog(e,t,o)}catch(o){if(o.name==this.DIALOD_EXIST_EXCEPTION)return this._getDialog(e,t);throw o}},_getDialog:function(e,t){var o=Object.isString(t)?t:t.URIString;return this._getPool(e)[o]},_getAllDialogs:function(e){var t=this._getPool(e),o=[];for(var i in t)t[i]&&o.push(t[i]);return o},_removeDialog:function(e,t){var o=Object.isString(t)?t:t.URIString;this._getPool(e)[o]=void 0},createPermissionsDialog:function(e){return this._createDialog(Ie,e)},createPropertiesDialog:function(e){return this._createDialog(De,e)},createOrGetPermissionsDialog:function(e){return this._createOrGetDialog(Ie,e)},createOrGetPropertiesDialog:function(e,t){return this._createOrGetDialog(De,e,t)},getAllPermissionsDialogs:function(){return this._getAllDialogs(Ie)},getAllPropertiesDialogs:function(){return this._getAllDialogs(De)},getPermissionsDialog:function(e){return this._getDialog(Ie,e)},getPropertiesDialog:function(e){return this._getDialog(De,e)},removePermissionsDialog:function(e){return this._removeDialog(Ie,e)},removePropertiesDialog:function(e){return this._removeDialog(De,e)}};var De=function(e,t){this._resource=e,this._changedCallback=t.changedCallback,this._showMode=t.showMode,this._processTemplate()};De.addVar("TEMPLATE_DOM_ID","propertiesResource"),De.addMethod("_processTemplate",(function(){this._dom=_()("#"+this.TEMPLATE_DOM_ID).clone(!0)[0],_()(this._dom).attr("id",null),_()(this._dom).addClass("_activeResourcePropertiesDialog");var e=_()(this._dom).find(".title")[0];e.update(_()(e).html().strip()+": "+f.Z.hardEscape(this._resource.label).truncate(50)),this._label=this._updateValueAndLabel(this._dom,"input#displayName",this._resource.label,'label[for="displayName"]'),this._description=this._updateContentAndLabel(this._dom,"textarea#description",f.Z.hardEscape(this._resource.description),'label[for="description"]'),this._path=this._updateValueAndLabel(this._dom,"input#path",f.Z.hardEscape(this._resource.URIString),'label[for="path"]'),this._showMode&&(_()(this._dom).addClass("showMode"),_()(this._label).attr("readonly","readonly"),_()(this._description).attr("readonly","readonly")),this._updateValueAndLabel(this._dom,"div#resourceID",f.Z.hardEscape(this._resource.name),'label[for="resourceID"]'),this._updateValueAndLabel(this._dom,"input#type",f.Z.hardEscape(this._resource.type),'label[for="type"]'),this._updateValueAndLabel(this._dom,"input#createdDate",f.Z.hardEscape(this._resource.date),'label[for="createdDate"]'),this._updateValueAndLabel(this._dom,"input#userAccess",f.Z.hardEscape(this._resource.permissionsToString()),'label[for="userAccess"]'),this._submitButton=_()(this._dom).find("button.submit")[0],this._cancelButton=_()(this._dom).find("button.cancel")[0],this._okButton=_()(this._dom).find("button.ok")[0]})),De.addMethod("_updateValueAndLabel",(function(e,t,o,i){var n=_()(e).find(t)[0];return _()(n).attr("id",null),_()(n).attr("value",o),n.setValue?n.setValue(o):n.update(o),_()(e).find(i).attr("for",n.identify()),n})),De.addMethod("_updateContentAndLabel",(function(e,t,o,i){var n=_()(e).find(t)[0];return _()(n).attr("id",null),n.update(o),_()(e).find(i).attr("for",n.identify()),n})),De.addMethod("_buttonClickHandler",(function(e){var t=(0,c.BwZ)(e.target,[l.Z.BUTTON_PATTERN],!0);if(t==this._submitButton){if(this._showMode)this._hide();else if(this._isDataValid()){if(this._changedCallback){var o=this._resource.clone();o.label=this._label.getValue(),o.description=this._description.getValue(),this._changedCallback(o)}this._hide()}}else t!=this._cancelButton&&t!=this._okButton||this._hide()})),De.addMethod("_isDataValid",(function(e){return c.n4K.validate([{validator:Q.labelValidator,element:this._label},{validator:Q.descriptionValidator,element:this._description}])})),De.addMethod("show",(function(e){document.body.insert(this._dom),e&&e.cascade?i.Z.popup.show(this._dom,!1,e):i.Z.popup.show(this._dom),this._dom.observe("click",this._buttonClickHandler.bindAsEventListener(this))})),De.addMethod("_hide",(function(){i.Z.popup.hide(this._dom),this._dom.remove(),this._dom.stopObserving("click"),q.dialogsPool.removePropertiesDialog(this._resource)})),De.addMethod("isChanged",(function(){return this._resource.label!=this._label.getValue()||this._resource.description!=this._description.getValue()})),q.showCreateFolderConfirm=function(e){var t,o=_()("#addFolder")[0],n=_()("#addFolderInputName")[0],r=_()("#addFolderInputDescription")[0],s=_()("#addFolderBtnAdd")[0],a=_()("#addFolderBtnCancel")[0],l=function(e){t=e,i.Z.popup.show(o),n.setValue(q.messages["action.create.folder.name"]),ae.Z.disable(),setTimeout((function(){n.focus(),n.select()}),500)},d=function(e){n.clear(),r.clear(),c.n4K.hideError(n),c.n4K.hideError(r),i.Z.popup.hide(o),ae.Z.enable(),e.stopPropagation()};s.observe("click",(function(e){c.n4K.validate([{validator:Q.labelValidator,element:n},{validator:Q.descriptionValidator,element:r}])&&function(e){"disabled"!==_()(s).attr("disabled")&&(new q.ServerAction.createFolderAction(q.FolderAction.CREATE,{toFolder:t,label:n.getValue(),desc:r.getValue()}).invokeAction(),d(e))}(e),e.stopPropagation()})),a.observe("click",d),q.showCreateFolderConfirm=l,l(e)},q.DeleteConfirmation={ID_DELETE_DIALOG_CONTAINER:"standardConfirm",ID_DELETE_DIALOG_OK_BUTTON:"deleteResourceOK",ID_DELETE_DIALOG_CANCEL_BUTTON:"deleteResourceCancel"},q.showDeleteFolderConfirm=function(e){var t=q.getMessage("SEARCH_DELETE_FOLDER_CONFIRM_MSG",{folderUri:e.URI}),o=new q.ServerAction.createFolderAction(q.FolderAction.DELETE,{folder:e});q._showDeleteDialog(t,o)},q.showDeleteResourceConfirm=function(e){var t=q.getMessage("SEARCH_DELETE_CONFIRM_MSG",{resourceUri:e.URIString}),o=new q.ServerAction.createResourceAction(q.ResourceAction.DELETE,{resources:[e]});q._showDeleteDialog(t,o)},q.showBulkDeleteResourcesConfirm=function(e){var t=q.getMessage("SEARCH_BULK_DELETE_CONFIRM_MSG",{count:e.length}),o=new q.ServerAction.createResourceAction(q.ResourceAction.DELETE,{resources:e});q._showDeleteDialog(t,o)},q._showDeleteDialog=function(e,t){var o=_()("#"+q.DeleteConfirmation.ID_DELETE_DIALOG_CONTAINER);o.find(".body").html(f.Z.hardEscape(e)),i.Z.popupConfirm.show(o,!0,{okButtonSelector:"#"+q.DeleteConfirmation.ID_DELETE_DIALOG_OK_BUTTON,cancelButtonSelector:"#"+q.DeleteConfirmation.ID_DELETE_DIALOG_CANCEL_BUTTON}),_()("#"+q.DeleteConfirmation.ID_DELETE_DIALOG_OK_BUTTON).on("click",(function(){t.invokeAction()}))},q.showResourceProperties=function(e,t){q.dialogsPool.createOrGetPropertiesDialog(e,{showMode:!0}).show(t)},q.editResourceProperties=function(e,t){q.dialogsPool.createOrGetPropertiesDialog(e,{changedCallback:function(e){new q.ServerAction.createResourceAction(q.ResourceAction.UPDATE,{resource:e}).invokeAction()}}).show(t)},q.showFolderProperties=function(e){q.dialogsPool.createOrGetPropertiesDialog(e,{showMode:!0}).show()},q.editFolderProperties=function(e){q.dialogsPool.createOrGetPropertiesDialog(e,{changedCallback:function(e){new q.ServerAction.createFolderAction(q.FolderAction.UPDATE,{folder:e}).invokeAction()}}).show()},q.addToFavorite=function(e,t){var o=_()(this._container).find(".resources.selected"),i=t||o,n=m.Z.contextPath+"/rest_v2/favorites",r=Q.getSelectedResourceUris(e);e.every((function(e){return e.isFavorite}))?(n+="/delete",q.onFavoriteItem(n,r).then((function(){i.removeClass(l.Z.FAVORITE_CLASS),q.setFavorite(e)}))):q.onFavoriteItem(n,r).then((function(){i.addClass(l.Z.FAVORITE_CLASS),q.setFavorite(e)}))},q.setFavorite=function(e){e.forEach((function(e){e.isFavorite=!e.isFavorite}))},q.editResourcePermissions=function(e){q.dialogsPool.createOrGetPermissionsDialog(e).showAndWait()},q.editFolderPermissions=function(e){q.dialogsPool.createOrGetPermissionsDialog(e).showAndWait()},q.showUploadThemeConfirm=function(e,t){var o,n,r=_()("#uploadTheme")[0],s=_()("#themeName")[0],a=_()("#themeZip")[0],l=_()("#uploadThemeBtnUpload")[0],d=_()("#uploadThemeBtnCancel")[0],u=function(e,t){o=e,n=t,i.Z.popup.show(r),s.removeAttribute("disabled"),s.setValue(q.messages.RM_NEW_THEME_NAME),n&&(_()(s).attr("disabled"),s.setValue(o.name)),s.select(),s.focus()},h=function(e){s.clear(),a.clear(),i.Z.popup.hide(r),e.stopPropagation()};l.observe("click",(function(e){c.n4K.validate([{validator:Q.labelValidator,element:s},{validator:Q.zipFileTypeValidator,element:a}])&&function(e){var t={};if(t.themeName=s.getValue(),t._eventId="uploadTheme",t._flowExecutionKey=q.flowExecutionKey,t.folderUri=o.URI,t.folderUri=o.URI,n){var i=o.URI;t.folderUri=i.slice(0,i.lastIndexOf("/")),t.reuploadAction=n,t._eventId="reuploadTheme"}c.MNC.upload(a,"searchFlow",t,(function(e){var i;if(a=_()("#themeZip")[0],e)try{if((i=e.evalJSON())&&"OK"==i.status){if(i.data.themeExist){var r=q.messages.SEARCH_OVERWRITE_THEME_CONFIRM_MSG,s=new T({text:r});s.on("button:yes",(function(){new q.ServerAction.createFolderAction(q.ThemeAction.REUPLOAD,t).invokeAction(),s.remove()})),s.on("button:no",(function(){s.remove()})),s.open()}else if(i.data.isActiveTheme){var c=i.data.themeUri;new q.ServerAction.createFolderAction(q.ThemeAction.SETTHEME,{folderUri:c}).invokeAction()}}else i&&"ERROR"==i.status?alert(i.data):alert(q.messages.RM_UPLOAD_THEME_ERROR)}catch(e){alert(e)}n&&i.data.isActiveTheme||q.foldersPanel.refreshFolder(o)})),h(e)}(e),e.stopPropagation()})),d.observe("click",h),q.showUploadThemeConfirm=u,u(e,t)};const ve=q;var Oe=Object.assign(q,re,ve);window.repositorySearch=Oe;const Me=Oe;o(15892);i.Z.dependentResources={dependenciesPanel:null,show:function(e,t,o){this.dependenciesPanel=_()("#dependencies"),this._$title=this.dependenciesPanel.find(".content .header .title"),o.dialogTitle&&(this._titleBackup=this._$title.html(),this._$title.html(o.dialogTitle)),i.Z.popup.show(this.dependenciesPanel[0]),this._changeMessage(o),this._switchButtons(o);var n=this._initList(e);this.dependenciesPanel.on("click",(function(e){var o=_()(e.target).closest("button").attr("id"),s=t&&t[o];r().include(["dependenciesBtnSave","dependenciesBtnSaveAs","dependenciesBtnOk","dependenciesBtnCancel"],o)&&(i.Z.dependentResources.hide(),n.setItems([]),e.stopPropagation(),s&&s())}))},hide:function(){this.dependenciesPanel&&(this.dependenciesPanel.off("click"),i.Z.popup.hide(this.dependenciesPanel[0]),this.dependenciesPanel=null),this._titleBackup&&this._$title&&(this._$title.html(this._titleBackup),this._titleBackup=null)},_changeMessage:function(e){_()("#topMessage").html(e.topMessage),_()("#bottomMessage").html(e.bottomMessage)},_initList:function(e){var t=new _e.W.List("dependenciesList",{listTemplateDomId:"tabular_oneColumn",itemTemplateDomId:"tabular_oneColumn:leaf"}),o=[];return e&&(o=e.collect((function(e){var t=new _e.W.ListItem({cssClassName:l.Z.LEAF_CLASS,value:e});return t.processTemplate=function(e){var t,o=_()(e).find(".uri");return t="string"==typeof this.getValue()?this.getValue():this.getValue().uristring?this.getValue().uristring:this.getValue().URIString,o.html(f.Z.hardEscape(t)),e},t}))),t.setItems(o),t.show(),t},_switchButtons:function(e){var t,o={save:_()("#dependenciesBtnSave"),saveAs:_()("#dependenciesBtnSaveAs"),ok:_()("#dependenciesBtnOk"),cancel:_()("#dependenciesBtnCancel")};t=e.buttons?e.buttons:e.okOnly?["ok"]:e.canSave?["save","saveAs","cancel"]:["ok","cancel"],r().each(o,(function(e,o){t.indexOf(o)<0?e.addClass("hidden"):e.removeClass("hidden")}))}};i.Z.dependentResources;r().extend(Me.messages,m.Z.repositorySearch.i18n),r().extend(_e.W.messages,m.Z.dynamicList.i18n),r().extend(window.localContext,m.Z.repositorySearch.localContext),Me.initialize(window.localContext)},24777:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});const i={}},45186:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var i=o(64155),n=o(72157),r=o.n(n),s=function(e){this._id=e.id,this._contentId=e.contentId?e.contentId:void 0,this._scroll=e.scroll,this._loadFactor=e.loadFactor?e.loadFactor:.95,this._lastContentHeight=0,this._loading=!1,e.control?void 0!==e.control.length&&e.control.length>1?this._control=r()(e.control[0]):this._control=r()(e.control)[0]:this._control=this._scroll?this._scroll.parent:r()("#"+this._id)[0],this._scroll?this._content=this._scroll.element:e.content?void 0!==e.content.length&&e.content.length>1?this._content=r()(e.content[0]):this._content=r()(e.content)[0]:this._content=this._contentId?r()("#"+this._contentId)[0]:this._control.childElements()[0],this._eventType=(0,i.MEy)()?"touchmove":"scroll",this._control.observe(this._eventType,this._onScrollHandler.bind(this))};s.addMethod("destroy",(function(){this._control&&this._control.stopObserving(this._eventType,this._handler)})),s.addMethod("_onScrollHandler",(function(e){var t=this._scroll?-1*this._scroll.y:this._control.scrollTop,o=this._content.getHeight(),n=this._control.getHeight();o!=this._lastContentHeight&&(this._loading=!1);var r=!this._loading&&0!=o;(r=this._scroll?r&&this._scroll.isBottom():r&&(n+t)/o>this._loadFactor)&&(this._loading=!0,this._lastContentHeight=o,(0,i.zcy)()&&this.wait(),this.onLoad())})),s.addMethod("onLoad",i.cnY),s.addMethod("reset",(function(){(0,i.zcy)()?this._scroll.reset():this._control.scrollTop=0,this._loading=!1})),s.addMethod("wait",(function(){if(!this._waitIndicator){this._waitIndicator=new Element("div",{class:"dimmer resultsOverlay"});var e=this._control.getDimensions(),t=this._control.positionedOffset();this._waitIndicator.setStyle({zIndex:"4000",top:t.top+"px",left:t.left+"px",height:e.height+"px",width:e.width+"px"}),this._control.insert({after:this._waitIndicator})}this._waitIndicator.show()})),s.addMethod("stopWaiting",(function(){this._waitIndicator&&this._waitIndicator.hide()})),window.InfiniteScroll=s;const a=s},59772:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var i=o(5887),n=o.n(i),r=o(97836),s=o.n(r),a=new(o(92772).Z),_=n().mixin.validate;n().mixin.validate=function(e,t){t||(t={});var o=this;return _.call(this,e,s().extend({valid:function(e,t){o.trigger("validate:"+t,o,t)},invalid:function(e,t,i){o.trigger("validate:"+t,o,t,i)}},t))},s().extend(n().validators,{doesNotContainSymbols:function(e,t,o){if(new RegExp("["+o+"]","g").test(e))return"Attribute '"+t+"' contains forbidden symbols"},integerNumber:function(e){if(!a.isNumberInt(e))return"Value is not a valid integer number"},type:function(e,t,o){if(s().isArray(o)||(o=[o]),!o.some((function(t){return function(e){var t;return"string"==e?t=s().isString:"number"===e?t=s().isNumber:"object"===e?t=s().isObject:"boolean"===e?t=s().isBoolean:"null"===e?t=s().isNull:"undefined"===e&&(t=s().isUndefined),t}(t)(e)})))return"'{attr}' is not {type}".replace("{attr}",t).replace("'{type}'",o.join(" "))},url:function(e){if(!/(http|https):\/\/.*\..*./.test(e))return"Value is not a valid url"},hexColor:function(e){if(!/^#[0-9a-f]{3,6}$/i.test(e))return"Value is not a valid hex color"},xRegExpPattern:function(e,t,o,i){if(!o.test(e))return"Value does not match pattern"},startsWithLetter:function(e,t,o,i){if(!e.substr(0,1).match(/[A-Za-z]/))return"Value should start with letter"},containsOnlyWordCharacters:function(e,t,o,i){if(e.search(/\W/)>=0)return"Value should contain only word characters (letters, digits and underscore)"},arrayMinLength:function(e,t,o,i){if(s().isArray(e)&&e.length<o)return"Array length is less than "+o}});const c=n()},79312:()=>{if("function"!=typeof window.CustomEvent){var e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o};e.prototype=window.Event.prototype,window.CustomEvent=e}},81180:(e,t,o)=>{"use strict";o.d(t,{Z:()=>c});var i=o(97836),n=o.n(i),r=o(15892);const s={100:"continue",101:"switchingProtocols",200:"ok",201:"created",202:"accepted",203:"nonAuthoritativeInformation",204:"noContent",205:"resetContent",206:"partialContent",300:"multipleChoices",301:"movedPermanently",302:"found",303:"seeOther",304:"notModified",305:"useProxy",307:"temporaryRedirect",400:"badRequest",401:"unauthorized",402:"paymentRequired",403:"forbidden",404:"notFound",405:"methodNotAllowed",406:"notAcceptable",407:"proxyAuthenticationRequired",408:"requestTimeout",409:"conflict",410:"gone",411:"lengthRequired",412:"preconditionFailed",413:"requestEntityTooLarge",414:"requestUriTooLong",415:"unsupportedMediaType",416:"requestedRangeNotSatisfiable",417:"expectationFailed",500:"internalServerError",501:"notImplemented",502:"badGateway",503:"serviceUnavailable",504:"gatewayTimeout",505:"httpVersionNotSupported"},a="unexpected.error";var _=o.n(r)().Model.extend({initialize:function(){this.on("error",_.unifyServerErrors)},serialize:function(){return n().clone(this.attributes)}},{unifyServerErrors:function(e,t){var o=s[t.status],i=_.createServerError(t);e.trigger("error:"+o,e,i,t),e.trigger("error:all",e,i,t)},createServerError:function(e){var t;try{t=JSON.parse(e.responseText)}catch(e){t={message:"Can't parse server response",errorCode:a,parameters:[]}}return t}});const c=_},92772:(e,t,o)=>{"use strict";o.d(t,{Z:()=>_});var i=o(97836),n=o.n(i),r=function(e){function t(e){return"."===e?e="\\.":" "===e&&(e="\\s"),e}e=e||{},this.DECIMAL_SEPARATOR=e.decimalSeparator||".",this.GROUPING_SEPARATOR=e.groupingSeparator||",",this.decimalSeparator=t(this.DECIMAL_SEPARATOR),this.groupingSeparator=t(this.GROUPING_SEPARATOR),this.DECIMAL_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*("+this.decimalSeparator+"[0-9]+)?|[1-9]{1}[0-9]{0,}("+this.decimalSeparator+"[0-9]+)?|0("+this.decimalSeparator+"[0-9]+)?)$"),this.INTEGER_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*|[1-9]{1}[0-9]{0,}|0)$")},s=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER+1:9007199254740992,a=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER-1:-9007199254740992;r.prototype.number_format=function(e,t,o,i){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var n,r,s,a=isFinite(+e)?+e:0,_=isFinite(+t)?Math.abs(t):0,c=void 0===i?",":i,l=void 0===o?".":o,d=(_?(n=a,r=_,s=Math.pow(10,r),""+(Math.round(n*s)/s).toFixed(r)):""+Math.round(a)).split(".");return d[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),(d[1]||"").length<_&&(d[1]=d[1]||"",d[1]+=new Array(_-d[1].length+1).join("0")),d.join(l)},r.prototype.isInt=function(e){return this.isNumberInt(e)||this.isStringInt(e)},r.prototype.isNumberInt=function(e){return n().isNumber(e)&&!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY&&(e===+e&&e===(0|e)||e%1==0)},r.prototype.isStringInt=function(e){return n().isString(e)&&this.INTEGER_NUMBER_PATTERN.test(e)},r.prototype.isInt32=function(e){return this.isInt(e)&&this.parseNumber(e)>=-2147483648&&this.parseNumber(e)<=2147483647},r.prototype.isDecimal=function(e){return n().isNumber(e)&&!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY||n().isString(e)&&this.DECIMAL_NUMBER_PATTERN.test(e)},r.prototype.parseNumber=function(e){if(n().isNumber(e))return e;if(n().isString(e)&&this.DECIMAL_NUMBER_PATTERN.test(e)){var t=1*(e=e.replace(new RegExp(this.groupingSeparator,"g"),"").replace(new RegExp(this.decimalSeparator,"g"),"."));return t>=s||t<=a?(window.console&&window.console.warn(e+" is out of the ["+(a+1)+", "+(s-1)+"] bounds. Parsing results may be corrupted. Use string representation instead. For more details see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number."),!1):t}},r.prototype.formatNumber=function(e,t){t=t||{};var o=e.toString().split(".")[1],i=o?o.length:0;n().isUndefined(t.decimalPlacesAmount)||(i=t.decimalPlacesAmount);try{return this.number_format(e,i,t.decimalSeparator||this.DECIMAL_SEPARATOR,t.groupingSeparator||this.GROUPING_SEPARATOR)}catch(t){return e.toString()}},r.prototype.MaxRange=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER+1:9007199254740992,r.prototype.MinRange=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER-1:-9007199254740992;const _=r}}]);
//# sourceMappingURL=chunk.3975.js.map