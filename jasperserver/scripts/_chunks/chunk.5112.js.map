{"version":3,"sources":["webpack://jrs-ui/../bi-report/src/bi/report/jive/util/jiveDataConverter.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/util/validationCodes.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/view/overlay/ColumnResizeMarkerView.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/view/overlay/template/columnResizeMarkerTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/tableFilterTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/model/TableFilterModel.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/view/dateTimePickerEpoxyBindingHandler.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/util/filterLabelResolver.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/view/TableFilterView.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/trait/adjustDialogPositionWithinViewportTrait.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/TableFilterDialog.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/tableFilterDialogTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/panel/trait/tabbedPanelTrait.js","webpack://jrs-ui/../js-sdk/src/common/component/panel/template/tabbedPanelButtonTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/colorPicker/react/AttachableColorPickerWrapper.tsx","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/view/bindigs/colorPickerBinding.ts","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/view/TableCommonFormatView.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/view/bindigs/resetColorBinding.ts","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/util/FormatModelCache.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/basicOptionTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/groupOptionTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/model/TableFormatModel.js","webpack://jrs-ui/../js-sdk/src/common/component/menu/ContextMenu.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/util/NumberFormatPatternUtil.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/view/TableBasicFormatView.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/tableBasicFormatTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/currencyMenuTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/currencyOptionTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/dialog/template/alertDialogTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/dialog/AlertDialog.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/model/TableConditionModel.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/view/TableConditionView.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/tableConditionTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/view/TableConditionCollectionView.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/tableConditionCollectionTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/TableFormatDialog.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/tableFormatDialogTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/jr/dialogs/template/tabOptionTemplate.htm","webpack://jrs-ui/../bi-report/src/bi/report/jive/view/predicate/showColumnOptionPredicate.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/view/predicate/hideColumnOptionPredicate.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/view/TableJiveComponentView.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/view/overlay/template/dragLabelTemplate.htm"],"names":["mapping","jiveDataConverter","DURATION_PATTERN","jQueryUiTimestampToIsoTimestamp","val","genericProperties","calendarPatterns","datePattern","date","timePattern","time","dateUtil","$","ex","BiComponentError","validationCodes","value","jQueryUiTimeToIsoTime","parsedTimeObj","timeUtil","hour","minute","second","isoTimestampTojQueryUiTimestamp","separator","getHours","getMinutes","getSeconds","isoTimeTojQueryUiTime","hours","minutes","seconds","filterStartValue","operator","dataType","clearFilter","isNullCheckOperator","indexOf","isBooleanColumn","isDatetimeColumn","isTimeColumn","_","filterEndValue","dataTypeToSchemaFormat","schemaFormatOperatorToFilterOperatorMap","filterOperatorToSchemaFormatMap","schemaFormatOperatorToFilterOperator","operatorAndValueToSchemaFormat","valueStart","valueEnd","pattern","response","isRange","isNullCheck","this","parent","config","undefined","INVALID_TIMESTAMP","INVALID_TIME","Backbone","el","constructor","options","$parentElement","parentElement","arguments","initialize","self","$el","draggable","axis","start","evt","ui","trigger","drag","stop","render","append","css","setPosition","position","show","hide","Epoxy","defaults","computeds","isMultiValueOperator","op","get","toLowerCase","isNotNullCheckOperator","on","_onOperatorChange","reset","clear","silent","set","isMultiValue","currentValue","remove","cleanUpFromDateTimePicker","inputId","view","pickers","forEach","picker","prop","filter","$element","previousDataType","viewModel","previous","patterns","call","push","DateAndTimePicker","dateFormat","timeFormat","skipMoving","createKey","getFilterOperatorKey","key","i18nKey","TableFilterViewModel","columnLabel","filterOptions","emptyFilterOption","isNotClearFilter","isNotBooleanType","transformedFilterOptions","deps","jiveOptions","epoxyOptions","o","label","i18n","toEpoxyOptions","model","TableFilterModel","listenTo","_onClearFilterChanged","filterValueStart","modelValue","getBinding","setBinding","filterValueEnd","bindingHandlers","dateTimePicker","datePickerBindingHandler","extension","_adjustPositionWithinViewport","top","_getWindowScrollTop","left","_position","Dialog","window","scrollTop","schemaFilterToJiveFilter","schemaFilter","schemaDataType","jiveFilter","columnComponentModel","defaultTemplate","tableFilterView","TableFilterView","buttons","i18n2","action","primary","float","traits","adjustDialogPositionWithinViewportTrait","additionalCssClasses","modal","resizable","contentContainer","content","_applyFilter","close","open","reportComponentObject","toReportComponentObject","operators","filterValidation","errMsg","toJSON","componentObj","detailsRowFormat","updateFromReportComponentObject","code","errorCode","params","parameters","originalException","filterValue","filterOperator","replace","filterAction","actions","filterData","onTabSelect","tabView","tabModel","tabAction","_contentRendered","tabs","$tabs","data","selectedTab","abstractPanelTrait","onConstructor","length","Error","tabContainerClass","tabHeaderContainerSelector","tabHeaderContainerClass","tabbedPanelClass","tab","afterSetElement","addClass","$tabHeaderContainer","$contentContainer","empty","tabContainer","html","classes","split","afterInitialize","tabHeaderContainer","OptionContainer","contextName","toggleClass","toggle","optionTemplate","join","i","openTab","onRemove","tabId","optionView","getOptionView","select","showTab","hideTab","defaultOptions","padding","disableAlpha","showTransparentPreset","color","onChangeComplete","onHide","ColorPicker","AttachableColorPicker","AttachableColorPickerWrapper","attachTo","colorPickerContainerWrapper","onChangeCompleteWrapper","onHideWrapper","boundOnAttachElementClick","document","createElement","className","onAttachElementClick","bind","hex","state","getColorPickerState","renderColorPicker","addEventListener","body","appendChild","ReactDOM","removeEventListener","getColor","Colors","radioDiv","init","bindings","context","modelBinding","callback","radioDivs","siblings","removeClass","clean","off","checkboxDiv","isTrippleState","_get","is","resetColor","onClick","e","attr","event","stopPropagation","removeAttr","colorpicker","attachableColorPickerWrapper","setColor","showTransparentInput","slice","convertColorForModel","find","FormatModelCache","map","keyInfo","prototype","current","stateJSON","original","applyTo","isGroup","backgroundColor","align","font","bold","italic","underline","size","name","ctds","charAt","toUpperCase","substring","newFont","newValue","trim","Menu","additionalSettings","topPadding","leftPadding","extraOffset","hideOnMouseLeave","_tryHide","_signOffTryHide","_checkBounds","container","JSON","stringify","menuElHeight","_calculateMenuHeightOnShow","menuElWidth","width","containerHeight","height","containerWidth","containerOffset","offset","fitByHeight","fitByWidth","elementRect","offsetTop","bottom","offsetHeight","offsetLeft","right","offsetWidth","_isPointerOutOfBounds","clientX","clientY","opacity","regex","numberPart","decimalPart","numericChar","addDecimalPlaceToToken","token","exec","removeDecimalPlaceFromToken","result","addThousandsSeparatorToToken","indexOfNumericChar","firstPart","removeThousandsSeparatorFromToken","addPercentageToToken","removePercentageFromToken","addRemoveDecimalPlace","exp","booleanAdd","pozToken","negToken","addRemoveThousandsSeparator","indexOfComma","addRemovePercentage","indexOfPercent","addRemovePercentageForNumber","numberExp","addRemoveCurrencySymbol","currencySymbol","indexOfCS","jivePatternToSchemaPattern","jivePattern","jiveDataType","precisionRegexp","RegExp","grouping","percentage","precision","negativeFormat","currency","precisionTestResult","Array","parts","currencyMap","onApplyToChange","columnGroup","obj","cache","currentApplyTo","previousApplyTo","columnGroups","findWhere","id","headingFormat","toJiveFormat","format","onDataTypeChange","columnModel","hasPercentage","hasComma","updateApplyToOptions","columnIndex","groupHeadingOptions","groupSubTotalsOptions","totalsOptions","each","group","apply","cacheCurrentModel","TableFormatViewModel","fontSizes","fontNames","applyToOptions","hasPattern","hasHeading","TableCommonFormatView","extend","events","TableFormatModel","_togglePercentageFormat","_toggleCommaFormat","_initCurrencyContextMenu","transformedPatterns","basicOptionTemplate","text","groupedOptions","allFonts","element","index","list","groupOptionTemplate","end","system","nonGroupedOptions","allSizes","bindingFilters","customDecimal","ret","parseFloat","isDuration","getNumericTypeVisibility","isNumeric","setColumnComponentModel","isUpdate","fonts","removeBindings","applyBindings","getActions","cacheEntry","testModel","hasChanged","NumberFormatPatternUtil","symbol","currencyMenu","ContextMenu","menuContainerTemplate","menuOptionTemplate","option","_applyCurrencyFormat","_addDecimal","_removeDecimal","previousSymbol","currentSymbol","_showCurrencyMenu","target","currentTarget","preventDefault","contentTemplate","message","title","setMessage","xssUtil","whiteList","rendered","renderContent","numberUtil","NumberUtils","onOperatorChange","validateValue","conditionPattern","error","source","tokens","parseNumber","modifyObject","validate","attributes","valueStartValidation","valueEndValidation","collection","ViewModel","conditionIndex","conditionOptions","TableConditionModel","convertedOptions","conditionValueStart","conditionValueEnd","getColspan","_removeCondition","_moveConditionUp","add","at","_moveConditionDown","keyModel","isReset","schemaConditionsToJiveConditions","conditions","addAll","cacheCurrentCollection","schemaConditions","condition","jiveOpVal","jiveConditionsToSchemaConditions","jiveConditions","schemaOpVal","TableConditionCollection","TableConditionCollectionViewModel","canAddCondition","_subviews","_$subviewsContainer","removeSubview","errorDialog","AlertDialog","addSubview","subview","TableConditionView","addModel","modelJSON","skipRegistration","arrJsonModels","getSubviewByModel","subviewModel","getIndex","splice","currentSubview","currentConditions","addNewCondition","tableConditionModel","isValid","invalidModels","reduce","memo","applyFormat","conditionFormatView","allActions","basicFormatView","updateColumnNavigationButtons","columns","template","TableBasicFormatView","TableConditionCollectionView","tabbedPanelTrait","removeSelection","addSelection","_goToPreviousColumn","currentIndex","prevColumn","prevColumnLabel","_goToNextColumn","nextColumn","nextColumnLabel","column","interactive","visible","log","logger","hideVisualElements","overlay","headerToolbar","cascadingMenus","menu","resizeMarker","currentColumnData","onHeaderToolbarSelect","buttonView","buttonModel","onTableClick","$target","columnData","getColumnData","columnId","$header","some","selectColumn","onMarkerDragStart","resizingColumn","onMarkerDrag","onMarkerDragStop","scaleFactor","currentColumn","resize","Math","floor","computeDropBoundariesForColumnMove","colData","parentContainer","tableColumns","tableUuid","visibleColumnsMoveData","reportContainer","first","parents","v","$scrollContainer","stateModel","scrollAmount","scrollLeft","colsData","cols","firstColHeader","lastCol","realWidth","firstLeft","colUuid","eq","outerWidth","it","colidx","uuid","cellid","hasOwnProperty","sort","col1","col2","allColumnsData","onOverlayDragStart","currentColMoveData","colToMoveToIndex","prevPageX","pageX","onOverlayDrag","colMoveData","isLeftToRight","hoverCol","ln","refColIndex","sc","newColIndex","parseInt","lastColIndex","isScrollingRight","that","animate","duration","queue","promise","then","isScrollingLeft","onOverlayDragStop","move","onClickOutside","contains","BaseJiveComponentView","getReportContainer","getReportId","setGenericProperties","initJiveComponents","initTableEvents","tableID","tableElement","isFloatingTableHeaderEnabled","_scrollHeader","leading","trailing","scrollData","bMoved","reportContainerPositionAtMove","JiveOverlayView","filterDialog","TableFilterDialog","formatDialog","TableFormatDialog","headerToolbarViewFactory","children","getHoverMenuChildren","hideColumnOptionTestFn","hideColumnOptionPredicate","showColumnsOptionTestFn","showColumnOptionPredicate","ColumnResizeMarkerView","fn","millis","now","timeout","debouncedOnOverlayDrag","args","clearTimeout","setTimeout","isRunning","cancelAndExecute","cursorAt","scroll","helper","actionModel","order","actionView","hideColumn","showColumn","unhide","properties","getGenericProperties","defaultIndexArray","table","jiveActions","test","tableColumn","unshift","widthSoFar","headerID","hasClass","headerCols","realHeight","col","$col","cssHeight","lastCell","outerHeight","setCurrentColumn","columnID","firstHeader","overlayPosition","my","of","collision","_setToolbarPositionWhenFloating","_getHeaderTable","enable","disable","dfd","setDataReportId","showError","isDefaultJiveUiEnabled","debug","jiveColumn","resolve","devmsg","detachEvents","forceScroll","scrollContainer","scrolledTop","scrolledLeft","floatingTable","tbl","closest","containerTop","headerTop","lastTableCel","last","diff","_applyScaleTransform","_setToolbarDefaultPosition","appendTo","coluuid","reportTableCell","clone","row","$row","lastRow","cloneTD","rowTD","rowTDs","j","k","tblJrPage","parentTableRows","parentTable","lastColHeader","rows","cloneWidth","idx","max","floatingHeader","abs"],"mappings":"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","file":"_chunks/chunk.5112.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\n\n/**\n * @author: Kostiantyn Tsaregradskyi\n * @version: $Id$\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport dateUtil from 'js-sdk/src/common/util/parse/date';\nimport timeUtil from 'js-sdk/src/common/util/parse/time';\nimport BiComponentError from 'js-sdk/src/common/bi/error/BiComponentError';\nimport validationCodes from \"./validationCodes\";\n\nimport 'js-sdk/src/common/extension/jQueryTimepickerExtension';\n\nvar jiveDataConverter = {\n\n    DURATION_PATTERN: \"[h]:mm:ss\",\n\n    jQueryUiTimestampToIsoTimestamp: function(val, genericProperties) {\n        if (val && genericProperties && genericProperties.calendarPatterns) {\n            var datePattern = genericProperties.calendarPatterns.date,\n                timePattern = genericProperties.calendarPatterns.time;\n\n            try {\n                return dateUtil.dateObjectToIso8601Timestamp($.datepicker.parseDateTime(datePattern, timePattern, val));\n            } catch(ex) {\n                throw new BiComponentError(validationCodes.INVALID_TIMESTAMP, ex, { value: val });\n            }\n        }\n\n        return undefined;\n    },\n\n    jQueryUiTimeToIsoTime: function(val, genericProperties) {\n        if (val && genericProperties && genericProperties.calendarPatterns) {\n            var timePattern = genericProperties.calendarPatterns.time;\n\n            try {\n                var parsedTimeObj = $.datepicker.parseTime(timePattern, val);\n\n                if (parsedTimeObj) {\n                    return timeUtil.timeToIso8061Time(parsedTimeObj.hour, parsedTimeObj.minute, parsedTimeObj.second);\n                }\n            } catch(ex) {\n                throw new BiComponentError(validationCodes.INVALID_TIME, ex, { value: val });\n            }\n        }\n\n        return undefined;\n    },\n\n    isoTimestampTojQueryUiTimestamp: function(val, genericProperties) {\n        if (val && genericProperties && genericProperties.calendarPatterns) {\n            var date = dateUtil.iso8601TimestampToDateObject(val),\n                datePattern = genericProperties.calendarPatterns.date,\n                timePattern = genericProperties.calendarPatterns.time,\n                separator = $.timepicker && $.timepicker._defaults && $.timepicker._defaults.separator ? $.timepicker._defaults.separator : \" \",\n                dateStr = $.datepicker.formatDate(datePattern, date),\n                timeStr = $.datepicker.formatTime(timePattern, {\n                    hour: date.getHours(),\n                    minute: date.getMinutes(),\n                    second: date.getSeconds()\n                });\n\n            return dateStr + separator + timeStr;\n        }\n\n        return undefined;\n    },\n\n    isoTimeTojQueryUiTime: function(val, genericProperties) {\n        if (val && genericProperties && genericProperties.calendarPatterns) {\n            var time = timeUtil.iso8601TimeToTimeObject(val),\n                timePattern = genericProperties.calendarPatterns.time;\n\n            if (time) {\n                return $.datepicker.formatTime(timePattern, {\n                    hour: time.hours,\n                    minute: time.minutes,\n                    second: time.seconds\n                });\n            }\n        }\n\n        return undefined;\n    },\n\n    filterStartValue: function(operator, value, dataType, genericProperties) {\n        var clearFilter = value == null && operator == null,\n            isNullCheckOperator = operator != null && operator.indexOf(\"null\") !== -1,\n            isBooleanColumn = dataType === \"boolean\",\n            isDatetimeColumn = dataType === \"datetime\",\n            isTimeColumn = dataType === \"time\";\n\n        if (clearFilter || isNullCheckOperator) {\n            return \"\";\n        } else {\n            if (_.isArray(value)) {\n                if (isDatetimeColumn) {\n                    return jiveDataConverter.isoTimestampTojQueryUiTimestamp(value[0], genericProperties);\n                } else if (isTimeColumn) {\n                    return jiveDataConverter.isoTimeTojQueryUiTime(value[0], genericProperties);\n                } else {\n                    return value[0];\n                }\n            } else {\n                if (isBooleanColumn) {\n                    return \"\";\n                } else if (isDatetimeColumn) {\n                    return jiveDataConverter.isoTimestampTojQueryUiTimestamp(value, genericProperties);\n                } else if (isTimeColumn) {\n                    return jiveDataConverter.isoTimeTojQueryUiTime(value, genericProperties);\n                } else {\n                    return value;\n                }\n            }\n        }\n    },\n\n    filterEndValue: function(operator, value, dataType, genericProperties) {\n        var clearFilter = value == null && operator == null,\n            isDatetimeColumn = dataType === \"datetime\",\n            isTimeColumn = dataType === \"time\";\n\n        if (clearFilter) {\n            return \"\";\n        } else {\n            if (_.isArray(value)) {\n                if (isDatetimeColumn) {\n                    return jiveDataConverter.isoTimestampTojQueryUiTimestamp(value[1], genericProperties);\n                } else if (isTimeColumn) {\n                    return jiveDataConverter.isoTimeTojQueryUiTime(value[1], genericProperties);\n                } else {\n                    return value[1];\n                }\n            } else {\n                return \"\";\n            }\n        }\n    },\n\n    dataTypeToSchemaFormat: {\n        \"Text\": \"string\",\n        \"Numeric\": \"numeric\",\n        \"Date\": \"datetime\",\n        \"Boolean\": \"boolean\",\n        \"Time\": \"time\"\n    },\n\n    schemaFormatOperatorToFilterOperatorMap: (function() {\n        var mapping = {};\n\n        mapping[\"string\"] = {};\n        mapping[\"string\"][\"equal\"] = \"EQUALS\";\n        mapping[\"string\"][\"not_equal\"] = \"IS_NOT_EQUAL_TO\";\n        mapping[\"string\"][\"contain\"] = \"CONTAINS\";\n        mapping[\"string\"][\"not_contain\"] = \"DOES_NOT_CONTAIN\";\n        mapping[\"string\"][\"start_with\"] = \"STARTS_WITH\";\n        mapping[\"string\"][\"not_start_with\"] = \"DOES_NOT_START_WITH\";\n        mapping[\"string\"][\"end_with\"] = \"ENDS_WITH\";\n        mapping[\"string\"][\"not_end_with\"] = \"DOES_NOT_END_WITH\";\n        mapping[\"string\"][\"is_null\"] = \"IS_NULL\";\n        mapping[\"string\"][\"is_not_null\"] = \"IS_NOT_NULL\";\n        mapping[\"datetime\"] = {};\n        mapping[\"datetime\"][\"equal\"] = \"EQUALS\";\n        mapping[\"datetime\"][\"not_equal\"] = \"IS_NOT_EQUAL_TO\";\n        mapping[\"datetime\"][\"between\"] = \"IS_BETWEEN\";\n        mapping[\"datetime\"][\"not_between\"] = \"IS_NOT_BETWEEN\";\n        mapping[\"datetime\"][\"on_or_before\"] = \"IS_ON_OR_BEFORE\";\n        mapping[\"datetime\"][\"before\"] = \"IS_BEFORE\";\n        mapping[\"datetime\"][\"on_or_after\"] = \"IS_ON_OR_AFTER\";\n        mapping[\"datetime\"][\"after\"] = \"IS_AFTER\";\n        mapping[\"datetime\"][\"is_null\"] = \"IS_NULL\";\n        mapping[\"datetime\"][\"is_not_null\"] = \"IS_NOT_NULL\";\n        mapping[\"time\"] = {};\n        mapping[\"time\"][\"equal\"] = \"EQUALS\";\n        mapping[\"time\"][\"not_equal\"] = \"IS_NOT_EQUAL_TO\";\n        mapping[\"time\"][\"between\"] = \"IS_BETWEEN\";\n        mapping[\"time\"][\"not_between\"] = \"IS_NOT_BETWEEN\";\n        mapping[\"time\"][\"on_or_before\"] = \"IS_ON_OR_BEFORE\";\n        mapping[\"time\"][\"before\"] = \"IS_BEFORE\";\n        mapping[\"time\"][\"on_or_after\"] = \"IS_ON_OR_AFTER\";\n        mapping[\"time\"][\"after\"] = \"IS_AFTER\";\n        mapping[\"time\"][\"is_null\"] = \"IS_NULL\";\n        mapping[\"time\"][\"is_not_null\"] = \"IS_NOT_NULL\";\n        mapping[\"numeric\"] = {};\n        mapping[\"numeric\"][\"equal\"] = \"EQUALS\";\n        mapping[\"numeric\"][\"not_equal\"] = \"DOES_NOT_EQUAL\";\n        mapping[\"numeric\"][\"greater\"] = \"GREATER_THAN\";\n        mapping[\"numeric\"][\"greater_or_equal\"] = \"GREATER_THAN_EQUAL_TO\";\n        mapping[\"numeric\"][\"less\"] = \"LESS_THAN\";\n        mapping[\"numeric\"][\"less_or_equal\"] = \"LESS_THAN_EQUAL_TO\";\n        mapping[\"numeric\"][\"between\"] = \"IS_BETWEEN\";\n        mapping[\"numeric\"][\"not_between\"] = \"IS_NOT_BETWEEN\";\n        mapping[\"numeric\"][\"is_null\"] = \"IS_NULL\";\n        mapping[\"numeric\"][\"is_not_null\"] = \"IS_NOT_NULL\";\n\n        return mapping;\n    })(),\n\n    filterOperatorToSchemaFormatMap: (function() {\n        var mapping = {};\n        mapping[\"string\"] = {};\n        mapping[\"string\"][\"EQUALS\"] = \"equal\";\n        mapping[\"string\"][\"IS_NOT_EQUAL_TO\"] = \"not_equal\";\n        mapping[\"string\"][\"CONTAINS\"] = \"contain\";\n        mapping[\"string\"][\"DOES_NOT_CONTAIN\"] = \"not_contain\";\n        mapping[\"string\"][\"STARTS_WITH\"] = \"start_with\";\n        mapping[\"string\"][\"DOES_NOT_START_WITH\"] = \"not_start_with\";\n        mapping[\"string\"][\"ENDS_WITH\"] = \"end_with\";\n        mapping[\"string\"][\"DOES_NOT_END_WITH\"] = \"not_end_with\";\n        mapping[\"string\"][\"IS_NULL\"] = \"is_null\";\n        mapping[\"string\"][\"IS_NOT_NULL\"] = \"is_not_null\";\n        mapping[\"datetime\"] = {};\n        mapping[\"datetime\"][\"EQUALS\"] = \"equal\";\n        mapping[\"datetime\"][\"IS_NOT_EQUAL_TO\"] = \"not_equal\";\n        mapping[\"datetime\"][\"IS_BETWEEN\"] = \"between\";\n        mapping[\"datetime\"][\"IS_NOT_BETWEEN\"] = \"not_between\";\n        mapping[\"datetime\"][\"IS_ON_OR_BEFORE\"] = \"on_or_before\";\n        mapping[\"datetime\"][\"IS_BEFORE\"] = \"before\";\n        mapping[\"datetime\"][\"IS_ON_OR_AFTER\"] = \"on_or_after\";\n        mapping[\"datetime\"][\"IS_AFTER\"] = \"after\";\n        mapping[\"datetime\"][\"IS_NULL\"] = \"is_null\";\n        mapping[\"datetime\"][\"IS_NOT_NULL\"] = \"is_not_null\";\n        mapping[\"numeric\"] = {};\n        mapping[\"numeric\"][\"EQUALS\"] = \"equal\";\n        mapping[\"numeric\"][\"DOES_NOT_EQUAL\"] = \"not_equal\";\n        mapping[\"numeric\"][\"GREATER_THAN\"] = \"greater\";\n        mapping[\"numeric\"][\"GREATER_THAN_EQUAL_TO\"] = \"greater_or_equal\";\n        mapping[\"numeric\"][\"LESS_THAN\"] = \"less\";\n        mapping[\"numeric\"][\"LESS_THAN_EQUAL_TO\"] = \"less_or_equal\";\n        mapping[\"numeric\"][\"IS_BETWEEN\"] = \"between\";\n        mapping[\"numeric\"][\"IS_NOT_BETWEEN\"] = \"not_between\";\n        mapping[\"numeric\"][\"IS_NULL\"] = \"is_null\";\n        mapping[\"numeric\"][\"IS_NOT_NULL\"] = \"is_not_null\";\n        mapping[\"time\"] = {};\n        mapping[\"time\"][\"EQUALS\"] = \"equal\";\n        mapping[\"time\"][\"IS_NOT_EQUAL_TO\"] = \"not_equal\";\n        mapping[\"time\"][\"IS_BETWEEN\"] = \"between\";\n        mapping[\"time\"][\"IS_NOT_BETWEEN\"] = \"not_between\";\n        mapping[\"time\"][\"IS_ON_OR_BEFORE\"] = \"on_or_before\";\n        mapping[\"time\"][\"IS_BEFORE\"] = \"before\";\n        mapping[\"time\"][\"IS_ON_OR_AFTER\"] = \"on_or_after\";\n        mapping[\"time\"][\"IS_AFTER\"] = \"after\";\n        mapping[\"time\"][\"IS_NULL\"] = \"is_null\";\n        mapping[\"time\"][\"IS_NOT_NULL\"] = \"is_not_null\";\n\n        return mapping;\n    })(),\n\n    schemaFormatOperatorToFilterOperator: function(operator, value, dataType) {\n        if (dataType !== \"boolean\") {\n            return jiveDataConverter.schemaFormatOperatorToFilterOperatorMap[dataType][operator];\n        } else {\n            if (operator === \"equal\" && value === true) {\n                return \"IS_TRUE\";\n            } else if (operator === \"equal\" && value === false) {\n                return \"IS_FALSE\";\n            } else if (operator === \"not_equal\" && value === true) {\n                return \"IS_NOT_TRUE\";\n            } else if (operator === \"not_equal\" && value === false) {\n                return \"IS_NOT_FALSE\";\n            } else if (operator === \"is_null\") {\n                return \"IS_NULL\";\n            } else if (operator === \"is_not_null\") {\n                return \"IS_NOT_NULL\";\n            }\n        }\n    },\n\n    operatorAndValueToSchemaFormat: function(operator, dataType, valueStart, valueEnd, pattern) {\n        var response = {};\n\n        if (dataType === \"boolean\") {\n            if (operator === \"IS_TRUE\") {\n                response.operator = \"equal\";\n                response.value = true;\n            } else if (operator === \"IS_FALSE\") {\n                response.operator = \"equal\";\n                response.value = false;\n            } else if (operator === \"IS_NOT_TRUE\") {\n                response.operator = \"not_equal\";\n                response.value = true;\n            } else if (operator === \"IS_NOT_FALSE\") {\n                response.operator = \"not_equal\";\n                response.value = false;\n            } else if (operator === \"IS_NULL\") {\n                response.operator = \"is_null\";\n                response.value = \"\";\n            } else if (operator === \"IS_NOT_NULL\") {\n                response.operator = \"is_not_null\";\n                response.value = \"\";\n            }\n        } else {\n            response.operator = jiveDataConverter.filterOperatorToSchemaFormatMap[dataType][operator];\n            var isRange = response.operator === \"between\" || response.operator === \"not_between\";\n            var isNullCheck = response.operator === \"is_null\" || response.operator === \"is_not_null\";\n\n            if (dataType === \"string\") {\n                response.value = valueStart == null ? '' : valueStart;\n            } else if (dataType === \"numeric\") {\n                if (isRange) {\n                    response.value = [valueStart, valueEnd]\n                } else {\n                    response.value = valueStart;\n                }\n            } else {\n                var genericProperties = this.parent && this.parent.config ? this.parent.config.genericProperties : undefined;\n\n                if (dataType === \"datetime\") {\n                    if (isRange) {\n                        response.value = [\n                            jiveDataConverter.jQueryUiTimestampToIsoTimestamp(valueStart, genericProperties),\n                            jiveDataConverter.jQueryUiTimestampToIsoTimestamp(valueEnd, genericProperties)\n                        ];\n                    } else {\n                        response.value = isNullCheck ?\n                            valueStart :\n                            jiveDataConverter.jQueryUiTimestampToIsoTimestamp(valueStart, genericProperties);\n                    }\n                } else if (dataType === \"time\") {\n                    if (isRange) {\n                        response.value = [\n                            jiveDataConverter.jQueryUiTimeToIsoTime(valueStart, genericProperties),\n                            jiveDataConverter.jQueryUiTimeToIsoTime(valueEnd, genericProperties)\n                        ];\n                    } else {\n                        response.value = isNullCheck ?\n                            valueStart :\n                            jiveDataConverter.jQueryUiTimeToIsoTime(valueStart, genericProperties);\n                    }\n                }\n            }\n        }\n\n        return response;\n    }\n};\n\nexport default jiveDataConverter;\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nexport default {\n    INVALID_TIMESTAMP: \"invalid.timestamp\",\n    INVALID_TIME: \"invalid.time\"\n};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\n\n/**\n * @author: Narcis Marcu\n * @version: $Id$\n */\n\nimport $ from 'jquery';\nimport Backbone from 'backbone';\nimport columnResizeMarkerTemplate from './template/columnResizeMarkerTemplate.htm';\n\nimport \"jquery-ui/ui/widgets/draggable\";\n\nexport default Backbone.View.extend({\n\n    el: columnResizeMarkerTemplate,\n\n    constructor: function(options) {\n        options = options || {};\n\n        this.$parentElement = options.parentElement ? $(options.parentElement) : $(\"body\");\n\n        Backbone.View.apply(this, arguments);\n    },\n\n    initialize: function() {\n        var self = this;\n\n        Backbone.View.prototype.initialize.apply(this, arguments);\n\n        this.$el.draggable({\n            axis: \"x\",\n            start: function(evt, ui) {\n                self.trigger(\"marker:dragStart\", evt, ui);\n            },\n            drag: function(evt, ui){\n                self.trigger(\"marker:drag\", evt, ui);\n            },\n            stop:function(evt, ui) {\n                self.trigger(\"marker:dragStop\", evt, ui);\n            }\n        });\n\n        this.render();\n    },\n\n    render: function() {\n        this.$parentElement.append(this.$el);\n    },\n\n    css: function(options){\n        this.$el.css(options);\n        return this;\n    },\n\n    setPosition: function(options){\n        this.$el.position(options);\n        return this;\n    },\n\n    show: function(){\n        this.$el.show();\n        this.$el.css(\"position\", \"absolute\"); // force absolute, because jQuery seems to set it to relative\n\n        return this;\n    },\n\n    hide: function(){\n        this.$el.hide();\n\n        return this;\n    }\n\n});\n","export default \"<div class=\\\"jive_marker\\\" style=\\\"display: none\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"jive_marker_icon\\\">&nbsp;</div>\\n    <div style=\\\"position:absolute; top:0; right:6px; bottom:0; left:-6px;\\\"></div>\\n</div>\\n\";","export default \"<div class=\\\"dialogHeader mover\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <h2>\\n        <span class=\\\"dialogTitle\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.title.filtercolumn\\\"] }}: </span>\\n        <span class=\\\"dialogTitle\\\" data-bind=\\\"text:columnLabel\\\"></span>\\n    </h2>\\n</div>\\n<div class=\\\"dialogBody\\\" style=\\\"text-align:left;\\\">\\n    <form method=\\\"get\\\" class=\\\"jive_form\\\" style=\\\"width: 700px;\\\">\\n        <table width=\\\"100%\\\">\\n            <tbody>\\n            <tr>\\n                <td>\\n                    <div class=\\\"thick wrapper\\\">\\n                        <label class=\\\"jive_inputLabel\\\">\\n                            <input type=\\\"radio\\\" name=\\\"clearFilter\\\" value=\\\"true\\\" data-bind=\\\"checked:clearFilter\\\">\\n                            {{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.clearfilter.true\\\"] }}\\n                        </label>\\n                    </div>\\n                </td>\\n            </tr>\\n            </tbody>\\n        </table>\\n        <table width=\\\"100%\\\">\\n            <tbody>\\n            <tr>\\n                <td colspan=\\\"4\\\">\\n                    <div class=\\\"thick wrapper\\\">\\n                        <label class=\\\"jive_inputLabel\\\">\\n                            <input type=\\\"radio\\\" name=\\\"clearFilter\\\" value=\\\"false\\\" data-bind=\\\"checked:clearFilter\\\">\\n                            {{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.clearfilter.false\\\"] }}\\n                        </label>\\n                    </div>\\n                </td>\\n            </tr>\\n            <tr>\\n                <td class=\\\"jive_filterTypeOperatorContainer\\\">\\n                    <div class=\\\"wrapper\\\">\\n                        <select name=\\\"filterTypeOperator\\\" size=\\\"1\\\" data-bind=\\\"options:transformedFilterOptions,optionsEmpty:emptyFilterOption,value:operator\\\">\\n                        </select>\\n                    </div>\\n                </td>\\n                <td data-bind=\\\"toggle:all(isNotBooleanType,isNotNullCheckOperator)\\\">\\n                    <div class=\\\"wrapper\\\">\\n                        <input type=\\\"text\\\" name=\\\"fieldValueStart\\\" data-bind=\\\"value:filterValueStart,enabled:isNotClearFilter,dateTimePicker:dataType\\\">\\n                    </div>\\n                </td>\\n                <td class=\\\"jive_textLabel\\\" data-bind=\\\"toggle:isMultiValueOperator\\\">\\n                    <div>and</div>\\n                </td>\\n                <td data-bind=\\\"toggle:isMultiValueOperator\\\">\\n                    <div class=\\\"wrapper\\\">\\n                        <input type=\\\"text\\\" name=\\\"fieldValueEnd\\\" data-bind=\\\"value:filterValueEnd,enabled:isNotClearFilter,dateTimePicker:dataType\\\">\\n                    </div>\\n                </td>\\n            </tr>\\n            </tbody>\\n        </table>\\n    </form>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport Epoxy from 'backbone.epoxy';\nimport _ from 'underscore';\nexport default Epoxy.Model.extend({\n    defaults: {\n        operator: null,\n        value: \"\"\n    },\n    computeds: {\n        isMultiValueOperator: function () {\n            var op = this.get('operator');\n            return op && op.toLowerCase().indexOf('between') !== -1 ? true : false;\n        },\n        isNotNullCheckOperator: function() {\n            var op = this.get('operator'),\n                isNullCheck = op && op.toLowerCase().indexOf('null') !== -1 ? true : false;\n            return !isNullCheck;\n        }\n    },\n    initialize: function () {\n        this.on('change:operator', this._onOperatorChange);\n        Epoxy.Model.prototype.initialize.apply(this, arguments);\n    },\n    reset: function () {\n        this.clear({ silent: false }).set(this.defaults);\n        return this;\n    },\n    _onOperatorChange: function () {\n        var currentValue = this.get('value'), operator = this.get('operator'), isMultiValue, isNullCheck;\n        isMultiValue = operator && operator.toLowerCase().indexOf('between') !== -1;\n        isNullCheck = operator && operator.toLowerCase().indexOf('null') !== -1;\n\n        if (isMultiValue === true) {\n            if (!_.isArray(currentValue)) {\n                this.set({ value: [currentValue] });\n            }\n        } else if (isMultiValue === false) {\n            if (_.isArray(currentValue)) {\n                this.set({ value: currentValue[0] });\n            }\n        }\n\n        if (isNullCheck) {\n            this.set({ value: '' });\n        }\n    },\n    remove: function () {\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport DateAndTimePicker from 'js-sdk/src/components/dateAndTime/DateAndTimePicker';\n\nfunction cleanUpFromDateTimePicker(inputId) {\n    this.view.pickers.forEach(function (picker) {\n        if (picker.$el.prop('id') == inputId) {\n            picker.remove();\n        }\n    });\n    this.view.pickers = this.view.pickers.filter(function (picker) {\n        return inputId != picker.$el.prop('id');\n    });\n}\nexport default function ($element, dataType) {\n    var previousDataType = this.view.viewModel.previous('dataType'), patterns = this.view.viewModel.get('calendarPatterns');\n    if (!this.view.pickers) {\n        this.view.pickers = [];\n    }\n    if (previousDataType != dataType) {\n        if (previousDataType === 'date' || previousDataType === 'time') {\n            cleanUpFromDateTimePicker.call(this, $element.prop('id'));\n        }\n        if (dataType === 'date') {\n            this.view.pickers.push(new DateAndTimePicker({\n                el: $element[0],\n                dateFormat: patterns.date,\n                timeFormat: patterns.time,\n                skipMoving: true\n            }));\n        } else if (dataType === 'time') {\n            this.view.pickers.push(new DateAndTimePicker({\n                el: $element[0],\n                timeFormat: patterns.time,\n                skipMoving: true\n            }));\n        }\n    }\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nfunction createKey(dataType, operator) {\n    return `net.sf.jasperreports.components.sort.FilterType${dataType}OperatorsEnum.${operator}`;\n}\n\nexport function getFilterOperatorKey(dataType, key) {\n    let i18nKey;\n\n    switch(dataType) {\n    case \"numeric\":\n        i18nKey = createKey(\"Numeric\", key);\n        break;\n    case \"date\":\n    case \"time\":\n        i18nKey = createKey(\"Date\", key);\n        break;\n    case \"text\":\n        i18nKey = createKey(\"Text\", key);\n        break;\n    case \"boolean\":\n        i18nKey = createKey(\"Boolean\", key);\n        break;\n    default:\n        i18nKey = key;\n    }\n\n    return i18nKey;\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport Epoxy from 'backbone.epoxy';\nimport _ from 'underscore';\nimport tableFilterTemplate from '../template/tableFilterTemplate.htm';\nimport TableFilterModel from '../model/TableFilterModel';\nimport datePickerBindingHandler from './dateTimePickerEpoxyBindingHandler';\nimport i18n from \"../../../../../../i18n/jasperreports_messages.properties\";\nimport {getFilterOperatorKey} from \"../util/filterLabelResolver\";\n\nfunction toEpoxyOptions(dataType, jiveOptions) {\n    var epoxyOptions = [];\n    _.each(jiveOptions, function (o) {\n        epoxyOptions.push({\n            label: i18n[getFilterOperatorKey(dataType, o)],\n            value: o\n        });\n    });\n    return epoxyOptions;\n}\nvar TableFilterViewModel = Epoxy.Model.extend({\n    defaults: {\n        columnLabel: '',\n        clearFilter: 'true',\n        filterOptions: [],\n        dataType: 'text',\n        emptyFilterOption: '...'\n    },\n    computeds: {\n        isNotClearFilter: function () {\n            return this.get('clearFilter') !== 'true';\n        },\n        isNotBooleanType: function () {\n            return this.get('dataType') !== 'boolean';\n        },\n        transformedFilterOptions: {\n            deps: [\n                'clearFilter',\n                'filterOptions',\n                'dataType'\n            ],\n            get: function (clearFilter, filterOptions, dataType) {\n                if (clearFilter === 'true') {\n                    return [];\n                } else {\n                    return toEpoxyOptions(dataType, filterOptions);\n                }\n            }\n        }\n    },\n    remove: function () {\n    }\n});\nexport default Epoxy.View.extend({\n    constructor: function (options) {\n        this.i18n = options.i18n;\n        Epoxy.View.prototype.constructor.call(this, options);\n    },\n    initialize: function () {\n        this.model = new TableFilterModel();\n        this.viewModel = new TableFilterViewModel();\n        this.listenTo(this.viewModel, 'change:clearFilter', this._onClearFilterChanged);\n        Epoxy.View.prototype.initialize.apply(this, arguments);\n    },\n    el: function () {\n        return _.template(tableFilterTemplate, { i18n: this.i18n });\n    },\n    computeds: {\n        filterValueStart: {\n            deps: ['value'],\n            get: function (value) {\n                if (_.isArray(value)) {\n                    return value[0];\n                } else {\n                    return value;\n                }\n            },\n            set: function (val) {\n                var modelValue = this.getBinding('value');\n                if (_.isArray(modelValue)) {\n                    modelValue[0] = val;\n                } else {\n                    this.setBinding('value', val);\n                }\n            }\n        },\n        filterValueEnd: {\n            deps: ['value'],\n            get: function (value) {\n                if (_.isArray(value)) {\n                    return value[1];\n                }\n            },\n            set: function (val) {\n                var modelValue = this.getBinding('value');\n                if (_.isArray(modelValue)) {\n                    modelValue[1] = val;\n                }\n            }\n        }\n    },\n    bindingHandlers: { dateTimePicker: datePickerBindingHandler },\n    _onClearFilterChanged: function () {\n        // reset filter on show all rows\n        if (this.viewModel.get('clearFilter') === 'true') {\n            this.model.reset();\n        }\n        // set the operator to the first value from filterOptions\n        else {\n            this.model.set('operator', this.viewModel.get('filterOptions')[0]);\n        }\n    },\n    remove: function () {\n        Epoxy.View.prototype.remove.apply(this, arguments);\n        this.model && this.model.remove();\n        this.viewModel && this.viewModel.remove();\n    }\n});","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport $ from 'jquery';\nimport Dialog from 'js-sdk/src/common/component/dialog/Dialog';\n\nexport default {\n    extension: {\n        _adjustPositionWithinViewport: function(position) {\n            return {\n                top: position.top + this._getWindowScrollTop(),\n                left: position.left\n            };\n        },\n\n        _position: function () {\n            var position = Dialog.prototype._position.apply(this, arguments);\n\n            return this._adjustPositionWithinViewport(position);\n        },\n\n        _getWindowScrollTop: function(){\n            return $(window).scrollTop();\n        }\n    }\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport _ from 'underscore';\nimport Dialog from 'js-sdk/src/common/component/dialog/Dialog';\nimport tableFilterTemplate from './template/tableFilterDialogTemplate.htm';\nimport TableFilterView from './view/TableFilterView';\nimport jiveDataConverter from '../../util/jiveDataConverter';\nimport validationCodes from \"../../util/validationCodes\";\nimport adjustDialogPositionWithinViewportTrait from './trait/adjustDialogPositionWithinViewportTrait';\nimport i18n2 from 'js-sdk/src/i18n/CommonBundle.properties';\n\nfunction schemaFilterToJiveFilter(schemaFilter, schemaDataType) {\n    var jiveFilter = {}, genericProperties, isNullCheckOperator;\n    if (schemaFilter.operator) {\n        jiveFilter.operator = jiveDataConverter.schemaFormatOperatorToFilterOperator(schemaFilter.operator, schemaFilter.value, schemaDataType);\n        genericProperties = this.columnComponentModel.parent.config.genericProperties;\n        isNullCheckOperator = schemaFilter.operator.indexOf('null') !== -1;\n        if (schemaDataType === 'datetime' && !isNullCheckOperator) {\n            if (_.isArray(schemaFilter.value)) {\n                jiveFilter.value = [];\n                jiveFilter.value[0] = jiveDataConverter.isoTimestampTojQueryUiTimestamp(schemaFilter.value[0], genericProperties);\n                jiveFilter.value[1] = jiveDataConverter.isoTimestampTojQueryUiTimestamp(schemaFilter.value[1], genericProperties);\n            } else {\n                jiveFilter.value = jiveDataConverter.isoTimestampTojQueryUiTimestamp(schemaFilter.value, genericProperties);\n            }\n        } else if (schemaDataType === 'time' && !isNullCheckOperator) {\n            if (_.isArray(schemaFilter.value)) {\n                jiveFilter.value = [];\n                jiveFilter.value[0] = jiveDataConverter.isoTimeTojQueryUiTime(schemaFilter.value[0], genericProperties);\n                jiveFilter.value[1] = jiveDataConverter.isoTimeTojQueryUiTime(schemaFilter.value[1], genericProperties);\n            } else {\n                jiveFilter.value = jiveDataConverter.isoTimeTojQueryUiTime(schemaFilter.value, genericProperties);\n            }\n        } else {\n            jiveFilter.value = schemaFilter.value;\n        }\n    }\n    return jiveFilter;\n}\nexport default Dialog.extend({\n    defaultTemplate: tableFilterTemplate,\n    constructor: function (options) {\n        this.tableFilterView = new TableFilterView({ i18n: options.i18n });\n        this.i18n = options.i18n;\n        Dialog.prototype.constructor.call(this, {\n            buttons: [\n                {\n                    label: i18n2['button.cancel'],\n                    action: 'cancel',\n                    primary: false,\n                    float: 'right'\n                },\n                {\n                    label: i18n2['button.ok'],\n                    action: 'ok',\n                    primary: true,\n                    float: 'right'\n                }\n            ],\n            traits: [ adjustDialogPositionWithinViewportTrait ],\n            additionalCssClasses: 'tableFilterDialog',\n            modal: options.modal,\n            resizable: false,\n            contentContainer: '.dialogContent',\n            content: this.tableFilterView\n        });\n        this.on('button:ok', this._applyFilter);\n        this.on('button:cancel', this.close);\n    },\n    open: function (columnComponentModel) {\n        this.columnComponentModel = columnComponentModel;\n        var reportComponentObject = this.columnComponentModel.toReportComponentObject();\n\n        var operator = this.columnComponentModel.get('dataType').toLowerCase();\n        if (operator === \"date\" || operator === \"time\") {\n            operator = \"dateTime\";\n        }\n\n        this.tableFilterView.viewModel.set({\n            columnLabel: reportComponentObject.label ? reportComponentObject.label : '#' + (this.columnComponentModel.get('columnIndex') + 1),\n            clearFilter: reportComponentObject.filter.operator == null ? 'true' : 'false',\n            filterOptions: this.columnComponentModel.parent.config.genericProperties.operators[operator],\n            dataType: this.columnComponentModel.get('dataType').toLowerCase(),\n            calendarPatterns: this.columnComponentModel.parent.config.genericProperties.calendarPatterns\n        });\n        this.tableFilterView.model.reset().set(schemaFilterToJiveFilter.call(this, reportComponentObject.filter, reportComponentObject.dataType));\n        Dialog.prototype.open.apply(this, arguments);\n    },\n    _applyFilter: function (evt) {\n        var jiveFilter = this.tableFilterView.model.toJSON(),\n            filterValidation,\n            errMsg;\n        if (jiveFilter.operator) {\n            var componentObj = this.columnComponentModel.toReportComponentObject(),\n                valueStart = _.isArray(jiveFilter.value) ? jiveFilter.value[0] : jiveFilter.value,\n                valueEnd = _.isArray(jiveFilter.value) ? jiveFilter.value[1] : undefined;\n\n            try {\n                componentObj.filter = jiveDataConverter.operatorAndValueToSchemaFormat.call(\n                    this.columnComponentModel,\n                    jiveFilter.operator,\n                    componentObj.dataType,\n                    valueStart,\n                    valueEnd,\n                    componentObj.detailsRowFormat.pattern);\n                this.columnComponentModel.updateFromReportComponentObject(componentObj);\n            } catch(ex) {\n                filterValidation = {\n                    code: ex.errorCode,\n                    params: ex.parameters,\n                    originalException: ex\n                }\n            }\n        } else {\n            this.columnComponentModel.set({\n                filterValue: null,\n                filterOperator: null\n            }, { silent: true });\n        }\n\n        if (filterValidation) {\n            if (filterValidation.code) {\n                errMsg = filterValidation.code;\n                if (validationCodes.INVALID_TIMESTAMP === errMsg || validationCodes.INVALID_TIME === errMsg) {\n                    errMsg = this.i18n['net.sf.jasperreports.components.headertoolbar.actions.filter.invalid.date'];\n                    errMsg = errMsg.replace(\"{0}\", filterValidation.params.value);\n                }\n            } else {\n                errMsg = filterValidation.originalException;\n            }\n            this.trigger(\"validationError\", errMsg);\n        } else {\n            var filterAction = this.columnComponentModel.actions['change:filter'].call(this.columnComponentModel);\n            this.columnComponentModel.filter(filterAction.filterData);\n            this.close();\n        }\n    },\n    remove: function () {\n        Dialog.prototype.remove.call(this);\n        this.tableFilterView && this.tableFilterView.remove();\n    }\n});","export default \"<div class=\\\"jive_dialog {{- additionalCssClasses }}\\\">\\n\\n    <div class=\\\"dialogContent\\\"></div>\\n    <div class=\\\"dialogFooter footer\\\"></div>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n* @author: Zakhar Tomchenko, Kostiantyn Tsaregradskyi\n* @version: $Id$\n*/\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport Backbone from 'backbone';\nimport abstractPanelTrait from './abstractPanelTrait';\nimport OptionContainer from '../../base/OptionContainer';\nimport panelButtonTemplate from '../template/tabbedPanelButtonTemplate.htm';\n\n/**\n * @event tabbedPanelTrait#tab:ID\n * @description This event is fired when tab with corresponding ID is selected.\n */\nfunction onTabSelect(tabView, tabModel) {\n    var tabAction = tabModel.get(\"action\");\n\n    if (!this._contentRendered[tabAction]) {\n        this._contentRendered[tabAction] = true;\n        this.tabs[tabAction].render && this.tabs[tabAction].render();\n    }\n\n    this.$tabs.hide();\n    this.$tabs.filter(function() {\n        return $(this).data(\"tab\") === tabAction;\n    }).css(\"display\", \"block\");\n    this.selectedTab = tabAction;\n    this.trigger(\"tab:\" + tabAction, tabView, tabModel);\n}\n\n/**\n * @mixin tabbedPanelTrait\n * @description Extend panel with tabs.\n * @extends abstractPanelTrait\n */\nexport default _.extend({}, abstractPanelTrait, {\n    /**\n     * @description Initialize tab options.\n     * @memberof! tabbedPanelTrait\n     * @param {object} options\n     * @param {array} options.tabs Data for tabs.\n     * @param {string} [options.tabContainerClass=\"tabContainer\"] CSS class for tabs container in DOM.\n     * @param {string} [options.tabHeaderContainerSelector=\"> .header > .tabHeaderContainer\"] CSS selector for tabs header in DOM.\n     * @param {string} [options.tabHeaderContainerClass=\"tabHeaderContainer\"] CSS class for tabs header in DOM.\n     * @param {string} [options.tabbedPanelClass=\"tabbedPanel\"] CSS class for Panel.\n     * @throws {Error} Error if no data for tabs was provided\n     */\n    onConstructor: function(options) {\n        options || (options = {});\n\n        if (!options.tabs || !_.isArray(options.tabs) || options.tabs.length === 0) {\n            throw new Error(\"Tabbed panel should have at least one tab\");\n        }\n\n        this.tabContainerClass = options.tabContainerClass || \"tabContainer\";\n        this.tabHeaderContainerSelector = options.tabHeaderContainerSelector || \"> .header > .tabHeaderContainer\";\n        this.tabHeaderContainerClass = options.tabHeaderContainerClass || \"tabHeaderContainer\";\n        this.tabbedPanelClass = options.tabbedPanelClass || \"tabbedPanel\";\n\n        this.tabs = {};\n\n        _.each(options.tabs, _.bind(function(tab) {\n            this.tabs[tab.action] = tab.content;\n            delete tab.content;\n        }, this));\n    },\n\n    /**\n     * @description Build DOM for tabs.\n     * @memberof! tabbedPanelTrait\n     */\n    afterSetElement: function() {\n        this.$el.addClass(this.tabbedPanelClass);\n\n        this.$tabHeaderContainer = this.$(this.tabHeaderContainerSelector);\n\n        if (!this.$tabHeaderContainer.length) {\n            this.$tabHeaderContainer = $(\"<div></div>\").addClass(this.tabHeaderContainerClass);\n            this.$(\"> .header\").append(this.$tabHeaderContainer);\n        }\n\n        this.$contentContainer.empty();\n\n        _.each(this.tabs, _.bind(function(content, tabAction) {\n            var tabContainer = $(\"<div></div>\").addClass(this.tabContainerClass);\n            tabContainer.data(\"tab\", tabAction);\n            tabContainer.html(content instanceof Backbone.View ? content.$el : content);\n\n            this.$contentContainer.append(tabContainer);\n        }, this));\n\n        var classes = this.tabContainerClass.split(\" \");\n        this.$tabs = this.$('.' + classes[0]);\n    },\n\n    /**\n     * @description Initialize tabs.\n     * @memberof! tabbedPanelTrait\n     * @fires tabbedPanelTrait#tab:ID\n     */\n    afterInitialize: function(options){\n        this.tabHeaderContainer = new OptionContainer({\n            options: options.tabs,\n            el: this.$tabHeaderContainer,\n            contextName: \"tab\",\n            toggleClass: options.toggleClass || \"active\",\n            toggle: true,\n            optionTemplate: options.optionTemplate || panelButtonTemplate\n        });\n\n        this._contentRendered = {};\n\n        this.listenTo(\n            this.tabHeaderContainer,\n            _.map(options.tabs, function(tab) { return \"tab:\" + tab.action; }).join(\" \"),\n            _.bind(onTabSelect, this));\n\n        for (var i = 0; i < options.tabs.length; i++) {\n            if (options.tabs[i].primary) {\n                this.openTab(options.tabs[i].action);\n                break;\n            }\n        }\n    },\n\n    /**\n     * @description Destroy tabs.\n     * @memberof! tabbedPanelTrait\n     */\n    onRemove: function(){\n        _.each(this.tabs, function(content) {\n            content.remove && content.remove();\n        });\n\n        this.tabHeaderContainer.remove();\n    },\n\n    /**\n     * @description Additional methods to expose through Panel's API.\n     * @memberof! tabbedPanelTrait\n     */\n    extension: {\n        /**\n         * @description Open tab by it's ID.\n         * @memberof! tabbedPanelTrait\n         * @param {string} tabId ID of tab to open\n         */\n        openTab: function(tabId) {\n            var optionView = this.tabHeaderContainer.getOptionView(tabId);\n\n            optionView && optionView.select();\n        },\n\n        showTab: function(tabId) {\n            var optionView = this.tabHeaderContainer.getOptionView(tabId);\n\n            optionView && optionView.show();\n        },\n\n        hideTab: function(tabId) {\n            var optionView = this.tabHeaderContainer.getOptionView(tabId);\n\n            optionView && optionView.hide();\n        }\n    }\n});\n","export default \"<button class=\\\"button up\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <span class=\\\"wrap\\\">{{- label }}<span class=\\\"icon\\\"></span></span>\\n</button>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ColorResult } from 'react-color';\nimport { AttachableColorPicker, ColorPickerProps } from './AttachableColorPicker';\n\ninterface Options {\n    padding: {\n        top: number,\n        left: number\n    },\n    color: string,\n    disableAlpha?: boolean,\n    showTransparentPreset?: boolean,\n    onChangeComplete(color: ColorResult): void,\n    onHide?(): void,\n    ColorPicker?: React.ComponentType<ColorPickerProps>\n}\n\nconst defaultOptions = {\n    padding: { top: 0, left: 0 },\n    disableAlpha: true,\n    showTransparentPreset: true,\n    color: '',\n    onChangeComplete() : void {},\n    onHide(): void {},\n    ColorPicker: AttachableColorPicker\n};\n\nexport default class AttachableColorPickerWrapper {\n    private readonly attachTo: HTMLElement;\n\n    private readonly options: Options;\n\n    private color: string;\n\n    private readonly colorPickerContainerWrapper: HTMLDivElement;\n\n    private readonly onChangeCompleteWrapper: (color: ColorResult) => void;\n\n    private readonly onHideWrapper: () => void;\n\n    private ColorPicker: React.ComponentType<ColorPickerProps>;\n\n    private readonly boundOnAttachElementClick: () => void;\n\n    constructor(attachTo: HTMLElement, options: Options = defaultOptions) {\n        this.options = options;\n        this.attachTo = attachTo;\n\n        this.color = this.options.color;\n\n        this.ColorPicker = this.options.ColorPicker || AttachableColorPicker;\n\n        this.colorPickerContainerWrapper = document.createElement('div');\n        this.colorPickerContainerWrapper.className = 'jr-jColorPickerWrapper';\n\n        this.boundOnAttachElementClick = this.onAttachElementClick.bind(this);\n\n        const { onChangeComplete, onHide } = this.options;\n\n        this.onChangeCompleteWrapper = (color: ColorResult) => {\n            this.color = color.hex;\n            onChangeComplete(color);\n        };\n\n        this.onHideWrapper = () => {\n            const state = this.getColorPickerState(false);\n\n            this.renderColorPicker(state);\n\n            if (onHide) {\n                onHide();\n            }\n        };\n\n        const state = this.getColorPickerState(false);\n\n        this.renderColorPicker(state);\n    }\n\n    private renderColorPicker(state: ColorPickerProps) {\n        this.remove();\n\n        this.attachTo.addEventListener('click', this.boundOnAttachElementClick);\n\n        document.body.appendChild(this.colorPickerContainerWrapper);\n\n        const { ColorPicker } = this;\n\n        ReactDOM.render(\n            <ColorPicker {...state} />,\n            this.colorPickerContainerWrapper,\n        );\n    }\n\n    private onAttachElementClick() {\n        const state = this.getColorPickerState(true);\n\n        this.renderColorPicker(state);\n    }\n\n    private getColorPickerState(show: boolean): ColorPickerProps {\n        return {\n            padding: this.options.padding,\n            show,\n            color: this.color,\n            disableAlpha: this.options.disableAlpha,\n            showTransparentPreset: this.options.showTransparentPreset,\n            onChangeComplete: this.onChangeCompleteWrapper,\n            onHide: this.onHideWrapper,\n            attachTo: this.attachTo,\n        }\n    }\n\n    setColor(color: string) {\n        this.color = color;\n    }\n\n    remove() {\n        this.attachTo.removeEventListener('click', this.boundOnAttachElementClick);\n        ReactDOM.unmountComponentAtNode(this.colorPickerContainerWrapper);\n        $(this.colorPickerContainerWrapper).remove();\n    }\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport { ColorResult } from 'react-color';\nimport AttachableColorPickerWrapper from 'js-sdk/src/common/component/colorPicker/react/AttachableColorPickerWrapper';\nimport Colors from 'js-sdk/src/common/component/colorPicker/react/enum/colors';\n\nconst getColor = (value: string|null): string => {\n    if (value) {\n        return value === Colors.TRANSPARENT ? value : `#${value}`;\n    }\n\n    return Colors.TRANSPARENT;\n};\n\nconst convertColorForModel = (color: ColorResult): string => {\n    const { hex } = color;\n\n    if (hex === Colors.TRANSPARENT) {\n        return Colors.TRANSPARENT;\n    }\n\n    return hex.slice(1);\n};\n\nexport default function getColorPickerBinding() {\n    return {\n        attachableColorPickerWrapper: {\n            remove: () => {},\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            setColor: (color: string) => {}\n        } as AttachableColorPickerWrapper,\n\n        init($element: JQuery, value: string, bindings: {\n            [propName: string]: (value: string) => void\n        }) {\n            const showTransparentInput = !!$element.data('showTransparentInput');\n            const modelBinding = $element.data('model-attr');\n\n            this.attachableColorPickerWrapper = new AttachableColorPickerWrapper($element[0], {\n                padding: {\n                    top: 0,\n                    left: 0,\n                },\n                color: getColor(value),\n                showTransparentPreset: showTransparentInput,\n                onChangeComplete: (color: ColorResult) => {\n                    bindings[modelBinding](convertColorForModel(color));\n                },\n            });\n        },\n\n        set($element: JQuery, value: string|null) {\n            const color = getColor(value);\n\n            if (value) {\n                $element.removeClass('unchanged');\n            } else {\n                $element.addClass('unchanged');\n            }\n\n            $element.find('div.colorpick').css('background-color', color);\n\n            this.attachableColorPickerWrapper.setColor(color);\n        },\n\n        clean() {\n            this.attachableColorPickerWrapper.remove();\n        },\n    }\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport _ from 'underscore';\nimport Epoxy from 'backbone.epoxy';\nimport getResetColorBinding from './bindigs/resetColorBinding';\nimport getColorPickerBinding from './bindigs/colorPickerBinding';\nimport datePickerBindingHandler from './dateTimePickerEpoxyBindingHandler';\n\nexport default Epoxy.View.extend({\n    constructor: function (options) {\n        this.i18n = options.i18n;\n        Epoxy.View.prototype.constructor.call(this, options);\n    },\n    bindingHandlers: {\n        radioDiv: {\n            init: function ($element, value, bindings, context) {\n                var modelBinding = $element.data('model-attr');\n\n                this.$el = $element;\n\n                let callback = function (evt) {\n                    bindings[modelBinding]($element.data('value'));\n                };\n\n                this.callback = _.bind(callback, this);\n\n                this.$el.on('click', this.callback);\n            },\n            set: function ($element, value) {\n                var radioDivs = $element.siblings('div[data-bind*=\\'radioDiv\\']');\n                if ($element.data('value') === value) {\n                    $element.addClass('selected');\n                    radioDivs.removeClass('selected');\n                }\n            },\n            clean: function () {\n                this.$el.off('click', this.callback);\n            }\n        },\n        checkboxDiv: {\n            init: function ($element, value, bindings, context) {\n                var modelBinding = $element.data('model-attr');\n\n                this.$el = $element;\n                this.isTrippleState = !!this.$el.data('tripplestate');\n\n                let callback = function (evt) {\n                    bindings[modelBinding](this._get($element));\n                };\n\n                this.callback = _.bind(callback, this);\n\n                this.$el.on('click', this.callback);\n            },\n            set: function ($element, value) {\n                if (value === true) {\n                    $element.removeClass('unchanged').addClass('selected');\n                } else if (value === false) {\n                    $element.removeClass('unchanged').removeClass('selected');\n                } else {\n                    $element.removeClass('selected').addClass('unchanged');\n                }\n            },\n            _get: function ($element) {\n                if (this.isTrippleState) {\n                    if ($element.is('.unchanged')) {\n                        return true;\n                    } else if ($element.is('.selected')) {\n                        return false;\n                    } else {\n                        return null;\n                    }\n                } else {\n                    return !$element.is('.selected');\n                }\n            },\n            clean: function () {\n                this.$el.off('click', this.callback);\n            }\n        },\n        resetColor: getResetColorBinding(),\n        colorpicker: getColorPickerBinding(),\n        dateTimePicker: datePickerBindingHandler\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nexport default function getBinding() {\n    return {\n        el: {} as HTMLElement,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        onClick: (e: Event) => {},\n\n        init($element: JQuery, value: string, bindings: {\n            [propName: string]: (value: null) => void;\n        }) {\n            const modelBinding = $element.data('model-attr');\n\n            this.el = $element.get(0);\n\n            $element.attr('disabled', 'disabled');\n\n            this.onClick = (event: Event) => {\n                event.stopPropagation();\n\n                bindings[modelBinding](null);\n                $element.attr('disabled', 'disabled');\n            };\n\n            this.el.addEventListener('click', this.onClick);\n        },\n\n        set($element: JQuery, value: string) {\n            if (value) {\n                $element.removeAttr('disabled');\n                $element.prop('checked', true);\n            }\n        },\n\n        clean() {\n            this.el.removeEventListener('click', this.onClick);\n        },\n    };\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport _ from 'underscore';\nvar FormatModelCache = function () {\n    this.map = {};\n    this.keyInfo = {};\n};\nFormatModelCache.prototype = {\n    get: function (key) {\n        if (this.map[key]) {\n            return this.map[key].current;\n        }\n        return null;\n    },\n    set: function (key, stateJSON) {\n        if (!this.map[key]) {\n            this.map[key] = {\n                original: _.cloneDeep(stateJSON),\n                current: _.cloneDeep(stateJSON)\n            };\n        } else {\n            this.map[key].current = _.cloneDeep(stateJSON);\n        }\n    },\n    createKey: function (applyTo, model, isGroup) {\n        var key;\n        if (!isGroup) {\n            key = applyTo + '-column-' + model.get('columnIndex');\n        } else {\n            key = applyTo + '-column-' + model.get('forColumns').join('_');\n        }\n        if (!this.keyInfo[key]) {\n            this.keyInfo[key] = {\n                applyTo: applyTo,\n                model: model\n            };\n        }\n        return key;\n    },\n    clear: function () {\n        this.map = {};\n        this.keyInfo = {};\n    },\n    remove: function () {\n    }\n};\nexport default FormatModelCache;","export default \"<option value=\\\"{{- value}}\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- text}}</option>\";","export default \"{{ if (start) { }} <optgroup label=\\\"{{- label }}\\\"> {{ } }}\\n\\n        <js-templateNonce></js-templateNonce>\\n    <option value=\\\"{{- value }}\\\">{{- text }}</option>\\n{{ if (end) { }} </optgroup> {{ } }}\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport Epoxy from 'backbone.epoxy';\nimport _ from 'underscore';\nexport default Epoxy.Model.extend({\n    defaults: function () {\n        return {\n            columnLabel: undefined,\n            backgroundColor: undefined,\n            align: undefined,\n            pattern: undefined,\n            font: {\n                bold: false,\n                italic: false,\n                underline: false,\n                size: 9,\n                name: undefined,\n                color: '000000'\n            }\n        };\n    },\n    computeds: function () {\n        var ctds = {};\n        // dinamically create computeds for each font property\n        _.each(this.defaults().font, function (val, key) {\n            ctds['font' + key.charAt(0).toUpperCase() + key.substring(1, key.length)] = {\n                deps: ['font'],\n                get: function (font) {\n                    return font[key];\n                },\n                set: function(value) {\n                    var newFont = _.extend({}, this.get('font')),\n                        newValue = value;\n\n                    if (key === 'name' && newValue != null && !newValue.trim().length) {\n                        newValue = null;\n                    }\n\n                    newFont[key] = newValue;\n\n                    return {\n                        font: newFont\n                    };\n                }\n            };\n        });\n        return ctds;\n    },\n    reset: function () {\n        this.clear({ silent: true }).set(this.defaults());\n        return this;\n    },\n    remove: function () {\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Menu from './Menu';\nimport $ from 'jquery';\nimport _ from 'underscore';\nvar OPACITY_VALUE_FOR_HEIGHT_CALCULATION = 0;\nvar EXTRA_OFFSET = 10;\nexport default Menu.extend({\n    constructor: function (options, additionalSettings) {\n        Menu.call(this, options, additionalSettings);\n        _.bindAll(this, '_tryHide');\n        this.topPadding = additionalSettings && additionalSettings.topPadding || 5;\n        this.leftPadding = additionalSettings && additionalSettings.leftPadding || 5;\n        this.extraOffset = options.extraOffset || EXTRA_OFFSET;\n        this.hideOnMouseLeave = additionalSettings && additionalSettings.hideOnMouseLeave || false;\n        _.bindAll(this, '_tryHide', '_checkBounds');\n        this.hideOnMouseLeave && this.$el.on('mouseleave', this._tryHide);\n    },\n    _tryHide: function () {\n        this.hide();\n        this._signOffTryHide();\n    },\n    _signOffTryHide: function () {\n        $(document.body).off('click.contextMenu', this._tryHide);\n        $(document.body).off('mousemove', this._checkBounds);\n    },\n    show: function (position, container) {\n        if (!position || !_.isNumber(position.top) || !_.isNumber(position.left)) {\n            throw new Error('Required params (top, left) missing: ' + JSON.stringify(position));\n        }\n        $(document.body).on('click.contextMenu', this._tryHide);\n        this.hideOnMouseLeave && $(document.body).on('mousemove', this._checkBounds);\n        var top = position.top, left = position.left, topPadding = this.topPadding, leftPadding = this.leftPadding, body = $('body'), menuElHeight = this._calculateMenuHeightOnShow(), menuElWidth = this.$el.width(), containerHeight = container ? container.height() : body.height(), containerWidth = container ? container.width() : body.width(), containerOffset = container ? container.offset() : body.offset(), fitByHeight = containerHeight - position.top, fitByWidth = containerWidth - position.left;\n        if (fitByHeight < menuElHeight) {\n            top = position.top - menuElHeight - topPadding;\n            top < containerOffset.top && (top += containerOffset.top - top + topPadding);\n            top = top < 0 ? containerHeight / 2 - menuElHeight / 2 : top;\n        }\n        if (fitByWidth < menuElWidth) {\n            left = position.left - menuElWidth - leftPadding;\n            left < containerOffset.left && (left += containerOffset.left - left + leftPadding);\n            left = left < 0 ? containerWidth / 2 - menuElWidth / 2 : left;\n        }\n        _.extend(this, {\n            top: top,\n            left: left\n        });\n        this.$el.css({\n            top: this.top,\n            left: this.left\n        });\n        return Menu.prototype.show.apply(this, arguments);\n    },\n    _checkBounds: function (event) {\n        var elementRect = {\n            top: this.$el[0].offsetTop - this.extraOffset,\n            bottom: this.$el[0].offsetTop + this.$el[0].offsetHeight + this.extraOffset,\n            left: this.$el[0].offsetLeft - this.extraOffset,\n            right: this.$el[0].offsetLeft + this.$el[0].offsetWidth + this.extraOffset\n        };\n        if (this._isPointerOutOfBounds(elementRect, event)) {\n            this._tryHide();\n        }\n    },\n    _isPointerOutOfBounds: function (elementRect, event) {\n        return event.clientX < elementRect.left || event.clientX > elementRect.right || (event.clientY < elementRect.top || event.clientY > elementRect.bottom);\n    },\n    _calculateMenuHeightOnShow: function () {\n        this.$el.css({ opacity: OPACITY_VALUE_FOR_HEIGHT_CALCULATION });\n        Menu.prototype.show.apply(this, arguments);\n        var height = this.$el.height();\n        this.hide();\n        this.$el.css({ opacity: '' });\n        return height;\n    },\n    remove: function () {\n        this._signOffTryHide();\n        this.hideOnMouseLeave && this.$el.off('mouseleave', this._tryHide);\n        Menu.prototype.remove.apply(this, arguments);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nvar regex = {\n    numberPart: /([\\d|#]+(?!,))/,\n    decimalPart: /(\\.[\\d|#]+)/,\n    numericChar: /[\\d|#]/\n};\nvar POSITIVE_NUMBER_FORMAT = '###0';\nvar DURATION_PATTERN = '[h]:mm:ss';\nfunction addDecimalPlaceToToken(token) {\n    var dotIndex = token.indexOf('.');\n    if (dotIndex != -1) {\n        // already have decimals\n        var decimalPart = regex.decimalPart.exec(token)[1];\n        return token.replace(decimalPart, decimalPart + '0');\n    } else {\n        // no decimals\n        var numberPart = regex.numberPart.exec(token)[1];\n        return token.replace(numberPart, numberPart + '.0');\n    }\n}\nfunction removeDecimalPlaceFromToken(token) {\n    var result = token, dotIndex = result.indexOf('.');\n    if (dotIndex != -1) {\n        var decimalPart = regex.decimalPart.exec(result)[1];\n        if (decimalPart.length > 2) {\n            // remove last decimal place\n            result = result.replace(decimalPart, decimalPart.substring(0, decimalPart.length - 1));\n        } else {\n            // remove all (dot and decimal place)\n            result = result.replace(decimalPart, '');\n        }\n    }\n    return result;\n}\nfunction addThousandsSeparatorToToken(token) {\n    var indexOfNumericChar = token.indexOf(regex.numericChar.exec(token)), firstPart = token.substring(0, indexOfNumericChar + 1);\n    return firstPart + ',' + token.substring(firstPart.length);\n}\nfunction removeThousandsSeparatorFromToken(token) {\n    return token.replace(',', '');\n}\nfunction addPercentageToToken(token) {\n    return token + ' %';\n}\nfunction removePercentageFromToken(token) {\n    return token.substring(0, token.length - 2);\n}\nvar NumberFormatUtil = {\n    addRemoveDecimalPlace: function (exp, booleanAdd) {\n        var pozToken = exp.split(';')[0], negToken = exp.split(';')[1];\n        if (booleanAdd) {\n            exp = addDecimalPlaceToToken(pozToken);\n            if (negToken) {\n                exp = exp + ';' + addDecimalPlaceToToken(negToken);\n            }\n            return exp;\n        } else {\n            exp = removeDecimalPlaceFromToken(pozToken);\n            if (negToken) {\n                exp = exp + ';' + removeDecimalPlaceFromToken(negToken);\n            }\n            return exp;\n        }\n    },\n    addRemoveThousandsSeparator: function (exp, booleanAdd) {\n        var indexOfComma = exp.indexOf(','), pozToken = exp.split(';')[0], negToken = exp.split(';')[1];\n        if (booleanAdd) {\n            if (indexOfComma == -1) {\n                // add\n                exp = addThousandsSeparatorToToken(pozToken);\n                if (negToken) {\n                    exp = exp + ';' + addThousandsSeparatorToToken(negToken);\n                }\n            }\n        } else {\n            if (indexOfComma != -1) {\n                // remove\n                exp = removeThousandsSeparatorFromToken(pozToken);\n                if (negToken) {\n                    exp = exp + ';' + removeThousandsSeparatorFromToken(negToken);\n                }\n            }\n        }\n        return exp;\n    },\n    addRemovePercentage: function (exp, booleanAdd) {\n        var indexOfPercent = exp.indexOf('%'), pozToken = exp.split(';')[0], negToken = exp.split(';')[1];\n        if (booleanAdd) {\n            // add\n            if (indexOfPercent == -1) {\n                exp = addPercentageToToken(pozToken);\n                if (negToken) {\n                    exp = exp + ';' + addPercentageToToken(negToken);\n                }\n            }\n        } else {\n            // remove\n            if (indexOfPercent != -1) {\n                exp = removePercentageFromToken(pozToken);\n                if (negToken) {\n                    exp = exp + ';' + removePercentageFromToken(negToken);\n                }\n            }\n        }\n        return exp;\n    },\n    addRemovePercentageForNumber: function (numberExp, booleanAdd) {\n        var numberPart = regex.numberPart.exec(numberExp)[1];\n        if (booleanAdd) {\n            if (numberExp.indexOf('%') == -1 && numberPart.indexOf('00') == -1) {\n                numberExp = numberExp.replace(numberPart, numberPart + '00');\n                numberExp = numberExp + ' %';\n            }\n        } else {\n            if (numberExp.indexOf('%') != -1 && numberPart.indexOf('00') != -1) {\n                numberExp = numberExp.replace(numberPart, numberPart.substring(0, numberPart.length - 2));\n                numberExp = numberExp.substring(0, numberExp.length - 2);\n            }\n        }\n        return numberExp;\n    },\n    addRemoveCurrencySymbol: function (exp, booleanAdd, currencySymbol) {\n        var indexOfCS = exp.indexOf(currencySymbol), pozToken = exp.split(';')[0], negToken = exp.split(';')[1];\n        if (booleanAdd) {\n            if (indexOfCS == -1) {\n                exp = currencySymbol + ' ' + pozToken;\n                if (negToken) {\n                    exp = exp + ';' + currencySymbol + ' ' + negToken;\n                }\n            }\n        } else {\n            if (indexOfCS != -1) {\n                exp = pozToken.substring(2);\n                if (negToken) {\n                    exp = exp + ';' + negToken.substring(2);\n                }\n            }\n        }\n        return exp;\n    },\n    jivePatternToSchemaPattern: function (jivePattern, jiveDataType) {\n        var result;\n        if (jiveDataType === 'numeric' && jivePattern === DURATION_PATTERN) {\n            result = jivePattern;\n        } else if (jiveDataType === 'numeric') {\n            var pattern = jivePattern, precisionRegexp = new RegExp('0\\\\.(0+)'), grouping = false, percentage = false, precision = 0, negativeFormat = '-' + POSITIVE_NUMBER_FORMAT, currency = null;\n            if (pattern.indexOf(',') > -1) {\n                grouping = true;\n                pattern = pattern.replace(/,/g, '');\n            }\n            if (pattern.indexOf('%') > -1) {\n                percentage = true;\n                pattern = pattern.replace(/%/g, '');\n            }\n            if (pattern.indexOf('\\xA4') > -1) {\n                currency = 'LOCALE_SPECIFIC';\n                pattern = pattern.replace(/\\u00A4/g, '');\n            } else if (pattern.indexOf('$') > -1) {\n                currency = 'USD';\n                pattern = pattern.replace(/\\u0024/g, '');\n            } else if (pattern.indexOf('\\xA3') > -1) {\n                currency = 'GBP';\n                pattern = pattern.replace(/\\u00A3/g, '');\n            } else if (pattern.indexOf('\\u20AC') > -1) {\n                currency = 'EUR';\n                pattern = pattern.replace(/\\u20AC/g, '');\n            } else if (pattern.indexOf('\\xA5') > -1) {\n                currency = 'YEN';\n                pattern = pattern.replace(/\\u00A5/g, '');\n            }\n            pattern = pattern.replace(/\\s/g, '');\n            var precisionTestResult = precisionRegexp.exec(pattern);\n            if (precisionTestResult && precisionTestResult.length == 2) {\n                precision = precisionTestResult[1].length;\n                pattern = pattern.replace(new RegExp('\\\\.' + Array(precision + 1).join('0'), 'g'), '');\n            }\n            var parts = pattern.split(';');\n            if (parts && parts.length === 2) {\n                negativeFormat = parts[1];\n            }\n            result = {\n                negativeFormat: negativeFormat,\n                currency: currency,\n                precision: precision,\n                grouping: grouping,\n                percentage: percentage\n            };\n        } else {\n            result = jivePattern;\n        }\n        return result;\n    }\n};\nexport default NumberFormatUtil;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport _ from 'underscore';\nimport jiveDataConverter from '../../../util/jiveDataConverter';\nimport Epoxy from 'backbone.epoxy';\nimport Backbone from 'backbone';\nimport TableCommonFormatView from './TableCommonFormatView';\nimport FormatModelCache from '../util/FormatModelCache';\nimport tableFormatTemplate from '../template/tableBasicFormatTemplate.htm';\nimport basicOptionTemplate from '../template/basicOptionTemplate.htm';\nimport groupOptionTemplate from '../template/groupOptionTemplate.htm';\nimport currencyMenuTemplate from '../template/currencyMenuTemplate.htm';\nimport currencyOptionTemplate from '../template/currencyOptionTemplate.htm';\nimport TableFormatModel from '../model/TableFormatModel';\nimport ContextMenu from 'js-sdk/src/common/component/menu/ContextMenu';\nimport NumberFormatPatternUtil from '../util/NumberFormatPatternUtil';\n\nvar currencyMap = {\n    'LOCALE_SPECIFIC': '\\xA4',\n    'USD': '$',\n    'GBP': '\\xA3',\n    'EUR': '\\u20AC',\n    'YEN': '\\xA5'\n};\nfunction onApplyToChange() {\n    var viewModel = this.viewModel, cache = this.cache, currentApplyTo = viewModel.get('applyTo'), previousApplyTo = viewModel.previous('applyTo'), columnComponentModel = this.columnComponentModel, key, columnGroup, obj;\n    if (currentApplyTo == null) {\n        return;\n    }\n    if (previousApplyTo) {\n        if (previousApplyTo === 'heading' || previousApplyTo === 'detailrows') {\n            key = cache.createKey(previousApplyTo, columnComponentModel);\n        } else {\n            key = cache.createKey(previousApplyTo, columnComponentModel.parent.columnGroups.findWhere({ id: previousApplyTo }), true);\n        }\n        cache.set(key, this.model.toJSON());\n    }\n    if (currentApplyTo === 'heading') {\n        key = cache.createKey(currentApplyTo, columnComponentModel);\n        if (cache.get(key) === null) {\n            obj = columnComponentModel.headingFormat.toJSON();\n            obj.columnLabel = columnComponentModel.get('columnLabel');\n            cache.set(key, obj);\n        }\n        this.viewModel.set('dataType', 'text');\n    } else if (currentApplyTo === 'detailrows') {\n        key = cache.createKey(currentApplyTo, columnComponentModel);\n        if (cache.get(key) === null) {\n            obj = columnComponentModel.detailsRowFormat.toJSON();\n            obj.pattern = columnComponentModel.detailsRowFormat.toJiveFormat();\n            cache.set(key, obj);\n        }\n        this.viewModel.set('dataType', columnComponentModel.get('dataType').toLowerCase());\n    } else {\n        columnGroup = columnComponentModel.parent.columnGroups.findWhere({ id: currentApplyTo });\n        key = cache.createKey(currentApplyTo, columnGroup, true);\n        if (cache.get(key) === null) {\n            obj = columnGroup.format.toJSON();\n            obj.pattern = columnGroup.format.toJiveFormat();\n            cache.set(key, obj);\n        }\n        this.viewModel.set('dataType', columnGroup.get('dataType').toLowerCase());\n    }\n    this.model.reset().set(cache.get(key));\n}\nfunction onDataTypeChange() {\n    var columnModel = this.columnComponentModel, defaults = this.viewModel.defaults(), dataType = this.viewModel.get('dataType');\n    if (!columnModel) {\n        return;\n    }\n    this.viewModel.set('patterns', columnModel.parent.config.genericProperties.patterns[dataType] || []);\n    this.viewModel.set('hasPercentage', defaults.hasPercentage);\n    this.viewModel.set('hasComma', defaults.hasComma);\n    this.viewModel.set('currencySymbol', defaults.currencySymbol);\n}\nfunction updateApplyToOptions() {\n    var self = this, columnModel = this.columnComponentModel, columnIndex = columnModel.get('columnIndex'), columnGroups = columnModel.parent.columnGroups, options = [], groupHeadingOptions = [], groupSubTotalsOptions = [], totalsOptions = [];\n    columnModel.get('canFormatHeading') && options.push({\n        value: 'heading',\n        label: this.i18n['net.sf.jasperreports.components.headertoolbar.applyto.option.headings']\n    });\n    columnGroups.each(function (group) {\n        if (_.indexOf(group.get('forColumns'), columnIndex) != -1) {\n            if (group.get('groupType') === 'groupheading') {\n                groupHeadingOptions.push({\n                    value: group.get('id'),\n                    label: group.get('groupName') + ' ' + self.i18n['net.sf.jasperreports.components.headertoolbar.groupheading.prefix']\n                });\n            } else if (group.get('groupType') === 'groupsubtotal') {\n                groupSubTotalsOptions.push({\n                    value: group.get('id'),\n                    label: group.get('groupName') + ' ' + self.i18n['net.sf.jasperreports.components.headertoolbar.groupsubtotal.prefix']\n                });\n            } else if (group.get('groupType') === 'tabletotal') {\n                totalsOptions.push({\n                    value: group.get('id'),\n                    label: self.i18n['net.sf.jasperreports.components.headertoolbar.applyto.option.tabletotal']\n                });\n            }\n        }\n    });\n    options.push.apply(options, groupHeadingOptions);\n    options.push({\n        value: 'detailrows',\n        label: this.i18n['net.sf.jasperreports.components.headertoolbar.applyto.option.detailrows']\n    });\n    options.push.apply(options, groupSubTotalsOptions);\n    options.push.apply(options, totalsOptions);\n    this.viewModel.set('applyToOptions', options);    // try to keep the same applyTo across columns\n    // try to keep the same applyTo across columns\n    var previousApplyTo = this.viewModel.previous('applyTo');\n    if (previousApplyTo) {\n        this.viewModel.set('applyTo', null, { silent: true });\n        if (_.findWhere(options, { value: previousApplyTo })) {\n            this.viewModel.set('applyTo', previousApplyTo);\n        } else {\n            this.viewModel.set('applyTo', options[0].value === 'heading' ? 'heading' : 'detailrows');\n        }\n    } else {\n        this.viewModel.set('applyTo', options[0].value === 'heading' ? 'heading' : 'detailrows');\n    }\n}\nfunction cacheCurrentModel() {\n    var applyTo = this.viewModel.get('applyTo'), key;\n    if (applyTo === 'heading' || applyTo === 'detailrows') {\n        key = this.cache.createKey(applyTo, this.columnComponentModel);\n    } else {\n        key = this.cache.createKey(applyTo, this.columnComponentModel.parent.columnGroups.findWhere({ id: applyTo }), true);\n    }\n    this.cache.set(key, this.model.toJSON());\n}\nvar TableFormatViewModel = Epoxy.Model.extend({\n    defaults: function () {\n        return {\n            dataType: 'text',\n            fontSizes: [],\n            fontNames: [],\n            patterns: [],\n            applyToOptions: [],\n            applyTo: null,\n            hasPercentage: false,\n            hasComma: false,\n            currencySymbol: 'LOCALE_SPECIFIC'\n        };\n    },\n    computeds: {\n        //getNumericTypeVisibility: function() {\n        //    return this.get(\"dataType\") === \"numeric\" ? \"visible\" : \"hidden\";\n        //},\n        hasPattern: function () {\n            var dataType = this.get('dataType');\n            return dataType === 'numeric' || dataType === 'date' || dataType === 'time';\n        },\n        hasHeading: function () {\n            return this.get('applyTo') === 'heading';\n        }\n    },\n    reset: function () {\n        this.clear({ silent: true }).set(this.defaults());\n        return this;\n    },\n    remove: function () {\n    }\n});\nexport default TableCommonFormatView.extend({\n    events: {\n        'click .jive_inputbutton[name=\\'increaseDecimalsBtn\\']': '_addDecimal',\n        'click .jive_inputbutton[name=\\'decreaseDecimalsBtn\\']': '_removeDecimal',\n        'click .jive_inputbutton[name=\\'currencyBtn\\']': '_showCurrencyMenu'\n    },\n    el: function () {\n        return _.template(tableFormatTemplate, { i18n: this.i18n });\n    },\n    initialize: function () {\n        this.model = new TableFormatModel();\n        this.viewModel = new TableFormatViewModel();\n        this.cache = new FormatModelCache();\n        this.listenTo(this.viewModel, 'change:applyTo', _.bind(onApplyToChange, this));\n        this.listenTo(this.viewModel, 'change:hasPercentage', this._togglePercentageFormat);\n        this.listenTo(this.viewModel, 'change:hasComma', this._toggleCommaFormat);\n        this.listenTo(this.viewModel, 'change:dataType', _.bind(onDataTypeChange, this));\n        this.on('tabSwitched', function () {\n            cacheCurrentModel.call(this);\n        });\n        Epoxy.View.prototype.initialize.apply(this, arguments);\n        this._initCurrencyContextMenu();\n    },\n    bindingHandlers: _.extend({\n        transformedPatterns: function ($element, patterns) {\n            var html = '';\n            _.each(patterns, function (pattern) {\n                html += _.template(basicOptionTemplate, {\n                    value: pattern.key,\n                    text: pattern.val\n                });\n            });\n            $element.html(html);\n        },\n        groupedOptions: function ($element, allFonts) {\n            var self = this, html = '';\n            if (allFonts.extension) {\n                _.each(allFonts.extension, function (element, index, list) {\n                    html += _.template(groupOptionTemplate, {\n                        start: index === 0,\n                        end: index == list.length - 1,\n                        label: self.view.i18n['net.sf.jasperreports.components.headertoolbar.label.extfonts'],\n                        value: element,\n                        text: element\n                    });\n                });\n            }\n            if (allFonts.system) {\n                _.each(allFonts.system, function (element, index, list) {\n                    html += _.template(groupOptionTemplate, {\n                        start: index === 0,\n                        end: index == list.length - 1,\n                        label: self.view.i18n['net.sf.jasperreports.components.headertoolbar.label.sysfonts'],\n                        value: element,\n                        text: element\n                    });\n                });\n            }\n            $element.html(html);\n        },\n        nonGroupedOptions: function($element, allSizes) {\n            var html = \"\";\n            if (allSizes) {\n                _.each(allSizes, function(element, index, list) {\n                    html += _.template(basicOptionTemplate, {\n                        value: element,\n                        text: element});\n                });\n            }\n            $element.html(html);\n        }\n    }, TableCommonFormatView.prototype.bindingHandlers),\n    bindingFilters: {\n        customDecimal: {\n            get: function (value) {\n                var ret = parseFloat(value);\n                return !_.isNaN(ret) ? ret : null;\n            },\n            set: function (value) {\n                var ret = parseFloat(value);\n                return !_.isNaN(ret) ? ret : null;\n            }\n        }\n    },\n    computeds: {\n        isDuration: function () {\n            return jiveDataConverter.DURATION_PATTERN === this.getBinding('pattern');\n        },\n        getNumericTypeVisibility: function () {\n            var isNumeric = this.getBinding('dataType') === 'numeric', isDuration = jiveDataConverter.DURATION_PATTERN === this.getBinding('pattern');\n            return isNumeric && !isDuration ? 'visible' : 'hidden';\n        }\n    },\n    setColumnComponentModel: function (columnComponentModel, isUpdate) {\n        var viewModel = this.viewModel;\n        if (isUpdate) {\n            cacheCurrentModel.call(this);\n        } else {\n            this.cache.clear();\n            viewModel.reset();\n            viewModel.set('fontSizes', columnComponentModel.parent.config.genericProperties.fontSizes);\n            viewModel.set('fontNames', columnComponentModel.parent.config.genericProperties.fonts);\n        }\n        this.columnComponentModel = columnComponentModel;\n        updateApplyToOptions.call(this);\n\n        this.removeBindings();\n        this.applyBindings();\n    },\n    getActions: function () {\n        var cache = this.cache, actions = [], obj;\n        cacheCurrentModel.call(this);\n        _.each(cache.map, function (cacheEntry, key) {\n            var testModel = new Backbone.Model(cacheEntry.original), keyInfo;\n            testModel.set(cacheEntry.current);\n            if (testModel.hasChanged()) {\n                keyInfo = cache.keyInfo[key];\n                if (keyInfo.applyTo === 'heading') {\n                    keyInfo.model.updateFromReportComponentObject({\n                        label: cacheEntry.current.columnLabel,\n                        headingFormat: cacheEntry.current\n                    });\n                    actions.push(keyInfo.model.actions['change:headingFormat'].call(keyInfo.model));\n                } else if (keyInfo.applyTo === 'detailrows') {\n                    obj = cacheEntry.current;\n                    obj.pattern = NumberFormatPatternUtil.jivePatternToSchemaPattern(obj.pattern, keyInfo.model.get('dataType').toLowerCase());\n                    keyInfo.model.updateFromReportComponentObject({ detailsRowFormat: obj });\n                    actions.push(keyInfo.model.actions['change:detailsRowFormat'].call(keyInfo.model));\n                } else {\n                    obj = cacheEntry.current;\n                    obj.pattern = NumberFormatPatternUtil.jivePatternToSchemaPattern(obj.pattern, keyInfo.model.get('dataType').toLowerCase());\n                    keyInfo.model.updateFromReportComponentObject({ format: obj });\n                    actions.push(keyInfo.model.actions['change:format'].call(keyInfo.model));\n                }\n            }\n        });\n        return actions;\n    },\n    _initCurrencyContextMenu: function () {\n        var self = this, options = [\n            {\n                label: this.i18n['net.sf.jasperreports.components.headertoolbar.label.currency.none'],\n                action: 'none',\n                symbol: null\n            },\n            {\n                label: this.i18n['net.sf.jasperreports.components.headertoolbar.label.localespecific'],\n                action: 'localeSpecific',\n                symbol: 'LOCALE_SPECIFIC'\n            },\n            {\n                label: currencyMap['USD'] + ' - USD',\n                action: 'usd',\n                symbol: 'USD'\n            },\n            {\n                label: currencyMap['EUR'] + ' - EUR',\n                action: 'eur',\n                symbol: 'EUR'\n            },\n            {\n                label: currencyMap['GBP'] + ' - GBP',\n                action: 'gbp',\n                symbol: 'GBP'\n            },\n            {\n                label: currencyMap['YEN'] + ' - YEN',\n                action: 'yen',\n                symbol: 'YEN'\n            }\n        ];\n        this.currencyMenu = new ContextMenu(options, {\n            menuContainerTemplate: currencyMenuTemplate,\n            menuOptionTemplate: currencyOptionTemplate\n        });\n        _.each(options, function (option) {\n            self.listenTo(self.currencyMenu, 'option:' + option.action, self._applyCurrencyFormat);\n        });\n    },\n    _togglePercentageFormat: function (evt) {\n        var patterns = this.getBinding('patterns'), hasPercentage = this.getBinding('hasPercentage'), transformedPatterns = [];\n        if (patterns.length) {\n            _.each(patterns, function (pattern) {\n                // skip processing of duration pattern\n                if (jiveDataConverter.DURATION_PATTERN === pattern.key) {\n                    transformedPatterns.push({\n                        key: pattern.key,\n                        val: pattern.val\n                    });\n                } else {\n                    transformedPatterns.push({\n                        key: NumberFormatPatternUtil.addRemovePercentage(pattern.key, hasPercentage),\n                        val: NumberFormatPatternUtil.addRemovePercentageForNumber(pattern.val, hasPercentage)\n                    });\n                }\n            });\n            this.setBinding('patterns', transformedPatterns);\n        }\n    },\n    _toggleCommaFormat: function (evt) {\n        var patterns = this.getBinding('patterns'), hasComma = this.getBinding('hasComma'), transformedPatterns = [];\n        if (patterns.length) {\n            _.each(patterns, function (pattern) {\n                // skip processing of duration pattern\n                if (jiveDataConverter.DURATION_PATTERN === pattern.key) {\n                    transformedPatterns.push({\n                        key: pattern.key,\n                        val: pattern.val\n                    });\n                } else {\n                    transformedPatterns.push({\n                        key: NumberFormatPatternUtil.addRemoveThousandsSeparator(pattern.key, hasComma),\n                        val: NumberFormatPatternUtil.addRemoveThousandsSeparator(pattern.val, hasComma)\n                    });\n                }\n            });\n            this.setBinding('patterns', transformedPatterns);\n        }\n    },\n    _addDecimal: function (evt) {\n        var patterns = this.getBinding('patterns'), transformedPatterns = [];\n        if (patterns.length) {\n            _.each(patterns, function (pattern) {\n                // skip processing of duration pattern\n                if (jiveDataConverter.DURATION_PATTERN === pattern.key) {\n                    transformedPatterns.push({\n                        key: pattern.key,\n                        val: pattern.val\n                    });\n                } else {\n                    transformedPatterns.push({\n                        key: NumberFormatPatternUtil.addRemoveDecimalPlace(pattern.key, true),\n                        val: NumberFormatPatternUtil.addRemoveDecimalPlace(pattern.val, true)\n                    });\n                }\n            });\n            this.setBinding('patterns', transformedPatterns);\n        }\n    },\n    _removeDecimal: function (evt) {\n        var patterns = this.getBinding('patterns'), transformedPatterns = [];\n        if (patterns.length) {\n            _.each(patterns, function (pattern) {\n                // skip processing of duration pattern\n                if (jiveDataConverter.DURATION_PATTERN === pattern.key) {\n                    transformedPatterns.push({\n                        key: pattern.key,\n                        val: pattern.val\n                    });\n                } else {\n                    transformedPatterns.push({\n                        key: NumberFormatPatternUtil.addRemoveDecimalPlace(pattern.key, false),\n                        val: NumberFormatPatternUtil.addRemoveDecimalPlace(pattern.val, false)\n                    });\n                }\n            });\n            this.setBinding('patterns', transformedPatterns);\n        }\n    },\n    _applyCurrencyFormat: function (view, model) {\n        var previousSymbol = this.getBinding('currencySymbol'), currentSymbol = model.get('symbol'), patterns = this.getBinding('patterns'), transformedPatterns = [];\n        if (patterns.length) {\n            _.each(patterns, function (pattern) {\n                // skip processing of duration pattern\n                if (jiveDataConverter.DURATION_PATTERN === pattern.key) {\n                    transformedPatterns.push({\n                        key: pattern.key,\n                        val: pattern.val\n                    });\n                } else {\n                    if (previousSymbol) {\n                        pattern.key = NumberFormatPatternUtil.addRemoveCurrencySymbol(pattern.key, false, currencyMap[previousSymbol]);\n                        pattern.val = NumberFormatPatternUtil.addRemoveCurrencySymbol(pattern.val, false, currencyMap[previousSymbol]);\n                    }\n                    if (currentSymbol) {\n                        transformedPatterns.push({\n                            key: NumberFormatPatternUtil.addRemoveCurrencySymbol(pattern.key, true, currencyMap[currentSymbol]),\n                            val: NumberFormatPatternUtil.addRemoveCurrencySymbol(pattern.val, true, currencyMap[currentSymbol])\n                        });\n                    } else if (previousSymbol) {\n                        transformedPatterns.push(pattern);\n                    }\n                }\n            });\n            if (transformedPatterns.length) {\n                this.setBinding('patterns', []);\n                this.setBinding('patterns', transformedPatterns);\n            }\n        }\n        this.setBinding('currencySymbol', currentSymbol);\n    },\n    _showCurrencyMenu: function (evt) {\n        var target = this.$(evt.currentTarget), offset = target.offset();\n        evt.preventDefault();\n        evt.stopPropagation();\n        this.currencyMenu.show({\n            top: offset.top + target.height(),\n            left: offset.left\n        });\n    },\n    clear: function () {\n        this.cache.clear();\n    },\n    remove: function () {\n        Epoxy.View.prototype.remove.apply(this, arguments);\n        this.model && this.model.remove();\n        this.cache && this.cache.remove();\n        this.viewModel && this.viewModel.remove();\n        this.currencyMenu && this.currencyMenu.remove();\n    }\n});","export default \"<div class=\\\"applytoWrapper\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"applytoTitle\\\"><span>{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.applyto\\\"] }}:</span></div>\\n    <div class=\\\"applytoSelector\\\">\\n        <select data-bind=\\\"options:applyToOptions,value:applyTo\\\">\\n        </select>\\n    </div>\\n</div>\\n<form class=\\\"jive_form_basicFormat jive_form\\\" style=\\\"width: 700px; display: block;\\\">\\n    <table width=\\\"100%\\\" data-bind=\\\"toggle:hasHeading\\\">\\n        <tbody>\\n            <tr>\\n                <td colspan=\\\"4\\\">\\n                    <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.headingtext\\\"] }}:</div>\\n                    <div class=\\\"wrapper\\\">\\n                        <input type=\\\"text\\\" data-bind=\\\"value:columnLabel\\\">\\n                    </div>\\n                </td>\\n            </tr>\\n        </tbody>\\n    </table>\\n    <table width=\\\"100%\\\">\\n        <tbody>\\n        <tr>\\n            <td rowspan=\\\"2\\\">\\n                <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.fontname\\\"] }}:</div>\\n                <div class=\\\"wrapper\\\">\\n                    <input type=\\\"text\\\" class=\\\"jive_listTextInput\\\" data-bind=\\\"value:fontName\\\">\\n                    <select class=\\\"showList wFreeText\\\" size=\\\"6\\\" data-bind=\\\"groupedOptions:fontNames,value:fontName\\\">\\n                    </select>\\n                </div>\\n            </td>\\n            <td rowspan=\\\"2\\\">\\n                <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.fontsize\\\"] }}:</div>\\n                <div class=\\\"wrapper\\\">\\n                    <input type=\\\"text\\\" class=\\\"jive_listTextInput\\\" data-bind=\\\"value:customDecimal(fontSize)\\\">\\n                    <select class=\\\"showList wFreeText\\\" size=\\\"6\\\" data-bind=\\\"nonGroupedOptions:fontSizes,value:customDecimal(fontSize)\\\">\\n                    </select>\\n                </div>\\n            </td>\\n            <td>\\n                <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.style\\\"] }}:</div>\\n                <div class=\\\"wrapper\\\">\\n                    <div class=\\\"buttonbar\\\">\\n                        <div class=\\\"jive_inputbutton\\\" data-bind=\\\"checkboxDiv:fontBold\\\" data-model-attr=\\\"fontBold\\\"><span class=\\\"jive_bIcon boldIcon\\\"></span></div>\\n                        <div class=\\\"jive_inputbutton\\\" data-bind=\\\"checkboxDiv:fontItalic\\\" data-model-attr=\\\"fontItalic\\\"><span class=\\\"jive_bIcon italicIcon\\\"></span></div>\\n                        <div class=\\\"jive_inputbutton\\\" data-bind=\\\"checkboxDiv:fontUnderline\\\" data-model-attr=\\\"fontUnderline\\\"><span class=\\\"jive_bIcon underlineIcon\\\"></span></div>\\n                    </div>\\n                </div>\\n            </td>\\n            <td>\\n                <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.color\\\"] }}:</div>\\n                <div class=\\\"wrapper\\\">\\n                    <div class=\\\"buttonbar\\\">\\n                        <div class=\\\"jive_inputbutton  drop\\\" data-bind=\\\"colorpicker:backgroundColor\\\" data-model-attr=\\\"backgroundColor\\\" data-label=\\\"{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.title.fontbackcolor\\\"] }}\\\" data-show-transparent-input=\\\"true\\\">\\n                            <div class=\\\"colorpick wide\\\"></div>\\n                            <span class=\\\"jive_bIcon backgroundColorIcon\\\"></span>\\n                        </div>\\n                        <div class=\\\"jive_inputbutton  drop\\\" data-bind=\\\"colorpicker:fontColor\\\" data-model-attr=\\\"fontColor\\\" data-label=\\\"{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.title.fontcolor\\\"] }}\\\">\\n                            <div class=\\\"colorpick normal\\\"></div>\\n                            <span class=\\\"jive_bIcon fontColorIcon\\\"></span>\\n                        </div>\\n                    </div>\\n                </div>\\n            </td>\\n        </tr>\\n        <tr>\\n            <td>\\n                <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.alignment\\\"] }}:</div>\\n                <div class=\\\"wrapper\\\">\\n                    <div class=\\\"buttonbar\\\">\\n                        <div class=\\\"jive_inputbutton\\\" data-bind=\\\"radioDiv:align\\\" data-model-attr=\\\"align\\\" data-value=\\\"left\\\"><span class=\\\"jive_bIcon leftIcon\\\"></span></div>\\n                        <div class=\\\"jive_inputbutton\\\" data-bind=\\\"radioDiv:align\\\" data-model-attr=\\\"align\\\" data-value=\\\"center\\\"><span class=\\\"jive_bIcon centerIcon\\\"></span></div>\\n                        <div class=\\\"jive_inputbutton\\\" data-bind=\\\"radioDiv:align\\\" data-model-attr=\\\"align\\\" data-value=\\\"right\\\"><span class=\\\"jive_bIcon rightIcon\\\"></span></div>\\n                    </div>\\n                </div>\\n            </td>\\n        </tr>\\n        </tbody>\\n    </table>\\n    <table width=\\\"100%\\\" data-bind=\\\"toggle:hasPattern\\\">\\n        <tbody>\\n        <tr>\\n            <td colspan=\\\"2\\\" rowspan=\\\"2\\\">\\n                <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.formatpattern\\\"] }}:</div>\\n                <div class=\\\"wrapper\\\">\\n                    <input type=\\\"text\\\" class=\\\"jive_listTextInput\\\" data-bind=\\\"value:pattern,disabled:isDuration\\\">\\n                    <select class=\\\"showList wFreeText\\\" size=\\\"4\\\" data-bind=\\\"transformedPatterns:patterns,value:pattern\\\">\\n                    </select>\\n                </div>\\n            </td>\\n            <td data-bind=\\\"css:{visibility:getNumericTypeVisibility}\\\">\\n                <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.numberformat\\\"] }}:</div>\\n                <div class=\\\"wrapper\\\">\\n                    <div class=\\\"buttonbar\\\">\\n                        <div class=\\\"jive_inputbutton\\\" name=\\\"percentageBtn\\\" data-bind=\\\"checkboxDiv:hasPercentage\\\" data-model-attr=\\\"hasPercentage\\\"><span class=\\\"jive_bIcon percentageIcon\\\"></span></div>\\n                        <div class=\\\"jive_inputbutton\\\" name=\\\"commaBtn\\\" data-bind=\\\"checkboxDiv:hasComma\\\" data-model-attr=\\\"hasComma\\\"><span class=\\\"jive_bIcon commaIcon\\\"></span></div>\\n                        <div class=\\\"jive_inputbutton\\\" name=\\\"increaseDecimalsBtn\\\"><span class=\\\"jive_bIcon increaseDecimalsIcon\\\"></span></div>\\n                        <div class=\\\"jive_inputbutton\\\" name=\\\"decreaseDecimalsBtn\\\"><span class=\\\"jive_bIcon decreaseDecimalsIcon\\\"></span></div>\\n                    </div>\\n                </div>\\n            </td>\\n        </tr>\\n        <tr data-bind=\\\"css:{visibility:getNumericTypeVisibility}\\\">\\n            <td>\\n                <div class=\\\"wrapper label\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.currency\\\"] }}:</div>\\n                <div class=\\\"wrapper\\\">\\n                    <div class=\\\"buttonbar\\\">\\n                        <div class=\\\"jive_inputbutton  drop\\\" name=\\\"currencyBtn\\\">\\n                            <span class=\\\"jive_bIcon currencyIcon\\\"></span>\\n                        </div>\\n                    </div>\\n                </div>\\n            </td>\\n        </tr>\\n        </tbody>\\n    </table>\\n</form>\";","export default \"<div class=\\\"jive_dropdown_menu\\\" style=\\\"width: 150px; height: 100px; display: none\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"content\\\">\\n        <ul class=\\\"pmenu\\\"></ul>\\n    </div>\\n</div>\";","export default \"<li class=\\\"pmenuitem\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- label }}</li>\";","export default \"<p class='alertText'>\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- message }}\\n</p>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport Dialog from './Dialog';\nimport xssUtil from '../../util/xssUtil';\nimport alertDialogTemplate from './template/alertDialogTemplate.htm';\nimport i18n from '../../../i18n/CommonBundle.properties';\nexport default Dialog.extend({\n    contentTemplate: _.template(alertDialogTemplate),\n    constructor: function (options) {\n        options || (options = {});\n        Dialog.prototype.constructor.call(this, {\n            modal: options.modal !== false,\n            message: options.message,\n            additionalCssClasses: 'alertDialog ' + (options.additionalCssClasses || ''),\n            title: options.title || i18n['dialog.exception.title'],\n            buttons: [{\n                label: i18n['button.close'],\n                action: 'close',\n                primary: true\n            }]\n        }, options);\n    },\n    initialize: function (options) {\n        Dialog.prototype.initialize.apply(this, arguments);\n        this.on('button:close', this.close);\n        this.setMessage(options.message);\n    },\n    setMessage: function (message) {\n        message = xssUtil.softHtmlEscape(message, {whiteList: [\"br\"]});\n        this.content = this.contentTemplate({ message: message });\n        var rendered = this.renderContent();\n        this.$contentContainer.html(rendered);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport Epoxy from 'backbone.epoxy';\nimport _ from 'underscore';\nimport jiveDataConverter from '../../../util/jiveDataConverter';\nimport NumberUtils from 'js-sdk/src/common/util/parse/NumberUtils';\n\nvar numberUtil = new NumberUtils();\n\nfunction onOperatorChange() {\n    var currentValue = this.get('value'),\n        operator = this.get('operator'),\n        isMultiValue,\n        isNullCheck;\n\n    isMultiValue = operator && operator.toLowerCase().indexOf('between') != -1;\n    isNullCheck = operator && operator.toLowerCase().indexOf('null') !== -1;\n\n    if (isMultiValue === true) {\n        if (!_.isArray(currentValue)) {\n            this.set({ value: [currentValue] }, { silent: true });\n        }\n    } else if (isMultiValue === false) {\n        if (_.isArray(currentValue)) {\n            this.set({ value: currentValue[0] }, { silent: true });\n        }\n    }\n\n    if (isNullCheck) {\n        this.set({\n            value: ''\n        });\n    }\n}\nfunction validateValue(dataType, conditionPattern, genericProperties, value, attr) {\n    var error, source, tokens;\n    if (value === null || value === undefined) {\n        error = 'No value supplied!';\n    } else if ('datetime' === dataType) {\n        try {\n            if (jiveDataConverter.jQueryUiTimestampToIsoTimestamp(value, genericProperties) === undefined) {\n                error = 'Unparsable date: ' + value + ' !';\n            }\n        } catch (ex) {\n            error = ex;\n        }\n    } else if ('time' === dataType) {\n        try {\n            if (jiveDataConverter.jQueryUiTimeToIsoTime(value, genericProperties) === undefined) {\n                error = 'Unparsable time: ' + value + ' !';\n            }\n        } catch (ex) {\n            error = ex;\n        }\n    } else if ('numeric' === dataType) {\n        if (jiveDataConverter.DURATION_PATTERN === conditionPattern) {\n            source = _.trim(value);\n            if (source.length > 0) {\n                tokens = source.split(':');\n                if (tokens.length > 3) {\n                    error = 'Unparsable duration: ' + value + ' !';\n                } else {\n                    if (numberUtil.parseNumber(tokens[0]) === undefined || tokens.length > 1 && (numberUtil.parseNumber(tokens[1]) === undefined || numberUtil.parseNumber(tokens[1]) > 59) || tokens.length > 2 && (numberUtil.parseNumber(tokens[2]) === undefined || numberUtil.parseNumber(tokens[2]) > 59)) {\n                        error = 'Unparsable duration: ' + value + ' !';\n                    }\n                }\n            } else {\n                error = 'Empty value supplied!';\n            }\n        }\n    }\n    this.trigger('validate:' + attr, this, attr, error);\n    return error;\n}\nexport default Epoxy.Model.extend({\n    defaults: function () {\n        return {\n            operator: null,\n            value: null,\n            backgroundColor: null,\n            font: {\n                bold: null,\n                italic: null,\n                underline: null,\n                color: null\n            }\n        };\n    },\n    computeds: function () {\n        var ctds = {};    // dinamically create computeds for each font property\n        // dinamically create computeds for each font property\n        _.each(this.defaults().font, function (val, key) {\n            ctds['font' + key.charAt(0).toUpperCase() + key.substring(1, key.length)] = {\n                deps: ['font'],\n                get: function (font) {\n                    return font[key];\n                },\n                set: function (value) {\n                    this.modifyObject('font', key, value);\n                    return value;\n                }\n            };\n        });\n        ctds.isMultiValueOperator = function () {\n            var op = this.get('operator');\n            return op && op.toLowerCase().indexOf('between') != -1 ? true : false;\n        };\n        ctds.isNotNullCheckOperator = function() {\n            var op = this.get('operator'),\n                isNullCheck = op && op.toLowerCase().indexOf('null') !== -1 ? true : false;\n            return !isNullCheck;\n        };\n        return ctds;\n    },\n    initialize: function () {\n        this.on('change:operator', _.bind(onOperatorChange, this));\n        Epoxy.Model.prototype.initialize.apply(this, arguments);\n    },\n    reset: function () {\n        this.set(this.defaults(), { silent: true });\n        return this;\n    },\n    validate: function (attributes, options) {\n        var val = attributes.value,\n            operator = attributes.operator,\n            dataType = jiveDataConverter.dataTypeToSchemaFormat[this.collection.dataType],\n            conditionPattern = this.collection.conditionPattern,\n            genericProperties = this.collection.genericProperties,\n            valueStartValidation,\n            valueEndValidation;\n\n        if (operator !== 'IS_NULL' && operator !== 'IS_NOT_NULL') {\n            // for boolean conditions, the value is not set, therefore we need to set it to something not null\n            if (operator === 'IS_TRUE' || operator === 'IS_NOT_FALSE' || operator === 'IS_NOT_TRUE' || operator === 'IS_FALSE') {\n                val = 'true/false';\n            }\n            if (val === null || val === undefined) {\n                if (this.get('isMultiValueOperator')) {\n                    val = [\n                        null,\n                        null\n                    ];\n                }\n            }\n            if (_.isArray(val)) {\n                valueStartValidation = validateValue.call(this, dataType, conditionPattern, genericProperties, val[0], 'valueStart');\n                valueEndValidation = validateValue.call(this, dataType, conditionPattern, genericProperties, val[1], 'valueEnd');\n                if (valueStartValidation || valueEndValidation) {\n                    return 'Invalid value supplied!';\n                }\n            } else if (validateValue.call(this, dataType, conditionPattern, genericProperties, val, 'valueStart')) {\n                return 'Invalid value supplied!';\n            }\n        }\n    },\n    remove: function () {\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport _ from 'underscore';\nimport Epoxy from 'backbone.epoxy';\nimport TableCommonFormatView from './TableCommonFormatView';\nimport tableConditionTemplate from '../template/tableConditionTemplate.htm';\nimport TableConditionModel from '../model/TableConditionModel';\nimport i18n from \"../../../../../../i18n/jasperreports_messages.properties\";\nimport {getFilterOperatorKey} from \"../util/filterLabelResolver\";\n\nfunction toEpoxyOptions(dataType, jiveOptions) {\n    var epoxyOptions = [];\n    _.each(jiveOptions, function (o) {\n        epoxyOptions.push({\n            label: i18n[getFilterOperatorKey(dataType, o)],\n            value: o\n        });\n    });\n    return epoxyOptions;\n}\nvar ViewModel = Epoxy.Model.extend({\n    defaults: {\n        conditionIndex: 1,\n        conditionOptions: [],\n        dataType: 'text',\n        calendarPatterns: {}\n    },\n    computeds: {\n        isNotBooleanType: function () {\n            return this.get('dataType') !== 'boolean';\n        }\n    },\n    remove: function () {\n    }\n});\nexport default TableCommonFormatView.extend({\n    events: {\n        'click div.jive_inputbutton[name=\\'conditionRemove\\']': '_removeCondition',\n        'click div.jive_inputbutton[name=\\'conditionMoveUp\\']': '_moveConditionUp',\n        'click div.jive_inputbutton[name=\\'conditionMoveDown\\']': '_moveConditionDown'\n    },\n    el: function () {\n        return _.template(tableConditionTemplate, { i18n: this.i18n });\n    },\n    initialize: function () {\n        this.model = new TableConditionModel();\n        this.viewModel = new ViewModel();\n        Epoxy.View.prototype.initialize.apply(this, arguments);\n    },\n    computeds: {\n        convertedOptions: {\n            deps: ['conditionOptions', 'dataType'],\n            get: function (conditionOptions, dataType) {\n                return toEpoxyOptions(dataType, conditionOptions);\n            }\n        },\n        conditionValueStart: {\n            deps: ['value'],\n            get: function (value) {\n                if (_.isArray(value)) {\n                    return value[0];\n                } else {\n                    return value;\n                }\n            },\n            set: function (val) {\n                var modelValue = this.getBinding('value');\n                if (_.isArray(modelValue)) {\n                    modelValue[0] = val;\n                    this.model.set({ value: modelValue }, { validate: true });\n                } else {\n                    this.model.set({ value: val }, { validate: true });\n                }\n            }\n        },\n        conditionValueEnd: {\n            deps: ['value'],\n            get: function (value) {\n                if (_.isArray(value)) {\n                    return value[1];\n                }\n            },\n            set: function (val) {\n                var modelValue = this.getBinding('value');\n                if (_.isArray(modelValue)) {\n                    modelValue[1] = val;\n                    this.model.set({ value: modelValue }, { validate: true });\n                }\n            }\n        },\n        getColspan: function () {\n            return this.getBinding('isMultiValueOperator') ? 1 : 3;\n        }\n    },\n    _removeCondition: function (evt) {\n        this.model.trigger('destroy', this.model, this.model.collection);\n    },\n    _moveConditionUp: function (evt) {\n        var collection = this.model.collection, index = collection.indexOf(this.model);\n        if (index > 0) {\n            collection.remove(this.model, { silent: true });\n            collection.add(this.model, { at: index - 1 }, { silent: true });\n            this.parent.render();\n        }\n    },\n    _moveConditionDown: function (evt) {\n        var collection = this.model.collection, index = collection.indexOf(this.model);\n        if (index < collection.length - 1) {\n            collection.remove(this.model, { silent: true });\n            collection.add(this.model, { at: index + 1 }, { silent: true });\n            this.parent.render();\n        }\n    },\n    remove: function () {\n        Epoxy.View.prototype.remove.apply(this, arguments);\n        this.model && this.model.remove();\n        this.viewModel && this.viewModel.remove();\n    }\n});","export default \"<tr class=\\\"jive_condition\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <td class=\\\"jive_textLabel\\\">\\n        <span data-bind=\\\"text:conditionIndex\\\"></span>\\n    </td>\\n    <td>\\n        <div>\\n            <select data-bind=\\\"options:convertedOptions,value:operator\\\"></select>\\n        </div>\\n    </td>\\n    <td data-bind=\\\"toggle:isNotBooleanType,attr:{colspan:getColspan},classes:{condition_between_start:isMultiValueOperator}\\\">\\n        <div class=\\\"t_wrap\\\">\\n            <input type=\\\"text\\\" data-bind=\\\"toggle:all(isNotBooleanType,isNotNullCheckOperator),value:conditionValueStart,dateTimePicker:dataType,validationErrorClass:conditionValueStart\\\" data-model-attr=\\\"valueStart\\\">\\n        </div>\\n    </td>\\n    <td class=\\\"condition_between_start\\\" data-bind=\\\"toggle:isMultiValueOperator\\\">\\n        <div class=\\\"t_wrap\\\"><span>and</span></div>\\n    </td>\\n    <td class=\\\"condition_between_end\\\" data-bind=\\\"toggle:isMultiValueOperator\\\">\\n        <div class=\\\"t_wrap\\\">\\n            <input type=\\\"text\\\" data-bind=\\\"value:conditionValueEnd,dateTimePicker:dataType,validationErrorClass:conditionValueEnd\\\" data-model-attr=\\\"valueEnd\\\">\\n        </div>\\n    </td>\\n    <td>\\n        <div>\\n            <div class=\\\"buttonbar\\\">\\n                <div class=\\\"jive_inputbutton\\\" data-bind=\\\"checkboxDiv:fontBold\\\" data-model-attr=\\\"fontBold\\\" data-tripplestate=\\\"true\\\">\\n                    <span class=\\\"jive_bIcon boldIcon\\\"></span>\\n                </div>\\n                <div class=\\\"jive_inputbutton\\\" data-bind=\\\"checkboxDiv:fontItalic\\\" data-model-attr=\\\"fontItalic\\\" data-tripplestate=\\\"true\\\">\\n                    <span class=\\\"jive_bIcon italicIcon\\\"></span>\\n                </div>\\n                <div class=\\\"jive_inputbutton\\\" data-bind=\\\"checkboxDiv:fontUnderline\\\" data-model-attr=\\\"fontUnderline\\\" data-tripplestate=\\\"true\\\">\\n                    <span class=\\\"jive_bIcon underlineIcon\\\"></span>\\n                </div>\\n                <div class=\\\"jive_inputbutton toggle drop\\\" data-bind=\\\"colorpicker:backgroundColor\\\" data-model-attr=\\\"backgroundColor\\\" data-label=\\\"{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.title.fontbackcolor\\\"] }}\\\" data-show-transparent-input=\\\"true\\\" data-show-none-input=\\\"true\\\">\\n                    <input data-bind=\\\"resetColor:backgroundColor\\\" data-model-attr=\\\"backgroundColor\\\" type=\\\"checkbox\\\">\\n                    <div class=\\\"colorpick wide\\\"></div>\\n                    <span class=\\\"jive_bIcon backgroundColorIcon\\\"></span>\\n                </div>\\n                <div class=\\\"jive_inputbutton toggle drop\\\" data-bind=\\\"colorpicker:fontColor\\\" data-model-attr=\\\"fontColor\\\" data-label=\\\"{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.title.fontcolor\\\"] }}\\\" data-show-none-input=\\\"true\\\">\\n                    <input data-bind=\\\"resetColor:fontColor\\\" data-model-attr=\\\"fontColor\\\" type=\\\"checkbox\\\">\\n                    <div class=\\\"colorpick normal\\\"></div>\\n                    <span class=\\\"jive_bIcon fontColorIcon\\\"></span>\\n                </div>\\n            </div>\\n        </div>\\n    </td>\\n    <td>\\n        <div>\\n            <div class=\\\"buttonbar\\\">\\n                <div class=\\\"jive_inputbutton  plain\\\" name=\\\"conditionMoveUp\\\">\\n                    <span class=\\\"jive_bIcon moveUpIcon\\\"></span>\\n                </div>\\n                <div class=\\\"jive_inputbutton  plain\\\" name=\\\"conditionMoveDown\\\">\\n                    <span class=\\\"jive_bIcon moveDownIcon\\\"></span>\\n                </div>\\n            </div>\\n        </div>\\n    </td>\\n    <td class=\\\" last\\\">\\n        <div class=\\\"jive_inputbutton  plain\\\" name=\\\"conditionRemove\\\">\\n            <span class=\\\"jive_bIcon deleteIcon\\\"></span>\\n        </div>\\n    </td>\\n</tr>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport Backbone from 'backbone';\nimport Epoxy from 'backbone.epoxy';\nimport _ from 'underscore';\nimport jiveDataConverter from '../../../util/jiveDataConverter';\nimport AlertDialog from 'js-sdk/src/common/component/dialog/AlertDialog';\nimport FormatModelCache from '../util/FormatModelCache';\nimport i18n from '../../../../../../i18n/jasperreports_messages.properties';\nimport tableConditionCollectionTemplate from '../template/tableConditionCollectionTemplate.htm';\nimport TableConditionView from './TableConditionView';\nimport TableConditionModel from '../model/TableConditionModel';\n\nfunction onApplyToChange(viewModel, value, options) {\n    var cache = this.cache, currentApplyTo = value, previousApplyTo = viewModel.previous('applyTo'), columnComponentModel = this.columnComponentModel, key, keyModel, columnGroup;\n    if (currentApplyTo == null || options.isReset) {\n        return;\n    }\n    if (!this.validate()) {\n        // restore previousApplyTo\n        viewModel.set({ applyTo: previousApplyTo }, { isReset: true });\n        return;\n    }\n    if (previousApplyTo) {\n        if (previousApplyTo === 'detailrows') {\n            key = cache.createKey(previousApplyTo, columnComponentModel);\n        } else {\n            key = cache.createKey(previousApplyTo, columnComponentModel.parent.columnGroups.findWhere({ id: previousApplyTo }), true);\n        }\n        cache.set(key, this.collection.toJSON());\n    }\n    if (currentApplyTo === 'detailrows') {\n        key = cache.createKey(currentApplyTo, columnComponentModel);\n        if (cache.get(key) === null) {\n            cache.set(key, schemaConditionsToJiveConditions.call(this, columnComponentModel.conditions.toJSON(), columnComponentModel.get('dataType')));\n        }\n    } else {\n        columnGroup = columnComponentModel.parent.columnGroups.findWhere({ id: currentApplyTo });\n        key = cache.createKey(currentApplyTo, columnGroup, true);\n        if (cache.get(key) === null) {\n            cache.set(key, schemaConditionsToJiveConditions.call(this, columnGroup.conditions.toJSON(), columnGroup.get('dataType')));\n        }\n    }\n    keyModel = cache.keyInfo[key].model;\n    this.collection.conditionPattern = keyModel.get('conditionalFormattingData').conditionPattern;\n    this.collection.dataType = keyModel.get('dataType');\n    this.addAll(cache.get(key));\n}\nfunction updateApplyToOptions() {\n    var self = this, columnModel = this.columnComponentModel, columnIndex = columnModel.get('columnIndex'), columnGroups = columnModel.parent.columnGroups, options = [], groupHeadingOptions = [], groupSubTotalsOptions = [], totalsOptions = [];\n    columnGroups.each(function (group) {\n        if (_.indexOf(group.get('forColumns'), columnIndex) != -1 && group.get('conditionalFormattingData') !== null) {\n            if (group.get('groupType') === 'groupheading') {\n                groupHeadingOptions.push({\n                    value: group.get('id'),\n                    label: group.get('groupName') + ' ' + self.i18n['net.sf.jasperreports.components.headertoolbar.groupheading.prefix']\n                });\n            } else if (group.get('groupType') === 'groupsubtotal') {\n                groupSubTotalsOptions.push({\n                    value: group.get('id'),\n                    label: group.get('groupName') + ' ' + self.i18n['net.sf.jasperreports.components.headertoolbar.groupsubtotal.prefix']\n                });\n            } else if (group.get('groupType') === 'tabletotal') {\n                totalsOptions.push({\n                    value: group.get('id'),\n                    label: self.i18n['net.sf.jasperreports.components.headertoolbar.applyto.option.tabletotal']\n                });\n            }\n        }\n    });\n    options.push.apply(options, groupHeadingOptions);\n    if (columnModel.get('canFormatConditionally')) {\n        options.push({\n            value: 'detailrows',\n            label: this.i18n['net.sf.jasperreports.components.headertoolbar.applyto.option.detailrows']\n        });\n    }\n    options.push.apply(options, groupSubTotalsOptions);\n    options.push.apply(options, totalsOptions);\n    this.viewModel.set('applyToOptions', options);    // try to keep the same applyTo across columns\n    // try to keep the same applyTo across columns\n    var previousApplyTo = this.viewModel.previous('applyTo');\n    if (previousApplyTo) {\n        this.viewModel.set('applyTo', null, { silent: true });\n        if (_.findWhere(options, { value: previousApplyTo })) {\n            this.viewModel.set('applyTo', previousApplyTo);\n        } else {\n            this.viewModel.set('applyTo', 'detailrows');\n        }\n    } else {\n        this.viewModel.set('applyTo', 'detailrows');\n    }    // when no options there is nothing to format conditionally\n    // when no options there is nothing to format conditionally\n    if (!options.length) {\n        this.viewModel.set('canAddCondition', false);\n    } else {\n        this.viewModel.set('canAddCondition', true);\n    }\n}\nfunction cacheCurrentCollection() {\n    var applyTo = this.viewModel.get('applyTo'), key;\n    if (applyTo === 'detailrows') {\n        key = this.cache.createKey(applyTo, this.columnComponentModel);\n    } else if (applyTo) {\n        key = this.cache.createKey(applyTo, this.columnComponentModel.parent.columnGroups.findWhere({ id: applyTo }), true);\n    }\n    key && this.cache.set(key, this.collection.toJSON());\n}\nfunction schemaConditionsToJiveConditions(schemaConditions, jiveDataType) {\n    var self = this, schemaDataType = jiveDataConverter.dataTypeToSchemaFormat[jiveDataType], genericProperties;\n    return _.map(schemaConditions, function (condition) {\n        var jiveOpVal = {};\n        if (condition.operator) {\n            jiveOpVal.operator = jiveDataConverter.schemaFormatOperatorToFilterOperator(condition.operator, condition.value, schemaDataType);\n            genericProperties = self.columnComponentModel.parent.config.genericProperties;\n            if (schemaDataType === 'datetime') {\n                if (_.isArray(condition.value)) {\n                    jiveOpVal.value = [];\n                    jiveOpVal.value[0] = jiveDataConverter.isoTimestampTojQueryUiTimestamp(condition.value[0], genericProperties);\n                    jiveOpVal.value[1] = jiveDataConverter.isoTimestampTojQueryUiTimestamp(condition.value[1], genericProperties);\n                } else {\n                    jiveOpVal.value = jiveDataConverter.isoTimestampTojQueryUiTimestamp(condition.value, genericProperties);\n                }\n            } else if (schemaDataType === 'time') {\n                if (_.isArray(condition.value)) {\n                    jiveOpVal.value = [];\n                    jiveOpVal.value[0] = jiveDataConverter.isoTimeTojQueryUiTime(condition.value[0], genericProperties);\n                    jiveOpVal.value[1] = jiveDataConverter.isoTimeTojQueryUiTime(condition.value[1], genericProperties);\n                } else {\n                    jiveOpVal.value = jiveDataConverter.isoTimeTojQueryUiTime(condition.value, genericProperties);\n                }\n            } else {\n                jiveOpVal.value = condition.value;\n            }\n        }\n        return _.extend(condition, jiveOpVal);\n    });\n}\nfunction jiveConditionsToSchemaConditions(jiveConditions, jiveDataType, conditionPattern) {\n    var self = this, schemaOpVal;\n    return jiveConditions.map(function (condition) {\n        if (condition.operator) {\n            var valueStart = _.isArray(condition.value) ? condition.value[0] : condition.value, valueEnd = _.isArray(condition.value) ? condition.value[1] : undefined;\n            schemaOpVal = jiveDataConverter.operatorAndValueToSchemaFormat.call(self.columnComponentModel, condition.operator, jiveDataConverter.dataTypeToSchemaFormat[jiveDataType], valueStart, valueEnd, conditionPattern);\n        }\n        return _.extend(condition, schemaOpVal);\n    });\n}\nvar TableConditionCollection = Backbone.Collection.extend({ model: TableConditionModel });\nvar TableConditionCollectionViewModel = Epoxy.Model.extend({\n    defaults: function () {\n        return {\n            dataType: \"text\",\n            applyToOptions: [],\n            applyTo: null,\n            canAddCondition: true\n        };\n    },\n    computeds: {\n        isNotBooleanType: function () {\n            return this.get('dataType') !== 'boolean';\n        }\n    },\n    reset: function () {\n        this.clear({ silent: true }).set(this.defaults());\n        return this;\n    },\n    remove: function () {\n    }\n});\nexport default Epoxy.View.extend({\n    events: { 'click .jive_inputbutton[name=\\'conditionAdd\\']': 'addNewCondition' },\n    el: function () {\n        return _.template(tableConditionCollectionTemplate, { i18n: i18n });\n    },\n    constructor: function (options) {\n        this.i18n = options.i18n;\n        Epoxy.View.apply(this, arguments);\n    },\n    initialize: function () {\n        this.viewModel = new TableConditionCollectionViewModel();\n        this.collection = new TableConditionCollection();\n        this.cache = new FormatModelCache();\n        this._subviews = [];\n        this._$subviewsContainer = this.$('table.conditionList > tbody');\n        this.listenTo(this.viewModel, 'change:applyTo', _.bind(onApplyToChange, this));\n        this.listenTo(this.collection, 'remove', this.removeSubview);\n        this.on('tabSwitched', function () {\n            cacheCurrentCollection.call(this);\n        });\n        this.errorDialog = new AlertDialog({ additionalCssClasses: 'jive_dialog' });\n        Epoxy.View.prototype.initialize.apply(this, arguments);\n    },\n    addSubview: function (model) {\n        var subview = new TableConditionView(_.extend({}, {\n            i18n: this.i18n,\n            model: model,\n            genericProperties: this.columnComponentModel.parent.config.genericProperties\n        }));\n        this._$subviewsContainer.append(subview.render().$el);\n        this._subviews.push(subview);\n        return subview;\n    },\n    addModel: function (modelJSON, skipRegistration) {\n        var subview = new TableConditionView({\n                i18n: this.i18n,\n                genericProperties: this.columnComponentModel.parent.config.genericProperties\n            }), applyTo = this.viewModel.get('applyTo'), dataType, model;\n        subview.parent = this;\n        if (applyTo === 'detailrows') {\n            dataType = this.columnComponentModel.get('dataType').toLowerCase();\n        } else {\n            dataType = this.columnComponentModel.parent.columnGroups.findWhere({ id: applyTo }).get('dataType').toLowerCase();\n        }\n\n        var operator = dataType;\n        if (operator === \"date\" || operator === \"time\") {\n            operator = \"dateTime\";\n        }\n\n        subview.viewModel.set({\n            conditionOptions: this.columnComponentModel.parent.config.genericProperties.operators[operator],\n            dataType: dataType,\n            calendarPatterns: this.columnComponentModel.parent.config.genericProperties.calendarPatterns\n        });\n        subview.model.set(modelJSON);\n        this._$subviewsContainer.append(subview.render().$el);\n        this._subviews.push(subview);\n        if (!skipRegistration) {\n            model = this.collection.add(subview.model);\n            subview.viewModel.set('conditionIndex', this.collection.indexOf(model) + 1);\n        }\n        return subview.model;\n    },\n    addAll: function (arrJsonModels) {\n        var self = this;\n        this.collection.set(_.map(arrJsonModels, function (modelJSON, index) {\n            var model = self.addModel(modelJSON, true), view = self.getSubviewByModel(model);\n            view.viewModel.set('conditionIndex', index + 1);\n            return model;\n        }));\n    },\n    removeSubview: function (model) {\n        var subviewModel = this.getSubviewByModel(model);\n        if (subviewModel) {\n            var getIndex = _.indexOf(this._subviews, subviewModel);\n            this._subviews.splice(getIndex, 1);\n            subviewModel.remove();\n\n            // recalculate the condition index for the remaining subviews\n            if (this._subviews.length) {\n                _.each(this._subviews, function(currentSubview, index) {\n                    currentSubview.viewModel.set('conditionIndex', index + 1);\n                });\n            }\n        }\n    },\n    getSubviewByModel: function (model) {\n        return _.find(this._subviews, function (subview) {\n            return subview.model === model;\n        });\n    },\n    render: function () {\n        _.invoke(this._subviews, 'remove');\n        this._subviews = [];\n        this._$subviewsContainer.empty();\n        var currentConditions = this.collection.toJSON();\n        this.collection.reset();\n        this.addAll(currentConditions);    //this.collection.forEach(_.bind(this.addSubview, this));\n        //this.collection.forEach(_.bind(this.addSubview, this));\n        return this;\n    },\n    addNewCondition: function (evt) {\n        if (this.$(evt.target).is('.disabled')) {\n            return;\n        }\n        var tableConditionModel = new TableConditionModel(), model = this.addModel(tableConditionModel.defaults()), view = this.getSubviewByModel(model);    // preselect operator\n        // preselect operator\n        model.set('operator', view.getBinding('convertedOptions')[0].value);\n        tableConditionModel.remove();\n    },\n    setColumnComponentModel: function (columnComponentModel, isUpdate) {\n        if (isUpdate) {\n            cacheCurrentCollection.call(this);\n        } else {\n            this.cache.clear();\n            this.viewModel.set({ applyTo: null }, { silent: true });\n            this.collection.genericProperties = columnComponentModel.parent.config.genericProperties;\n        }\n        this.columnComponentModel = columnComponentModel;\n        this.viewModel.set(\"dataType\", jiveDataConverter.dataTypeToSchemaFormat[this.columnComponentModel.get(\"dataType\")]);\n        updateApplyToOptions.call(this);\n    },\n    getActions: function () {\n        var self = this, cache = this.cache, actions = [];\n        cacheCurrentCollection.call(this);\n        _.each(cache.map, function (cacheEntry, key) {\n            var keyInfo = cache.keyInfo[key];    // FIXME: check if collection has changed before adding it to action\n            // FIXME: check if collection has changed before adding it to action\n            keyInfo.model.updateFromReportComponentObject({ conditions: jiveConditionsToSchemaConditions.call(self, cacheEntry.current, keyInfo.model.get('dataType'), keyInfo.model.get('conditionalFormattingData').conditionPattern) });\n            actions.push(keyInfo.model.actions['change:conditions'].call(keyInfo.model));\n        });\n        return actions;\n    },\n    isValid: function () {\n        var invalidModels = [];\n        this.collection.reduce(function (memo, model) {\n            if (!model.isValid()) {\n                memo.push(model);\n            }\n            return memo;\n        }, invalidModels);\n        return !invalidModels.length;\n    },\n    validate: function () {\n        if (!this.isValid()) {\n            this.errorDialog.setMessage(i18n['net.sf.jasperreports.components.headertoolbar.conditions.invalid']);\n            this.errorDialog.open();\n            return false;\n        }\n        return true;\n    },\n    clear: function () {\n        _.invoke(this._subviews, 'remove');\n        this._subviews = [];\n        this.collection.reset();\n        this.cache.clear();\n    },\n    remove: function () {\n        Epoxy.View.prototype.remove.apply(this, arguments);\n        this.viewModel && this.viewModel.remove();\n        this.collection && this.collection.remove();\n        this.cache && this.cache.remove();\n        this.errorDialog && this.errorDialog.remove();\n        _.invoke(this._subviews, 'remove');\n        this._subviews = [];\n    }\n});","export default \"<div class=\\\"applytoWrapper\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"applytoTitle\\\"><span>{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.applyto\\\"] }}:</span></div>\\n    <div class=\\\"applytoSelector\\\">\\n        <select data-bind=\\\"options:applyToOptions,value:applyTo,enabled:canAddCondition\\\">\\n        </select>\\n    </div>\\n</div>\\n<form class=\\\"jive_form jive_form_conditionalFormat\\\" style=\\\"width: 900px;\\\">\\n    <table width=\\\"100%\\\">\\n        <tbody>\\n        <tr>\\n            <td class=\\\"jive_textLabel\\\">\\n                <div class=\\\"wrapper label\\\" style=\\\"text-align: left;\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.conditions.list\\\"] }}</div>\\n            </td>\\n        </tr>\\n        </tbody>\\n    </table>\\n    <table width=\\\"100%\\\" class=\\\"conditionList\\\">\\n        <thead>\\n            <tr>\\n                <th class=\\\"jive_textLabel\\\" style=\\\"width: 3%;\\\">\\n                    <div style=\\\"text-align: center;\\\">#</div>\\n                </th>\\n                <th class=\\\"jive_textLabel\\\" style=\\\"width: 26%;\\\">\\n                    <div style=\\\"text-align: center;\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.condition.operator\\\"] }}</div>\\n                </th>\\n                <th class=\\\"jive_textLabel\\\" style=\\\"width: 30%;\\\" colspan=\\\"3\\\" data-bind=\\\"toggle:isNotBooleanType\\\">\\n                    <div style=\\\"text-align: center;\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.condition.condition\\\"] }}</div>\\n                </th>\\n                <th class=\\\"jive_textLabel\\\" style=\\\"width: 26%;\\\">\\n                    <div style=\\\"text-align: center;\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.condition.format\\\"] }}</div>\\n                </th>\\n                <th class=\\\"jive_textLabel\\\" style=\\\"width: 10%;\\\">\\n                    <div style=\\\"text-align: center;\\\"></div>\\n                </th>\\n                <th class=\\\"jive_textLabel last\\\" style=\\\"width: 5%;\\\">\\n                    <div style=\\\"text-align: center;\\\"></div>\\n                </th>\\n            </tr>\\n        </thead>\\n        <tbody>\\n        </tbody>\\n        <tfoot>\\n            <tr class=\\\"add\\\">\\n                <td class=\\\"jive_textLabel\\\">\\n                    <div></div>\\n                </td>\\n                <td>\\n                    <div class=\\\"jive_inputbutton plain\\\" name=\\\"conditionAdd\\\" data-bind=\\\"classes:{disabled:not(canAddCondition)}\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.condition.add\\\"] }}</div>\\n                </td>\\n                <td class=\\\"jive_textLabel\\\" colspan=\\\"3\\\" data-bind=\\\"toggle:isNotBooleanType\\\"></td>\\n                <td class=\\\"jive_textLabel\\\"></td>\\n                <td class=\\\"jive_textLabel\\\"></td>\\n                <td class=\\\"jive_textLabel last\\\"></td>\\n            </tr>\\n        </tfoot>\\n    </table>\\n</form>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport _ from 'underscore';\nimport Dialog from 'js-sdk/src/common/component/dialog/Dialog';\nimport i18n2 from 'js-sdk/src/i18n/CommonBundle.properties';\nimport tabbedPanelTrait from 'js-sdk/src/common/component/panel/trait/tabbedPanelTrait';\nimport adjustDialogPositionWithinViewportTrait from './trait/adjustDialogPositionWithinViewportTrait';\nimport tableFormatDialogTemplate from './template/tableFormatDialogTemplate.htm';\nimport tabOptionTemplate from './template/tabOptionTemplate.htm';\nimport TableBasicFormatView from './view/TableBasicFormatView';\nimport TableConditionCollectionView from './view/TableConditionCollectionView';\n\nfunction applyFormat(evt) {\n    if (!this.conditionFormatView.validate()) {\n        return;\n    }\n    var allActions = [];\n    allActions.push.apply(allActions, this.basicFormatView.getActions());\n    allActions.push.apply(allActions, this.conditionFormatView.getActions());\n    if (allActions.length) {\n        this.columnComponentModel.format(allActions);\n    }\n    this.close();\n}\nfunction close() {\n    this.basicFormatView.clear();\n    this.conditionFormatView.clear();\n    this.close();\n}\nfunction updateColumnNavigationButtons() {\n    var index = this.columnComponentModel.parent.columns.indexOf(this.columnComponentModel), length = this.columnComponentModel.parent.columns.length;\n    if (index > 0) {\n        this.$el.find('button.colprev').prop('disabled', false);\n    } else {\n        this.$el.find('button.colprev').prop('disabled', true);\n    }\n    if (index < length - 1) {\n        this.$el.find('button.colnext').prop('disabled', false);\n    } else {\n        this.$el.find('button.colnext').prop('disabled', true);\n    }\n}\nexport default Dialog.extend({\n    defaultTemplate: tableFormatDialogTemplate,\n    events: _.extend({\n        'click button.colprev': '_goToPreviousColumn',\n        'click button.colnext': '_goToNextColumn'\n    }, Dialog.prototype.events),\n    el: function () {\n        return this.template({\n            title: this.title,\n            additionalCssClasses: this.additionalCssClasses,\n            i18n: this.i18n\n        });\n    },\n    constructor: function (options) {\n        this.i18n = options.i18n;\n        this.basicFormatView = new TableBasicFormatView({ i18n: this.i18n });\n        this.conditionFormatView = new TableConditionCollectionView({ i18n: this.i18n });\n        Dialog.prototype.constructor.call(this, {\n            buttons: [\n                {\n                    label: i18n2['button.cancel'],\n                    action: 'cancel',\n                    primary: false,\n                    float: 'right'\n                },\n                {\n                    label: i18n2['button.ok'],\n                    action: 'ok',\n                    primary: true,\n                    float: 'right'\n                }\n            ],\n            additionalCssClasses: 'tableFormatDialog',\n            modal: options.modal,\n            resizable: false,\n            traits: [tabbedPanelTrait, adjustDialogPositionWithinViewportTrait],\n            tabHeaderContainerSelector: '.dialogHeader > .tabContainer',\n            tabContainerClass: 'jive_form_container',\n            optionTemplate: tabOptionTemplate,\n            tabs: [\n                {\n                    label: this.i18n['net.sf.jasperreports.components.headertoolbar.title.basicformat'],\n                    action: 'basicFormatTab',\n                    content: this.basicFormatView\n                },\n                {\n                    label: this.i18n['net.sf.jasperreports.components.headertoolbar.title.conditions'],\n                    action: 'conditionalFormatTab',\n                    content: this.conditionFormatView\n                }\n            ]\n        });\n        this.on('button:ok', _.bind(applyFormat, this));\n        this.on('button:cancel', _.bind(close, this));\n        this.on('tab:basicFormatTab', function () {\n            if (!this.conditionFormatView.validate()) {\n                // hide the basic format tab\n                this.tabHeaderContainer.options[0].removeSelection();\n                this.$(this.$tabs.get(0)).hide();    // redisplay the conditions tab\n                // redisplay the conditions tab\n                this.tabHeaderContainer.options[1].addSelection();\n                this.$(this.$tabs.get(1)).show();\n                return;\n            }\n            this.conditionFormatView.trigger('tabSwitched');\n        });\n        this.on('tab:conditionalFormatTab', function () {\n            this.basicFormatView.trigger('tabSwitched');\n        });\n    },\n    open: function (columnComponentModel) {\n        var label = columnComponentModel.get('columnLabel') ? columnComponentModel.get('columnLabel') : '#' + (columnComponentModel.get('columnIndex') + 1);\n        this.columnComponentModel = columnComponentModel;\n        this.$el.find('.dialogTitle.columnLabel').text(label);\n        this.basicFormatView.setColumnComponentModel(this.columnComponentModel);\n        this.conditionFormatView.setColumnComponentModel(this.columnComponentModel);\n\n        this.openTab(\"basicFormatTab\");\n\n        Dialog.prototype.open.apply(this, arguments);\n\n        updateColumnNavigationButtons.call(this);\n    },\n    _goToPreviousColumn: function (evt) {\n        if (!this.conditionFormatView.validate()) {\n            return;\n        }\n        var currentIndex = this.columnComponentModel.collection.indexOf(this.columnComponentModel), prevColumn = this.columnComponentModel.collection.at(currentIndex - 1), prevColumnLabel = prevColumn.get('columnLabel') ? prevColumn.get('columnLabel') : '#' + (prevColumn.get('columnIndex') + 1);\n        this.basicFormatView.setColumnComponentModel(prevColumn, true);\n        this.conditionFormatView.setColumnComponentModel(prevColumn, true);\n        this.$el.find('.dialogTitle.columnLabel').text(prevColumnLabel);\n        this.columnComponentModel = prevColumn;\n        updateColumnNavigationButtons.call(this);\n    },\n    _goToNextColumn: function (evt) {\n        if (!this.conditionFormatView.validate()) {\n            return;\n        }\n        var currentIndex = this.columnComponentModel.parent.columns.indexOf(this.columnComponentModel), nextColumn = this.columnComponentModel.parent.columns[currentIndex + 1], nextColumnLabel = nextColumn.get('columnLabel') ? nextColumn.get('columnLabel') : '#' + (nextColumn.get('columnIndex') + 1);\n        this.basicFormatView.setColumnComponentModel(nextColumn, true);\n        this.conditionFormatView.setColumnComponentModel(nextColumn, true);\n        this.$el.find('.dialogTitle.columnLabel').text(nextColumnLabel);\n        this.columnComponentModel = nextColumn;\n        updateColumnNavigationButtons.call(this);\n    },\n    remove: function () {\n        Dialog.prototype.remove.call(this);\n        this.basicFormatView && this.basicFormatView.remove();\n        this.conditionFormatView && this.conditionFormatView.remove();\n    }\n});","export default \"<div class=\\\"jive_dialog {{- additionalCssClasses }}\\\">\\n\\n    <div class=\\\"dialogContent\\\">\\n        <div class=\\\"dialogHeader mover\\\">\\n            <div class=\\\"tabContainer\\\"></div>\\n            <h2>\\n                <span class=\\\"dialogTitle\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.title.formatcolumn\\\"] }}: </span>\\n                <span class=\\\"dialogTitle columnLabel\\\"></span>\\n            </h2>\\n        </div>\\n        <div class=\\\"dialogBody subcontainer\\\" style=\\\"text-align: left; overflow-y: hidden;\\\"></div>\\n    </div>\\n    <div class=\\\"dialogFooter footer\\\">\\n        <button class=\\\"colprev colnav\\\"><span class=\\\"wrap\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.dialog.previous.column\\\"] }}</span></button>\\n        <button class=\\\"colnext colnav\\\"><span class=\\\"wrap\\\">{{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.dialog.next.column\\\"] }}</span></button>\\n    </div>\\n</div>\";","export default \"<div class=\\\"tab dialog\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <span>{{- label }}</span></div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport _ from 'underscore';\n\nexport default function (columns) {\n    return _.some(columns, function (column) {\n        return column.interactive && !column.visible;\n    });\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport _ from 'underscore';\n\nexport default function (columns) {\n    var visibleColumns = _.filter(columns, function (column) {\n        return column.interactive && column.visible;\n    });\n\n    return visibleColumns.length > 1;\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\n\n/**\n * @author: Igor Nesterenko\n * @version: $Id$\n */\n\nimport BaseJiveComponentView from './BaseJiveComponentView';\nimport _ from 'underscore';\nimport i18n from '../../../../i18n/jasperreports_messages.properties';\nimport headerToolbarViewFactory from '../factory/headerToolbarViewFactory';\nimport JiveOverlayView from './overlay/JiveOverlayView';\nimport ColumnResizeMarkerView from './overlay/ColumnResizeMarkerView';\nimport TableFilterDialog from '../jr/dialogs/TableFilterDialog';\nimport TableFormatDialog from '../jr/dialogs/TableFormatDialog';\nimport AlertDialog from 'js-sdk/src/common/component/dialog/AlertDialog';\nimport showColumnOptionPredicate from './predicate/showColumnOptionPredicate';\nimport hideColumnOptionPredicate from './predicate/hideColumnOptionPredicate';\nimport jiveActions from '../enum/jiveActions';\nimport $ from 'jquery';\nimport dragLabelTemplate from './overlay/template/dragLabelTemplate.htm';\nimport 'jquery-ui/ui/widgets/draggable';\nimport 'jquery-ui/ui/position';\n\nimport logger from \"js-sdk/src/common/logging/logger\";\n\nlet log = logger.register(\"TableJiveComponentView\");\n\n//needed for proper rendering of calendar in JIVE\n//require(\"css!jquery-ui/jquery-ui\");\n\nfunction hideVisualElements() {\n    this.overlay && this.overlay.hide();\n    if (this.headerToolbar) {\n        this.headerToolbar.hide();\n        if (this.headerToolbar.cascadingMenus && this.headerToolbar.cascadingMenus.length) {\n            _.each(this.headerToolbar.cascadingMenus, function(menu) {\n                menu.hide();\n            });\n        }\n    }\n    this.resizeMarker && this.resizeMarker.hide();\n\n    this.currentColumnData = null;\n}\n\nfunction onHeaderToolbarSelect(buttonView, buttonModel, e) {\n    var message = buttonModel.get(\"message\");\n    _.isFunction(this[message]) && this[message](buttonModel, buttonView);\n}\n\nfunction onTableClick(e) {\n    e.stopPropagation();\n    var $target = $(e.currentTarget);\n    var columnData = this.getColumnData($target);\n\n    this.currentColumnData = columnData;\n\n    var columns = this.model.columns,\n        columnId = columnData.$header.data(\"coluuid\");\n\n    var isColumnPresent = columns.some(function(column) {\n        return column.get(\"id\") === columnId;\n    });\n\n    if (isColumnPresent) {\n        this.selectColumn(columnId, columnData);\n    }\n}\n\nfunction onMarkerDragStart(evt, ui) {\n    this.resizingColumn = true;\n}\n\nfunction onMarkerDrag(evt, ui) {\n    this.overlay.$el.width(ui.position.left - this.overlay.$el.position().left);\n}\n\nfunction onMarkerDragStop(evt, ui) {\n    var scaleFactor = this.model.get(\"scaleFactor\") || 1,\n        width = (ui.position.left - this.overlay.$el.position().left) / scaleFactor;\n\n    this.currentColumn.resize({\n        width: width < 8 ? 8 : Math.floor(width)\n    });\n\n    this.resizingColumn = false;\n}\n\nfunction computeDropBoundariesForColumnMove() {\n    var column, i, left, tableColumns = [], colData, prop, tableUuid = this.model.get(\"id\");\n\n    this.visibleColumnsMoveData = [];\n\n    var firstColumnHeader = this.reportContainer.find(\"table.jrPage .jrcolHeader[data-tableuuid='\" + tableUuid + \"']\").first();\n    var parentContainer;\n\n    firstColumnHeader.parents(\"table\").each(function(i, v) {\n        parentContainer = $(v);\n        tableColumns = parentContainer.find(\".jrcolHeader[data-tableuuid='\" + tableUuid + \"']\");\n        if (tableColumns.length > 0) {\n            return false; //break each\n        }\n    });\n\n    if (!this.$scrollContainer) {\n        this.$scrollContainer = $(this.stateModel.get(\"container\"));\n    }\n    var scrollAmount = this.$scrollContainer.scrollLeft(),\n        colsData = {};\n\n    for (i = 0; i < tableColumns.length; i++) {\n        var colUuid = $(tableColumns.get(i)).data(\"coluuid\"),\n            cols, firstColHeader, lastCol, realWidth, firstLeft;\n        if (colsData[colUuid]) continue;\n\n        cols = parentContainer.find(\".jrcolHeader[data-coluuid='\" + colUuid + \"']\");\n        firstColHeader = cols.eq(0);\n        if (cols.length > 0) {\n            lastCol = cols.eq(cols.length - 1);\n        } else {\n            lastCol = firstColHeader;\n        }\n\n        realWidth = firstColHeader.outerWidth();\n        firstLeft = firstColHeader.position().left;\n\n        cols.each(function(i, v) {\n            var it = $(v);\n            if (it.position().left < firstLeft) {//should not happen but let's be safe\n                realWidth += firstLeft - it.position().left;\n                firstLeft = it.position().left;\n            }\n            if (it.position().left + it.outerWidth() > firstLeft + realWidth) {\n                realWidth = it.position().left + it.outerWidth() - firstLeft;\n            }\n        });\n\n        colsData[colUuid] = {\n            width: realWidth,\n            height: lastCol.position().top - firstColHeader.position().top + lastCol.height(),\n            colidx: lastCol.data(\"colidx\"),\n            uuid: firstColHeader.data(\"coluuid\"),\n            cellid: firstColHeader.data(\"cellid\"),\n            offsetLeft: firstColHeader.offset().left + scrollAmount\n        };\n    }\n\n    tableColumns = [];\n    for (prop in colsData) {\t// convert object to array\n        if (colsData.hasOwnProperty(prop)) {\n            tableColumns.push(colsData[prop]);\n        }\n    }\n    tableColumns.sort(function(col1, col2) {\n        return col1.colidx - col2.colidx;\n    });\n\n    for (i = 0; i < tableColumns.length; i++) {\n        column = tableColumns[i];\n        left = column.offsetLeft;\n        colData = _.findWhere(this.model.config.allColumnsData, { uuid: column.uuid });\n        if (colData != null) {\n            colData.visible = true;\t// enable column\n        }\n        this.visibleColumnsMoveData.push({\n            left: left,\n            right: left + column.width,\n            width: column.width,\n            index: colData != null ? colData.index : null,\n            uuid: column.uuid\n        });\n    }\n}\n\nfunction onOverlayDragStart(evt, ui) {\n    this.currentColMoveData = _.findWhere(this.visibleColumnsMoveData, { uuid: this.currentColumn.get(\"id\") });\n    this.colToMoveToIndex = this.currentColMoveData.index;\n    this.prevPageX = evt.pageX + this.$scrollContainer.scrollLeft();\n}\n\nfunction withDebounce(fn, context, millis, now) {\n    var timeout = null;\n\n    return {\n        apply: function() {\n            var args = arguments;\n\n            if (now) {\n                fn.apply(context, args);\n            } else {\n                clearTimeout(timeout);\n                timeout = setTimeout(function() {\n                    timeout = null;\n                    fn.apply(context, args);\n                }, millis);\n            }\n        },\n        isRunning: function() {\n            return timeout != null;\n        },\n        cancelAndExecute: function() {\n            if (timeout != null) {\n                clearTimeout(timeout);\n                fn.apply(context, arguments);\n            }\n        }\n    };\n}\n\nfunction onOverlayDrag(evt, ui) {\n    var i, ln = this.visibleColumnsMoveData.length,\n        colMoveData, refColMiddle, isLeftToRight,\n        refColIndex = this.colToMoveToIndex,\n        sc = this.$scrollContainer,\n        scrollAmount = sc.scrollLeft(),\n        pageX = evt.pageX + scrollAmount,\n        hoverCol;\n\n    // determine move direction relative to selected column\n    if (pageX > this.currentColMoveData.right) {\n        isLeftToRight = true;\n    } else if (pageX < this.currentColMoveData.left) {\n        isLeftToRight = false;\n    }\n\n    // find column based on pageX\n    var newColIndex = null;\n    for (i = 0; i < ln; i++) {\n        colMoveData = this.visibleColumnsMoveData[i];\n        if (pageX <= colMoveData.right) {\n            refColIndex = parseInt(colMoveData.index);\n            refColMiddle = colMoveData.left + colMoveData.width / 2;\n\n            if (pageX <= refColMiddle) { // move left, relative to column middle\n                this.resizeMarker.$el.offset({ left: colMoveData.left - scrollAmount });\n                if (isLeftToRight === true) {\n                    if (refColIndex > 0) {\n                        newColIndex = refColIndex - 1;\n                    } else {\n                        newColIndex = 0;\n                    }\n                } else if (isLeftToRight === false) {\n                    newColIndex = refColIndex;\n                }\n            } else { // move right, relative to column middle\n                this.resizeMarker.$el.offset({ left: colMoveData.right - scrollAmount });\n                if (isLeftToRight === true) {\n                    newColIndex = refColIndex;\n                } else if (isLeftToRight === false){\n                    newColIndex = refColIndex + 1;\n                }\n            }\n            break;\n        }\n    }\n\n    // if the drag is beyond last column, set it at as the new column index\n    var lastColIndex = parseInt(this.visibleColumnsMoveData[ln-1].index);\n    if (newColIndex === null && (pageX > colMoveData.right) || newColIndex > lastColIndex) {\n        this.resizeMarker.$el.offset({ left: colMoveData.right - scrollAmount });\n        newColIndex = lastColIndex;\n    }\n    this.colToMoveToIndex = newColIndex;\n\n    // Try to auto scroll the container when trying to move at edges\n    hoverCol = colMoveData;\n    if (pageX > this.prevPageX) {\n        // Is the current column entirely visible?\n        if (sc.offset().left + sc.width() + scrollAmount - 5 < hoverCol.right) {\n            if (!this.isScrollingRight) {\n                this.isScrollingRight = true;\n\n                var that = this;\n                sc.animate({\n                    scrollLeft: \"+=\" + (hoverCol.width + 10)\n                }, {\n                    duration: 1000,\n                    queue: false\n                }).promise().then(function() {\n                    that.isScrollingRight = false;\n                });\n            }\n        }\n    } else {\n        // Is the current column entirely visible?\n        if (hoverCol.left - scrollAmount - 5 <= sc.offset().left) {\n            if (!this.isScrollingLeft) {\n                this.isScrollingLeft = true;\n\n                var that = this;\n                sc.animate({\n                    scrollLeft: \"-=\" + (hoverCol.width - 10)\n                }, {\n                    duration: 1000,\n                    queue: false\n                }).promise().then(function() {\n                    that.isScrollingLeft = false;\n                });\n            }\n        }\n    }\n\n    this.prevPageX = pageX;\n}\n\nfunction onOverlayDragStop(evt, ui) {\n    if(this.colToMoveToIndex != null && this.colToMoveToIndex != this.currentColumn.get(\"columnIndex\")) {\n        this.currentColumn.move({ index: this.colToMoveToIndex });\n    }\n}\n\nfunction onClickOutside(event) {\n    if (\n        !this.headerToolbar.buttons.options[0].$el[0].contains(event.target) &&\n        !this.overlay.$el[0].contains(event.target) &&\n        !this.resizeMarker.$el[0].contains(event.target)) {\n\n        hideVisualElements.call(this);\n        $(document).off(\"click touchend\", this.onClickOutside);\n    }\n}\n\nexport default BaseJiveComponentView.extend({\n\n    init: function(){\n        this.reportContainer = this.getReportContainer(this.getReportId());\n\n        this.setGenericProperties(this.model.config.genericProperties);\n\n        this.initJiveComponents(this.reportContainer);\n        this.initTableEvents();\n    },\n\n    initTableEvents: function(){\n        var tableID = this.model.get(\"id\");\n\n        this.headerToolbar && this.listenTo(this.headerToolbar, \"select\", _.bind(onHeaderToolbarSelect, this));\n\n        this.overlay && this.listenTo(this.overlay, \"overlayClicked\", _.bind(hideVisualElements, this));\n\n        this.tableElement = this.getReportContainer(this.getReportId());\n\n        this.tableElement.on(\"click touchend\", \".jrPage .jrcolHeader.interactiveElement[data-tableuuid=\" + tableID + \"]\",\n            _.bind(onTableClick, this));\n\n        this.tableElement.on(\"click touchend\", \".jrPage .jrcel[data-tableuuid=\" + tableID + \"]\",\n            _.bind(onTableClick, this));\n\n        if (this.resizeMarker) {\n            this.listenTo(this.resizeMarker, \"marker:dragStart\", _.bind(onMarkerDragStart, this));\n            this.listenTo(this.resizeMarker, \"marker:drag\", _.bind(onMarkerDrag, this));\n            this.listenTo(this.resizeMarker, \"marker:dragStop\", _.bind(onMarkerDragStop, this));\n        }\n\n        if (this.stateModel.isFloatingTableHeaderEnabled() && this.model.get(\"hasFloatingHeader\")) {\n            this.$scrollContainer = $(this.stateModel.get(\"container\"));\n\n            // relax the scroll event triggering a bit by throttling it\n            this.$scrollContainer.on(\"scroll\", _.throttle(_.bind(this._scrollHeader, this), 100, { leading: true, trailing: true }));\n\n            this.scrollData = {\n                bMoved: false,\n                reportContainerPositionAtMove: null\n            };\n\n            this.listenTo(this.model, \"change:scaleFactor\", function() {\n                // force rescaling the floating header\n                if (this.$scrollContainer.find(\"table.jr_floating_header\").is(\":visible\")) {\n                    this._scrollHeader(true);\n                }\n            });\n        }\n\n        this.onClickOutside = _.bind(onClickOutside, this);\n\n        // hide visual selection elements when scaling\n        this.listenTo(this.model, \"change:scaleFactor\", function() {\n            hideVisualElements.call(this);\n        });\n    },\n\n    initJiveComponents: function(reportContainer){\n        var self = this;\n\n        this.overlay = new JiveOverlayView({\n            parentElement: reportContainer\n        });\n\n        this.filterDialog = new TableFilterDialog({\n            i18n: i18n,\n            modal: this.stateModel.get(\"modalDialogs\")\n        });\n\n        this.listenTo(this.filterDialog, \"validationError\", function(errMsg) {\n            this.errorDialog.setMessage(errMsg);\n            this.errorDialog.open();\n        });\n\n        this.formatDialog = new TableFormatDialog({\n            i18n: i18n,\n            modal: this.stateModel.get(\"modalDialogs\")\n        });\n\n        this.headerToolbar = headerToolbarViewFactory(this.model.get(\"type\"), {\n            parentElement: reportContainer,\n            children: this.getHoverMenuChildren(),\n            hideColumnOptionTestFn: _.partial(hideColumnOptionPredicate, this.model.config.allColumnsData),\n            showColumnsOptionTestFn: _.partial(showColumnOptionPredicate, this.model.config.allColumnsData)\n        });\n\n        this.headerToolbar.$el.addClass(\"jr_table\");\n\n        this.resizeMarker = new ColumnResizeMarkerView({\n            parentElement: reportContainer\n        });\n\n        // add drag & drop support for table column overlay\n        var debouncedOnOverlayDrag = withDebounce(onOverlayDrag, self, 50);\n        this.overlay.$el.draggable({\n            cursorAt: { top: 40, left: -30 },\n            scroll: false,\n            start: function(evt, ui) {\n                onOverlayDragStart.call(self, evt, ui);\n            },\n            drag: function(evt, ui){\n                debouncedOnOverlayDrag.apply(evt, ui);\n            },\n            stop:function(evt, ui) {\n                if (debouncedOnOverlayDrag.isRunning()) {\n                    debouncedOnOverlayDrag.cancelAndExecute(evt, ui);\n                }\n                onOverlayDragStop.call(self, evt, ui);\n            },\n            helper: function(evt) {\n                return $(_.template(dragLabelTemplate, { i18n: i18n })).show();\n            }\n        });\n\n        computeDropBoundariesForColumnMove.call(this);\n    },\n\n    sort: function(actionModel){\n        var order = actionModel.get(\"order\");\n        if(order){\n            this.currentColumn.sort({ order: order });\n        }\n    },\n\n    filter: function(actionModel, actionView){\n        this.filterDialog.open(this.currentColumn);\n    },\n\n    format: function(actionModel, actionView){\n        this.formatDialog.open(this.currentColumn);\n    },\n\n    hideColumn: function(actionModel){\n        this.currentColumn.hide();\n    },\n\n    showColumn: function(actionModel){\n        var index = actionModel.get(\"index\");\n        this.currentColumn.unhide(_.isArray(index) ? index : [index]);\n    },\n\n    setGenericProperties: function(properties){\n        this.genericProperties = properties;\n    },\n\n    getGenericProperties: function(){\n        return this.genericProperties;\n    },\n\n    getHoverMenuChildren: function(){\n        var defaultIndexArray = [],\n            table = this.model;\n\n        var children =  _.reduce(table.config.allColumnsData, function(memo, column) {\n            if (column && column.interactive) {\n                defaultIndexArray.push(column.index);\n\n                memo.push({\n                    label: column.label,\n                    id: column.uuid,\n                    message: jiveActions.SHOW_COLUMN,\n                    action: \"select\",\n                    index: column.index,\n                    test: function() {\n                        return !_.find(table.columns, function(tableColumn){\n                            return tableColumn && (tableColumn.get(\"id\") === column.uuid);\n                        });\n                    }\n                })\n            }\n\n            return memo;\n        }, []);\n\n        // default option\n        children.unshift({\n            label: i18n[\"net.sf.jasperreports.components.headertoolbar.label.showcolumns.all\"],\n            action: \"select\",\n            message: jiveActions.SHOW_COLUMN,\n            index: defaultIndexArray\n        });\n\n        return children;\n    },\n\n    getColumnData: function($target){\n        var headerID = $target.hasClass(\"jrcolHeader\") ? $target.data(\"cellid\") : $target.attr(\"class\").split(\" \")[1].substring(4),\n            headerCols = this.reportContainer.find(\"table.jrPage .jrcolHeader[data-cellid='\" + headerID + \"']\"),\n            firstColHeader = headerCols.eq(0),\n            widthSoFar, realWidth, realHeight = null,\n            firstLeft = firstColHeader.offset().left,\n            scaleFactor = this.model.get(\"scaleFactor\");\n\n        widthSoFar = realWidth = firstColHeader.outerWidth();\n\n        headerCols.each(function(i, col) {\n            var $col = $(col);\n            if ($col.offset().left < firstLeft) { //should not happen but let's be safe\n                realWidth += firstLeft - $col.offset().left;\n                firstLeft = $col.offset().left;\n            }\n            if ($col.offset().left + $col.outerWidth() > firstLeft + realWidth) {\n                realWidth = $col.offset().left + $col.outerWidth() - firstLeft;\n                widthSoFar += $col.outerWidth()\n            }\n        });\n\n        // escape dots to prevent class selection\n        headerID = (\"\" + headerID).replace(/\\./g,'\\\\.');\n\n        firstColHeader.parents().each(function(i, parent) {\n            var lastCell = $(\".cel_\" + headerID + \":last\", parent),\n                cssHeight;\n            if(lastCell && lastCell.length > 0) {\n                cssHeight = lastCell.css(\"height\");\n                cssHeight = cssHeight.substring(0, cssHeight.indexOf(\"px\"));\n                realHeight = lastCell.offset().top + parseFloat(cssHeight) * scaleFactor - firstColHeader.offset().top;\n\n                return false; // break each\n            }\n        });\n\n        return {\n            $header: firstColHeader,\n            width: widthSoFar * scaleFactor,\n            height: realHeight ? realHeight : firstColHeader.outerHeight() * scaleFactor\n        };\n    },\n\n    setCurrentColumn: function(columnID){\n        this.currentColumn = _.find(this.model.columns,\n            function(column){\n                return column && (column.get(\"id\") === columnID);\n            });\n    },\n\n    selectColumn: function(columnID, columnData){\n        var firstHeader = columnData.$header,\n            overlayPosition = {\n                my: \"left top\",\n                at: \"left top\",\n                of: firstHeader,\n                collision: \"none\"\n            };\n\n        this.setCurrentColumn(columnID);\n\n        this.overlay\n            .show()\n            .css({\n                width: columnData.width,\n                height: columnData.height\n            })\n            .setPosition(overlayPosition) // calling it twice to prevent misalignment\n            .setPosition(overlayPosition);\n\n        if (this.scrollData && this.scrollData.bMoved) {\n            this.headerToolbar.show(true);\n            this._setToolbarPositionWhenFloating(this._getHeaderTable());\n        } else {\n            this.headerToolbar.show(true).setPosition({\n                my: \"left bottom+1\",\n                at: \"left top\",\n                of: firstHeader,\n                collision: \"none\"\n            });\n        }\n\n        // disable sort buttons\n        if (!this.currentColumn.get(\"canSort\")) {\n            this.headerToolbar.buttons.disable(\"sortAsc\");\n            this.headerToolbar.buttons.disable(\"sortDesc\");\n        } else {\n            this.headerToolbar.buttons.enable(\"sortAsc\");\n            this.headerToolbar.buttons.enable(\"sortDesc\");\n        }\n\n        // disable filter button\n        if (!this.currentColumn.get(\"canFilter\")) {\n            this.headerToolbar.buttons.disable(\"filter\");\n        } else {\n            this.headerToolbar.buttons.enable(\"filter\");\n        }\n\n        this.resizeMarker\n            .show()\n            .css({\n                height: columnData.height\n            })\n            .setPosition({\n                my: \"left top\",\n                at: \"right top\",\n                of: this.overlay.$el,\n                collision: \"none\"\n            });\n\n        $(document).on(\"click touchend\", this.onClickOutside);\n    },\n\n    render: function($el){\n        var dfd = new $.Deferred();\n\n        this.setDataReportId($el, this.getReportId());\n\n        this.errorDialog = new AlertDialog({\n            additionalCssClasses: 'jive_dialog'\n        });\n        this.listenTo(this.model, \"serverError\", this.showError);\n\n        if (!this.stateModel.isDefaultJiveUiEnabled()) {\n            dfd.resolve();\n            return dfd;\n        }\n\n        this.init();\n\n        this.overlay && this.overlay.render();\n        this.headerToolbar && this.headerToolbar.render();\n        this.resizeMarker && this.resizeMarker.render();\n\n        log.debug(\"Apply table jive component: \", this.jiveColumn);\n\n        dfd.resolve();\n\n        return dfd;\n    },\n\n    showError: function (result) {\n        this.errorDialog.setMessage(result.devmsg);\n        this.errorDialog.open();\n    },\n\n    detachEvents: function(){\n        this.tableElement && this.tableElement.off();\n    },\n\n    remove: function() {\n        this.overlay && this.overlay.remove();\n        this.filterDialog && this.filterDialog.remove();\n        this.formatDialog && this.formatDialog.remove();\n        this.resizeMarker && this.resizeMarker.remove();\n        this.headerToolbar && this.headerToolbar.remove();\n\n        this.$scrollContainer && this.$scrollContainer.find(\"table.jr_floating_header\").remove();\n\n        $(document).off(\"click touchend\", this.onClickOutside);\n\n        BaseJiveComponentView.prototype.remove.call(this, arguments);\n    },\n\n    _scrollHeader: function(forceScroll) {\n        var scrollContainer = this.$scrollContainer,\n            scrolledTop = false,\n            scrolledLeft = false,\n            scrollData = this.scrollData;\n\n        // Determine scroll direction and value\n        if (scrollData.scrollTop != null) { // check previous scrollTop\n            if (scrollContainer.scrollTop() != scrollData.scrollTop) {\n                scrollData.scrollTop = scrollContainer.scrollTop();\n                scrolledTop = true;\n            }\n        } else if (scrollContainer.scrollTop() !== 0) {\n            scrollData.scrollTop = scrollContainer.scrollTop();\n            scrolledTop = true;\n        }\n\n        if (scrollData.scrollLeft != null) { // check previous scrollLeft\n            if (scrollContainer.scrollLeft() != scrollData.scrollLeft) {\n                scrollData.scrollLeft = scrollContainer.scrollLeft();\n                scrolledLeft = true;\n            }\n        } else if (scrollContainer.scrollLeft() !== 0) {\n            scrollData.scrollLeft = scrollContainer.scrollLeft();\n            scrolledLeft = true;\n        }\n\n        if (!scrolledLeft && !scrolledTop && !forceScroll) {\n            return;\n        }\n\n        var firstHeader = scrollContainer.find(\".jrcolHeader\").first();\n        if (!firstHeader.length) {\n            return;\n        }\n\n        var floatingTable = this._getHeaderTable(firstHeader),\n            tbl = firstHeader.closest(\"table\"),\n            containerTop = scrollContainer.offset().top,\n            headerTop = firstHeader.closest(\"tr\").offset().top,\n            lastTableCel = firstHeader.closest(\"table\").find(\".jrcel\").last(),\n            diff = lastTableCel.length ? lastTableCel.offset().top - floatingTable.outerHeight() - containerTop: -1, // if last cell is not visible, hide the floating header\n            scaleFactor = this.model.get(\"scaleFactor\");\n\n\n        if (!scrollData.bMoved && headerTop-containerTop < 0 && diff > 0) {\n            floatingTable.show();\n\n            if (scaleFactor) {\n                this._applyScaleTransform(floatingTable, scaleFactor);\n                floatingTable.offset({\n                    top: containerTop,\n                    left: tbl.offset().left\n                });\n                // do this twice for proper positioning\n                floatingTable.offset({\n                    top: containerTop,\n                    left: tbl.offset().left\n                });\n            } else {\n                floatingTable.offset({\n                    top: containerTop,\n                    left: tbl.offset().left\n                });\n            }\n\n            this._setToolbarPositionWhenFloating(floatingTable);\n\n            scrollData.bMoved = true;\n            if (!scrollData.reportContainerPositionAtMove) {\n                scrollData.reportContainerPositionAtMove = containerTop;\n            }\n        } else if (scrollData.bMoved && headerTop-containerTop < 0 && diff > 0) {\n            floatingTable.show();\n            if (scaleFactor) {\n                this._applyScaleTransform(floatingTable, scaleFactor);\n                floatingTable.offset({\n                    top: containerTop,\n                    left: tbl.offset().left\n                });\n            } else { //if (scrolledLeft) {\n                floatingTable.offset({\n                    top: containerTop,\n                    left: tbl.offset().left\n                });\n            }\n\n            this._setToolbarPositionWhenFloating(floatingTable);\n        } else if (scrollData.bMoved) {\n            floatingTable.hide();\n            scrollData.bMoved = false;\n\n            this._setToolbarDefaultPosition();\n        }\n    },\n\n    _getHeaderTable: function(firstHeader) {\n        var tbl = this.$scrollContainer.find(\"table.jr_floating_header\");\n\n        if (tbl.length === 0) {\n            tbl = $(\"<table class='jr_floating_header' style='display:none'></table>\").appendTo(this.$scrollContainer);\n\n            tbl.on(\"click touchend\", '.jrcolHeader', function(evt){\n                // keep html links functional\n                if(!$(evt.target).parent().is('._jrHyperLink')) {\n                    var jo = $(this);\n                    var coluuid = jo.data('coluuid');\n                    var reportTableCell = tbl.parent().find('table.jrPage .jrcolHeader[data-coluuid=' + coluuid + ']:first');\n                    reportTableCell.length && reportTableCell.trigger(\"click\");\n                    return false;\n                }\n            });\n\n            var parentTable = firstHeader.closest(\"table\"),\n                lastColHeader = parentTable.find(\".jrcolHeader\").last(),\n                rows = [], clone, cloneWidth = [], row, $row, lastRow,\n                cloneTD, rowTD, rowTDs, i, j, k, ln, tblJrPage, parentTableRows;\n\n            if (firstHeader.length > 0) {\n                row = firstHeader.closest(\"tr\");\n                lastRow = lastColHeader.closest(\"tr\");\n                tblJrPage = firstHeader.closest(\"table\");\n\n                if (row === lastRow) {\n                    rows.push(row);\n                } else {\n                    parentTableRows = parentTable.find('tr');\n                    i = parentTableRows.index(row);\n                    j = parentTableRows.index(lastRow);\n\n                    for (k = i; k <= j; k++) {\n                        rows.push(parentTableRows.get(k));\n                    }\n                }\n\n                $.each(rows, function(idx, row) {\n                    $row = $(row);\n                    rowTDs = $row.find(\"td,th\");\n                    clone = $(\"<tr></tr>\");\n\n                    $row.attr(\"valign\") && clone.attr(\"valign\", $row.attr(\"valign\"));\n\n                    cloneWidth[idx] = 0;\n\n                    // set width and height for each cloned TD\n                    for (i = 0, ln = rowTDs.length; i < ln; i++) {\n                        rowTD = $(rowTDs.get(i));\n                        cloneTD = rowTD.clone();\n                        cloneWidth[idx] = cloneWidth[idx] + rowTD.outerWidth();\n\n                        cloneTD.css(\"width\", rowTD.css(\"width\"));\n                        cloneTD.css(\"height\", rowTD.css(\"height\"));\n                        clone.append(cloneTD);\n                    }\n                    tbl.append(clone);\n                });\n\n                tbl.css({\n                    position: \"relative\",\n                    width: Math.max.apply(Math, cloneWidth),\n                    'empty-cells': tblJrPage.css(\"empty-cells\"),\n                    'border-collapse': tblJrPage.css(\"border-collapse\"),\n                    'background-color': tblJrPage.css(\"background-color\")\n                });\n\n                tbl.attr(\"cellpadding\", tblJrPage.attr(\"cellpadding\"));\n                tbl.attr(\"cellspacing\", tblJrPage.attr(\"cellspacing\"));\n                tbl.attr(\"border\", tblJrPage.attr(\"border\"));\n            }\n        }\n\n        return tbl;\n    },\n\n    _setToolbarPositionWhenFloating: function(floatingTable) {\n        var headerToolbar = this.headerToolbar,\n            floatingHeader, diff;\n\n        if (headerToolbar.$el.is(\":visible\")) {\n\n            floatingHeader = floatingTable.find(\".jrcolHeader[data-cellid='\" + this.currentColumnData.$header.data(\"cellid\") + \"']\").first();\n\n            if (floatingHeader.offset().top > floatingTable.offset().top) {\n                diff = floatingHeader.offset().top - floatingTable.offset().top - headerToolbar.$el.outerHeight();\n\n                if (diff < 0) {\n                    headerToolbar.setPosition({\n                        my: \"left bottom+\" + Math.abs(diff),\n                        at: \"left top\",\n                        of: floatingHeader,\n                        collision: \"none\"\n                    });\n                } else {\n                    headerToolbar.setPosition({\n                        my: \"left bottom\",\n                        at: \"left top\",\n                        of: floatingHeader,\n                        collision: \"none\"\n                    });\n                }\n            } else {\n                headerToolbar.setPosition({\n                    my: \"left top\",\n                    at: \"left top\",\n                    of: floatingHeader,\n                    collision: \"none\"\n                });\n            }\n        }\n    },\n\n    _setToolbarDefaultPosition: function() {\n        if (this.headerToolbar.$el.is(\":visible\")) {\n            this.headerToolbar.setPosition({\n                my: \"left bottom+1\",\n                at: \"left top\",\n                of: this.currentColumnData.$header\n            });\n        }\n    }\n});\n\n","export default \"<span class=\\\"jive_drag_label\\\" style=\\\"display: none;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- i18n[\\\"net.sf.jasperreports.components.headertoolbar.label.draghelper\\\"] }}</span>\";"],"sourceRoot":""}