(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[7256],{67256:(e,t,i)=>{"use strict";i.r(t);var n=i(72157),r=i.n(n),s=i(52499),a=i(11364),o=i(64155),c=i(43852),d=i(46539),p={messages:{},resourceLabelMaxLength:100,resourceIdMaxLength:100,resourceDescriptionMaxLength:250,PROPAGATE_EVENT:"propagateEvent",STEP_DISPLAY_ID:"stepDisplay",FLOW_CONTROLS_ID:"flowControls",initSwipeScroll:function(){var e=r()("#"+p.STEP_DISPLAY_ID)[0];e&&new a.Z(e.parent(),e.parents().eq(2),{})},submitForm:function(e,t,i){if(t){var n=(0,o.nB6)(t);i&&i(),r()("#"+e).attr("method","post").attr("action",n),r()("#"+e)[0].submit()}},registerClickHandlers:function(e,t,i){if(p._bodyClickEventHandlers)(i?Array.prototype.unshift:Array.prototype.push).apply(p._bodyClickEventHandlers,e);else{p._bodyClickEventHandlers=e;var n=t||"body";r()(n).on("click",(function(e){p._bodyClickEventHandlers&&p._bodyClickEventHandlers.each((function(t){var i=t(e);if(i)throw i!==p.PROPAGATE_EVENT&&Event.stop(e),s.$break}))}))}},TreeWrapper:function(e){var t=this;if(this._treeId=e.treeId,this._resourceUriInput=r()("#"+e.resourceUriInput||0)[0],this._uri=this._resourceUriInput&&this._resourceUriInput.getValue()||e.uri||"/",!e.providerId)throw"There is no tree provider set for tree #{id}".interpolate({id:this._treeId});var i=["providerId","rootUri","organizationId","publicFolderUri","urlGetNode","urlGetChildren"].inject({},(function(t,i){return null!==e[i]&&(t[i]=e[i]),t}));return this._tree=new d.Z.createRepositoryTree(this._treeId,i),this._tree.observe("tree:loaded",(function(){t._tree.openAndSelectNode(r()("#"+t._resourceUriInput)[0].getValue())})),this._tree.observe("leaf:selected",(function(e){t._uri=e.memo.node.param.uri,t._resourceUriInput.setValue(t._uri)})),this._tree.observe("node:selected",(function(){t._resourceUriInput.setValue(t._uri="")})),{getTreeId:function(){return t._treeId},getTree:function(){return t._tree},selectFolder:function(e){t._tree.openAndSelectNode(e)},getSelectedFolderUri:function(){return t._uri}}},switchButtonState:function(e,t){c.Z[t?"enable":"disable"].call(c.Z,e)},switchDisableState:function(e,t){(e=r()(e)[0])&&e[t?"disable":"enable"].call(e)},generateResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return e.replace(new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g"),"_");throw"There is no resourceIdNotSupportedSymbols property in init options."},testResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e);throw"There is no resourceIdNotSupportedSymbols property in init options."},labelValidator:function(e){var t=!0,i="";return e.blank()?(i=p.messages.labelIsEmpty,t=!1):e.length>p.resourceLabelMaxLength&&(i=p.messages.labelToLong,t=!1),{isValid:t,errorMessage:i}},getLabelValidationEntry:function(e){return{element:e,validators:[{method:"mandatory",messages:{mandatory:p.messages.labelIsEmpty}},{method:"minMaxLength",messages:{tooLong:p.messages.labelToLong},options:{maxLength:p.resourceLabelMaxLength}}]}},getIdValidationEntry:function(e){return{element:e,validators:[{method:"resourceIdChars",messages:p.messages},{method:"mandatory",messages:{mandatory:p.messages.resourceIdIsEmpty}},{method:"minMaxLength",messages:{tooLong:p.messages.resourceIdToLong},options:{maxLength:p.resourceIdMaxLength}}]}},resourceIdValidator:function(e){var t=!0,i="";return this._isEditMode||(e.blank()?(i=p.messages.resourceIdIsEmpty,t=!1):e.length>p.resourceIdMaxLength?(i=p.messages.resourceIdToLong,t=!1):p.testResourceId(e)&&(i=p.messages.resourceIdInvalidChars,t=!1)),{isValid:t,errorMessage:i}},getDescriptionValidationEntry:function(e){return{element:e,validators:[{method:"minMaxLength",messages:{tooLong:p.messages.descriptionToLong},options:{maxLength:p.resourceDescriptionMaxLength}}]}},descriptionValidator:function(e){var t=!0,i="";return e.length>p.resourceDescriptionMaxLength&&(i=p.messages.descriptionToLong,t=!1),{isValid:t,errorMessage:i}},dataSourceValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=p.messages.dataSourceInvalid,t=!1),{isValid:t,errorMessage:i}},queryValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=p.messages.queryInvalid,t=!1),{isValid:t,errorMessage:i}},getValidationEntries:function(e){return e.collect((function(e){return e.validationEntry?e.validationEntry:{validator:e.validator,element:e}}))}};const l=p;const h={PAGE_ID:"addResource_dataType",DATA_TYPE_ID:"dataType\\.dataTypeType",LABEL_ID:"dataType\\.label",RESOURCE_ID_ID:"dataType\\.name",DESCRIPTION_ID:"dataType\\.description",SAVE_BUTTON_ID:"done",CHANGE_TYPE_BUTTON_ID:"changeCombo",_canGenerateId:!0,initialize:function(e){this._form=r()("#"+this.PAGE_ID).find("form")[0],this._dataType=r()("#"+this.DATA_TYPE_ID)[0],this._label=r()("#"+this.LABEL_ID)[0],this._resourceId=r()("#"+this.RESOURCE_ID_ID)[0],this._description=r()("#"+this.DESCRIPTION_ID)[0],this._saveButton=r()("#"+this.SAVE_BUTTON_ID),this._changeTypeButton=r()("#"+this.CHANGE_TYPE_BUTTON_ID)[0],this._isEditMode=e.isEditMode,this._label.validator=l.labelValidator.bind(this),this._resourceId.validator=l.resourceIdValidator.bind(this),this._description.validator=l.descriptionValidator.bind(this),this._initEvents()},_initEvents:function(){this._dataType.observe("change",function(){this._changeTypeButton.click()}.bindAsEventListener(this)),this._saveButton.on("click",function(e){this._isDataValid()||e.stopPropagation()}.bindAsEventListener(this)),r()(this._form).on("keyup",function(e){var t=e.target;[this._label,this._resourceId,this._description].include(t)&&(o.n4K.validate(l.getValidationEntries([t])),t==this._resourceId&&this._resourceId.getValue()!=l.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),t==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(l.generateResourceId(this._label.getValue())),o.n4K.validate(l.getValidationEntries([this._resourceId]))))}.bind(this))},_isDataValid:function(){var e=[this._label,this._resourceId,this._description];return o.n4K.validate(l.getValidationEntries(e))}};var u=i(97836),m=i.n(u),g=i(15432),k=(i(45837),function(e){this.container=null,void 0!==e.container&&(this.container=void 0===e.container.jquery?r()(e.container):e.container),this.name=e.name,this.id=e.name.replace(".","_"),this.value=e.value,this.onChange=e.onchange||null,this.isReadOnly=void 0!==e.readOnly&&e.readOnly,this.hasDate=void 0!==e.date&&""!==e.date&&"true"===e.date,this.hasTime=void 0!==e.time&&""!==e.time&&"true"===e.time,this.pickerOptions=m().extend({},this.defaultPickerOptions),this.hasDate&&m().extend(this.pickerOptions,g.Z.datepicker),this.hasTime&&m().extend(this.pickerOptions,g.Z.timepicker),void 0!==e.picker&&m().isObject(e.picker)&&m().extend(this.pickerOptions,e.picker),this.field=null});k.prototype.defaultPickerOptions={showOn:"button",buttonText:"",changeYear:!0,changeMonth:!0,showButtonPanel:!0,onChangeMonthYear:null,beforeShow:r().datepicker.movePickerRelativelyToTriggerIcon},k.prototype.create=function(){var e=r()("<input type='text'/>").attr({name:this.name,id:this.id,value:this.value});if(e.on("mousedown",o.rV9),this.onChange&&e.on("change",this.onChange),this.isReadOnly&&e.attr("disabled","disabled"),this.field=e,this.container.append(this.field),!this.isReadOnly){var t=this.hasDate?"date":"";t+=this.hasTime?"time":"",t+="picker",r().fn[t].call(e,this.pickerOptions).next().addClass("button").addClass("picker"),e[0].getValue=function(){return r()(this).val()}}};const _=k;var v=i(71914),f=v.Z.addDataType.localContext.initOptions;if(m().extend(window.localContext,v.Z.addDataType.localContext),m().extend(l.messages,v.Z.addDataType.resource.messages),m().indexOf([3,4,5],v.Z.addDataType.type)>-1){var y=new _(v.Z.addDataType.minValueText);y.container=r()("label.minPicker"),y.create();var T=new _(v.Z.addDataType.maxValueText);T.container=r()("label.maxPicker"),T.create()}h.initialize(f),(0,o.zcy)()&&l.initSwipeScroll(),r()("body").addClass("jr")},45837:(e,t,i)=>{"use strict";var n=i(71914),r=(i(72157),i(97836)),s=i.n(r),a=i(15432),o=i(12197);var c,d,p,l=(c=n.Z.userLocale,d=n.Z.availableLocales,p="en",c&&(s().contains(d,c)?p=c:s().contains(d,c.substring(0,2))&&(p=c.substring(0,2))),p.replace("_","-"));o.Z.setDefaults({locale:l,date:a.Z.datepicker,time:a.Z.timepicker})},24777:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={}},68453:(e,t,i)=>{"use strict";var n=i(72157),r=i.n(n),s=(i(32314),"jr"),a="jr-"+r().datepicker.dpDiv.attr("id");r().datepicker._mainDivId=a,r().datepicker.dpDiv.attr("id",a),r().datepicker.dpDiv.removeClass();r().datepicker.dpDiv.addClass("jr-jDatepickerPopupContainer ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all jr");var o=r().datepicker._newInst;r().datepicker._newInst=function(){var e=o.apply(r().datepicker,arguments);return e.dpDiv.removeClass(s),e.dpDiv.addClass(s),e};var c=r().datepicker._gotoToday;r().datepicker._gotoToday=function(e){c.call(this,e),this._selectDate(e)};i(267),i(17489);i(57042);var d=r().timepicker._newInst;r().timepicker._newInst=function(e,t){t.onChangeMonthYear||(t.onChangeMonthYear=function(e,t,i,n){i.currentYear=i.selectedYear,i.currentMonth=i.selectedMonth,i.currentDay=i.selectedDay,n._updateDateTime(i)});var i=d.call(r().timepicker,e,t),n=i._onTimeChange;return i._onTimeChange=function(){return this.$timeObj[0].setSelectionRange=null,n.apply(this,arguments)},i}},12197:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var n=i(15892),r=i.n(n),s=i(72157),a=i.n(s),o=i(97836),c=i.n(o);var d=i(62287),p=(i(68453),{stepHour:1,stepMinute:1,stepSecond:1,showSecond:!0,changeMonth:!0,changeYear:!0,showButtonPanel:!0,onChangeMonthYear:null,constrainInput:!1}),l={showSecond:!0,constrainInput:!1},h=d.Z.register("DateAndTimePicker");a().timepicker.log=function(e){h.warn(e)};const u=r().View.extend({constructor:function(e){this.pickerOptions=c().clone(e),this.pickerOptions.hasOwnProperty("dateFormat")&&!c().isString(this.pickerOptions.dateFormat)&&delete this.pickerOptions.dateFormat,this.pickerOptions.hasOwnProperty("timeFormat")&&!c().isString(this.pickerOptions.timeFormat)&&delete this.pickerOptions.timeFormat,this.inline=!!this.pickerOptions.el||!1,this.skipMoving=this.pickerOptions.skipMoving||!1,delete this.pickerOptions.el,delete this.pickerOptions.skipMoving,this.pickerType=m(this.pickerOptions),this.pickerOptions=g(this.pickerOptions,this.pickerType),this.pickerOptions=k(this.pickerOptions,this.skipMoving),this.log=e.log?e.log:h,r().View.apply(this,arguments)},initialize:function(){var e=this;this.$el[this.pickerType](this.pickerOptions),this._callPickerAction=function(t){e.$el[e.pickerType](t)}},getDate:function(){return"timepicker"!==this.pickerType?this.$el[this.pickerType].getDate():this.$el[this.pickerType].getTime()},setDate:function(e){if(!e)return this;try{c().isString(e)&&("datetimepicker"===this.pickerType?e=a().datepicker.parseDateTime(this.pickerOptions.dateFormat,this.pickerOptions.timeFormat,e):"datepicker"===this.pickerType&&(e=a().datepicker.parseDate(this.pickerOptions.dateFormat,e))),"datepicker"===this.pickerType?this.$el[this.pickerType]("setDate",e):"timepicker"===this.pickerType?this.$el[this.pickerType]("setTime",e):"datetimepicker"===this.pickerType&&(this.$el[this.pickerType]("setTime",e),this.$el[this.pickerType]("setDate",e))}catch(e){this.log.debug(e)}return this},show:function(){return this._callPickerAction("show"),this},hide:function(){return this._callPickerAction("hide"),this},remove:function(){this._callPickerAction("destroy"),this.inline?(this.$el.empty().off(),this.stopListening()):r().View.prototype.remove.apply(this,arguments)}},{setDefaults:function(e){a().datepicker.regional[e.locale]=e.date,a().datepicker.setDefaults(e.date),a().timepicker.setDefaults(e.time)},Helpers:{fixPopupPositionAndStyling:k,movePickerRelativelyToTriggerIcon:_,stylePopupContainer:v,discoverPickerType:m,provideDefaultPickerOptions:g}});function m(e){var t="datetimepicker";return e.dateFormat&&e.timeFormat||(e.dateFormat?t="datepicker":e.timeFormat&&(t="timepicker")),t}function g(e,t){var i=e;return"datetimepicker"==t||"datepicker"==t?i=c().defaults(e,p):"timepicker"==t&&(i=c().defaults(e,l)),i}function k(e,t){var i=e.beforeShow;return e.beforeShow=function(){v.apply(this,arguments),t||_.apply(this,arguments),i&&i.apply(this,arguments)},e.afterInject=function(){v.apply(this,[this.$input[0],this.inst])},e}function _(e,t){var i=a()(e).offset().left,n=parseFloat(t.dpDiv.css("width").replace("px","")),r=i+e.offsetWidth+n<a()(window).width();t.dpDiv.css({marginLeft:r?e.offsetWidth+"px":0})}function v(e,t){var i,n=t.dpDiv,r=n.parent();r&&r.is("body")&&(i=n.detach(),(n=a()('<div class="jr-jDatepickerPopupContainer jr">\n\n    <js-templateNonce></js-templateNonce>\n</div>\n')).append(i),a()("body").append(n))}},15432:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(24777);n.Z.dateTimeSettings=n.Z.dateTimeSettings||{};const r=n.Z.dateTimeSettings}}]);
//# sourceMappingURL=chunk.7256.js.map